var nl=Object.defineProperty;var il=(s,e,n)=>e in s?nl(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var Zi=(s,e,n)=>(il(s,typeof e!="symbol"?e+"":e,n),n);const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const u of h)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function n(h){const u={};return h.integrity&&(u.integrity=h.integrity),h.referrerpolicy&&(u.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?u.credentials="include":h.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(h){if(h.ep)return;h.ep=!0;const u=n(h);fetch(h.href,u)}};p();var flaticon=(()=>`@font-face{font-family:Flaticon;src:url(/assets/Flaticon.23f49c6d.eot);src:url(/assets/Flaticon.23f49c6d.eot?#iefix) format("embedded-opentype"),url(/assets/Flaticon.5735e7bf.woff) format("woff"),url(/assets/Flaticon.0d57581e.ttf) format("truetype"),url(/assets/Flaticon.cfa33557.svg#Flaticon) format("svg");font-weight:400;font-style:normal}@media screen and (-webkit-min-device-pixel-ratio:0){@font-face{font-family:Flaticon;src:url(/assets/Flaticon.cfa33557.svg#Flaticon) format("svg")}}[class^=flaticon-]:before,[class*=" flaticon-"]:before,[class^=flaticon-]:after,[class*=" flaticon-"]:after{font-family:Flaticon;font-style:normal}.flaticon-align:before{content:"\\f100"}.flaticon-align-1:before{content:"\\f101"}.flaticon-anchor:before{content:"\\f102"}.flaticon-background:before{content:"\\f103"}.flaticon-background-1:before{content:"\\f104"}.flaticon-background-2:before{content:"\\f105"}.flaticon-bounding-box:before{content:"\\f106"}.flaticon-brush:before{content:"\\f107"}.flaticon-bucket:before{content:"\\f108"}.flaticon-bucket-1:before{content:"\\f109"}.flaticon-center-align:before{content:"\\f10a"}.flaticon-center-alignment:before{content:"\\f10b"}.flaticon-center-alignment-1:before{content:"\\f10c"}.flaticon-circle:before{content:"\\f10d"}.flaticon-circular:before{content:"\\f10e"}.flaticon-column:before{content:"\\f10f"}.flaticon-cone:before{content:"\\f110"}.flaticon-constraint:before{content:"\\f111"}.flaticon-coordinates:before{content:"\\f112"}.flaticon-crop:before{content:"\\f113"}.flaticon-crop-1:before{content:"\\f114"}.flaticon-cube:before{content:"\\f115"}.flaticon-cube-1:before{content:"\\f116"}.flaticon-cube-2:before{content:"\\f117"}.flaticon-cube-3:before{content:"\\f118"}.flaticon-cube-4:before{content:"\\f119"}.flaticon-cube-5:before{content:"\\f11a"}.flaticon-cursor:before{content:"\\f11b"}.flaticon-cursor-1:before{content:"\\f11c"}.flaticon-cursor-2:before{content:"\\f11d"}.flaticon-cylinder:before{content:"\\f11e"}.flaticon-distort:before{content:"\\f11f"}.flaticon-distort-1:before{content:"\\f120"}.flaticon-divide:before{content:"\\f121"}.flaticon-edit:before{content:"\\f122"}.flaticon-edit-1:before{content:"\\f123"}.flaticon-edit-2:before{content:"\\f124"}.flaticon-edit-3:before{content:"\\f125"}.flaticon-edit-4:before{content:"\\f126"}.flaticon-edit-corner:before{content:"\\f127"}.flaticon-exclude:before{content:"\\f128"}.flaticon-eyedropper:before{content:"\\f129"}.flaticon-eyedropper-1:before{content:"\\f12a"}.flaticon-flatten:before{content:"\\f12b"}.flaticon-flip:before{content:"\\f12c"}.flaticon-flip-1:before{content:"\\f12d"}.flaticon-foreground:before{content:"\\f12e"}.flaticon-grids:before{content:"\\f12f"}.flaticon-group:before{content:"\\f130"}.flaticon-intersection:before{content:"\\f131"}.flaticon-joint:before{content:"\\f132"}.flaticon-left-alignment:before{content:"\\f133"}.flaticon-left-alignment-1:before{content:"\\f134"}.flaticon-left-alignment-2:before{content:"\\f135"}.flaticon-merge:before{content:"\\f136"}.flaticon-mirror-horizontally:before{content:"\\f137"}.flaticon-mirror-horizontally-1:before{content:"\\f138"}.flaticon-outline:before{content:"\\f139"}.flaticon-oval:before{content:"\\f13a"}.flaticon-oval-1:before{content:"\\f13b"}.flaticon-oval-2:before{content:"\\f13c"}.flaticon-paint-palette:before{content:"\\f13d"}.flaticon-pen:before{content:"\\f13e"}.flaticon-pen-1:before{content:"\\f13f"}.flaticon-perspective:before{content:"\\f140"}.flaticon-polygon:before{content:"\\f141"}.flaticon-right-alignment:before{content:"\\f142"}.flaticon-right-alignment-1:before{content:"\\f143"}.flaticon-right-alignment-2:before{content:"\\f144"}.flaticon-rotate:before{content:"\\f145"}.flaticon-rotate-1:before{content:"\\f146"}.flaticon-row:before{content:"\\f147"}.flaticon-ruler:before{content:"\\f148"}.flaticon-ruler-1:before{content:"\\f149"}.flaticon-scale:before{content:"\\f14a"}.flaticon-select:before{content:"\\f14b"}.flaticon-sent:before{content:"\\f14c"}.flaticon-sent-1:before{content:"\\f14d"}.flaticon-shapes:before{content:"\\f14e"}.flaticon-shapes-1:before{content:"\\f14f"}.flaticon-spiral:before{content:"\\f150"}.flaticon-spray:before{content:"\\f151"}.flaticon-square:before{content:"\\f152"}.flaticon-square-1:before{content:"\\f153"}.flaticon-square-10:before{content:"\\f154"}.flaticon-square-11:before{content:"\\f155"}.flaticon-square-12:before{content:"\\f156"}.flaticon-square-13:before{content:"\\f157"}.flaticon-square-14:before{content:"\\f158"}.flaticon-square-15:before{content:"\\f159"}.flaticon-square-16:before{content:"\\f15a"}.flaticon-square-17:before{content:"\\f15b"}.flaticon-square-18:before{content:"\\f15c"}.flaticon-square-19:before{content:"\\f15d"}.flaticon-square-2:before{content:"\\f15e"}.flaticon-square-20:before{content:"\\f15f"}.flaticon-square-21:before{content:"\\f160"}.flaticon-square-22:before{content:"\\f161"}.flaticon-square-23:before{content:"\\f162"}.flaticon-square-24:before{content:"\\f163"}.flaticon-square-25:before{content:"\\f164"}.flaticon-square-26:before{content:"\\f165"}.flaticon-square-27:before{content:"\\f166"}.flaticon-square-3:before{content:"\\f167"}.flaticon-square-4:before{content:"\\f168"}.flaticon-square-5:before{content:"\\f169"}.flaticon-square-6:before{content:"\\f16a"}.flaticon-square-7:before{content:"\\f16b"}.flaticon-square-8:before{content:"\\f16c"}.flaticon-square-9:before{content:"\\f16d"}.flaticon-tile:before{content:"\\f16e"}.flaticon-tile-1:before{content:"\\f16f"}.flaticon-transform:before{content:"\\f170"}.flaticon-triangle:before{content:"\\f171"}.flaticon-triangle-1:before{content:"\\f172"}.flaticon-trim:before{content:"\\f173"}.flaticon-unconstrained:before{content:"\\f174"}.flaticon-ungroup:before{content:"\\f175"}.flaticon-unite:before{content:"\\f176"}.flaticon-vector:before{content:"\\f177"}.flaticon-vector-1:before{content:"\\f178"}.flaticon-vector-2:before{content:"\\f179"}.flaticon-vector-3:before{content:"\\f17a"}.flaticon-vertical-alignment:before{content:"\\f17b"}.flaticon-vertical-alignment-1:before{content:"\\f17c"}.flaticon-vertical-alignment-2:before{content:"\\f17d"}.flaticon-vertical-alignment-3:before{content:"\\f17e"}.flaticon-vertical-alignment-4:before{content:"\\f17f"}.flaticon-vertical-alignment-5:before{content:"\\f180"}.flaticon-vertical-alignment-6:before{content:"\\f181"}
`)(),fontAwesome=(()=>`/*!
 * Font Awesome Free 5.14.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */.fa,.fas,.far,.fal,.fad,.fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fas.fa-pull-left,.far.fa-pull-left,.fal.fa-pull-left,.fab.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fas.fa-pull-right,.far.fa-pull-right,.fal.fa-pull-right,.fab.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scale(-1,1);transform:scaleX(-1)}.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(1,-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(-1,-1);transform:scale(-1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-flip-both{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;line-height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{left:0;position:absolute;text-align:center;width:100%}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-500px:before{content:"\\f26e"}.fa-accessible-icon:before{content:"\\f368"}.fa-accusoft:before{content:"\\f369"}.fa-acquisitions-incorporated:before{content:"\\f6af"}.fa-ad:before{content:"\\f641"}.fa-address-book:before{content:"\\f2b9"}.fa-address-card:before{content:"\\f2bb"}.fa-adjust:before{content:"\\f042"}.fa-adn:before{content:"\\f170"}.fa-adobe:before{content:"\\f778"}.fa-adversal:before{content:"\\f36a"}.fa-affiliatetheme:before{content:"\\f36b"}.fa-air-freshener:before{content:"\\f5d0"}.fa-airbnb:before{content:"\\f834"}.fa-algolia:before{content:"\\f36c"}.fa-align-center:before{content:"\\f037"}.fa-align-justify:before{content:"\\f039"}.fa-align-left:before{content:"\\f036"}.fa-align-right:before{content:"\\f038"}.fa-alipay:before{content:"\\f642"}.fa-allergies:before{content:"\\f461"}.fa-amazon:before{content:"\\f270"}.fa-amazon-pay:before{content:"\\f42c"}.fa-ambulance:before{content:"\\f0f9"}.fa-american-sign-language-interpreting:before{content:"\\f2a3"}.fa-amilia:before{content:"\\f36d"}.fa-anchor:before{content:"\\f13d"}.fa-android:before{content:"\\f17b"}.fa-angellist:before{content:"\\f209"}.fa-angle-double-down:before{content:"\\f103"}.fa-angle-double-left:before{content:"\\f100"}.fa-angle-double-right:before{content:"\\f101"}.fa-angle-double-up:before{content:"\\f102"}.fa-angle-down:before{content:"\\f107"}.fa-angle-left:before{content:"\\f104"}.fa-angle-right:before{content:"\\f105"}.fa-angle-up:before{content:"\\f106"}.fa-angry:before{content:"\\f556"}.fa-angrycreative:before{content:"\\f36e"}.fa-angular:before{content:"\\f420"}.fa-ankh:before{content:"\\f644"}.fa-app-store:before{content:"\\f36f"}.fa-app-store-ios:before{content:"\\f370"}.fa-apper:before{content:"\\f371"}.fa-apple:before{content:"\\f179"}.fa-apple-alt:before{content:"\\f5d1"}.fa-apple-pay:before{content:"\\f415"}.fa-archive:before{content:"\\f187"}.fa-archway:before{content:"\\f557"}.fa-arrow-alt-circle-down:before{content:"\\f358"}.fa-arrow-alt-circle-left:before{content:"\\f359"}.fa-arrow-alt-circle-right:before{content:"\\f35a"}.fa-arrow-alt-circle-up:before{content:"\\f35b"}.fa-arrow-circle-down:before{content:"\\f0ab"}.fa-arrow-circle-left:before{content:"\\f0a8"}.fa-arrow-circle-right:before{content:"\\f0a9"}.fa-arrow-circle-up:before{content:"\\f0aa"}.fa-arrow-down:before{content:"\\f063"}.fa-arrow-left:before{content:"\\f060"}.fa-arrow-right:before{content:"\\f061"}.fa-arrow-up:before{content:"\\f062"}.fa-arrows-alt:before{content:"\\f0b2"}.fa-arrows-alt-h:before{content:"\\f337"}.fa-arrows-alt-v:before{content:"\\f338"}.fa-artstation:before{content:"\\f77a"}.fa-assistive-listening-systems:before{content:"\\f2a2"}.fa-asterisk:before{content:"\\f069"}.fa-asymmetrik:before{content:"\\f372"}.fa-at:before{content:"\\f1fa"}.fa-atlas:before{content:"\\f558"}.fa-atlassian:before{content:"\\f77b"}.fa-atom:before{content:"\\f5d2"}.fa-audible:before{content:"\\f373"}.fa-audio-description:before{content:"\\f29e"}.fa-autoprefixer:before{content:"\\f41c"}.fa-avianex:before{content:"\\f374"}.fa-aviato:before{content:"\\f421"}.fa-award:before{content:"\\f559"}.fa-aws:before{content:"\\f375"}.fa-baby:before{content:"\\f77c"}.fa-baby-carriage:before{content:"\\f77d"}.fa-backspace:before{content:"\\f55a"}.fa-backward:before{content:"\\f04a"}.fa-bacon:before{content:"\\f7e5"}.fa-bacteria:before{content:"\\e059"}.fa-bacterium:before{content:"\\e05a"}.fa-bahai:before{content:"\\f666"}.fa-balance-scale:before{content:"\\f24e"}.fa-balance-scale-left:before{content:"\\f515"}.fa-balance-scale-right:before{content:"\\f516"}.fa-ban:before{content:"\\f05e"}.fa-band-aid:before{content:"\\f462"}.fa-bandcamp:before{content:"\\f2d5"}.fa-barcode:before{content:"\\f02a"}.fa-bars:before{content:"\\f0c9"}.fa-baseball-ball:before{content:"\\f433"}.fa-basketball-ball:before{content:"\\f434"}.fa-bath:before{content:"\\f2cd"}.fa-battery-empty:before{content:"\\f244"}.fa-battery-full:before{content:"\\f240"}.fa-battery-half:before{content:"\\f242"}.fa-battery-quarter:before{content:"\\f243"}.fa-battery-three-quarters:before{content:"\\f241"}.fa-battle-net:before{content:"\\f835"}.fa-bed:before{content:"\\f236"}.fa-beer:before{content:"\\f0fc"}.fa-behance:before{content:"\\f1b4"}.fa-behance-square:before{content:"\\f1b5"}.fa-bell:before{content:"\\f0f3"}.fa-bell-slash:before{content:"\\f1f6"}.fa-bezier-curve:before{content:"\\f55b"}.fa-bible:before{content:"\\f647"}.fa-bicycle:before{content:"\\f206"}.fa-biking:before{content:"\\f84a"}.fa-bimobject:before{content:"\\f378"}.fa-binoculars:before{content:"\\f1e5"}.fa-biohazard:before{content:"\\f780"}.fa-birthday-cake:before{content:"\\f1fd"}.fa-bitbucket:before{content:"\\f171"}.fa-bitcoin:before{content:"\\f379"}.fa-bity:before{content:"\\f37a"}.fa-black-tie:before{content:"\\f27e"}.fa-blackberry:before{content:"\\f37b"}.fa-blender:before{content:"\\f517"}.fa-blender-phone:before{content:"\\f6b6"}.fa-blind:before{content:"\\f29d"}.fa-blog:before{content:"\\f781"}.fa-blogger:before{content:"\\f37c"}.fa-blogger-b:before{content:"\\f37d"}.fa-bluetooth:before{content:"\\f293"}.fa-bluetooth-b:before{content:"\\f294"}.fa-bold:before{content:"\\f032"}.fa-bolt:before{content:"\\f0e7"}.fa-bomb:before{content:"\\f1e2"}.fa-bone:before{content:"\\f5d7"}.fa-bong:before{content:"\\f55c"}.fa-book:before{content:"\\f02d"}.fa-book-dead:before{content:"\\f6b7"}.fa-book-medical:before{content:"\\f7e6"}.fa-book-open:before{content:"\\f518"}.fa-book-reader:before{content:"\\f5da"}.fa-bookmark:before{content:"\\f02e"}.fa-bootstrap:before{content:"\\f836"}.fa-border-all:before{content:"\\f84c"}.fa-border-none:before{content:"\\f850"}.fa-border-style:before{content:"\\f853"}.fa-bowling-ball:before{content:"\\f436"}.fa-box:before{content:"\\f466"}.fa-box-open:before{content:"\\f49e"}.fa-box-tissue:before{content:"\\e05b"}.fa-boxes:before{content:"\\f468"}.fa-braille:before{content:"\\f2a1"}.fa-brain:before{content:"\\f5dc"}.fa-bread-slice:before{content:"\\f7ec"}.fa-briefcase:before{content:"\\f0b1"}.fa-briefcase-medical:before{content:"\\f469"}.fa-broadcast-tower:before{content:"\\f519"}.fa-broom:before{content:"\\f51a"}.fa-brush:before{content:"\\f55d"}.fa-btc:before{content:"\\f15a"}.fa-buffer:before{content:"\\f837"}.fa-bug:before{content:"\\f188"}.fa-building:before{content:"\\f1ad"}.fa-bullhorn:before{content:"\\f0a1"}.fa-bullseye:before{content:"\\f140"}.fa-burn:before{content:"\\f46a"}.fa-buromobelexperte:before{content:"\\f37f"}.fa-bus:before{content:"\\f207"}.fa-bus-alt:before{content:"\\f55e"}.fa-business-time:before{content:"\\f64a"}.fa-buy-n-large:before{content:"\\f8a6"}.fa-buysellads:before{content:"\\f20d"}.fa-calculator:before{content:"\\f1ec"}.fa-calendar:before{content:"\\f133"}.fa-calendar-alt:before{content:"\\f073"}.fa-calendar-check:before{content:"\\f274"}.fa-calendar-day:before{content:"\\f783"}.fa-calendar-minus:before{content:"\\f272"}.fa-calendar-plus:before{content:"\\f271"}.fa-calendar-times:before{content:"\\f273"}.fa-calendar-week:before{content:"\\f784"}.fa-camera:before{content:"\\f030"}.fa-camera-retro:before{content:"\\f083"}.fa-campground:before{content:"\\f6bb"}.fa-canadian-maple-leaf:before{content:"\\f785"}.fa-candy-cane:before{content:"\\f786"}.fa-cannabis:before{content:"\\f55f"}.fa-capsules:before{content:"\\f46b"}.fa-car:before{content:"\\f1b9"}.fa-car-alt:before{content:"\\f5de"}.fa-car-battery:before{content:"\\f5df"}.fa-car-crash:before{content:"\\f5e1"}.fa-car-side:before{content:"\\f5e4"}.fa-caravan:before{content:"\\f8ff"}.fa-caret-down:before{content:"\\f0d7"}.fa-caret-left:before{content:"\\f0d9"}.fa-caret-right:before{content:"\\f0da"}.fa-caret-square-down:before{content:"\\f150"}.fa-caret-square-left:before{content:"\\f191"}.fa-caret-square-right:before{content:"\\f152"}.fa-caret-square-up:before{content:"\\f151"}.fa-caret-up:before{content:"\\f0d8"}.fa-carrot:before{content:"\\f787"}.fa-cart-arrow-down:before{content:"\\f218"}.fa-cart-plus:before{content:"\\f217"}.fa-cash-register:before{content:"\\f788"}.fa-cat:before{content:"\\f6be"}.fa-cc-amazon-pay:before{content:"\\f42d"}.fa-cc-amex:before{content:"\\f1f3"}.fa-cc-apple-pay:before{content:"\\f416"}.fa-cc-diners-club:before{content:"\\f24c"}.fa-cc-discover:before{content:"\\f1f2"}.fa-cc-jcb:before{content:"\\f24b"}.fa-cc-mastercard:before{content:"\\f1f1"}.fa-cc-paypal:before{content:"\\f1f4"}.fa-cc-stripe:before{content:"\\f1f5"}.fa-cc-visa:before{content:"\\f1f0"}.fa-centercode:before{content:"\\f380"}.fa-centos:before{content:"\\f789"}.fa-certificate:before{content:"\\f0a3"}.fa-chair:before{content:"\\f6c0"}.fa-chalkboard:before{content:"\\f51b"}.fa-chalkboard-teacher:before{content:"\\f51c"}.fa-charging-station:before{content:"\\f5e7"}.fa-chart-area:before{content:"\\f1fe"}.fa-chart-bar:before{content:"\\f080"}.fa-chart-line:before{content:"\\f201"}.fa-chart-pie:before{content:"\\f200"}.fa-check:before{content:"\\f00c"}.fa-check-circle:before{content:"\\f058"}.fa-check-double:before{content:"\\f560"}.fa-check-square:before{content:"\\f14a"}.fa-cheese:before{content:"\\f7ef"}.fa-chess:before{content:"\\f439"}.fa-chess-bishop:before{content:"\\f43a"}.fa-chess-board:before{content:"\\f43c"}.fa-chess-king:before{content:"\\f43f"}.fa-chess-knight:before{content:"\\f441"}.fa-chess-pawn:before{content:"\\f443"}.fa-chess-queen:before{content:"\\f445"}.fa-chess-rook:before{content:"\\f447"}.fa-chevron-circle-down:before{content:"\\f13a"}.fa-chevron-circle-left:before{content:"\\f137"}.fa-chevron-circle-right:before{content:"\\f138"}.fa-chevron-circle-up:before{content:"\\f139"}.fa-chevron-down:before{content:"\\f078"}.fa-chevron-left:before{content:"\\f053"}.fa-chevron-right:before{content:"\\f054"}.fa-chevron-up:before{content:"\\f077"}.fa-child:before{content:"\\f1ae"}.fa-chrome:before{content:"\\f268"}.fa-chromecast:before{content:"\\f838"}.fa-church:before{content:"\\f51d"}.fa-circle:before{content:"\\f111"}.fa-circle-notch:before{content:"\\f1ce"}.fa-city:before{content:"\\f64f"}.fa-clinic-medical:before{content:"\\f7f2"}.fa-clipboard:before{content:"\\f328"}.fa-clipboard-check:before{content:"\\f46c"}.fa-clipboard-list:before{content:"\\f46d"}.fa-clock:before{content:"\\f017"}.fa-clone:before{content:"\\f24d"}.fa-closed-captioning:before{content:"\\f20a"}.fa-cloud:before{content:"\\f0c2"}.fa-cloud-download-alt:before{content:"\\f381"}.fa-cloud-meatball:before{content:"\\f73b"}.fa-cloud-moon:before{content:"\\f6c3"}.fa-cloud-moon-rain:before{content:"\\f73c"}.fa-cloud-rain:before{content:"\\f73d"}.fa-cloud-showers-heavy:before{content:"\\f740"}.fa-cloud-sun:before{content:"\\f6c4"}.fa-cloud-sun-rain:before{content:"\\f743"}.fa-cloud-upload-alt:before{content:"\\f382"}.fa-cloudscale:before{content:"\\f383"}.fa-cloudsmith:before{content:"\\f384"}.fa-cloudversify:before{content:"\\f385"}.fa-cocktail:before{content:"\\f561"}.fa-code:before{content:"\\f121"}.fa-code-branch:before{content:"\\f126"}.fa-codepen:before{content:"\\f1cb"}.fa-codiepie:before{content:"\\f284"}.fa-coffee:before{content:"\\f0f4"}.fa-cog:before{content:"\\f013"}.fa-cogs:before{content:"\\f085"}.fa-coins:before{content:"\\f51e"}.fa-columns:before{content:"\\f0db"}.fa-comment:before{content:"\\f075"}.fa-comment-alt:before{content:"\\f27a"}.fa-comment-dollar:before{content:"\\f651"}.fa-comment-dots:before{content:"\\f4ad"}.fa-comment-medical:before{content:"\\f7f5"}.fa-comment-slash:before{content:"\\f4b3"}.fa-comments:before{content:"\\f086"}.fa-comments-dollar:before{content:"\\f653"}.fa-compact-disc:before{content:"\\f51f"}.fa-compass:before{content:"\\f14e"}.fa-compress:before{content:"\\f066"}.fa-compress-alt:before{content:"\\f422"}.fa-compress-arrows-alt:before{content:"\\f78c"}.fa-concierge-bell:before{content:"\\f562"}.fa-confluence:before{content:"\\f78d"}.fa-connectdevelop:before{content:"\\f20e"}.fa-contao:before{content:"\\f26d"}.fa-cookie:before{content:"\\f563"}.fa-cookie-bite:before{content:"\\f564"}.fa-copy:before{content:"\\f0c5"}.fa-copyright:before{content:"\\f1f9"}.fa-cotton-bureau:before{content:"\\f89e"}.fa-couch:before{content:"\\f4b8"}.fa-cpanel:before{content:"\\f388"}.fa-creative-commons:before{content:"\\f25e"}.fa-creative-commons-by:before{content:"\\f4e7"}.fa-creative-commons-nc:before{content:"\\f4e8"}.fa-creative-commons-nc-eu:before{content:"\\f4e9"}.fa-creative-commons-nc-jp:before{content:"\\f4ea"}.fa-creative-commons-nd:before{content:"\\f4eb"}.fa-creative-commons-pd:before{content:"\\f4ec"}.fa-creative-commons-pd-alt:before{content:"\\f4ed"}.fa-creative-commons-remix:before{content:"\\f4ee"}.fa-creative-commons-sa:before{content:"\\f4ef"}.fa-creative-commons-sampling:before{content:"\\f4f0"}.fa-creative-commons-sampling-plus:before{content:"\\f4f1"}.fa-creative-commons-share:before{content:"\\f4f2"}.fa-creative-commons-zero:before{content:"\\f4f3"}.fa-credit-card:before{content:"\\f09d"}.fa-critical-role:before{content:"\\f6c9"}.fa-crop:before{content:"\\f125"}.fa-crop-alt:before{content:"\\f565"}.fa-cross:before{content:"\\f654"}.fa-crosshairs:before{content:"\\f05b"}.fa-crow:before{content:"\\f520"}.fa-crown:before{content:"\\f521"}.fa-crutch:before{content:"\\f7f7"}.fa-css3:before{content:"\\f13c"}.fa-css3-alt:before{content:"\\f38b"}.fa-cube:before{content:"\\f1b2"}.fa-cubes:before{content:"\\f1b3"}.fa-cut:before{content:"\\f0c4"}.fa-cuttlefish:before{content:"\\f38c"}.fa-d-and-d:before{content:"\\f38d"}.fa-d-and-d-beyond:before{content:"\\f6ca"}.fa-dailymotion:before{content:"\\e052"}.fa-dashcube:before{content:"\\f210"}.fa-database:before{content:"\\f1c0"}.fa-deaf:before{content:"\\f2a4"}.fa-deezer:before{content:"\\e077"}.fa-delicious:before{content:"\\f1a5"}.fa-democrat:before{content:"\\f747"}.fa-deploydog:before{content:"\\f38e"}.fa-deskpro:before{content:"\\f38f"}.fa-desktop:before{content:"\\f108"}.fa-dev:before{content:"\\f6cc"}.fa-deviantart:before{content:"\\f1bd"}.fa-dharmachakra:before{content:"\\f655"}.fa-dhl:before{content:"\\f790"}.fa-diagnoses:before{content:"\\f470"}.fa-diaspora:before{content:"\\f791"}.fa-dice:before{content:"\\f522"}.fa-dice-d20:before{content:"\\f6cf"}.fa-dice-d6:before{content:"\\f6d1"}.fa-dice-five:before{content:"\\f523"}.fa-dice-four:before{content:"\\f524"}.fa-dice-one:before{content:"\\f525"}.fa-dice-six:before{content:"\\f526"}.fa-dice-three:before{content:"\\f527"}.fa-dice-two:before{content:"\\f528"}.fa-digg:before{content:"\\f1a6"}.fa-digital-ocean:before{content:"\\f391"}.fa-digital-tachograph:before{content:"\\f566"}.fa-directions:before{content:"\\f5eb"}.fa-discord:before{content:"\\f392"}.fa-discourse:before{content:"\\f393"}.fa-disease:before{content:"\\f7fa"}.fa-divide:before{content:"\\f529"}.fa-dizzy:before{content:"\\f567"}.fa-dna:before{content:"\\f471"}.fa-dochub:before{content:"\\f394"}.fa-docker:before{content:"\\f395"}.fa-dog:before{content:"\\f6d3"}.fa-dollar-sign:before{content:"\\f155"}.fa-dolly:before{content:"\\f472"}.fa-dolly-flatbed:before{content:"\\f474"}.fa-donate:before{content:"\\f4b9"}.fa-door-closed:before{content:"\\f52a"}.fa-door-open:before{content:"\\f52b"}.fa-dot-circle:before{content:"\\f192"}.fa-dove:before{content:"\\f4ba"}.fa-download:before{content:"\\f019"}.fa-draft2digital:before{content:"\\f396"}.fa-drafting-compass:before{content:"\\f568"}.fa-dragon:before{content:"\\f6d5"}.fa-draw-polygon:before{content:"\\f5ee"}.fa-dribbble:before{content:"\\f17d"}.fa-dribbble-square:before{content:"\\f397"}.fa-dropbox:before{content:"\\f16b"}.fa-drum:before{content:"\\f569"}.fa-drum-steelpan:before{content:"\\f56a"}.fa-drumstick-bite:before{content:"\\f6d7"}.fa-drupal:before{content:"\\f1a9"}.fa-dumbbell:before{content:"\\f44b"}.fa-dumpster:before{content:"\\f793"}.fa-dumpster-fire:before{content:"\\f794"}.fa-dungeon:before{content:"\\f6d9"}.fa-dyalog:before{content:"\\f399"}.fa-earlybirds:before{content:"\\f39a"}.fa-ebay:before{content:"\\f4f4"}.fa-edge:before{content:"\\f282"}.fa-edge-legacy:before{content:"\\e078"}.fa-edit:before{content:"\\f044"}.fa-egg:before{content:"\\f7fb"}.fa-eject:before{content:"\\f052"}.fa-elementor:before{content:"\\f430"}.fa-ellipsis-h:before{content:"\\f141"}.fa-ellipsis-v:before{content:"\\f142"}.fa-ello:before{content:"\\f5f1"}.fa-ember:before{content:"\\f423"}.fa-empire:before{content:"\\f1d1"}.fa-envelope:before{content:"\\f0e0"}.fa-envelope-open:before{content:"\\f2b6"}.fa-envelope-open-text:before{content:"\\f658"}.fa-envelope-square:before{content:"\\f199"}.fa-envira:before{content:"\\f299"}.fa-equals:before{content:"\\f52c"}.fa-eraser:before{content:"\\f12d"}.fa-erlang:before{content:"\\f39d"}.fa-ethereum:before{content:"\\f42e"}.fa-ethernet:before{content:"\\f796"}.fa-etsy:before{content:"\\f2d7"}.fa-euro-sign:before{content:"\\f153"}.fa-evernote:before{content:"\\f839"}.fa-exchange-alt:before{content:"\\f362"}.fa-exclamation:before{content:"\\f12a"}.fa-exclamation-circle:before{content:"\\f06a"}.fa-exclamation-triangle:before{content:"\\f071"}.fa-expand:before{content:"\\f065"}.fa-expand-alt:before{content:"\\f424"}.fa-expand-arrows-alt:before{content:"\\f31e"}.fa-expeditedssl:before{content:"\\f23e"}.fa-external-link-alt:before{content:"\\f35d"}.fa-external-link-square-alt:before{content:"\\f360"}.fa-eye:before{content:"\\f06e"}.fa-eye-dropper:before{content:"\\f1fb"}.fa-eye-slash:before{content:"\\f070"}.fa-facebook:before{content:"\\f09a"}.fa-facebook-f:before{content:"\\f39e"}.fa-facebook-messenger:before{content:"\\f39f"}.fa-facebook-square:before{content:"\\f082"}.fa-fan:before{content:"\\f863"}.fa-fantasy-flight-games:before{content:"\\f6dc"}.fa-fast-backward:before{content:"\\f049"}.fa-fast-forward:before{content:"\\f050"}.fa-faucet:before{content:"\\e005"}.fa-fax:before{content:"\\f1ac"}.fa-feather:before{content:"\\f52d"}.fa-feather-alt:before{content:"\\f56b"}.fa-fedex:before{content:"\\f797"}.fa-fedora:before{content:"\\f798"}.fa-female:before{content:"\\f182"}.fa-fighter-jet:before{content:"\\f0fb"}.fa-figma:before{content:"\\f799"}.fa-file:before{content:"\\f15b"}.fa-file-alt:before{content:"\\f15c"}.fa-file-archive:before{content:"\\f1c6"}.fa-file-audio:before{content:"\\f1c7"}.fa-file-code:before{content:"\\f1c9"}.fa-file-contract:before{content:"\\f56c"}.fa-file-csv:before{content:"\\f6dd"}.fa-file-download:before{content:"\\f56d"}.fa-file-excel:before{content:"\\f1c3"}.fa-file-export:before{content:"\\f56e"}.fa-file-image:before{content:"\\f1c5"}.fa-file-import:before{content:"\\f56f"}.fa-file-invoice:before{content:"\\f570"}.fa-file-invoice-dollar:before{content:"\\f571"}.fa-file-medical:before{content:"\\f477"}.fa-file-medical-alt:before{content:"\\f478"}.fa-file-pdf:before{content:"\\f1c1"}.fa-file-powerpoint:before{content:"\\f1c4"}.fa-file-prescription:before{content:"\\f572"}.fa-file-signature:before{content:"\\f573"}.fa-file-upload:before{content:"\\f574"}.fa-file-video:before{content:"\\f1c8"}.fa-file-word:before{content:"\\f1c2"}.fa-fill:before{content:"\\f575"}.fa-fill-drip:before{content:"\\f576"}.fa-film:before{content:"\\f008"}.fa-filter:before{content:"\\f0b0"}.fa-fingerprint:before{content:"\\f577"}.fa-fire:before{content:"\\f06d"}.fa-fire-alt:before{content:"\\f7e4"}.fa-fire-extinguisher:before{content:"\\f134"}.fa-firefox:before{content:"\\f269"}.fa-firefox-browser:before{content:"\\e007"}.fa-first-aid:before{content:"\\f479"}.fa-first-order:before{content:"\\f2b0"}.fa-first-order-alt:before{content:"\\f50a"}.fa-firstdraft:before{content:"\\f3a1"}.fa-fish:before{content:"\\f578"}.fa-fist-raised:before{content:"\\f6de"}.fa-flag:before{content:"\\f024"}.fa-flag-checkered:before{content:"\\f11e"}.fa-flag-usa:before{content:"\\f74d"}.fa-flask:before{content:"\\f0c3"}.fa-flickr:before{content:"\\f16e"}.fa-flipboard:before{content:"\\f44d"}.fa-flushed:before{content:"\\f579"}.fa-fly:before{content:"\\f417"}.fa-folder:before{content:"\\f07b"}.fa-folder-minus:before{content:"\\f65d"}.fa-folder-open:before{content:"\\f07c"}.fa-folder-plus:before{content:"\\f65e"}.fa-font:before{content:"\\f031"}.fa-font-awesome:before{content:"\\f2b4"}.fa-font-awesome-alt:before{content:"\\f35c"}.fa-font-awesome-flag:before{content:"\\f425"}.fa-font-awesome-logo-full:before{content:"\\f4e6"}.fa-fonticons:before{content:"\\f280"}.fa-fonticons-fi:before{content:"\\f3a2"}.fa-football-ball:before{content:"\\f44e"}.fa-fort-awesome:before{content:"\\f286"}.fa-fort-awesome-alt:before{content:"\\f3a3"}.fa-forumbee:before{content:"\\f211"}.fa-forward:before{content:"\\f04e"}.fa-foursquare:before{content:"\\f180"}.fa-free-code-camp:before{content:"\\f2c5"}.fa-freebsd:before{content:"\\f3a4"}.fa-frog:before{content:"\\f52e"}.fa-frown:before{content:"\\f119"}.fa-frown-open:before{content:"\\f57a"}.fa-fulcrum:before{content:"\\f50b"}.fa-funnel-dollar:before{content:"\\f662"}.fa-futbol:before{content:"\\f1e3"}.fa-galactic-republic:before{content:"\\f50c"}.fa-galactic-senate:before{content:"\\f50d"}.fa-gamepad:before{content:"\\f11b"}.fa-gas-pump:before{content:"\\f52f"}.fa-gavel:before{content:"\\f0e3"}.fa-gem:before{content:"\\f3a5"}.fa-genderless:before{content:"\\f22d"}.fa-get-pocket:before{content:"\\f265"}.fa-gg:before{content:"\\f260"}.fa-gg-circle:before{content:"\\f261"}.fa-ghost:before{content:"\\f6e2"}.fa-gift:before{content:"\\f06b"}.fa-gifts:before{content:"\\f79c"}.fa-git:before{content:"\\f1d3"}.fa-git-alt:before{content:"\\f841"}.fa-git-square:before{content:"\\f1d2"}.fa-github:before{content:"\\f09b"}.fa-github-alt:before{content:"\\f113"}.fa-github-square:before{content:"\\f092"}.fa-gitkraken:before{content:"\\f3a6"}.fa-gitlab:before{content:"\\f296"}.fa-gitter:before{content:"\\f426"}.fa-glass-cheers:before{content:"\\f79f"}.fa-glass-martini:before{content:"\\f000"}.fa-glass-martini-alt:before{content:"\\f57b"}.fa-glass-whiskey:before{content:"\\f7a0"}.fa-glasses:before{content:"\\f530"}.fa-glide:before{content:"\\f2a5"}.fa-glide-g:before{content:"\\f2a6"}.fa-globe:before{content:"\\f0ac"}.fa-globe-africa:before{content:"\\f57c"}.fa-globe-americas:before{content:"\\f57d"}.fa-globe-asia:before{content:"\\f57e"}.fa-globe-europe:before{content:"\\f7a2"}.fa-gofore:before{content:"\\f3a7"}.fa-golf-ball:before{content:"\\f450"}.fa-goodreads:before{content:"\\f3a8"}.fa-goodreads-g:before{content:"\\f3a9"}.fa-google:before{content:"\\f1a0"}.fa-google-drive:before{content:"\\f3aa"}.fa-google-pay:before{content:"\\e079"}.fa-google-play:before{content:"\\f3ab"}.fa-google-plus:before{content:"\\f2b3"}.fa-google-plus-g:before{content:"\\f0d5"}.fa-google-plus-square:before{content:"\\f0d4"}.fa-google-wallet:before{content:"\\f1ee"}.fa-gopuram:before{content:"\\f664"}.fa-graduation-cap:before{content:"\\f19d"}.fa-gratipay:before{content:"\\f184"}.fa-grav:before{content:"\\f2d6"}.fa-greater-than:before{content:"\\f531"}.fa-greater-than-equal:before{content:"\\f532"}.fa-grimace:before{content:"\\f57f"}.fa-grin:before{content:"\\f580"}.fa-grin-alt:before{content:"\\f581"}.fa-grin-beam:before{content:"\\f582"}.fa-grin-beam-sweat:before{content:"\\f583"}.fa-grin-hearts:before{content:"\\f584"}.fa-grin-squint:before{content:"\\f585"}.fa-grin-squint-tears:before{content:"\\f586"}.fa-grin-stars:before{content:"\\f587"}.fa-grin-tears:before{content:"\\f588"}.fa-grin-tongue:before{content:"\\f589"}.fa-grin-tongue-squint:before{content:"\\f58a"}.fa-grin-tongue-wink:before{content:"\\f58b"}.fa-grin-wink:before{content:"\\f58c"}.fa-grip-horizontal:before{content:"\\f58d"}.fa-grip-lines:before{content:"\\f7a4"}.fa-grip-lines-vertical:before{content:"\\f7a5"}.fa-grip-vertical:before{content:"\\f58e"}.fa-gripfire:before{content:"\\f3ac"}.fa-grunt:before{content:"\\f3ad"}.fa-guitar:before{content:"\\f7a6"}.fa-gulp:before{content:"\\f3ae"}.fa-h-square:before{content:"\\f0fd"}.fa-hacker-news:before{content:"\\f1d4"}.fa-hacker-news-square:before{content:"\\f3af"}.fa-hackerrank:before{content:"\\f5f7"}.fa-hamburger:before{content:"\\f805"}.fa-hammer:before{content:"\\f6e3"}.fa-hamsa:before{content:"\\f665"}.fa-hand-holding:before{content:"\\f4bd"}.fa-hand-holding-heart:before{content:"\\f4be"}.fa-hand-holding-medical:before{content:"\\e05c"}.fa-hand-holding-usd:before{content:"\\f4c0"}.fa-hand-holding-water:before{content:"\\f4c1"}.fa-hand-lizard:before{content:"\\f258"}.fa-hand-middle-finger:before{content:"\\f806"}.fa-hand-paper:before{content:"\\f256"}.fa-hand-peace:before{content:"\\f25b"}.fa-hand-point-down:before{content:"\\f0a7"}.fa-hand-point-left:before{content:"\\f0a5"}.fa-hand-point-right:before{content:"\\f0a4"}.fa-hand-point-up:before{content:"\\f0a6"}.fa-hand-pointer:before{content:"\\f25a"}.fa-hand-rock:before{content:"\\f255"}.fa-hand-scissors:before{content:"\\f257"}.fa-hand-sparkles:before{content:"\\e05d"}.fa-hand-spock:before{content:"\\f259"}.fa-hands:before{content:"\\f4c2"}.fa-hands-helping:before{content:"\\f4c4"}.fa-hands-wash:before{content:"\\e05e"}.fa-handshake:before{content:"\\f2b5"}.fa-handshake-alt-slash:before{content:"\\e05f"}.fa-handshake-slash:before{content:"\\e060"}.fa-hanukiah:before{content:"\\f6e6"}.fa-hard-hat:before{content:"\\f807"}.fa-hashtag:before{content:"\\f292"}.fa-hat-cowboy:before{content:"\\f8c0"}.fa-hat-cowboy-side:before{content:"\\f8c1"}.fa-hat-wizard:before{content:"\\f6e8"}.fa-hdd:before{content:"\\f0a0"}.fa-head-side-cough:before{content:"\\e061"}.fa-head-side-cough-slash:before{content:"\\e062"}.fa-head-side-mask:before{content:"\\e063"}.fa-head-side-virus:before{content:"\\e064"}.fa-heading:before{content:"\\f1dc"}.fa-headphones:before{content:"\\f025"}.fa-headphones-alt:before{content:"\\f58f"}.fa-headset:before{content:"\\f590"}.fa-heart:before{content:"\\f004"}.fa-heart-broken:before{content:"\\f7a9"}.fa-heartbeat:before{content:"\\f21e"}.fa-helicopter:before{content:"\\f533"}.fa-highlighter:before{content:"\\f591"}.fa-hiking:before{content:"\\f6ec"}.fa-hippo:before{content:"\\f6ed"}.fa-hips:before{content:"\\f452"}.fa-hire-a-helper:before{content:"\\f3b0"}.fa-history:before{content:"\\f1da"}.fa-hockey-puck:before{content:"\\f453"}.fa-holly-berry:before{content:"\\f7aa"}.fa-home:before{content:"\\f015"}.fa-hooli:before{content:"\\f427"}.fa-hornbill:before{content:"\\f592"}.fa-horse:before{content:"\\f6f0"}.fa-horse-head:before{content:"\\f7ab"}.fa-hospital:before{content:"\\f0f8"}.fa-hospital-alt:before{content:"\\f47d"}.fa-hospital-symbol:before{content:"\\f47e"}.fa-hospital-user:before{content:"\\f80d"}.fa-hot-tub:before{content:"\\f593"}.fa-hotdog:before{content:"\\f80f"}.fa-hotel:before{content:"\\f594"}.fa-hotjar:before{content:"\\f3b1"}.fa-hourglass:before{content:"\\f254"}.fa-hourglass-end:before{content:"\\f253"}.fa-hourglass-half:before{content:"\\f252"}.fa-hourglass-start:before{content:"\\f251"}.fa-house-damage:before{content:"\\f6f1"}.fa-house-user:before{content:"\\e065"}.fa-houzz:before{content:"\\f27c"}.fa-hryvnia:before{content:"\\f6f2"}.fa-html5:before{content:"\\f13b"}.fa-hubspot:before{content:"\\f3b2"}.fa-i-cursor:before{content:"\\f246"}.fa-ice-cream:before{content:"\\f810"}.fa-icicles:before{content:"\\f7ad"}.fa-icons:before{content:"\\f86d"}.fa-id-badge:before{content:"\\f2c1"}.fa-id-card:before{content:"\\f2c2"}.fa-id-card-alt:before{content:"\\f47f"}.fa-ideal:before{content:"\\e013"}.fa-igloo:before{content:"\\f7ae"}.fa-image:before{content:"\\f03e"}.fa-images:before{content:"\\f302"}.fa-imdb:before{content:"\\f2d8"}.fa-inbox:before{content:"\\f01c"}.fa-indent:before{content:"\\f03c"}.fa-industry:before{content:"\\f275"}.fa-infinity:before{content:"\\f534"}.fa-info:before{content:"\\f129"}.fa-info-circle:before{content:"\\f05a"}.fa-instagram:before{content:"\\f16d"}.fa-instagram-square:before{content:"\\e055"}.fa-intercom:before{content:"\\f7af"}.fa-internet-explorer:before{content:"\\f26b"}.fa-invision:before{content:"\\f7b0"}.fa-ioxhost:before{content:"\\f208"}.fa-italic:before{content:"\\f033"}.fa-itch-io:before{content:"\\f83a"}.fa-itunes:before{content:"\\f3b4"}.fa-itunes-note:before{content:"\\f3b5"}.fa-java:before{content:"\\f4e4"}.fa-jedi:before{content:"\\f669"}.fa-jedi-order:before{content:"\\f50e"}.fa-jenkins:before{content:"\\f3b6"}.fa-jira:before{content:"\\f7b1"}.fa-joget:before{content:"\\f3b7"}.fa-joint:before{content:"\\f595"}.fa-joomla:before{content:"\\f1aa"}.fa-journal-whills:before{content:"\\f66a"}.fa-js:before{content:"\\f3b8"}.fa-js-square:before{content:"\\f3b9"}.fa-jsfiddle:before{content:"\\f1cc"}.fa-kaaba:before{content:"\\f66b"}.fa-kaggle:before{content:"\\f5fa"}.fa-key:before{content:"\\f084"}.fa-keybase:before{content:"\\f4f5"}.fa-keyboard:before{content:"\\f11c"}.fa-keycdn:before{content:"\\f3ba"}.fa-khanda:before{content:"\\f66d"}.fa-kickstarter:before{content:"\\f3bb"}.fa-kickstarter-k:before{content:"\\f3bc"}.fa-kiss:before{content:"\\f596"}.fa-kiss-beam:before{content:"\\f597"}.fa-kiss-wink-heart:before{content:"\\f598"}.fa-kiwi-bird:before{content:"\\f535"}.fa-korvue:before{content:"\\f42f"}.fa-landmark:before{content:"\\f66f"}.fa-language:before{content:"\\f1ab"}.fa-laptop:before{content:"\\f109"}.fa-laptop-code:before{content:"\\f5fc"}.fa-laptop-house:before{content:"\\e066"}.fa-laptop-medical:before{content:"\\f812"}.fa-laravel:before{content:"\\f3bd"}.fa-lastfm:before{content:"\\f202"}.fa-lastfm-square:before{content:"\\f203"}.fa-laugh:before{content:"\\f599"}.fa-laugh-beam:before{content:"\\f59a"}.fa-laugh-squint:before{content:"\\f59b"}.fa-laugh-wink:before{content:"\\f59c"}.fa-layer-group:before{content:"\\f5fd"}.fa-leaf:before{content:"\\f06c"}.fa-leanpub:before{content:"\\f212"}.fa-lemon:before{content:"\\f094"}.fa-less:before{content:"\\f41d"}.fa-less-than:before{content:"\\f536"}.fa-less-than-equal:before{content:"\\f537"}.fa-level-down-alt:before{content:"\\f3be"}.fa-level-up-alt:before{content:"\\f3bf"}.fa-life-ring:before{content:"\\f1cd"}.fa-lightbulb:before{content:"\\f0eb"}.fa-line:before{content:"\\f3c0"}.fa-link:before{content:"\\f0c1"}.fa-linkedin:before{content:"\\f08c"}.fa-linkedin-in:before{content:"\\f0e1"}.fa-linode:before{content:"\\f2b8"}.fa-linux:before{content:"\\f17c"}.fa-lira-sign:before{content:"\\f195"}.fa-list:before{content:"\\f03a"}.fa-list-alt:before{content:"\\f022"}.fa-list-ol:before{content:"\\f0cb"}.fa-list-ul:before{content:"\\f0ca"}.fa-location-arrow:before{content:"\\f124"}.fa-lock:before{content:"\\f023"}.fa-lock-open:before{content:"\\f3c1"}.fa-long-arrow-alt-down:before{content:"\\f309"}.fa-long-arrow-alt-left:before{content:"\\f30a"}.fa-long-arrow-alt-right:before{content:"\\f30b"}.fa-long-arrow-alt-up:before{content:"\\f30c"}.fa-low-vision:before{content:"\\f2a8"}.fa-luggage-cart:before{content:"\\f59d"}.fa-lungs:before{content:"\\f604"}.fa-lungs-virus:before{content:"\\e067"}.fa-lyft:before{content:"\\f3c3"}.fa-magento:before{content:"\\f3c4"}.fa-magic:before{content:"\\f0d0"}.fa-magnet:before{content:"\\f076"}.fa-mail-bulk:before{content:"\\f674"}.fa-mailchimp:before{content:"\\f59e"}.fa-male:before{content:"\\f183"}.fa-mandalorian:before{content:"\\f50f"}.fa-map:before{content:"\\f279"}.fa-map-marked:before{content:"\\f59f"}.fa-map-marked-alt:before{content:"\\f5a0"}.fa-map-marker:before{content:"\\f041"}.fa-map-marker-alt:before{content:"\\f3c5"}.fa-map-pin:before{content:"\\f276"}.fa-map-signs:before{content:"\\f277"}.fa-markdown:before{content:"\\f60f"}.fa-marker:before{content:"\\f5a1"}.fa-mars:before{content:"\\f222"}.fa-mars-double:before{content:"\\f227"}.fa-mars-stroke:before{content:"\\f229"}.fa-mars-stroke-h:before{content:"\\f22b"}.fa-mars-stroke-v:before{content:"\\f22a"}.fa-mask:before{content:"\\f6fa"}.fa-mastodon:before{content:"\\f4f6"}.fa-maxcdn:before{content:"\\f136"}.fa-mdb:before{content:"\\f8ca"}.fa-medal:before{content:"\\f5a2"}.fa-medapps:before{content:"\\f3c6"}.fa-medium:before{content:"\\f23a"}.fa-medium-m:before{content:"\\f3c7"}.fa-medkit:before{content:"\\f0fa"}.fa-medrt:before{content:"\\f3c8"}.fa-meetup:before{content:"\\f2e0"}.fa-megaport:before{content:"\\f5a3"}.fa-meh:before{content:"\\f11a"}.fa-meh-blank:before{content:"\\f5a4"}.fa-meh-rolling-eyes:before{content:"\\f5a5"}.fa-memory:before{content:"\\f538"}.fa-mendeley:before{content:"\\f7b3"}.fa-menorah:before{content:"\\f676"}.fa-mercury:before{content:"\\f223"}.fa-meteor:before{content:"\\f753"}.fa-microblog:before{content:"\\e01a"}.fa-microchip:before{content:"\\f2db"}.fa-microphone:before{content:"\\f130"}.fa-microphone-alt:before{content:"\\f3c9"}.fa-microphone-alt-slash:before{content:"\\f539"}.fa-microphone-slash:before{content:"\\f131"}.fa-microscope:before{content:"\\f610"}.fa-microsoft:before{content:"\\f3ca"}.fa-minus:before{content:"\\f068"}.fa-minus-circle:before{content:"\\f056"}.fa-minus-square:before{content:"\\f146"}.fa-mitten:before{content:"\\f7b5"}.fa-mix:before{content:"\\f3cb"}.fa-mixcloud:before{content:"\\f289"}.fa-mixer:before{content:"\\e056"}.fa-mizuni:before{content:"\\f3cc"}.fa-mobile:before{content:"\\f10b"}.fa-mobile-alt:before{content:"\\f3cd"}.fa-modx:before{content:"\\f285"}.fa-monero:before{content:"\\f3d0"}.fa-money-bill:before{content:"\\f0d6"}.fa-money-bill-alt:before{content:"\\f3d1"}.fa-money-bill-wave:before{content:"\\f53a"}.fa-money-bill-wave-alt:before{content:"\\f53b"}.fa-money-check:before{content:"\\f53c"}.fa-money-check-alt:before{content:"\\f53d"}.fa-monument:before{content:"\\f5a6"}.fa-moon:before{content:"\\f186"}.fa-mortar-pestle:before{content:"\\f5a7"}.fa-mosque:before{content:"\\f678"}.fa-motorcycle:before{content:"\\f21c"}.fa-mountain:before{content:"\\f6fc"}.fa-mouse:before{content:"\\f8cc"}.fa-mouse-pointer:before{content:"\\f245"}.fa-mug-hot:before{content:"\\f7b6"}.fa-music:before{content:"\\f001"}.fa-napster:before{content:"\\f3d2"}.fa-neos:before{content:"\\f612"}.fa-network-wired:before{content:"\\f6ff"}.fa-neuter:before{content:"\\f22c"}.fa-newspaper:before{content:"\\f1ea"}.fa-nimblr:before{content:"\\f5a8"}.fa-node:before{content:"\\f419"}.fa-node-js:before{content:"\\f3d3"}.fa-not-equal:before{content:"\\f53e"}.fa-notes-medical:before{content:"\\f481"}.fa-npm:before{content:"\\f3d4"}.fa-ns8:before{content:"\\f3d5"}.fa-nutritionix:before{content:"\\f3d6"}.fa-object-group:before{content:"\\f247"}.fa-object-ungroup:before{content:"\\f248"}.fa-odnoklassniki:before{content:"\\f263"}.fa-odnoklassniki-square:before{content:"\\f264"}.fa-oil-can:before{content:"\\f613"}.fa-old-republic:before{content:"\\f510"}.fa-om:before{content:"\\f679"}.fa-opencart:before{content:"\\f23d"}.fa-openid:before{content:"\\f19b"}.fa-opera:before{content:"\\f26a"}.fa-optin-monster:before{content:"\\f23c"}.fa-orcid:before{content:"\\f8d2"}.fa-osi:before{content:"\\f41a"}.fa-otter:before{content:"\\f700"}.fa-outdent:before{content:"\\f03b"}.fa-page4:before{content:"\\f3d7"}.fa-pagelines:before{content:"\\f18c"}.fa-pager:before{content:"\\f815"}.fa-paint-brush:before{content:"\\f1fc"}.fa-paint-roller:before{content:"\\f5aa"}.fa-palette:before{content:"\\f53f"}.fa-palfed:before{content:"\\f3d8"}.fa-pallet:before{content:"\\f482"}.fa-paper-plane:before{content:"\\f1d8"}.fa-paperclip:before{content:"\\f0c6"}.fa-parachute-box:before{content:"\\f4cd"}.fa-paragraph:before{content:"\\f1dd"}.fa-parking:before{content:"\\f540"}.fa-passport:before{content:"\\f5ab"}.fa-pastafarianism:before{content:"\\f67b"}.fa-paste:before{content:"\\f0ea"}.fa-patreon:before{content:"\\f3d9"}.fa-pause:before{content:"\\f04c"}.fa-pause-circle:before{content:"\\f28b"}.fa-paw:before{content:"\\f1b0"}.fa-paypal:before{content:"\\f1ed"}.fa-peace:before{content:"\\f67c"}.fa-pen:before{content:"\\f304"}.fa-pen-alt:before{content:"\\f305"}.fa-pen-fancy:before{content:"\\f5ac"}.fa-pen-nib:before{content:"\\f5ad"}.fa-pen-square:before{content:"\\f14b"}.fa-pencil-alt:before{content:"\\f303"}.fa-pencil-ruler:before{content:"\\f5ae"}.fa-penny-arcade:before{content:"\\f704"}.fa-people-arrows:before{content:"\\e068"}.fa-people-carry:before{content:"\\f4ce"}.fa-pepper-hot:before{content:"\\f816"}.fa-percent:before{content:"\\f295"}.fa-percentage:before{content:"\\f541"}.fa-periscope:before{content:"\\f3da"}.fa-person-booth:before{content:"\\f756"}.fa-phabricator:before{content:"\\f3db"}.fa-phoenix-framework:before{content:"\\f3dc"}.fa-phoenix-squadron:before{content:"\\f511"}.fa-phone:before{content:"\\f095"}.fa-phone-alt:before{content:"\\f879"}.fa-phone-slash:before{content:"\\f3dd"}.fa-phone-square:before{content:"\\f098"}.fa-phone-square-alt:before{content:"\\f87b"}.fa-phone-volume:before{content:"\\f2a0"}.fa-photo-video:before{content:"\\f87c"}.fa-php:before{content:"\\f457"}.fa-pied-piper:before{content:"\\f2ae"}.fa-pied-piper-alt:before{content:"\\f1a8"}.fa-pied-piper-hat:before{content:"\\f4e5"}.fa-pied-piper-pp:before{content:"\\f1a7"}.fa-pied-piper-square:before{content:"\\e01e"}.fa-piggy-bank:before{content:"\\f4d3"}.fa-pills:before{content:"\\f484"}.fa-pinterest:before{content:"\\f0d2"}.fa-pinterest-p:before{content:"\\f231"}.fa-pinterest-square:before{content:"\\f0d3"}.fa-pizza-slice:before{content:"\\f818"}.fa-place-of-worship:before{content:"\\f67f"}.fa-plane:before{content:"\\f072"}.fa-plane-arrival:before{content:"\\f5af"}.fa-plane-departure:before{content:"\\f5b0"}.fa-plane-slash:before{content:"\\e069"}.fa-play:before{content:"\\f04b"}.fa-play-circle:before{content:"\\f144"}.fa-playstation:before{content:"\\f3df"}.fa-plug:before{content:"\\f1e6"}.fa-plus:before{content:"\\f067"}.fa-plus-circle:before{content:"\\f055"}.fa-plus-square:before{content:"\\f0fe"}.fa-podcast:before{content:"\\f2ce"}.fa-poll:before{content:"\\f681"}.fa-poll-h:before{content:"\\f682"}.fa-poo:before{content:"\\f2fe"}.fa-poo-storm:before{content:"\\f75a"}.fa-poop:before{content:"\\f619"}.fa-portrait:before{content:"\\f3e0"}.fa-pound-sign:before{content:"\\f154"}.fa-power-off:before{content:"\\f011"}.fa-pray:before{content:"\\f683"}.fa-praying-hands:before{content:"\\f684"}.fa-prescription:before{content:"\\f5b1"}.fa-prescription-bottle:before{content:"\\f485"}.fa-prescription-bottle-alt:before{content:"\\f486"}.fa-print:before{content:"\\f02f"}.fa-procedures:before{content:"\\f487"}.fa-product-hunt:before{content:"\\f288"}.fa-project-diagram:before{content:"\\f542"}.fa-pump-medical:before{content:"\\e06a"}.fa-pump-soap:before{content:"\\e06b"}.fa-pushed:before{content:"\\f3e1"}.fa-puzzle-piece:before{content:"\\f12e"}.fa-python:before{content:"\\f3e2"}.fa-qq:before{content:"\\f1d6"}.fa-qrcode:before{content:"\\f029"}.fa-question:before{content:"\\f128"}.fa-question-circle:before{content:"\\f059"}.fa-quidditch:before{content:"\\f458"}.fa-quinscape:before{content:"\\f459"}.fa-quora:before{content:"\\f2c4"}.fa-quote-left:before{content:"\\f10d"}.fa-quote-right:before{content:"\\f10e"}.fa-quran:before{content:"\\f687"}.fa-r-project:before{content:"\\f4f7"}.fa-radiation:before{content:"\\f7b9"}.fa-radiation-alt:before{content:"\\f7ba"}.fa-rainbow:before{content:"\\f75b"}.fa-random:before{content:"\\f074"}.fa-raspberry-pi:before{content:"\\f7bb"}.fa-ravelry:before{content:"\\f2d9"}.fa-react:before{content:"\\f41b"}.fa-reacteurope:before{content:"\\f75d"}.fa-readme:before{content:"\\f4d5"}.fa-rebel:before{content:"\\f1d0"}.fa-receipt:before{content:"\\f543"}.fa-record-vinyl:before{content:"\\f8d9"}.fa-recycle:before{content:"\\f1b8"}.fa-red-river:before{content:"\\f3e3"}.fa-reddit:before{content:"\\f1a1"}.fa-reddit-alien:before{content:"\\f281"}.fa-reddit-square:before{content:"\\f1a2"}.fa-redhat:before{content:"\\f7bc"}.fa-redo:before{content:"\\f01e"}.fa-redo-alt:before{content:"\\f2f9"}.fa-registered:before{content:"\\f25d"}.fa-remove-format:before{content:"\\f87d"}.fa-renren:before{content:"\\f18b"}.fa-reply:before{content:"\\f3e5"}.fa-reply-all:before{content:"\\f122"}.fa-replyd:before{content:"\\f3e6"}.fa-republican:before{content:"\\f75e"}.fa-researchgate:before{content:"\\f4f8"}.fa-resolving:before{content:"\\f3e7"}.fa-restroom:before{content:"\\f7bd"}.fa-retweet:before{content:"\\f079"}.fa-rev:before{content:"\\f5b2"}.fa-ribbon:before{content:"\\f4d6"}.fa-ring:before{content:"\\f70b"}.fa-road:before{content:"\\f018"}.fa-robot:before{content:"\\f544"}.fa-rocket:before{content:"\\f135"}.fa-rocketchat:before{content:"\\f3e8"}.fa-rockrms:before{content:"\\f3e9"}.fa-route:before{content:"\\f4d7"}.fa-rss:before{content:"\\f09e"}.fa-rss-square:before{content:"\\f143"}.fa-ruble-sign:before{content:"\\f158"}.fa-ruler:before{content:"\\f545"}.fa-ruler-combined:before{content:"\\f546"}.fa-ruler-horizontal:before{content:"\\f547"}.fa-ruler-vertical:before{content:"\\f548"}.fa-running:before{content:"\\f70c"}.fa-rupee-sign:before{content:"\\f156"}.fa-rust:before{content:"\\e07a"}.fa-sad-cry:before{content:"\\f5b3"}.fa-sad-tear:before{content:"\\f5b4"}.fa-safari:before{content:"\\f267"}.fa-salesforce:before{content:"\\f83b"}.fa-sass:before{content:"\\f41e"}.fa-satellite:before{content:"\\f7bf"}.fa-satellite-dish:before{content:"\\f7c0"}.fa-save:before{content:"\\f0c7"}.fa-schlix:before{content:"\\f3ea"}.fa-school:before{content:"\\f549"}.fa-screwdriver:before{content:"\\f54a"}.fa-scribd:before{content:"\\f28a"}.fa-scroll:before{content:"\\f70e"}.fa-sd-card:before{content:"\\f7c2"}.fa-search:before{content:"\\f002"}.fa-search-dollar:before{content:"\\f688"}.fa-search-location:before{content:"\\f689"}.fa-search-minus:before{content:"\\f010"}.fa-search-plus:before{content:"\\f00e"}.fa-searchengin:before{content:"\\f3eb"}.fa-seedling:before{content:"\\f4d8"}.fa-sellcast:before{content:"\\f2da"}.fa-sellsy:before{content:"\\f213"}.fa-server:before{content:"\\f233"}.fa-servicestack:before{content:"\\f3ec"}.fa-shapes:before{content:"\\f61f"}.fa-share:before{content:"\\f064"}.fa-share-alt:before{content:"\\f1e0"}.fa-share-alt-square:before{content:"\\f1e1"}.fa-share-square:before{content:"\\f14d"}.fa-shekel-sign:before{content:"\\f20b"}.fa-shield-alt:before{content:"\\f3ed"}.fa-shield-virus:before{content:"\\e06c"}.fa-ship:before{content:"\\f21a"}.fa-shipping-fast:before{content:"\\f48b"}.fa-shirtsinbulk:before{content:"\\f214"}.fa-shoe-prints:before{content:"\\f54b"}.fa-shopify:before{content:"\\e057"}.fa-shopping-bag:before{content:"\\f290"}.fa-shopping-basket:before{content:"\\f291"}.fa-shopping-cart:before{content:"\\f07a"}.fa-shopware:before{content:"\\f5b5"}.fa-shower:before{content:"\\f2cc"}.fa-shuttle-van:before{content:"\\f5b6"}.fa-sign:before{content:"\\f4d9"}.fa-sign-in-alt:before{content:"\\f2f6"}.fa-sign-language:before{content:"\\f2a7"}.fa-sign-out-alt:before{content:"\\f2f5"}.fa-signal:before{content:"\\f012"}.fa-signature:before{content:"\\f5b7"}.fa-sim-card:before{content:"\\f7c4"}.fa-simplybuilt:before{content:"\\f215"}.fa-sink:before{content:"\\e06d"}.fa-sistrix:before{content:"\\f3ee"}.fa-sitemap:before{content:"\\f0e8"}.fa-sith:before{content:"\\f512"}.fa-skating:before{content:"\\f7c5"}.fa-sketch:before{content:"\\f7c6"}.fa-skiing:before{content:"\\f7c9"}.fa-skiing-nordic:before{content:"\\f7ca"}.fa-skull:before{content:"\\f54c"}.fa-skull-crossbones:before{content:"\\f714"}.fa-skyatlas:before{content:"\\f216"}.fa-skype:before{content:"\\f17e"}.fa-slack:before{content:"\\f198"}.fa-slack-hash:before{content:"\\f3ef"}.fa-slash:before{content:"\\f715"}.fa-sleigh:before{content:"\\f7cc"}.fa-sliders-h:before{content:"\\f1de"}.fa-slideshare:before{content:"\\f1e7"}.fa-smile:before{content:"\\f118"}.fa-smile-beam:before{content:"\\f5b8"}.fa-smile-wink:before{content:"\\f4da"}.fa-smog:before{content:"\\f75f"}.fa-smoking:before{content:"\\f48d"}.fa-smoking-ban:before{content:"\\f54d"}.fa-sms:before{content:"\\f7cd"}.fa-snapchat:before{content:"\\f2ab"}.fa-snapchat-ghost:before{content:"\\f2ac"}.fa-snapchat-square:before{content:"\\f2ad"}.fa-snowboarding:before{content:"\\f7ce"}.fa-snowflake:before{content:"\\f2dc"}.fa-snowman:before{content:"\\f7d0"}.fa-snowplow:before{content:"\\f7d2"}.fa-soap:before{content:"\\e06e"}.fa-socks:before{content:"\\f696"}.fa-solar-panel:before{content:"\\f5ba"}.fa-sort:before{content:"\\f0dc"}.fa-sort-alpha-down:before{content:"\\f15d"}.fa-sort-alpha-down-alt:before{content:"\\f881"}.fa-sort-alpha-up:before{content:"\\f15e"}.fa-sort-alpha-up-alt:before{content:"\\f882"}.fa-sort-amount-down:before{content:"\\f160"}.fa-sort-amount-down-alt:before{content:"\\f884"}.fa-sort-amount-up:before{content:"\\f161"}.fa-sort-amount-up-alt:before{content:"\\f885"}.fa-sort-down:before{content:"\\f0dd"}.fa-sort-numeric-down:before{content:"\\f162"}.fa-sort-numeric-down-alt:before{content:"\\f886"}.fa-sort-numeric-up:before{content:"\\f163"}.fa-sort-numeric-up-alt:before{content:"\\f887"}.fa-sort-up:before{content:"\\f0de"}.fa-soundcloud:before{content:"\\f1be"}.fa-sourcetree:before{content:"\\f7d3"}.fa-spa:before{content:"\\f5bb"}.fa-space-shuttle:before{content:"\\f197"}.fa-speakap:before{content:"\\f3f3"}.fa-speaker-deck:before{content:"\\f83c"}.fa-spell-check:before{content:"\\f891"}.fa-spider:before{content:"\\f717"}.fa-spinner:before{content:"\\f110"}.fa-splotch:before{content:"\\f5bc"}.fa-spotify:before{content:"\\f1bc"}.fa-spray-can:before{content:"\\f5bd"}.fa-square:before{content:"\\f0c8"}.fa-square-full:before{content:"\\f45c"}.fa-square-root-alt:before{content:"\\f698"}.fa-squarespace:before{content:"\\f5be"}.fa-stack-exchange:before{content:"\\f18d"}.fa-stack-overflow:before{content:"\\f16c"}.fa-stackpath:before{content:"\\f842"}.fa-stamp:before{content:"\\f5bf"}.fa-star:before{content:"\\f005"}.fa-star-and-crescent:before{content:"\\f699"}.fa-star-half:before{content:"\\f089"}.fa-star-half-alt:before{content:"\\f5c0"}.fa-star-of-david:before{content:"\\f69a"}.fa-star-of-life:before{content:"\\f621"}.fa-staylinked:before{content:"\\f3f5"}.fa-steam:before{content:"\\f1b6"}.fa-steam-square:before{content:"\\f1b7"}.fa-steam-symbol:before{content:"\\f3f6"}.fa-step-backward:before{content:"\\f048"}.fa-step-forward:before{content:"\\f051"}.fa-stethoscope:before{content:"\\f0f1"}.fa-sticker-mule:before{content:"\\f3f7"}.fa-sticky-note:before{content:"\\f249"}.fa-stop:before{content:"\\f04d"}.fa-stop-circle:before{content:"\\f28d"}.fa-stopwatch:before{content:"\\f2f2"}.fa-stopwatch-20:before{content:"\\e06f"}.fa-store:before{content:"\\f54e"}.fa-store-alt:before{content:"\\f54f"}.fa-store-alt-slash:before{content:"\\e070"}.fa-store-slash:before{content:"\\e071"}.fa-strava:before{content:"\\f428"}.fa-stream:before{content:"\\f550"}.fa-street-view:before{content:"\\f21d"}.fa-strikethrough:before{content:"\\f0cc"}.fa-stripe:before{content:"\\f429"}.fa-stripe-s:before{content:"\\f42a"}.fa-stroopwafel:before{content:"\\f551"}.fa-studiovinari:before{content:"\\f3f8"}.fa-stumbleupon:before{content:"\\f1a4"}.fa-stumbleupon-circle:before{content:"\\f1a3"}.fa-subscript:before{content:"\\f12c"}.fa-subway:before{content:"\\f239"}.fa-suitcase:before{content:"\\f0f2"}.fa-suitcase-rolling:before{content:"\\f5c1"}.fa-sun:before{content:"\\f185"}.fa-superpowers:before{content:"\\f2dd"}.fa-superscript:before{content:"\\f12b"}.fa-supple:before{content:"\\f3f9"}.fa-surprise:before{content:"\\f5c2"}.fa-suse:before{content:"\\f7d6"}.fa-swatchbook:before{content:"\\f5c3"}.fa-swift:before{content:"\\f8e1"}.fa-swimmer:before{content:"\\f5c4"}.fa-swimming-pool:before{content:"\\f5c5"}.fa-symfony:before{content:"\\f83d"}.fa-synagogue:before{content:"\\f69b"}.fa-sync:before{content:"\\f021"}.fa-sync-alt:before{content:"\\f2f1"}.fa-syringe:before{content:"\\f48e"}.fa-table:before{content:"\\f0ce"}.fa-table-tennis:before{content:"\\f45d"}.fa-tablet:before{content:"\\f10a"}.fa-tablet-alt:before{content:"\\f3fa"}.fa-tablets:before{content:"\\f490"}.fa-tachometer-alt:before{content:"\\f3fd"}.fa-tag:before{content:"\\f02b"}.fa-tags:before{content:"\\f02c"}.fa-tape:before{content:"\\f4db"}.fa-tasks:before{content:"\\f0ae"}.fa-taxi:before{content:"\\f1ba"}.fa-teamspeak:before{content:"\\f4f9"}.fa-teeth:before{content:"\\f62e"}.fa-teeth-open:before{content:"\\f62f"}.fa-telegram:before{content:"\\f2c6"}.fa-telegram-plane:before{content:"\\f3fe"}.fa-temperature-high:before{content:"\\f769"}.fa-temperature-low:before{content:"\\f76b"}.fa-tencent-weibo:before{content:"\\f1d5"}.fa-tenge:before{content:"\\f7d7"}.fa-terminal:before{content:"\\f120"}.fa-text-height:before{content:"\\f034"}.fa-text-width:before{content:"\\f035"}.fa-th:before{content:"\\f00a"}.fa-th-large:before{content:"\\f009"}.fa-th-list:before{content:"\\f00b"}.fa-the-red-yeti:before{content:"\\f69d"}.fa-theater-masks:before{content:"\\f630"}.fa-themeco:before{content:"\\f5c6"}.fa-themeisle:before{content:"\\f2b2"}.fa-thermometer:before{content:"\\f491"}.fa-thermometer-empty:before{content:"\\f2cb"}.fa-thermometer-full:before{content:"\\f2c7"}.fa-thermometer-half:before{content:"\\f2c9"}.fa-thermometer-quarter:before{content:"\\f2ca"}.fa-thermometer-three-quarters:before{content:"\\f2c8"}.fa-think-peaks:before{content:"\\f731"}.fa-thumbs-down:before{content:"\\f165"}.fa-thumbs-up:before{content:"\\f164"}.fa-thumbtack:before{content:"\\f08d"}.fa-ticket-alt:before{content:"\\f3ff"}.fa-tiktok:before{content:"\\e07b"}.fa-times:before{content:"\\f00d"}.fa-times-circle:before{content:"\\f057"}.fa-tint:before{content:"\\f043"}.fa-tint-slash:before{content:"\\f5c7"}.fa-tired:before{content:"\\f5c8"}.fa-toggle-off:before{content:"\\f204"}.fa-toggle-on:before{content:"\\f205"}.fa-toilet:before{content:"\\f7d8"}.fa-toilet-paper:before{content:"\\f71e"}.fa-toilet-paper-slash:before{content:"\\e072"}.fa-toolbox:before{content:"\\f552"}.fa-tools:before{content:"\\f7d9"}.fa-tooth:before{content:"\\f5c9"}.fa-torah:before{content:"\\f6a0"}.fa-torii-gate:before{content:"\\f6a1"}.fa-tractor:before{content:"\\f722"}.fa-trade-federation:before{content:"\\f513"}.fa-trademark:before{content:"\\f25c"}.fa-traffic-light:before{content:"\\f637"}.fa-trailer:before{content:"\\e041"}.fa-train:before{content:"\\f238"}.fa-tram:before{content:"\\f7da"}.fa-transgender:before{content:"\\f224"}.fa-transgender-alt:before{content:"\\f225"}.fa-trash:before{content:"\\f1f8"}.fa-trash-alt:before{content:"\\f2ed"}.fa-trash-restore:before{content:"\\f829"}.fa-trash-restore-alt:before{content:"\\f82a"}.fa-tree:before{content:"\\f1bb"}.fa-trello:before{content:"\\f181"}.fa-tripadvisor:before{content:"\\f262"}.fa-trophy:before{content:"\\f091"}.fa-truck:before{content:"\\f0d1"}.fa-truck-loading:before{content:"\\f4de"}.fa-truck-monster:before{content:"\\f63b"}.fa-truck-moving:before{content:"\\f4df"}.fa-truck-pickup:before{content:"\\f63c"}.fa-tshirt:before{content:"\\f553"}.fa-tty:before{content:"\\f1e4"}.fa-tumblr:before{content:"\\f173"}.fa-tumblr-square:before{content:"\\f174"}.fa-tv:before{content:"\\f26c"}.fa-twitch:before{content:"\\f1e8"}.fa-twitter:before{content:"\\f099"}.fa-twitter-square:before{content:"\\f081"}.fa-typo3:before{content:"\\f42b"}.fa-uber:before{content:"\\f402"}.fa-ubuntu:before{content:"\\f7df"}.fa-uikit:before{content:"\\f403"}.fa-umbraco:before{content:"\\f8e8"}.fa-umbrella:before{content:"\\f0e9"}.fa-umbrella-beach:before{content:"\\f5ca"}.fa-underline:before{content:"\\f0cd"}.fa-undo:before{content:"\\f0e2"}.fa-undo-alt:before{content:"\\f2ea"}.fa-uniregistry:before{content:"\\f404"}.fa-unity:before{content:"\\e049"}.fa-universal-access:before{content:"\\f29a"}.fa-university:before{content:"\\f19c"}.fa-unlink:before{content:"\\f127"}.fa-unlock:before{content:"\\f09c"}.fa-unlock-alt:before{content:"\\f13e"}.fa-unsplash:before{content:"\\e07c"}.fa-untappd:before{content:"\\f405"}.fa-upload:before{content:"\\f093"}.fa-ups:before{content:"\\f7e0"}.fa-usb:before{content:"\\f287"}.fa-user:before{content:"\\f007"}.fa-user-alt:before{content:"\\f406"}.fa-user-alt-slash:before{content:"\\f4fa"}.fa-user-astronaut:before{content:"\\f4fb"}.fa-user-check:before{content:"\\f4fc"}.fa-user-circle:before{content:"\\f2bd"}.fa-user-clock:before{content:"\\f4fd"}.fa-user-cog:before{content:"\\f4fe"}.fa-user-edit:before{content:"\\f4ff"}.fa-user-friends:before{content:"\\f500"}.fa-user-graduate:before{content:"\\f501"}.fa-user-injured:before{content:"\\f728"}.fa-user-lock:before{content:"\\f502"}.fa-user-md:before{content:"\\f0f0"}.fa-user-minus:before{content:"\\f503"}.fa-user-ninja:before{content:"\\f504"}.fa-user-nurse:before{content:"\\f82f"}.fa-user-plus:before{content:"\\f234"}.fa-user-secret:before{content:"\\f21b"}.fa-user-shield:before{content:"\\f505"}.fa-user-slash:before{content:"\\f506"}.fa-user-tag:before{content:"\\f507"}.fa-user-tie:before{content:"\\f508"}.fa-user-times:before{content:"\\f235"}.fa-users:before{content:"\\f0c0"}.fa-users-cog:before{content:"\\f509"}.fa-users-slash:before{content:"\\e073"}.fa-usps:before{content:"\\f7e1"}.fa-ussunnah:before{content:"\\f407"}.fa-utensil-spoon:before{content:"\\f2e5"}.fa-utensils:before{content:"\\f2e7"}.fa-vaadin:before{content:"\\f408"}.fa-vector-square:before{content:"\\f5cb"}.fa-venus:before{content:"\\f221"}.fa-venus-double:before{content:"\\f226"}.fa-venus-mars:before{content:"\\f228"}.fa-viacoin:before{content:"\\f237"}.fa-viadeo:before{content:"\\f2a9"}.fa-viadeo-square:before{content:"\\f2aa"}.fa-vial:before{content:"\\f492"}.fa-vials:before{content:"\\f493"}.fa-viber:before{content:"\\f409"}.fa-video:before{content:"\\f03d"}.fa-video-slash:before{content:"\\f4e2"}.fa-vihara:before{content:"\\f6a7"}.fa-vimeo:before{content:"\\f40a"}.fa-vimeo-square:before{content:"\\f194"}.fa-vimeo-v:before{content:"\\f27d"}.fa-vine:before{content:"\\f1ca"}.fa-virus:before{content:"\\e074"}.fa-virus-slash:before{content:"\\e075"}.fa-viruses:before{content:"\\e076"}.fa-vk:before{content:"\\f189"}.fa-vnv:before{content:"\\f40b"}.fa-voicemail:before{content:"\\f897"}.fa-volleyball-ball:before{content:"\\f45f"}.fa-volume-down:before{content:"\\f027"}.fa-volume-mute:before{content:"\\f6a9"}.fa-volume-off:before{content:"\\f026"}.fa-volume-up:before{content:"\\f028"}.fa-vote-yea:before{content:"\\f772"}.fa-vr-cardboard:before{content:"\\f729"}.fa-vuejs:before{content:"\\f41f"}.fa-walking:before{content:"\\f554"}.fa-wallet:before{content:"\\f555"}.fa-warehouse:before{content:"\\f494"}.fa-water:before{content:"\\f773"}.fa-wave-square:before{content:"\\f83e"}.fa-waze:before{content:"\\f83f"}.fa-weebly:before{content:"\\f5cc"}.fa-weibo:before{content:"\\f18a"}.fa-weight:before{content:"\\f496"}.fa-weight-hanging:before{content:"\\f5cd"}.fa-weixin:before{content:"\\f1d7"}.fa-whatsapp:before{content:"\\f232"}.fa-whatsapp-square:before{content:"\\f40c"}.fa-wheelchair:before{content:"\\f193"}.fa-whmcs:before{content:"\\f40d"}.fa-wifi:before{content:"\\f1eb"}.fa-wikipedia-w:before{content:"\\f266"}.fa-wind:before{content:"\\f72e"}.fa-window-close:before{content:"\\f410"}.fa-window-maximize:before{content:"\\f2d0"}.fa-window-minimize:before{content:"\\f2d1"}.fa-window-restore:before{content:"\\f2d2"}.fa-windows:before{content:"\\f17a"}.fa-wine-bottle:before{content:"\\f72f"}.fa-wine-glass:before{content:"\\f4e3"}.fa-wine-glass-alt:before{content:"\\f5ce"}.fa-wix:before{content:"\\f5cf"}.fa-wizards-of-the-coast:before{content:"\\f730"}.fa-wolf-pack-battalion:before{content:"\\f514"}.fa-won-sign:before{content:"\\f159"}.fa-wordpress:before{content:"\\f19a"}.fa-wordpress-simple:before{content:"\\f411"}.fa-wpbeginner:before{content:"\\f297"}.fa-wpexplorer:before{content:"\\f2de"}.fa-wpforms:before{content:"\\f298"}.fa-wpressr:before{content:"\\f3e4"}.fa-wrench:before{content:"\\f0ad"}.fa-x-ray:before{content:"\\f497"}.fa-xbox:before{content:"\\f412"}.fa-xing:before{content:"\\f168"}.fa-xing-square:before{content:"\\f169"}.fa-y-combinator:before{content:"\\f23b"}.fa-yahoo:before{content:"\\f19e"}.fa-yammer:before{content:"\\f840"}.fa-yandex:before{content:"\\f413"}.fa-yandex-international:before{content:"\\f414"}.fa-yarn:before{content:"\\f7e3"}.fa-yelp:before{content:"\\f1e9"}.fa-yen-sign:before{content:"\\f157"}.fa-yin-yang:before{content:"\\f6ad"}.fa-yoast:before{content:"\\f2b1"}.fa-youtube:before{content:"\\f167"}.fa-youtube-square:before{content:"\\f431"}.fa-zhihu:before{content:"\\f63f"}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}@font-face{font-family:"Font Awesome 5 Brands";font-style:normal;font-weight:400;font-display:block;src:url(/assets/fa-brands-400.383b2761.eot);src:url(/assets/fa-brands-400.383b2761.eot?#iefix) format("embedded-opentype"),url(/assets/fa-brands-400.1c87d2b2.woff2) format("woff2"),url(/assets/fa-brands-400.e01029f3.woff) format("woff"),url(/assets/fa-brands-400.07504680.ttf) format("truetype"),url(/assets/fa-brands-400.04f0731a.svg#fontawesome) format("svg")}.fab{font-family:"Font Awesome 5 Brands";font-weight:400}@font-face{font-family:"Font Awesome 5 Free";font-style:normal;font-weight:400;font-display:block;src:url(/assets/fa-regular-400.c4f72714.eot);src:url(/assets/fa-regular-400.c4f72714.eot?#iefix) format("embedded-opentype"),url(/assets/fa-regular-400.245818b2.woff2) format("woff2"),url(/assets/fa-regular-400.2fa36d86.woff) format("woff"),url(/assets/fa-regular-400.a5e1580a.ttf) format("truetype"),url(/assets/fa-regular-400.40da3caf.svg#fontawesome) format("svg")}.far{font-family:"Font Awesome 5 Free";font-weight:400}@font-face{font-family:"Font Awesome 5 Free";font-style:normal;font-weight:900;font-display:block;src:url(/assets/fa-solid-900.5c44f9d8.eot);src:url(/assets/fa-solid-900.5c44f9d8.eot?#iefix) format("embedded-opentype"),url(/assets/fa-solid-900.cfe3b738.woff2) format("woff2"),url(/assets/fa-solid-900.c704d9e6.woff) format("woff"),url(/assets/fa-solid-900.af849952.ttf) format("truetype"),url(/assets/fa-solid-900.f6352459.svg#fontawesome) format("svg")}.fa,.fas{font-family:"Font Awesome 5 Free";font-weight:900}
`)(),tachyonsExtended=(()=>`/*! TACHYONS v4.7.3 | http://tachyons.io *//*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}html,body,div,article,section,main,footer,header,form,fieldset,legend,pre,code,a,h1,h2,h3,h4,h5,h6,p,ul,ol,li,dl,dt,dd,textarea,table,td,th,tr,input[type=email],input[type=number],input[type=password],input[type=tel],input[type=text],input[type=url],.border-box{box-sizing:border-box}.aspect-ratio{height:0;position:relative}.aspect-ratio--16x9{padding-bottom:56.25%}.aspect-ratio--9x16{padding-bottom:177.77%}.aspect-ratio--4x3{padding-bottom:75%}.aspect-ratio--3x4{padding-bottom:133.33%}.aspect-ratio--6x4{padding-bottom:66.6%}.aspect-ratio--4x6{padding-bottom:150%}.aspect-ratio--8x5{padding-bottom:62.5%}.aspect-ratio--5x8{padding-bottom:160%}.aspect-ratio--7x5{padding-bottom:71.42%}.aspect-ratio--5x7{padding-bottom:140%}.aspect-ratio--1x1{padding-bottom:100%}.aspect-ratio--object{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:100}img{max-width:100%}.cover{background-size:cover!important}.contain{background-size:contain!important}.bg-center{background-repeat:no-repeat;background-position:center center}.bg-top{background-repeat:no-repeat;background-position:top center}.bg-right{background-repeat:no-repeat;background-position:center right}.bg-bottom{background-repeat:no-repeat;background-position:bottom center}.bg-left{background-repeat:no-repeat;background-position:center left}.outline{outline:1px solid}.outline-transparent{outline:1px solid transparent}.outline-0{outline:0}.ba{border-style:solid;border-width:1px}.bt{border-top-style:solid;border-top-width:1px}.br{border-right-style:solid;border-right-width:1px}.bb{border-bottom-style:solid;border-bottom-width:1px}.bl{border-left-style:solid;border-left-width:1px}.bn{border-style:none;border-width:0}.b--black{border-color:#000}.b--near-black{border-color:#111}.b--dark-gray{border-color:#333}.b--mid-gray{border-color:#555}.b--gray{border-color:#777}.b--silver{border-color:#999}.b--light-silver{border-color:#aaa}.b--moon-gray{border-color:#ccc}.b--light-gray{border-color:#eee}.b--near-white{border-color:#f4f4f4}.b--white{border-color:#fff}.b--white-90{border-color:#ffffffe6}.b--white-80{border-color:#fffc}.b--white-70{border-color:#ffffffb3}.b--white-60{border-color:#fff9}.b--white-50{border-color:#ffffff80}.b--white-40{border-color:#fff6}.b--white-30{border-color:#ffffff4d}.b--white-20{border-color:#fff3}.b--white-10{border-color:#ffffff1a}.b--white-05{border-color:#ffffff0d}.b--white-025{border-color:#ffffff06}.b--white-0125{border-color:#ffffff03}.b--black-90{border-color:#000000e6}.b--black-80{border-color:#000c}.b--black-70{border-color:#000000b3}.b--black-60{border-color:#0009}.b--black-50{border-color:#00000080}.b--black-40{border-color:#0006}.b--black-30{border-color:#0000004d}.b--black-20{border-color:#0003}.b--black-10{border-color:#0000001a}.b--black-05{border-color:#0000000d}.b--black-025{border-color:#00000006}.b--black-0125{border-color:#00000003}.b--dark-red{border-color:#e7040f}.b--red{border-color:#ff4136}.b--light-red{border-color:#ff725c}.b--orange{border-color:#ff6300}.b--gold{border-color:#ffb700}.b--yellow{border-color:gold}.b--light-yellow{border-color:#fbf1a9}.b--purple{border-color:#5e2ca5}.b--light-purple{border-color:#a463f2}.b--dark-pink{border-color:#d5008f}.b--hot-pink{border-color:#ff41b4}.b--pink{border-color:#ff80cc}.b--light-pink{border-color:#ffa3d7}.b--dark-green{border-color:#137752}.b--green{border-color:#19a974}.b--light-green{border-color:#9eebcf}.b--navy{border-color:#001b44}.b--dark-blue{border-color:#00449e}.b--blue{border-color:#357edd}.b--light-blue{border-color:#96ccff}.b--lightest-blue{border-color:#cdecff}.b--washed-blue{border-color:#f6fffe}.b--washed-green{border-color:#e8fdf5}.b--washed-yellow{border-color:#fffceb}.b--washed-red{border-color:#ffdfdf}.b--transparent{border-color:transparent}.b--inherit{border-color:inherit}.br0{border-radius:0}.br1{border-radius:.125rem}.br2{border-radius:.25rem}.br3{border-radius:.5rem}.br4{border-radius:1rem}.br-100{border-radius:100%}.br-pill{border-radius:9999px}.br--bottom{border-top-left-radius:0;border-top-right-radius:0}.br--top{border-bottom-left-radius:0;border-bottom-right-radius:0}.br--right{border-top-left-radius:0;border-bottom-left-radius:0}.br--left{border-top-right-radius:0;border-bottom-right-radius:0}.b--dotted{border-style:dotted}.b--dashed{border-style:dashed}.b--solid{border-style:solid}.b--none{border-style:none}.bw0{border-width:0}.bw1{border-width:.125rem}.bw2{border-width:.25rem}.bw3{border-width:.5rem}.bw4{border-width:1rem}.bw5{border-width:2rem}.bt-0{border-top-width:0}.br-0{border-right-width:0}.bb-0{border-bottom-width:0}.bl-0{border-left-width:0}.shadow-1{box-shadow:0 0 4px 2px #0003}.shadow-2{box-shadow:0 0 8px 2px #0003}.shadow-3{box-shadow:2px 2px 4px 2px #0003}.shadow-4{box-shadow:2px 2px 8px #0003}.shadow-5{box-shadow:4px 4px 8px #0003}.pre{overflow-x:auto;overflow-y:hidden;overflow:scroll}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.top-1{top:1rem}.right-1{right:1rem}.bottom-1{bottom:1rem}.left-1{left:1rem}.top-2{top:2rem}.right-2{right:2rem}.bottom-2{bottom:2rem}.left-2{left:2rem}.top--1{top:-1rem}.right--1{right:-1rem}.bottom--1{bottom:-1rem}.left--1{left:-1rem}.top--2{top:-2rem}.right--2{right:-2rem}.bottom--2{bottom:-2rem}.left--2{left:-2rem}.absolute--fill{top:0;right:0;bottom:0;left:0}.cf:before,.cf:after{content:" ";display:table}.cf:after{clear:both}.cf{*zoom: 1}.cl{clear:left}.cr{clear:right}.cb{clear:both}.cn{clear:none}.dn{display:none}.di{display:inline}.db{display:block}.dib{display:inline-block}.dit{display:inline-table}.dt{display:table}.dtc{display:table-cell}.dt-row{display:table-row}.dt-row-group{display:table-row-group}.dt-column{display:table-column}.dt-column-group{display:table-column-group}.dt--fixed{table-layout:fixed;width:100%}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.flex-auto{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;min-height:0}.flex-none{-webkit-box-flex:0;-ms-flex:none;flex:none}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-row{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.flex-wrap{-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-column-reverse{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.flex-row-reverse{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.flex-wrap-reverse{-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}.items-start{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.items-baseline{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.items-stretch{-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.self-start{-ms-flex-item-align:start;align-self:flex-start}.self-end{-ms-flex-item-align:end;align-self:flex-end}.self-center{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.self-baseline{-ms-flex-item-align:baseline;align-self:baseline}.self-stretch{-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch}.justify-start{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.justify-end{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.justify-around{-ms-flex-pack:distribute;justify-content:space-around}.content-start{-ms-flex-line-pack:start;align-content:flex-start}.content-end{-ms-flex-line-pack:end;align-content:flex-end}.content-center{-ms-flex-line-pack:center;align-content:center}.content-between{-ms-flex-line-pack:justify;align-content:space-between}.content-around{-ms-flex-line-pack:distribute;align-content:space-around}.content-stretch{-ms-flex-line-pack:stretch;align-content:stretch}.order-0{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0}.order-1{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.order-2{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2}.order-3{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3}.order-4{-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4}.order-5{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5}.order-6{-webkit-box-ordinal-group:7;-ms-flex-order:6;order:6}.order-7{-webkit-box-ordinal-group:8;-ms-flex-order:7;order:7}.order-8{-webkit-box-ordinal-group:9;-ms-flex-order:8;order:8}.order-last{-webkit-box-ordinal-group:100000;-ms-flex-order:99999;order:99999}.fl{float:left;_display:inline}.fr{float:right;_display:inline}.fn{float:none}.sans-serif{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.serif{font-family:georgia,times,serif}.system-sans-serif{font-family:sans-serif}.system-serif{font-family:serif}code,.code{font-family:Consolas,monaco,monospace}.courier{font-family:Courier Next,courier,monospace}.helvetica{font-family:helvetica neue,helvetica,sans-serif}.avenir{font-family:avenir next,avenir,sans-serif}.athelas{font-family:athelas,georgia,serif}.georgia{font-family:georgia,serif}.times{font-family:times,serif}.bodoni{font-family:Bodoni MT,serif}.calisto{font-family:Calisto MT,serif}.garamond{font-family:garamond,serif}.baskerville{font-family:baskerville,serif}.i{font-style:italic}.fs-normal{font-style:normal}.normal{font-weight:400}.b{font-weight:700}.fw1{font-weight:100}.fw2{font-weight:200}.fw3{font-weight:300}.fw4{font-weight:400}.fw5{font-weight:500}.fw6{font-weight:600}.fw7{font-weight:700}.fw8{font-weight:800}.fw9{font-weight:900}.input-reset{-webkit-appearance:none;-moz-appearance:none}.button-reset::-moz-focus-inner,.input-reset::-moz-focus-inner{border:0;padding:0}.h1{height:1rem}.h2{height:2rem}.h3{height:4rem}.h4{height:8rem}.h5{height:16rem}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.min-h-100{min-height:100%}.vh-25{height:25vh}.vh-50{height:50vh}.vh-75{height:75vh}.vh-100{height:100vh}.min-vh-100{min-height:100vh}.h-auto{height:auto}.h-inherit{height:inherit}.tracked{letter-spacing:.1em}.tracked-tight{letter-spacing:-.05em}.tracked-mega{letter-spacing:.25em}.lh-solid{line-height:1}.lh-title{line-height:1.25}.lh-copy{line-height:1.5}.link{text-decoration:none;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:link,.link:visited,.link:hover,.link:active{-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:focus{-webkit-transition:color .15s ease-in;transition:color .15s ease-in;outline:1px dotted currentColor}.list{list-style-type:none}.mw-100{max-width:100%}.mw1{max-width:1rem}.mw2{max-width:2rem}.mw3{max-width:4rem}.mw4{max-width:8rem}.mw5{max-width:16rem}.mw6{max-width:32rem}.mw7{max-width:48rem}.mw8{max-width:64rem}.mw9{max-width:96rem}.mw-none{max-width:none}.w1{width:1rem}.w2{width:2rem}.w3{width:4rem}.w4{width:8rem}.w5{width:16rem}.w6{width:24rem}.w-10{width:10%}.w-20{width:20%}.w-25{width:25%}.w-30{width:30%}.w-33{width:33%}.w-34{width:34%}.w-40{width:40%}.w-50{width:50%}.w-60{width:60%}.w-70{width:70%}.w-75{width:75%}.w-80{width:80%}.w-90{width:90%}.w-100{width:100%}.w-third{width:calc(100% / 3)}.w-two-thirds{width:calc(100% / 1.5)}.w-auto{width:auto}.overflow-visible{overflow:visible}.overflow-hidden{overflow:hidden}.overflow-scroll{overflow:scroll}.overflow-auto{overflow:auto}.overflow-x-visible{overflow-x:visible}.overflow-x-hidden{overflow-x:hidden}.overflow-x-scroll{overflow-x:scroll}.overflow-x-auto{overflow-x:auto}.overflow-y-visible{overflow-y:visible}.overflow-y-hidden{overflow-y:hidden}.overflow-y-scroll{overflow-y:scroll}.overflow-y-auto{overflow-y:auto}.static{position:static}.relative{position:relative}.absolute{position:absolute}.fixed{position:fixed}.o-100{opacity:1}.o-90{opacity:.9}.o-80{opacity:.8}.o-70{opacity:.7}.o-60{opacity:.6}.o-50{opacity:.5}.o-40{opacity:.4}.o-30{opacity:.3}.o-20{opacity:.2}.o-10{opacity:.1}.o-05{opacity:.05}.o-025{opacity:.025}.o-0{opacity:0}.rotate-45{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.rotate-135{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.rotate-225{-webkit-transform:rotate(225deg);transform:rotate(225deg)}.rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.rotate-315{-webkit-transform:rotate(315deg);transform:rotate(315deg)}.black-90{color:#000000e6}.black-80{color:#000c}.black-70{color:#000000b3}.black-60{color:#0009}.black-50{color:#00000080}.black-40{color:#0006}.black-30{color:#0000004d}.black-20{color:#0003}.black-10{color:#0000001a}.black-05{color:#0000000d}.white-90{color:#ffffffe6}.white-80{color:#fffc}.white-70{color:#ffffffb3}.white-60{color:#fff9}.white-50{color:#ffffff80}.white-40{color:#fff6}.white-30{color:#ffffff4d}.white-20{color:#fff3}.white-10{color:#ffffff1a}.black{color:#000}.near-black{color:#111}.dark-gray{color:#333}.mid-gray{color:#555}.gray{color:#777}.silver{color:#999}.light-silver{color:#aaa}.moon-gray{color:#ccc}.light-gray{color:#eee}.near-white{color:#f4f4f4}.white{color:#fff}.dark-red{color:#e7040f}.red{color:#ff4136}.light-red{color:#ff725c}.orange{color:#ff6300}.gold{color:#ffb700}.yellow{color:gold}.light-yellow{color:#fbf1a9}.purple{color:#5e2ca5}.light-purple{color:#a463f2}.dark-pink{color:#d5008f}.hot-pink{color:#ff41b4}.pink{color:#ff80cc}.light-pink{color:#ffa3d7}.dark-green{color:#137752}.green{color:#19a974}.light-green{color:#9eebcf}.navy{color:#001b44}.dark-blue{color:#00449e}.blue{color:#357edd}.light-blue{color:#96ccff}.lightest-blue{color:#cdecff}.washed-blue{color:#f6fffe}.washed-green{color:#e8fdf5}.washed-yellow{color:#fffceb}.washed-red{color:#ffdfdf}.color-inherit{color:inherit}.bg-black-90{background-color:#000000e6}.bg-black-80{background-color:#000c}.bg-black-70{background-color:#000000b3}.bg-black-60{background-color:#0009}.bg-black-50{background-color:#00000080}.bg-black-40{background-color:#0006}.bg-black-30{background-color:#0000004d}.bg-black-20{background-color:#0003}.bg-black-10{background-color:#0000001a}.bg-black-05{background-color:#0000000d}.bg-white-90{background-color:#ffffffe6}.bg-white-80{background-color:#fffc}.bg-white-70{background-color:#ffffffb3}.bg-white-60{background-color:#fff9}.bg-white-50{background-color:#ffffff80}.bg-white-40{background-color:#fff6}.bg-white-30{background-color:#ffffff4d}.bg-white-20{background-color:#fff3}.bg-white-10{background-color:#ffffff1a}.bg-black{background-color:#000}.bg-near-black{background-color:#111}.bg-dark-gray{background-color:#333}.bg-mid-gray{background-color:#555}.bg-gray{background-color:#777}.bg-silver{background-color:#999}.bg-light-silver{background-color:#aaa}.bg-moon-gray{background-color:#ccc}.bg-light-gray{background-color:#eee}.bg-near-white{background-color:#f4f4f4}.bg-white{background-color:#fff}.bg-transparent{background-color:transparent}.bg-dark-red{background-color:#e7040f}.bg-red{background-color:#ff4136}.bg-light-red{background-color:#ff725c}.bg-orange{background-color:#ff6300}.bg-gold{background-color:#ffb700}.bg-yellow{background-color:gold}.bg-light-yellow{background-color:#fbf1a9}.bg-purple{background-color:#5e2ca5}.bg-light-purple{background-color:#a463f2}.bg-dark-pink{background-color:#d5008f}.bg-hot-pink{background-color:#ff41b4}.bg-pink{background-color:#ff80cc}.bg-light-pink{background-color:#ffa3d7}.bg-dark-green{background-color:#137752}.bg-green{background-color:#19a974}.bg-light-green{background-color:#9eebcf}.bg-navy{background-color:#001b44}.bg-dark-blue{background-color:#00449e}.bg-blue{background-color:#357edd}.bg-light-blue{background-color:#96ccff}.bg-lightest-blue{background-color:#cdecff}.bg-washed-blue{background-color:#f6fffe}.bg-washed-green{background-color:#e8fdf5}.bg-washed-yellow{background-color:#fffceb}.bg-washed-red{background-color:#ffdfdf}.bg-inherit{background-color:inherit}.hover-black:hover{color:#000}.hover-black:focus{color:#000}.hover-near-black:hover{color:#111}.hover-near-black:focus{color:#111}.hover-dark-gray:hover{color:#333}.hover-dark-gray:focus{color:#333}.hover-mid-gray:hover{color:#555}.hover-mid-gray:focus{color:#555}.hover-gray:hover{color:#777}.hover-gray:focus{color:#777}.hover-silver:hover{color:#999}.hover-silver:focus{color:#999}.hover-light-silver:hover{color:#aaa}.hover-light-silver:focus{color:#aaa}.hover-moon-gray:hover{color:#ccc}.hover-moon-gray:focus{color:#ccc}.hover-light-gray:hover{color:#eee}.hover-light-gray:focus{color:#eee}.hover-near-white:hover{color:#f4f4f4}.hover-near-white:focus{color:#f4f4f4}.hover-white:hover{color:#fff}.hover-white:focus{color:#fff}.hover-black-90:hover{color:#000000e6}.hover-black-90:focus{color:#000000e6}.hover-black-80:hover{color:#000c}.hover-black-80:focus{color:#000c}.hover-black-70:hover{color:#000000b3}.hover-black-70:focus{color:#000000b3}.hover-black-60:hover{color:#0009}.hover-black-60:focus{color:#0009}.hover-black-50:hover{color:#00000080}.hover-black-50:focus{color:#00000080}.hover-black-40:hover{color:#0006}.hover-black-40:focus{color:#0006}.hover-black-30:hover{color:#0000004d}.hover-black-30:focus{color:#0000004d}.hover-black-20:hover{color:#0003}.hover-black-20:focus{color:#0003}.hover-black-10:hover{color:#0000001a}.hover-black-10:focus{color:#0000001a}.hover-white-90:hover{color:#ffffffe6}.hover-white-90:focus{color:#ffffffe6}.hover-white-80:hover{color:#fffc}.hover-white-80:focus{color:#fffc}.hover-white-70:hover{color:#ffffffb3}.hover-white-70:focus{color:#ffffffb3}.hover-white-60:hover{color:#fff9}.hover-white-60:focus{color:#fff9}.hover-white-50:hover{color:#ffffff80}.hover-white-50:focus{color:#ffffff80}.hover-white-40:hover{color:#fff6}.hover-white-40:focus{color:#fff6}.hover-white-30:hover{color:#ffffff4d}.hover-white-30:focus{color:#ffffff4d}.hover-white-20:hover{color:#fff3}.hover-white-20:focus{color:#fff3}.hover-white-10:hover{color:#ffffff1a}.hover-white-10:focus{color:#ffffff1a}.hover-inherit:hover,.hover-inherit:focus{color:inherit}.hover-bg-black:hover{background-color:#000}.hover-bg-black:focus{background-color:#000}.hover-bg-near-black:hover{background-color:#111}.hover-bg-near-black:focus{background-color:#111}.hover-bg-dark-gray:hover{background-color:#333}.hover-bg-dark-gray:focus{background-color:#333}.hover-bg-dark-gray:focus{background-color:#555}.hover-bg-mid-gray:hover{background-color:#555}.hover-bg-gray:hover{background-color:#777}.hover-bg-gray:focus{background-color:#777}.hover-bg-silver:hover{background-color:#999}.hover-bg-silver:focus{background-color:#999}.hover-bg-light-silver:hover{background-color:#aaa}.hover-bg-light-silver:focus{background-color:#aaa}.hover-bg-moon-gray:hover{background-color:#ccc}.hover-bg-moon-gray:focus{background-color:#ccc}.hover-bg-light-gray:hover{background-color:#eee}.hover-bg-light-gray:focus{background-color:#eee}.hover-bg-near-white:hover{background-color:#f4f4f4}.hover-bg-near-white:focus{background-color:#f4f4f4}.hover-bg-white:hover{background-color:#fff}.hover-bg-white:focus{background-color:#fff}.hover-bg-transparent:hover{background-color:transparent}.hover-bg-transparent:focus{background-color:transparent}.hover-bg-black-90:hover{background-color:#000000e6}.hover-bg-black-90:focus{background-color:#000000e6}.hover-bg-black-80:hover{background-color:#000c}.hover-bg-black-80:focus{background-color:#000c}.hover-bg-black-70:hover{background-color:#000000b3}.hover-bg-black-70:focus{background-color:#000000b3}.hover-bg-black-60:hover{background-color:#0009}.hover-bg-black-60:focus{background-color:#0009}.hover-bg-black-50:hover{background-color:#00000080}.hover-bg-black-50:focus{background-color:#00000080}.hover-bg-black-40:hover{background-color:#0006}.hover-bg-black-40:focus{background-color:#0006}.hover-bg-black-30:hover{background-color:#0000004d}.hover-bg-black-30:focus{background-color:#0000004d}.hover-bg-black-20:hover{background-color:#0003}.hover-bg-black-20:focus{background-color:#0003}.hover-bg-black-10:hover{background-color:#0000001a}.hover-bg-black-10:focus{background-color:#0000001a}.hover-bg-white-90:hover{background-color:#ffffffe6}.hover-bg-white-90:focus{background-color:#ffffffe6}.hover-bg-white-80:hover{background-color:#fffc}.hover-bg-white-80:focus{background-color:#fffc}.hover-bg-white-70:hover{background-color:#ffffffb3}.hover-bg-white-70:focus{background-color:#ffffffb3}.hover-bg-white-60:hover{background-color:#fff9}.hover-bg-white-60:focus{background-color:#fff9}.hover-bg-white-50:hover{background-color:#ffffff80}.hover-bg-white-50:focus{background-color:#ffffff80}.hover-bg-white-40:hover{background-color:#fff6}.hover-bg-white-40:focus{background-color:#fff6}.hover-bg-white-30:hover{background-color:#ffffff4d}.hover-bg-white-30:focus{background-color:#ffffff4d}.hover-bg-white-20:hover{background-color:#fff3}.hover-bg-white-20:focus{background-color:#fff3}.hover-bg-white-10:hover{background-color:#ffffff1a}.hover-bg-white-10:focus{background-color:#ffffff1a}.hover-dark-red:hover{color:#e7040f}.hover-dark-red:focus{color:#e7040f}.hover-red:hover{color:#ff4136}.hover-red:focus{color:#ff4136}.hover-light-red:hover{color:#ff725c}.hover-light-red:focus{color:#ff725c}.hover-orange:hover{color:#ff6300}.hover-orange:focus{color:#ff6300}.hover-gold:hover{color:#ffb700}.hover-gold:focus{color:#ffb700}.hover-yellow:hover{color:gold}.hover-yellow:focus{color:gold}.hover-light-yellow:hover{color:#fbf1a9}.hover-light-yellow:focus{color:#fbf1a9}.hover-purple:hover{color:#5e2ca5}.hover-purple:focus{color:#5e2ca5}.hover-light-purple:hover{color:#a463f2}.hover-light-purple:focus{color:#a463f2}.hover-dark-pink:hover{color:#d5008f}.hover-dark-pink:focus{color:#d5008f}.hover-hot-pink:hover{color:#ff41b4}.hover-hot-pink:focus{color:#ff41b4}.hover-pink:hover{color:#ff80cc}.hover-pink:focus{color:#ff80cc}.hover-light-pink:hover{color:#ffa3d7}.hover-light-pink:focus{color:#ffa3d7}.hover-dark-green:hover{color:#137752}.hover-dark-green:focus{color:#137752}.hover-green:hover{color:#19a974}.hover-green:focus{color:#19a974}.hover-light-green:hover{color:#9eebcf}.hover-light-green:focus{color:#9eebcf}.hover-navy:hover{color:#001b44}.hover-navy:focus{color:#001b44}.hover-dark-blue:hover{color:#00449e}.hover-dark-blue:focus{color:#00449e}.hover-blue:hover{color:#357edd}.hover-blue:focus{color:#357edd}.hover-light-blue:hover{color:#96ccff}.hover-light-blue:focus{color:#96ccff}.hover-lightest-blue:hover{color:#cdecff}.hover-lightest-blue:focus{color:#cdecff}.hover-washed-blue:hover{color:#f6fffe}.hover-washed-blue:focus{color:#f6fffe}.hover-washed-green:hover{color:#e8fdf5}.hover-washed-green:focus{color:#e8fdf5}.hover-washed-yellow:hover{color:#fffceb}.hover-washed-yellow:focus{color:#fffceb}.hover-washed-red:hover{color:#ffdfdf}.hover-washed-red:focus{color:#ffdfdf}.hover-bg-dark-red:hover{background-color:#e7040f}.hover-bg-dark-red:focus{background-color:#e7040f}.hover-bg-red:hover{background-color:#ff4136}.hover-bg-red:focus{background-color:#ff4136}.hover-bg-light-red:hover{background-color:#ff725c}.hover-bg-light-red:focus{background-color:#ff725c}.hover-bg-orange:hover{background-color:#ff6300}.hover-bg-orange:focus{background-color:#ff6300}.hover-bg-gold:hover{background-color:#ffb700}.hover-bg-gold:focus{background-color:#ffb700}.hover-bg-yellow:hover{background-color:gold}.hover-bg-yellow:focus{background-color:gold}.hover-bg-light-yellow:hover{background-color:#fbf1a9}.hover-bg-light-yellow:focus{background-color:#fbf1a9}.hover-bg-purple:hover{background-color:#5e2ca5}.hover-bg-purple:focus{background-color:#5e2ca5}.hover-bg-light-purple:hover{background-color:#a463f2}.hover-bg-light-purple:focus{background-color:#a463f2}.hover-bg-dark-pink:hover{background-color:#d5008f}.hover-bg-dark-pink:focus{background-color:#d5008f}.hover-bg-hot-pink:hover{background-color:#ff41b4}.hover-bg-hot-pink:focus{background-color:#ff41b4}.hover-bg-pink:hover{background-color:#ff80cc}.hover-bg-pink:focus{background-color:#ff80cc}.hover-bg-light-pink:hover{background-color:#ffa3d7}.hover-bg-light-pink:focus{background-color:#ffa3d7}.hover-bg-dark-green:hover{background-color:#137752}.hover-bg-dark-green:focus{background-color:#137752}.hover-bg-green:hover{background-color:#19a974}.hover-bg-green:focus{background-color:#19a974}.hover-bg-light-green:hover{background-color:#9eebcf}.hover-bg-light-green:focus{background-color:#9eebcf}.hover-bg-navy:hover{background-color:#001b44}.hover-bg-navy:focus{background-color:#001b44}.hover-bg-dark-blue:hover{background-color:#00449e}.hover-bg-dark-blue:focus{background-color:#00449e}.hover-bg-blue:hover{background-color:#357edd}.hover-bg-blue:focus{background-color:#357edd}.hover-bg-light-blue:hover{background-color:#96ccff}.hover-bg-light-blue:focus{background-color:#96ccff}.hover-bg-lightest-blue:hover{background-color:#cdecff}.hover-bg-lightest-blue:focus{background-color:#cdecff}.hover-bg-washed-blue:hover{background-color:#f6fffe}.hover-bg-washed-blue:focus{background-color:#f6fffe}.hover-bg-washed-green:hover{background-color:#e8fdf5}.hover-bg-washed-green:focus{background-color:#e8fdf5}.hover-bg-washed-yellow:hover{background-color:#fffceb}.hover-bg-washed-yellow:focus{background-color:#fffceb}.hover-bg-washed-red:hover{background-color:#ffdfdf}.hover-bg-washed-red:focus{background-color:#ffdfdf}.hover-bg-inherit:hover,.hover-bg-inherit:focus{background-color:inherit}.pa0{padding:0}.pa1{padding:.25rem}.pa2{padding:.5rem}.pa3{padding:1rem}.pa4{padding:2rem}.pa5{padding:4rem}.pa6{padding:8rem}.pa7{padding:16rem}.pl0{padding-left:0}.pl1{padding-left:.25rem}.pl2{padding-left:.5rem}.pl3{padding-left:1rem}.pl4{padding-left:2rem}.pl5{padding-left:4rem}.pl6{padding-left:8rem}.pl7{padding-left:16rem}.pr0{padding-right:0}.pr1{padding-right:.25rem}.pr2{padding-right:.5rem}.pr3{padding-right:1rem}.pr4{padding-right:2rem}.pr5{padding-right:4rem}.pr6{padding-right:8rem}.pr7{padding-right:16rem}.pb0{padding-bottom:0}.pb1{padding-bottom:.25rem}.pb2{padding-bottom:.5rem}.pb3{padding-bottom:1rem}.pb4{padding-bottom:2rem}.pb5{padding-bottom:4rem}.pb6{padding-bottom:8rem}.pb7{padding-bottom:16rem}.pt0{padding-top:0}.pt1{padding-top:.25rem}.pt2{padding-top:.5rem}.pt3{padding-top:1rem}.pt4{padding-top:2rem}.pt5{padding-top:4rem}.pt6{padding-top:8rem}.pt7{padding-top:16rem}.pv0{padding-top:0;padding-bottom:0}.pv1{padding-top:.25rem;padding-bottom:.25rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.pv3{padding-top:1rem;padding-bottom:1rem}.pv4{padding-top:2rem;padding-bottom:2rem}.pv5{padding-top:4rem;padding-bottom:4rem}.pv6{padding-top:8rem;padding-bottom:8rem}.pv7{padding-top:16rem;padding-bottom:16rem}.ph0{padding-left:0;padding-right:0}.ph1{padding-left:.25rem;padding-right:.25rem}.ph2{padding-left:.5rem;padding-right:.5rem}.ph3{padding-left:1rem;padding-right:1rem}.ph4{padding-left:2rem;padding-right:2rem}.ph5{padding-left:4rem;padding-right:4rem}.ph6{padding-left:8rem;padding-right:8rem}.ph7{padding-left:16rem;padding-right:16rem}.ma0{margin:0}.ma1{margin:.25rem}.ma2{margin:.5rem}.ma3{margin:1rem}.ma4{margin:2rem}.ma5{margin:4rem}.ma6{margin:8rem}.ma7{margin:16rem}.ml0{margin-left:0}.ml1{margin-left:.25rem}.ml2{margin-left:.5rem}.ml3{margin-left:1rem}.ml4{margin-left:2rem}.ml5{margin-left:4rem}.ml6{margin-left:8rem}.ml7{margin-left:16rem}.mr0{margin-right:0}.mr1{margin-right:.25rem}.mr2{margin-right:.5rem}.mr3{margin-right:1rem}.mr4{margin-right:2rem}.mr5{margin-right:4rem}.mr6{margin-right:8rem}.mr7{margin-right:16rem}.mb0{margin-bottom:0}.mb1{margin-bottom:.25rem}.mb2{margin-bottom:.5rem}.mb3{margin-bottom:1rem}.mb4{margin-bottom:2rem}.mb5{margin-bottom:4rem}.mb6{margin-bottom:8rem}.mb7{margin-bottom:16rem}.mt0{margin-top:0}.mt1{margin-top:.25rem}.mt2{margin-top:.5rem}.mt3{margin-top:1rem}.mt4{margin-top:2rem}.mt5{margin-top:4rem}.mt6{margin-top:8rem}.mt7{margin-top:16rem}.mv0{margin-top:0;margin-bottom:0}.mv1{margin-top:.25rem;margin-bottom:.25rem}.mv2{margin-top:.5rem;margin-bottom:.5rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.mv5{margin-top:4rem;margin-bottom:4rem}.mv6{margin-top:8rem;margin-bottom:8rem}.mv7{margin-top:16rem;margin-bottom:16rem}.mh0{margin-left:0;margin-right:0}.mh1{margin-left:.25rem;margin-right:.25rem}.mh2{margin-left:.5rem;margin-right:.5rem}.mh3{margin-left:1rem;margin-right:1rem}.mh4{margin-left:2rem;margin-right:2rem}.mh5{margin-left:4rem;margin-right:4rem}.mh6{margin-left:8rem;margin-right:8rem}.mh7{margin-left:16rem;margin-right:16rem}.na1{margin:-.25rem}.na2{margin:-.5rem}.na3{margin:-1rem}.na4{margin:-2rem}.na5{margin:-4rem}.na6{margin:-8rem}.na7{margin:-16rem}.nl1{margin-left:-.25rem}.nl2{margin-left:-.5rem}.nl3{margin-left:-1rem}.nl4{margin-left:-2rem}.nl5{margin-left:-4rem}.nl6{margin-left:-8rem}.nl7{margin-left:-16rem}.nr1{margin-right:-.25rem}.nr2{margin-right:-.5rem}.nr3{margin-right:-1rem}.nr4{margin-right:-2rem}.nr5{margin-right:-4rem}.nr6{margin-right:-8rem}.nr7{margin-right:-16rem}.nb1{margin-bottom:-.25rem}.nb2{margin-bottom:-.5rem}.nb3{margin-bottom:-1rem}.nb4{margin-bottom:-2rem}.nb5{margin-bottom:-4rem}.nb6{margin-bottom:-8rem}.nb7{margin-bottom:-16rem}.nt1{margin-top:-.25rem}.nt2{margin-top:-.5rem}.nt3{margin-top:-1rem}.nt4{margin-top:-2rem}.nt5{margin-top:-4rem}.nt6{margin-top:-8rem}.nt7{margin-top:-16rem}.collapse{border-collapse:collapse;border-spacing:0}.striped--light-silver:nth-child(odd){background-color:#aaa}.striped--moon-gray:nth-child(odd){background-color:#ccc}.striped--light-gray:nth-child(odd){background-color:#eee}.striped--near-white:nth-child(odd){background-color:#f4f4f4}.stripe-light:nth-child(odd){background-color:#ffffff1a}.stripe-dark:nth-child(odd){background-color:#0000001a}.strike{text-decoration:line-through}.underline{text-decoration:underline}.no-underline{text-decoration:none}.tl{text-align:left}.tr{text-align:right}.tc{text-align:center}.ttc{text-transform:capitalize}.ttl{text-transform:lowercase}.ttu{text-transform:uppercase}.ttn{text-transform:none}.f-6,.f-headline{font-size:6rem}.f-5,.f-subheadline{font-size:5rem}.f1{font-size:3rem}.f2{font-size:2.25rem}.f3{font-size:1.5rem}.f4{font-size:1.25rem}.f5{font-size:1rem}.f6{font-size:.875rem}.f7{font-size:.75rem}.measure{max-width:30em}.measure-wide{max-width:34em}.measure-narrow{max-width:20em}.indent{text-indent:1em;margin-top:0;margin-bottom:0}.small-caps{font-variant:small-caps}.truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.overflow-container{overflow-y:scroll}.center{margin-right:auto;margin-left:auto}.clip{position:fixed!important;_position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}.ws-normal{white-space:normal}.nowrap{white-space:nowrap}.pre{white-space:pre}.v-base{vertical-align:baseline}.v-mid{vertical-align:middle}.v-top{vertical-align:top}.v-btm{vertical-align:bottom}.dim{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:hover,.dim:focus{opacity:.5;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:active{opacity:.8;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out}.glow{-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.glow:hover,.glow:focus{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.hide-child .child{opacity:0;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.hide-child:hover .child,.hide-child:focus .child,.hide-child:active .child{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.underline-hover:hover,.underline-hover:focus{text-decoration:underline}.grow{-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:-webkit-transform .25s ease-out;transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.grow:hover,.grow:focus{-webkit-transform:scale(1.05);transform:scale(1.05)}.grow:active{-webkit-transform:scale(.9);transform:scale(.9)}.grow-large{-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:-webkit-transform .25s ease-in-out;transition:-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out;transition:transform .25s ease-in-out,-webkit-transform .25s ease-in-out}.grow-large:hover,.grow-large:focus{-webkit-transform:scale(1.2);transform:scale(1.2)}.grow-large:active{-webkit-transform:scale(.95);transform:scale(.95)}.pointer:hover{cursor:pointer}.shadow-hover{cursor:pointer;position:relative;-webkit-transition:all .5s cubic-bezier(.165,.84,.44,1);transition:all .5s cubic-bezier(.165,.84,.44,1)}.shadow-hover:after{content:"";box-shadow:0 0 16px 2px #0003;opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;-webkit-transition:opacity .5s cubic-bezier(.165,.84,.44,1);transition:opacity .5s cubic-bezier(.165,.84,.44,1)}.shadow-hover:hover:after,.shadow-hover:focus:after{opacity:1}.bg-animate,.bg-animate:hover,.bg-animate:focus{-webkit-transition:background-color .15s ease-in-out;transition:background-color .15s ease-in-out}.z-0{z-index:0}.z-1{z-index:1}.z-2{z-index:2}.z-3{z-index:3}.z-4{z-index:4}.z-5{z-index:5}.z-999{z-index:999}.z-9999{z-index:9999}.z-max{z-index:2147483647}.z-inherit{z-index:inherit}.z-initial{z-index:initial}.z-unset{z-index:unset}.nested-copy-line-height p,.nested-copy-line-height ul,.nested-copy-line-height ol{line-height:1.5}.nested-headline-line-height h1,.nested-headline-line-height h2,.nested-headline-line-height h3,.nested-headline-line-height h4,.nested-headline-line-height h5,.nested-headline-line-height h6{line-height:1.25}.nested-list-reset ul,.nested-list-reset ol{padding-left:0;margin-left:0;list-style-type:none}.nested-copy-indent p+p{text-indent:1em;margin-top:0;margin-bottom:0}.nested-copy-seperator p+p{margin-top:1.5em}.nested-img img{width:100%;max-width:100%;display:block}.nested-links a{color:#357edd;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.nested-links a:hover{color:#96ccff;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.nested-links a:focus{color:#96ccff;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.debug *{outline:1px solid gold}.debug-white *{outline:1px solid white}.debug-black *{outline:1px solid black}.debug-grid{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTRDOTY4N0U2N0VFMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTRDOTY4N0Q2N0VFMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3NjY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3NzY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsBS+GMAAAAjSURBVHjaYvz//z8DLsD4gcGXiYEAGBIKGBne//fFpwAgwAB98AaF2pjlUQAAAABJRU5ErkJggg==) repeat top left}.debug-grid-16{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODYyRjhERDU2N0YyMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODYyRjhERDQ2N0YyMTFFNjg2MzZDQjkwNkQ4MjgwMEIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3QTY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3QjY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvCS01IAAABMSURBVHjaYmR4/5+BFPBfAMFm/MBgx8RAGWCn1AAmSg34Q6kBDKMGMDCwICeMIemF/5QawEipAWwUhwEjMDvbAWlWkvVBwu8vQIABAEwBCph8U6c0AAAAAElFTkSuQmCC) repeat top left}.debug-grid-8-solid{background:white url(data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAAAAD/4QMxaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzExMSA3OS4xNTgzMjUsIDIwMTUvMDkvMTAtMDE6MTA6MjAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIxMjI0OTczNjdCMzExRTZCMkJDRTI0MDgxMDAyMTcxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIxMjI0OTc0NjdCMzExRTZCMkJDRTI0MDgxMDAyMTcxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjEyMjQ5NzE2N0IzMTFFNkIyQkNFMjQwODEwMDIxNzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjEyMjQ5NzI2N0IzMTFFNkIyQkNFMjQwODEwMDIxNzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAbGhopHSlBJiZBQi8vL0JHPz4+P0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHAR0pKTQmND8oKD9HPzU/R0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0f/wAARCAAIAAgDASIAAhEBAxEB/8QAWQABAQAAAAAAAAAAAAAAAAAAAAYBAQEAAAAAAAAAAAAAAAAAAAIEEAEBAAMBAAAAAAAAAAAAAAABADECA0ERAAEDBQAAAAAAAAAAAAAAAAARITFBUWESIv/aAAwDAQACEQMRAD8AoOnTV1QTD7JJshP3vSM3P//Z) repeat top left}.debug-grid-16-solid{background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzY3MkJEN0U2N0M1MTFFNkIyQkNFMjQwODEwMDIxNzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzY3MkJEN0Y2N0M1MTFFNkIyQkNFMjQwODEwMDIxNzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcyQkQ3QzY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcyQkQ3RDY3QzUxMUU2QjJCQ0UyNDA4MTAwMjE3MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pve6J3kAAAAzSURBVHjaYvz//z8D0UDsMwMjSRoYP5Gq4SPNbRjVMEQ1fCRDg+in/6+J1AJUxsgAEGAA31BAJMS0GYEAAAAASUVORK5CYII=) repeat top left}@media screen and (min-width: 30em){.aspect-ratio-ns{height:0;position:relative}.aspect-ratio--16x9-ns{padding-bottom:56.25%}.aspect-ratio--9x16-ns{padding-bottom:177.77%}.aspect-ratio--4x3-ns{padding-bottom:75%}.aspect-ratio--3x4-ns{padding-bottom:133.33%}.aspect-ratio--6x4-ns{padding-bottom:66.6%}.aspect-ratio--4x6-ns{padding-bottom:150%}.aspect-ratio--8x5-ns{padding-bottom:62.5%}.aspect-ratio--5x8-ns{padding-bottom:160%}.aspect-ratio--7x5-ns{padding-bottom:71.42%}.aspect-ratio--5x7-ns{padding-bottom:140%}.aspect-ratio--1x1-ns{padding-bottom:100%}.aspect-ratio--object-ns{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:100}.cover-ns{background-size:cover!important}.contain-ns{background-size:contain!important}.bg-center-ns{background-repeat:no-repeat;background-position:center center}.bg-top-ns{background-repeat:no-repeat;background-position:top center}.bg-right-ns{background-repeat:no-repeat;background-position:center right}.bg-bottom-ns{background-repeat:no-repeat;background-position:bottom center}.bg-left-ns{background-repeat:no-repeat;background-position:center left}.outline-ns{outline:1px solid}.outline-transparent-ns{outline:1px solid transparent}.outline-0-ns{outline:0}.ba-ns{border-style:solid;border-width:1px}.bt-ns{border-top-style:solid;border-top-width:1px}.br-ns{border-right-style:solid;border-right-width:1px}.bb-ns{border-bottom-style:solid;border-bottom-width:1px}.bl-ns{border-left-style:solid;border-left-width:1px}.bn-ns{border-style:none;border-width:0}.br0-ns{border-radius:0}.br1-ns{border-radius:.125rem}.br2-ns{border-radius:.25rem}.br3-ns{border-radius:.5rem}.br4-ns{border-radius:1rem}.br-100-ns{border-radius:100%}.br-pill-ns{border-radius:9999px}.br--bottom-ns{border-top-left-radius:0;border-top-right-radius:0}.br--top-ns{border-bottom-left-radius:0;border-bottom-right-radius:0}.br--right-ns{border-top-left-radius:0;border-bottom-left-radius:0}.br--left-ns{border-top-right-radius:0;border-bottom-right-radius:0}.b--dotted-ns{border-style:dotted}.b--dashed-ns{border-style:dashed}.b--solid-ns{border-style:solid}.b--none-ns{border-style:none}.bw0-ns{border-width:0}.bw1-ns{border-width:.125rem}.bw2-ns{border-width:.25rem}.bw3-ns{border-width:.5rem}.bw4-ns{border-width:1rem}.bw5-ns{border-width:2rem}.bt-0-ns{border-top-width:0}.br-0-ns{border-right-width:0}.bb-0-ns{border-bottom-width:0}.bl-0-ns{border-left-width:0}.shadow-1-ns{box-shadow:0 0 4px 2px #0003}.shadow-2-ns{box-shadow:0 0 8px 2px #0003}.shadow-3-ns{box-shadow:2px 2px 4px 2px #0003}.shadow-4-ns{box-shadow:2px 2px 8px #0003}.shadow-5-ns{box-shadow:4px 4px 8px #0003}.top-0-ns{top:0}.left-0-ns{left:0}.right-0-ns{right:0}.bottom-0-ns{bottom:0}.top-1-ns{top:1rem}.left-1-ns{left:1rem}.right-1-ns{right:1rem}.bottom-1-ns{bottom:1rem}.top-2-ns{top:2rem}.left-2-ns{left:2rem}.right-2-ns{right:2rem}.bottom-2-ns{bottom:2rem}.top--1-ns{top:-1rem}.right--1-ns{right:-1rem}.bottom--1-ns{bottom:-1rem}.left--1-ns{left:-1rem}.top--2-ns{top:-2rem}.right--2-ns{right:-2rem}.bottom--2-ns{bottom:-2rem}.left--2-ns{left:-2rem}.absolute--fill-ns{top:0;right:0;bottom:0;left:0}.cl-ns{clear:left}.cr-ns{clear:right}.cb-ns{clear:both}.cn-ns{clear:none}.dn-ns{display:none}.di-ns{display:inline}.db-ns{display:block}.dib-ns{display:inline-block}.dit-ns{display:inline-table}.dt-ns{display:table}.dtc-ns{display:table-cell}.dt-row-ns{display:table-row}.dt-row-group-ns{display:table-row-group}.dt-column-ns{display:table-column}.dt-column-group-ns{display:table-column-group}.dt--fixed-ns{table-layout:fixed;width:100%}.flex-ns{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex-ns{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.flex-auto-ns{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;min-height:0}.flex-none-ns{-webkit-box-flex:0;-ms-flex:none;flex:none}.flex-column-ns{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-row-ns{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.flex-wrap-ns{-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-column-reverse-ns{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.flex-row-reverse-ns{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.flex-wrap-reverse-ns{-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}.items-start-ns{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end-ns{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center-ns{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.items-baseline-ns{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.items-stretch-ns{-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.self-start-ns{-ms-flex-item-align:start;align-self:flex-start}.self-end-ns{-ms-flex-item-align:end;align-self:flex-end}.self-center-ns{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.self-baseline-ns{-ms-flex-item-align:baseline;align-self:baseline}.self-stretch-ns{-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch}.justify-start-ns{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.justify-end-ns{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.justify-center-ns{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between-ns{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.justify-around-ns{-ms-flex-pack:distribute;justify-content:space-around}.content-start-ns{-ms-flex-line-pack:start;align-content:flex-start}.content-end-ns{-ms-flex-line-pack:end;align-content:flex-end}.content-center-ns{-ms-flex-line-pack:center;align-content:center}.content-between-ns{-ms-flex-line-pack:justify;align-content:space-between}.content-around-ns{-ms-flex-line-pack:distribute;align-content:space-around}.content-stretch-ns{-ms-flex-line-pack:stretch;align-content:stretch}.order-0-ns{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0}.order-1-ns{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.order-2-ns{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2}.order-3-ns{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3}.order-4-ns{-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4}.order-5-ns{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5}.order-6-ns{-webkit-box-ordinal-group:7;-ms-flex-order:6;order:6}.order-7-ns{-webkit-box-ordinal-group:8;-ms-flex-order:7;order:7}.order-8-ns{-webkit-box-ordinal-group:9;-ms-flex-order:8;order:8}.order-last-ns{-webkit-box-ordinal-group:100000;-ms-flex-order:99999;order:99999}.fl-ns{float:left;display:inline}.fr-ns{float:right;display:inline}.fn-ns{float:none}.i-ns{font-style:italic}.fs-normal-ns{font-style:normal}.normal-ns{font-weight:400}.b-ns{font-weight:700}.fw1-ns{font-weight:100}.fw2-ns{font-weight:200}.fw3-ns{font-weight:300}.fw4-ns{font-weight:400}.fw5-ns{font-weight:500}.fw6-ns{font-weight:600}.fw7-ns{font-weight:700}.fw8-ns{font-weight:800}.fw9-ns{font-weight:900}.h1-ns{height:1rem}.h2-ns{height:2rem}.h3-ns{height:4rem}.h4-ns{height:8rem}.h5-ns{height:16rem}.h-25-ns{height:25%}.h-50-ns{height:50%}.h-75-ns{height:75%}.h-100-ns{height:100%}.min-h-100-ns{min-height:100%}.vh-25-ns{height:25vh}.vh-50-ns{height:50vh}.vh-75-ns{height:75vh}.vh-100-ns{height:100vh}.min-vh-100-ns{min-height:100vh}.h-auto-ns{height:auto}.h-inherit-ns{height:inherit}.tracked-ns{letter-spacing:.1em}.tracked-tight-ns{letter-spacing:-.05em}.tracked-mega-ns{letter-spacing:.25em}.lh-solid-ns{line-height:1}.lh-title-ns{line-height:1.25}.lh-copy-ns{line-height:1.5}.mw-100-ns{max-width:100%}.mw1-ns{max-width:1rem}.mw2-ns{max-width:2rem}.mw3-ns{max-width:4rem}.mw4-ns{max-width:8rem}.mw5-ns{max-width:16rem}.mw6-ns{max-width:32rem}.mw7-ns{max-width:48rem}.mw8-ns{max-width:64rem}.mw9-ns{max-width:96rem}.mw-none-ns{max-width:none}.w1-ns{width:1rem}.w2-ns{width:2rem}.w3-ns{width:4rem}.w4-ns{width:8rem}.w5-ns{width:16rem}.w6-ns{width:24rem}.w-10-ns{width:10%}.w-20-ns{width:20%}.w-25-ns{width:25%}.w-30-ns{width:30%}.w-33-ns{width:33%}.w-34-ns{width:34%}.w-40-ns{width:40%}.w-50-ns{width:50%}.w-60-ns{width:60%}.w-70-ns{width:70%}.w-75-ns{width:75%}.w-80-ns{width:80%}.w-90-ns{width:90%}.w-100-ns{width:100%}.w-third-ns{width:calc(100% / 3)}.w-two-thirds-ns{width:calc(100% / 1.5)}.w-auto-ns{width:auto}.overflow-visible-ns{overflow:visible}.overflow-hidden-ns{overflow:hidden}.overflow-scroll-ns{overflow:scroll}.overflow-auto-ns{overflow:auto}.overflow-x-visible-ns{overflow-x:visible}.overflow-x-hidden-ns{overflow-x:hidden}.overflow-x-scroll-ns{overflow-x:scroll}.overflow-x-auto-ns{overflow-x:auto}.overflow-y-visible-ns{overflow-y:visible}.overflow-y-hidden-ns{overflow-y:hidden}.overflow-y-scroll-ns{overflow-y:scroll}.overflow-y-auto-ns{overflow-y:auto}.static-ns{position:static}.relative-ns{position:relative}.absolute-ns{position:absolute}.fixed-ns{position:fixed}.rotate-45-ns{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.rotate-90-ns{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.rotate-135-ns{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.rotate-180-ns{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.rotate-225-ns{-webkit-transform:rotate(225deg);transform:rotate(225deg)}.rotate-270-ns{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.rotate-315-ns{-webkit-transform:rotate(315deg);transform:rotate(315deg)}.pa0-ns{padding:0}.pa1-ns{padding:.25rem}.pa2-ns{padding:.5rem}.pa3-ns{padding:1rem}.pa4-ns{padding:2rem}.pa5-ns{padding:4rem}.pa6-ns{padding:8rem}.pa7-ns{padding:16rem}.pl0-ns{padding-left:0}.pl1-ns{padding-left:.25rem}.pl2-ns{padding-left:.5rem}.pl3-ns{padding-left:1rem}.pl4-ns{padding-left:2rem}.pl5-ns{padding-left:4rem}.pl6-ns{padding-left:8rem}.pl7-ns{padding-left:16rem}.pr0-ns{padding-right:0}.pr1-ns{padding-right:.25rem}.pr2-ns{padding-right:.5rem}.pr3-ns{padding-right:1rem}.pr4-ns{padding-right:2rem}.pr5-ns{padding-right:4rem}.pr6-ns{padding-right:8rem}.pr7-ns{padding-right:16rem}.pb0-ns{padding-bottom:0}.pb1-ns{padding-bottom:.25rem}.pb2-ns{padding-bottom:.5rem}.pb3-ns{padding-bottom:1rem}.pb4-ns{padding-bottom:2rem}.pb5-ns{padding-bottom:4rem}.pb6-ns{padding-bottom:8rem}.pb7-ns{padding-bottom:16rem}.pt0-ns{padding-top:0}.pt1-ns{padding-top:.25rem}.pt2-ns{padding-top:.5rem}.pt3-ns{padding-top:1rem}.pt4-ns{padding-top:2rem}.pt5-ns{padding-top:4rem}.pt6-ns{padding-top:8rem}.pt7-ns{padding-top:16rem}.pv0-ns{padding-top:0;padding-bottom:0}.pv1-ns{padding-top:.25rem;padding-bottom:.25rem}.pv2-ns{padding-top:.5rem;padding-bottom:.5rem}.pv3-ns{padding-top:1rem;padding-bottom:1rem}.pv4-ns{padding-top:2rem;padding-bottom:2rem}.pv5-ns{padding-top:4rem;padding-bottom:4rem}.pv6-ns{padding-top:8rem;padding-bottom:8rem}.pv7-ns{padding-top:16rem;padding-bottom:16rem}.ph0-ns{padding-left:0;padding-right:0}.ph1-ns{padding-left:.25rem;padding-right:.25rem}.ph2-ns{padding-left:.5rem;padding-right:.5rem}.ph3-ns{padding-left:1rem;padding-right:1rem}.ph4-ns{padding-left:2rem;padding-right:2rem}.ph5-ns{padding-left:4rem;padding-right:4rem}.ph6-ns{padding-left:8rem;padding-right:8rem}.ph7-ns{padding-left:16rem;padding-right:16rem}.ma0-ns{margin:0}.ma1-ns{margin:.25rem}.ma2-ns{margin:.5rem}.ma3-ns{margin:1rem}.ma4-ns{margin:2rem}.ma5-ns{margin:4rem}.ma6-ns{margin:8rem}.ma7-ns{margin:16rem}.ml0-ns{margin-left:0}.ml1-ns{margin-left:.25rem}.ml2-ns{margin-left:.5rem}.ml3-ns{margin-left:1rem}.ml4-ns{margin-left:2rem}.ml5-ns{margin-left:4rem}.ml6-ns{margin-left:8rem}.ml7-ns{margin-left:16rem}.mr0-ns{margin-right:0}.mr1-ns{margin-right:.25rem}.mr2-ns{margin-right:.5rem}.mr3-ns{margin-right:1rem}.mr4-ns{margin-right:2rem}.mr5-ns{margin-right:4rem}.mr6-ns{margin-right:8rem}.mr7-ns{margin-right:16rem}.mb0-ns{margin-bottom:0}.mb1-ns{margin-bottom:.25rem}.mb2-ns{margin-bottom:.5rem}.mb3-ns{margin-bottom:1rem}.mb4-ns{margin-bottom:2rem}.mb5-ns{margin-bottom:4rem}.mb6-ns{margin-bottom:8rem}.mb7-ns{margin-bottom:16rem}.mt0-ns{margin-top:0}.mt1-ns{margin-top:.25rem}.mt2-ns{margin-top:.5rem}.mt3-ns{margin-top:1rem}.mt4-ns{margin-top:2rem}.mt5-ns{margin-top:4rem}.mt6-ns{margin-top:8rem}.mt7-ns{margin-top:16rem}.mv0-ns{margin-top:0;margin-bottom:0}.mv1-ns{margin-top:.25rem;margin-bottom:.25rem}.mv2-ns{margin-top:.5rem;margin-bottom:.5rem}.mv3-ns{margin-top:1rem;margin-bottom:1rem}.mv4-ns{margin-top:2rem;margin-bottom:2rem}.mv5-ns{margin-top:4rem;margin-bottom:4rem}.mv6-ns{margin-top:8rem;margin-bottom:8rem}.mv7-ns{margin-top:16rem;margin-bottom:16rem}.mh0-ns{margin-left:0;margin-right:0}.mh1-ns{margin-left:.25rem;margin-right:.25rem}.mh2-ns{margin-left:.5rem;margin-right:.5rem}.mh3-ns{margin-left:1rem;margin-right:1rem}.mh4-ns{margin-left:2rem;margin-right:2rem}.mh5-ns{margin-left:4rem;margin-right:4rem}.mh6-ns{margin-left:8rem;margin-right:8rem}.mh7-ns{margin-left:16rem;margin-right:16rem}.na1-ns{margin:-.25rem}.na2-ns{margin:-.5rem}.na3-ns{margin:-1rem}.na4-ns{margin:-2rem}.na5-ns{margin:-4rem}.na6-ns{margin:-8rem}.na7-ns{margin:-16rem}.nl1-ns{margin-left:-.25rem}.nl2-ns{margin-left:-.5rem}.nl3-ns{margin-left:-1rem}.nl4-ns{margin-left:-2rem}.nl5-ns{margin-left:-4rem}.nl6-ns{margin-left:-8rem}.nl7-ns{margin-left:-16rem}.nr1-ns{margin-right:-.25rem}.nr2-ns{margin-right:-.5rem}.nr3-ns{margin-right:-1rem}.nr4-ns{margin-right:-2rem}.nr5-ns{margin-right:-4rem}.nr6-ns{margin-right:-8rem}.nr7-ns{margin-right:-16rem}.nb1-ns{margin-bottom:-.25rem}.nb2-ns{margin-bottom:-.5rem}.nb3-ns{margin-bottom:-1rem}.nb4-ns{margin-bottom:-2rem}.nb5-ns{margin-bottom:-4rem}.nb6-ns{margin-bottom:-8rem}.nb7-ns{margin-bottom:-16rem}.nt1-ns{margin-top:-.25rem}.nt2-ns{margin-top:-.5rem}.nt3-ns{margin-top:-1rem}.nt4-ns{margin-top:-2rem}.nt5-ns{margin-top:-4rem}.nt6-ns{margin-top:-8rem}.nt7-ns{margin-top:-16rem}.strike-ns{text-decoration:line-through}.underline-ns{text-decoration:underline}.no-underline-ns{text-decoration:none}.tl-ns{text-align:left}.tr-ns{text-align:right}.tc-ns{text-align:center}.ttc-ns{text-transform:capitalize}.ttl-ns{text-transform:lowercase}.ttu-ns{text-transform:uppercase}.ttn-ns{text-transform:none}.f-6-ns,.f-headline-ns{font-size:6rem}.f-5-ns,.f-subheadline-ns{font-size:5rem}.f1-ns{font-size:3rem}.f2-ns{font-size:2.25rem}.f3-ns{font-size:1.5rem}.f4-ns{font-size:1.25rem}.f5-ns{font-size:1rem}.f6-ns{font-size:.875rem}.f7-ns{font-size:.75rem}.measure-ns{max-width:30em}.measure-wide-ns{max-width:34em}.measure-narrow-ns{max-width:20em}.indent-ns{text-indent:1em;margin-top:0;margin-bottom:0}.small-caps-ns{font-variant:small-caps}.truncate-ns{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.center-ns{margin-right:auto;margin-left:auto}.clip-ns{position:fixed!important;position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}.ws-normal-ns{white-space:normal}.nowrap-ns{white-space:nowrap}.pre-ns{white-space:pre}.v-base-ns{vertical-align:baseline}.v-mid-ns{vertical-align:middle}.v-top-ns{vertical-align:top}.v-btm-ns{vertical-align:bottom}}@media screen and (min-width: 30em) and (max-width: 60em){.aspect-ratio-m{height:0;position:relative}.aspect-ratio--16x9-m{padding-bottom:56.25%}.aspect-ratio--9x16-m{padding-bottom:177.77%}.aspect-ratio--4x3-m{padding-bottom:75%}.aspect-ratio--3x4-m{padding-bottom:133.33%}.aspect-ratio--6x4-m{padding-bottom:66.6%}.aspect-ratio--4x6-m{padding-bottom:150%}.aspect-ratio--8x5-m{padding-bottom:62.5%}.aspect-ratio--5x8-m{padding-bottom:160%}.aspect-ratio--7x5-m{padding-bottom:71.42%}.aspect-ratio--5x7-m{padding-bottom:140%}.aspect-ratio--1x1-m{padding-bottom:100%}.aspect-ratio--object-m{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:100}.cover-m{background-size:cover!important}.contain-m{background-size:contain!important}.bg-center-m{background-repeat:no-repeat;background-position:center center}.bg-top-m{background-repeat:no-repeat;background-position:top center}.bg-right-m{background-repeat:no-repeat;background-position:center right}.bg-bottom-m{background-repeat:no-repeat;background-position:bottom center}.bg-left-m{background-repeat:no-repeat;background-position:center left}.outline-m{outline:1px solid}.outline-transparent-m{outline:1px solid transparent}.outline-0-m{outline:0}.ba-m{border-style:solid;border-width:1px}.bt-m{border-top-style:solid;border-top-width:1px}.br-m{border-right-style:solid;border-right-width:1px}.bb-m{border-bottom-style:solid;border-bottom-width:1px}.bl-m{border-left-style:solid;border-left-width:1px}.bn-m{border-style:none;border-width:0}.br0-m{border-radius:0}.br1-m{border-radius:.125rem}.br2-m{border-radius:.25rem}.br3-m{border-radius:.5rem}.br4-m{border-radius:1rem}.br-100-m{border-radius:100%}.br-pill-m{border-radius:9999px}.br--bottom-m{border-top-left-radius:0;border-top-right-radius:0}.br--top-m{border-bottom-left-radius:0;border-bottom-right-radius:0}.br--right-m{border-top-left-radius:0;border-bottom-left-radius:0}.br--left-m{border-top-right-radius:0;border-bottom-right-radius:0}.b--dotted-m{border-style:dotted}.b--dashed-m{border-style:dashed}.b--solid-m{border-style:solid}.b--none-m{border-style:none}.bw0-m{border-width:0}.bw1-m{border-width:.125rem}.bw2-m{border-width:.25rem}.bw3-m{border-width:.5rem}.bw4-m{border-width:1rem}.bw5-m{border-width:2rem}.bt-0-m{border-top-width:0}.br-0-m{border-right-width:0}.bb-0-m{border-bottom-width:0}.bl-0-m{border-left-width:0}.shadow-1-m{box-shadow:0 0 4px 2px #0003}.shadow-2-m{box-shadow:0 0 8px 2px #0003}.shadow-3-m{box-shadow:2px 2px 4px 2px #0003}.shadow-4-m{box-shadow:2px 2px 8px #0003}.shadow-5-m{box-shadow:4px 4px 8px #0003}.top-0-m{top:0}.left-0-m{left:0}.right-0-m{right:0}.bottom-0-m{bottom:0}.top-1-m{top:1rem}.left-1-m{left:1rem}.right-1-m{right:1rem}.bottom-1-m{bottom:1rem}.top-2-m{top:2rem}.left-2-m{left:2rem}.right-2-m{right:2rem}.bottom-2-m{bottom:2rem}.top--1-m{top:-1rem}.right--1-m{right:-1rem}.bottom--1-m{bottom:-1rem}.left--1-m{left:-1rem}.top--2-m{top:-2rem}.right--2-m{right:-2rem}.bottom--2-m{bottom:-2rem}.left--2-m{left:-2rem}.absolute--fill-m{top:0;right:0;bottom:0;left:0}.cl-m{clear:left}.cr-m{clear:right}.cb-m{clear:both}.cn-m{clear:none}.dn-m{display:none}.di-m{display:inline}.db-m{display:block}.dib-m{display:inline-block}.dit-m{display:inline-table}.dt-m{display:table}.dtc-m{display:table-cell}.dt-row-m{display:table-row}.dt-row-group-m{display:table-row-group}.dt-column-m{display:table-column}.dt-column-group-m{display:table-column-group}.dt--fixed-m{table-layout:fixed;width:100%}.flex-m{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex-m{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.flex-auto-m{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;min-height:0}.flex-none-m{-webkit-box-flex:0;-ms-flex:none;flex:none}.flex-column-m{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-row-m{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.flex-wrap-m{-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-column-reverse-m{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.flex-row-reverse-m{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.flex-wrap-reverse-m{-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}.items-start-m{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end-m{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center-m{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.items-baseline-m{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.items-stretch-m{-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.self-start-m{-ms-flex-item-align:start;align-self:flex-start}.self-end-m{-ms-flex-item-align:end;align-self:flex-end}.self-center-m{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.self-baseline-m{-ms-flex-item-align:baseline;align-self:baseline}.self-stretch-m{-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch}.justify-start-m{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.justify-end-m{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.justify-center-m{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between-m{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.justify-around-m{-ms-flex-pack:distribute;justify-content:space-around}.content-start-m{-ms-flex-line-pack:start;align-content:flex-start}.content-end-m{-ms-flex-line-pack:end;align-content:flex-end}.content-center-m{-ms-flex-line-pack:center;align-content:center}.content-between-m{-ms-flex-line-pack:justify;align-content:space-between}.content-around-m{-ms-flex-line-pack:distribute;align-content:space-around}.content-stretch-m{-ms-flex-line-pack:stretch;align-content:stretch}.order-0-m{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0}.order-1-m{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.order-2-m{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2}.order-3-m{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3}.order-4-m{-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4}.order-5-m{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5}.order-6-m{-webkit-box-ordinal-group:7;-ms-flex-order:6;order:6}.order-7-m{-webkit-box-ordinal-group:8;-ms-flex-order:7;order:7}.order-8-m{-webkit-box-ordinal-group:9;-ms-flex-order:8;order:8}.order-last-m{-webkit-box-ordinal-group:100000;-ms-flex-order:99999;order:99999}.fl-m{float:left;display:inline}.fr-m{float:right;display:inline}.fn-m{float:none}.i-m{font-style:italic}.fs-normal-m{font-style:normal}.normal-m{font-weight:400}.b-m{font-weight:700}.fw1-m{font-weight:100}.fw2-m{font-weight:200}.fw3-m{font-weight:300}.fw4-m{font-weight:400}.fw5-m{font-weight:500}.fw6-m{font-weight:600}.fw7-m{font-weight:700}.fw8-m{font-weight:800}.fw9-m{font-weight:900}.h1-m{height:1rem}.h2-m{height:2rem}.h3-m{height:4rem}.h4-m{height:8rem}.h5-m{height:16rem}.h-25-m{height:25%}.h-50-m{height:50%}.h-75-m{height:75%}.h-100-m{height:100%}.min-h-100-m{min-height:100%}.vh-25-m{height:25vh}.vh-50-m{height:50vh}.vh-75-m{height:75vh}.vh-100-m{height:100vh}.min-vh-100-m{min-height:100vh}.h-auto-m{height:auto}.h-inherit-m{height:inherit}.tracked-m{letter-spacing:.1em}.tracked-tight-m{letter-spacing:-.05em}.tracked-mega-m{letter-spacing:.25em}.lh-solid-m{line-height:1}.lh-title-m{line-height:1.25}.lh-copy-m{line-height:1.5}.mw-100-m{max-width:100%}.mw1-m{max-width:1rem}.mw2-m{max-width:2rem}.mw3-m{max-width:4rem}.mw4-m{max-width:8rem}.mw5-m{max-width:16rem}.mw6-m{max-width:32rem}.mw7-m{max-width:48rem}.mw8-m{max-width:64rem}.mw9-m{max-width:96rem}.mw-none-m{max-width:none}.w1-m{width:1rem}.w2-m{width:2rem}.w3-m{width:4rem}.w4-m{width:8rem}.w5-m{width:16rem}.w6-m{width:24rem}.w-10-m{width:10%}.w-20-m{width:20%}.w-25-m{width:25%}.w-30-m{width:30%}.w-33-m{width:33%}.w-34-m{width:34%}.w-40-m{width:40%}.w-50-m{width:50%}.w-60-m{width:60%}.w-70-m{width:70%}.w-75-m{width:75%}.w-80-m{width:80%}.w-90-m{width:90%}.w-100-m{width:100%}.w-third-m{width:calc(100% / 3)}.w-two-thirds-m{width:calc(100% / 1.5)}.w-auto-m{width:auto}.overflow-visible-m{overflow:visible}.overflow-hidden-m{overflow:hidden}.overflow-scroll-m{overflow:scroll}.overflow-auto-m{overflow:auto}.overflow-x-visible-m{overflow-x:visible}.overflow-x-hidden-m{overflow-x:hidden}.overflow-x-scroll-m{overflow-x:scroll}.overflow-x-auto-m{overflow-x:auto}.overflow-y-visible-m{overflow-y:visible}.overflow-y-hidden-m{overflow-y:hidden}.overflow-y-scroll-m{overflow-y:scroll}.overflow-y-auto-m{overflow-y:auto}.static-m{position:static}.relative-m{position:relative}.absolute-m{position:absolute}.fixed-m{position:fixed}.rotate-45-m{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.rotate-90-m{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.rotate-135-m{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.rotate-180-m{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.rotate-225-m{-webkit-transform:rotate(225deg);transform:rotate(225deg)}.rotate-270-m{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.rotate-315-m{-webkit-transform:rotate(315deg);transform:rotate(315deg)}.pa0-m{padding:0}.pa1-m{padding:.25rem}.pa2-m{padding:.5rem}.pa3-m{padding:1rem}.pa4-m{padding:2rem}.pa5-m{padding:4rem}.pa6-m{padding:8rem}.pa7-m{padding:16rem}.pl0-m{padding-left:0}.pl1-m{padding-left:.25rem}.pl2-m{padding-left:.5rem}.pl3-m{padding-left:1rem}.pl4-m{padding-left:2rem}.pl5-m{padding-left:4rem}.pl6-m{padding-left:8rem}.pl7-m{padding-left:16rem}.pr0-m{padding-right:0}.pr1-m{padding-right:.25rem}.pr2-m{padding-right:.5rem}.pr3-m{padding-right:1rem}.pr4-m{padding-right:2rem}.pr5-m{padding-right:4rem}.pr6-m{padding-right:8rem}.pr7-m{padding-right:16rem}.pb0-m{padding-bottom:0}.pb1-m{padding-bottom:.25rem}.pb2-m{padding-bottom:.5rem}.pb3-m{padding-bottom:1rem}.pb4-m{padding-bottom:2rem}.pb5-m{padding-bottom:4rem}.pb6-m{padding-bottom:8rem}.pb7-m{padding-bottom:16rem}.pt0-m{padding-top:0}.pt1-m{padding-top:.25rem}.pt2-m{padding-top:.5rem}.pt3-m{padding-top:1rem}.pt4-m{padding-top:2rem}.pt5-m{padding-top:4rem}.pt6-m{padding-top:8rem}.pt7-m{padding-top:16rem}.pv0-m{padding-top:0;padding-bottom:0}.pv1-m{padding-top:.25rem;padding-bottom:.25rem}.pv2-m{padding-top:.5rem;padding-bottom:.5rem}.pv3-m{padding-top:1rem;padding-bottom:1rem}.pv4-m{padding-top:2rem;padding-bottom:2rem}.pv5-m{padding-top:4rem;padding-bottom:4rem}.pv6-m{padding-top:8rem;padding-bottom:8rem}.pv7-m{padding-top:16rem;padding-bottom:16rem}.ph0-m{padding-left:0;padding-right:0}.ph1-m{padding-left:.25rem;padding-right:.25rem}.ph2-m{padding-left:.5rem;padding-right:.5rem}.ph3-m{padding-left:1rem;padding-right:1rem}.ph4-m{padding-left:2rem;padding-right:2rem}.ph5-m{padding-left:4rem;padding-right:4rem}.ph6-m{padding-left:8rem;padding-right:8rem}.ph7-m{padding-left:16rem;padding-right:16rem}.ma0-m{margin:0}.ma1-m{margin:.25rem}.ma2-m{margin:.5rem}.ma3-m{margin:1rem}.ma4-m{margin:2rem}.ma5-m{margin:4rem}.ma6-m{margin:8rem}.ma7-m{margin:16rem}.ml0-m{margin-left:0}.ml1-m{margin-left:.25rem}.ml2-m{margin-left:.5rem}.ml3-m{margin-left:1rem}.ml4-m{margin-left:2rem}.ml5-m{margin-left:4rem}.ml6-m{margin-left:8rem}.ml7-m{margin-left:16rem}.mr0-m{margin-right:0}.mr1-m{margin-right:.25rem}.mr2-m{margin-right:.5rem}.mr3-m{margin-right:1rem}.mr4-m{margin-right:2rem}.mr5-m{margin-right:4rem}.mr6-m{margin-right:8rem}.mr7-m{margin-right:16rem}.mb0-m{margin-bottom:0}.mb1-m{margin-bottom:.25rem}.mb2-m{margin-bottom:.5rem}.mb3-m{margin-bottom:1rem}.mb4-m{margin-bottom:2rem}.mb5-m{margin-bottom:4rem}.mb6-m{margin-bottom:8rem}.mb7-m{margin-bottom:16rem}.mt0-m{margin-top:0}.mt1-m{margin-top:.25rem}.mt2-m{margin-top:.5rem}.mt3-m{margin-top:1rem}.mt4-m{margin-top:2rem}.mt5-m{margin-top:4rem}.mt6-m{margin-top:8rem}.mt7-m{margin-top:16rem}.mv0-m{margin-top:0;margin-bottom:0}.mv1-m{margin-top:.25rem;margin-bottom:.25rem}.mv2-m{margin-top:.5rem;margin-bottom:.5rem}.mv3-m{margin-top:1rem;margin-bottom:1rem}.mv4-m{margin-top:2rem;margin-bottom:2rem}.mv5-m{margin-top:4rem;margin-bottom:4rem}.mv6-m{margin-top:8rem;margin-bottom:8rem}.mv7-m{margin-top:16rem;margin-bottom:16rem}.mh0-m{margin-left:0;margin-right:0}.mh1-m{margin-left:.25rem;margin-right:.25rem}.mh2-m{margin-left:.5rem;margin-right:.5rem}.mh3-m{margin-left:1rem;margin-right:1rem}.mh4-m{margin-left:2rem;margin-right:2rem}.mh5-m{margin-left:4rem;margin-right:4rem}.mh6-m{margin-left:8rem;margin-right:8rem}.mh7-m{margin-left:16rem;margin-right:16rem}.na1-m{margin:-.25rem}.na2-m{margin:-.5rem}.na3-m{margin:-1rem}.na4-m{margin:-2rem}.na5-m{margin:-4rem}.na6-m{margin:-8rem}.na7-m{margin:-16rem}.nl1-m{margin-left:-.25rem}.nl2-m{margin-left:-.5rem}.nl3-m{margin-left:-1rem}.nl4-m{margin-left:-2rem}.nl5-m{margin-left:-4rem}.nl6-m{margin-left:-8rem}.nl7-m{margin-left:-16rem}.nr1-m{margin-right:-.25rem}.nr2-m{margin-right:-.5rem}.nr3-m{margin-right:-1rem}.nr4-m{margin-right:-2rem}.nr5-m{margin-right:-4rem}.nr6-m{margin-right:-8rem}.nr7-m{margin-right:-16rem}.nb1-m{margin-bottom:-.25rem}.nb2-m{margin-bottom:-.5rem}.nb3-m{margin-bottom:-1rem}.nb4-m{margin-bottom:-2rem}.nb5-m{margin-bottom:-4rem}.nb6-m{margin-bottom:-8rem}.nb7-m{margin-bottom:-16rem}.nt1-m{margin-top:-.25rem}.nt2-m{margin-top:-.5rem}.nt3-m{margin-top:-1rem}.nt4-m{margin-top:-2rem}.nt5-m{margin-top:-4rem}.nt6-m{margin-top:-8rem}.nt7-m{margin-top:-16rem}.strike-m{text-decoration:line-through}.underline-m{text-decoration:underline}.no-underline-m{text-decoration:none}.tl-m{text-align:left}.tr-m{text-align:right}.tc-m{text-align:center}.ttc-m{text-transform:capitalize}.ttl-m{text-transform:lowercase}.ttu-m{text-transform:uppercase}.ttn-m{text-transform:none}.f-6-m,.f-headline-m{font-size:6rem}.f-5-m,.f-subheadline-m{font-size:5rem}.f1-m{font-size:3rem}.f2-m{font-size:2.25rem}.f3-m{font-size:1.5rem}.f4-m{font-size:1.25rem}.f5-m{font-size:1rem}.f6-m{font-size:.875rem}.f7-m{font-size:.75rem}.measure-m{max-width:30em}.measure-wide-m{max-width:34em}.measure-narrow-m{max-width:20em}.indent-m{text-indent:1em;margin-top:0;margin-bottom:0}.small-caps-m{font-variant:small-caps}.truncate-m{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.center-m{margin-right:auto;margin-left:auto}.clip-m{position:fixed!important;position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}.ws-normal-m{white-space:normal}.nowrap-m{white-space:nowrap}.pre-m{white-space:pre}.v-base-m{vertical-align:baseline}.v-mid-m{vertical-align:middle}.v-top-m{vertical-align:top}.v-btm-m{vertical-align:bottom}}@media screen and (min-width: 60em){.aspect-ratio-l{height:0;position:relative}.aspect-ratio--16x9-l{padding-bottom:56.25%}.aspect-ratio--9x16-l{padding-bottom:177.77%}.aspect-ratio--4x3-l{padding-bottom:75%}.aspect-ratio--3x4-l{padding-bottom:133.33%}.aspect-ratio--6x4-l{padding-bottom:66.6%}.aspect-ratio--4x6-l{padding-bottom:150%}.aspect-ratio--8x5-l{padding-bottom:62.5%}.aspect-ratio--5x8-l{padding-bottom:160%}.aspect-ratio--7x5-l{padding-bottom:71.42%}.aspect-ratio--5x7-l{padding-bottom:140%}.aspect-ratio--1x1-l{padding-bottom:100%}.aspect-ratio--object-l{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:100}.cover-l{background-size:cover!important}.contain-l{background-size:contain!important}.bg-center-l{background-repeat:no-repeat;background-position:center center}.bg-top-l{background-repeat:no-repeat;background-position:top center}.bg-right-l{background-repeat:no-repeat;background-position:center right}.bg-bottom-l{background-repeat:no-repeat;background-position:bottom center}.bg-left-l{background-repeat:no-repeat;background-position:center left}.outline-l{outline:1px solid}.outline-transparent-l{outline:1px solid transparent}.outline-0-l{outline:0}.ba-l{border-style:solid;border-width:1px}.bt-l{border-top-style:solid;border-top-width:1px}.br-l{border-right-style:solid;border-right-width:1px}.bb-l{border-bottom-style:solid;border-bottom-width:1px}.bl-l{border-left-style:solid;border-left-width:1px}.bn-l{border-style:none;border-width:0}.br0-l{border-radius:0}.br1-l{border-radius:.125rem}.br2-l{border-radius:.25rem}.br3-l{border-radius:.5rem}.br4-l{border-radius:1rem}.br-100-l{border-radius:100%}.br-pill-l{border-radius:9999px}.br--bottom-l{border-top-left-radius:0;border-top-right-radius:0}.br--top-l{border-bottom-left-radius:0;border-bottom-right-radius:0}.br--right-l{border-top-left-radius:0;border-bottom-left-radius:0}.br--left-l{border-top-right-radius:0;border-bottom-right-radius:0}.b--dotted-l{border-style:dotted}.b--dashed-l{border-style:dashed}.b--solid-l{border-style:solid}.b--none-l{border-style:none}.bw0-l{border-width:0}.bw1-l{border-width:.125rem}.bw2-l{border-width:.25rem}.bw3-l{border-width:.5rem}.bw4-l{border-width:1rem}.bw5-l{border-width:2rem}.bt-0-l{border-top-width:0}.br-0-l{border-right-width:0}.bb-0-l{border-bottom-width:0}.bl-0-l{border-left-width:0}.shadow-1-l{box-shadow:0 0 4px 2px #0003}.shadow-2-l{box-shadow:0 0 8px 2px #0003}.shadow-3-l{box-shadow:2px 2px 4px 2px #0003}.shadow-4-l{box-shadow:2px 2px 8px #0003}.shadow-5-l{box-shadow:4px 4px 8px #0003}.top-0-l{top:0}.left-0-l{left:0}.right-0-l{right:0}.bottom-0-l{bottom:0}.top-1-l{top:1rem}.left-1-l{left:1rem}.right-1-l{right:1rem}.bottom-1-l{bottom:1rem}.top-2-l{top:2rem}.left-2-l{left:2rem}.right-2-l{right:2rem}.bottom-2-l{bottom:2rem}.top--1-l{top:-1rem}.right--1-l{right:-1rem}.bottom--1-l{bottom:-1rem}.left--1-l{left:-1rem}.top--2-l{top:-2rem}.right--2-l{right:-2rem}.bottom--2-l{bottom:-2rem}.left--2-l{left:-2rem}.absolute--fill-l{top:0;right:0;bottom:0;left:0}.cl-l{clear:left}.cr-l{clear:right}.cb-l{clear:both}.cn-l{clear:none}.dn-l{display:none}.di-l{display:inline}.db-l{display:block}.dib-l{display:inline-block}.dit-l{display:inline-table}.dt-l{display:table}.dtc-l{display:table-cell}.dt-row-l{display:table-row}.dt-row-group-l{display:table-row-group}.dt-column-l{display:table-column}.dt-column-group-l{display:table-column-group}.dt--fixed-l{table-layout:fixed;width:100%}.flex-l{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex-l{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.flex-auto-l{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;min-height:0}.flex-none-l{-webkit-box-flex:0;-ms-flex:none;flex:none}.flex-column-l{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-row-l{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.flex-wrap-l{-ms-flex-wrap:wrap;flex-wrap:wrap}.flex-column-reverse-l{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.flex-row-reverse-l{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.flex-wrap-reverse-l{-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}.items-start-l{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end-l{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center-l{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.items-baseline-l{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.items-stretch-l{-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.self-start-l{-ms-flex-item-align:start;align-self:flex-start}.self-end-l{-ms-flex-item-align:end;align-self:flex-end}.self-center-l{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.self-baseline-l{-ms-flex-item-align:baseline;align-self:baseline}.self-stretch-l{-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch}.justify-start-l{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.justify-end-l{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.justify-center-l{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between-l{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.justify-around-l{-ms-flex-pack:distribute;justify-content:space-around}.content-start-l{-ms-flex-line-pack:start;align-content:flex-start}.content-end-l{-ms-flex-line-pack:end;align-content:flex-end}.content-center-l{-ms-flex-line-pack:center;align-content:center}.content-between-l{-ms-flex-line-pack:justify;align-content:space-between}.content-around-l{-ms-flex-line-pack:distribute;align-content:space-around}.content-stretch-l{-ms-flex-line-pack:stretch;align-content:stretch}.order-0-l{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0}.order-1-l{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.order-2-l{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2}.order-3-l{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3}.order-4-l{-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4}.order-5-l{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5}.order-6-l{-webkit-box-ordinal-group:7;-ms-flex-order:6;order:6}.order-7-l{-webkit-box-ordinal-group:8;-ms-flex-order:7;order:7}.order-8-l{-webkit-box-ordinal-group:9;-ms-flex-order:8;order:8}.order-last-l{-webkit-box-ordinal-group:100000;-ms-flex-order:99999;order:99999}.fl-l{float:left;display:inline}.fr-l{float:right;display:inline}.fn-l{float:none}.i-l{font-style:italic}.fs-normal-l{font-style:normal}.normal-l{font-weight:400}.b-l{font-weight:700}.fw1-l{font-weight:100}.fw2-l{font-weight:200}.fw3-l{font-weight:300}.fw4-l{font-weight:400}.fw5-l{font-weight:500}.fw6-l{font-weight:600}.fw7-l{font-weight:700}.fw8-l{font-weight:800}.fw9-l{font-weight:900}.h1-l{height:1rem}.h2-l{height:2rem}.h3-l{height:4rem}.h4-l{height:8rem}.h5-l{height:16rem}.h-25-l{height:25%}.h-50-l{height:50%}.h-75-l{height:75%}.h-100-l{height:100%}.min-h-100-l{min-height:100%}.vh-25-l{height:25vh}.vh-50-l{height:50vh}.vh-75-l{height:75vh}.vh-100-l{height:100vh}.min-vh-100-l{min-height:100vh}.h-auto-l{height:auto}.h-inherit-l{height:inherit}.tracked-l{letter-spacing:.1em}.tracked-tight-l{letter-spacing:-.05em}.tracked-mega-l{letter-spacing:.25em}.lh-solid-l{line-height:1}.lh-title-l{line-height:1.25}.lh-copy-l{line-height:1.5}.mw-100-l{max-width:100%}.mw1-l{max-width:1rem}.mw2-l{max-width:2rem}.mw3-l{max-width:4rem}.mw4-l{max-width:8rem}.mw5-l{max-width:16rem}.mw6-l{max-width:32rem}.mw7-l{max-width:48rem}.mw8-l{max-width:64rem}.mw9-l{max-width:96rem}.mw-none-l{max-width:none}.w1-l{width:1rem}.w2-l{width:2rem}.w3-l{width:4rem}.w4-l{width:8rem}.w5-l{width:16rem}.w6-l{width:24rem}.w-10-l{width:10%}.w-20-l{width:20%}.w-25-l{width:25%}.w-30-l{width:30%}.w-33-l{width:33%}.w-34-l{width:34%}.w-40-l{width:40%}.w-50-l{width:50%}.w-60-l{width:60%}.w-70-l{width:70%}.w-75-l{width:75%}.w-80-l{width:80%}.w-90-l{width:90%}.w-100-l{width:100%}.w-third-l{width:calc(100% / 3)}.w-two-thirds-l{width:calc(100% / 1.5)}.w-auto-l{width:auto}.overflow-visible-l{overflow:visible}.overflow-hidden-l{overflow:hidden}.overflow-scroll-l{overflow:scroll}.overflow-auto-l{overflow:auto}.overflow-x-visible-l{overflow-x:visible}.overflow-x-hidden-l{overflow-x:hidden}.overflow-x-scroll-l{overflow-x:scroll}.overflow-x-auto-l{overflow-x:auto}.overflow-y-visible-l{overflow-y:visible}.overflow-y-hidden-l{overflow-y:hidden}.overflow-y-scroll-l{overflow-y:scroll}.overflow-y-auto-l{overflow-y:auto}.static-l{position:static}.relative-l{position:relative}.absolute-l{position:absolute}.fixed-l{position:fixed}.rotate-45-l{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.rotate-90-l{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.rotate-135-l{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.rotate-180-l{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.rotate-225-l{-webkit-transform:rotate(225deg);transform:rotate(225deg)}.rotate-270-l{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.rotate-315-l{-webkit-transform:rotate(315deg);transform:rotate(315deg)}.pa0-l{padding:0}.pa1-l{padding:.25rem}.pa2-l{padding:.5rem}.pa3-l{padding:1rem}.pa4-l{padding:2rem}.pa5-l{padding:4rem}.pa6-l{padding:8rem}.pa7-l{padding:16rem}.pl0-l{padding-left:0}.pl1-l{padding-left:.25rem}.pl2-l{padding-left:.5rem}.pl3-l{padding-left:1rem}.pl4-l{padding-left:2rem}.pl5-l{padding-left:4rem}.pl6-l{padding-left:8rem}.pl7-l{padding-left:16rem}.pr0-l{padding-right:0}.pr1-l{padding-right:.25rem}.pr2-l{padding-right:.5rem}.pr3-l{padding-right:1rem}.pr4-l{padding-right:2rem}.pr5-l{padding-right:4rem}.pr6-l{padding-right:8rem}.pr7-l{padding-right:16rem}.pb0-l{padding-bottom:0}.pb1-l{padding-bottom:.25rem}.pb2-l{padding-bottom:.5rem}.pb3-l{padding-bottom:1rem}.pb4-l{padding-bottom:2rem}.pb5-l{padding-bottom:4rem}.pb6-l{padding-bottom:8rem}.pb7-l{padding-bottom:16rem}.pt0-l{padding-top:0}.pt1-l{padding-top:.25rem}.pt2-l{padding-top:.5rem}.pt3-l{padding-top:1rem}.pt4-l{padding-top:2rem}.pt5-l{padding-top:4rem}.pt6-l{padding-top:8rem}.pt7-l{padding-top:16rem}.pv0-l{padding-top:0;padding-bottom:0}.pv1-l{padding-top:.25rem;padding-bottom:.25rem}.pv2-l{padding-top:.5rem;padding-bottom:.5rem}.pv3-l{padding-top:1rem;padding-bottom:1rem}.pv4-l{padding-top:2rem;padding-bottom:2rem}.pv5-l{padding-top:4rem;padding-bottom:4rem}.pv6-l{padding-top:8rem;padding-bottom:8rem}.pv7-l{padding-top:16rem;padding-bottom:16rem}.ph0-l{padding-left:0;padding-right:0}.ph1-l{padding-left:.25rem;padding-right:.25rem}.ph2-l{padding-left:.5rem;padding-right:.5rem}.ph3-l{padding-left:1rem;padding-right:1rem}.ph4-l{padding-left:2rem;padding-right:2rem}.ph5-l{padding-left:4rem;padding-right:4rem}.ph6-l{padding-left:8rem;padding-right:8rem}.ph7-l{padding-left:16rem;padding-right:16rem}.ma0-l{margin:0}.ma1-l{margin:.25rem}.ma2-l{margin:.5rem}.ma3-l{margin:1rem}.ma4-l{margin:2rem}.ma5-l{margin:4rem}.ma6-l{margin:8rem}.ma7-l{margin:16rem}.ml0-l{margin-left:0}.ml1-l{margin-left:.25rem}.ml2-l{margin-left:.5rem}.ml3-l{margin-left:1rem}.ml4-l{margin-left:2rem}.ml5-l{margin-left:4rem}.ml6-l{margin-left:8rem}.ml7-l{margin-left:16rem}.mr0-l{margin-right:0}.mr1-l{margin-right:.25rem}.mr2-l{margin-right:.5rem}.mr3-l{margin-right:1rem}.mr4-l{margin-right:2rem}.mr5-l{margin-right:4rem}.mr6-l{margin-right:8rem}.mr7-l{margin-right:16rem}.mb0-l{margin-bottom:0}.mb1-l{margin-bottom:.25rem}.mb2-l{margin-bottom:.5rem}.mb3-l{margin-bottom:1rem}.mb4-l{margin-bottom:2rem}.mb5-l{margin-bottom:4rem}.mb6-l{margin-bottom:8rem}.mb7-l{margin-bottom:16rem}.mt0-l{margin-top:0}.mt1-l{margin-top:.25rem}.mt2-l{margin-top:.5rem}.mt3-l{margin-top:1rem}.mt4-l{margin-top:2rem}.mt5-l{margin-top:4rem}.mt6-l{margin-top:8rem}.mt7-l{margin-top:16rem}.mv0-l{margin-top:0;margin-bottom:0}.mv1-l{margin-top:.25rem;margin-bottom:.25rem}.mv2-l{margin-top:.5rem;margin-bottom:.5rem}.mv3-l{margin-top:1rem;margin-bottom:1rem}.mv4-l{margin-top:2rem;margin-bottom:2rem}.mv5-l{margin-top:4rem;margin-bottom:4rem}.mv6-l{margin-top:8rem;margin-bottom:8rem}.mv7-l{margin-top:16rem;margin-bottom:16rem}.mh0-l{margin-left:0;margin-right:0}.mh1-l{margin-left:.25rem;margin-right:.25rem}.mh2-l{margin-left:.5rem;margin-right:.5rem}.mh3-l{margin-left:1rem;margin-right:1rem}.mh4-l{margin-left:2rem;margin-right:2rem}.mh5-l{margin-left:4rem;margin-right:4rem}.mh6-l{margin-left:8rem;margin-right:8rem}.mh7-l{margin-left:16rem;margin-right:16rem}.na1-l{margin:-.25rem}.na2-l{margin:-.5rem}.na3-l{margin:-1rem}.na4-l{margin:-2rem}.na5-l{margin:-4rem}.na6-l{margin:-8rem}.na7-l{margin:-16rem}.nl1-l{margin-left:-.25rem}.nl2-l{margin-left:-.5rem}.nl3-l{margin-left:-1rem}.nl4-l{margin-left:-2rem}.nl5-l{margin-left:-4rem}.nl6-l{margin-left:-8rem}.nl7-l{margin-left:-16rem}.nr1-l{margin-right:-.25rem}.nr2-l{margin-right:-.5rem}.nr3-l{margin-right:-1rem}.nr4-l{margin-right:-2rem}.nr5-l{margin-right:-4rem}.nr6-l{margin-right:-8rem}.nr7-l{margin-right:-16rem}.nb1-l{margin-bottom:-.25rem}.nb2-l{margin-bottom:-.5rem}.nb3-l{margin-bottom:-1rem}.nb4-l{margin-bottom:-2rem}.nb5-l{margin-bottom:-4rem}.nb6-l{margin-bottom:-8rem}.nb7-l{margin-bottom:-16rem}.nt1-l{margin-top:-.25rem}.nt2-l{margin-top:-.5rem}.nt3-l{margin-top:-1rem}.nt4-l{margin-top:-2rem}.nt5-l{margin-top:-4rem}.nt6-l{margin-top:-8rem}.nt7-l{margin-top:-16rem}.strike-l{text-decoration:line-through}.underline-l{text-decoration:underline}.no-underline-l{text-decoration:none}.tl-l{text-align:left}.tr-l{text-align:right}.tc-l{text-align:center}.ttc-l{text-transform:capitalize}.ttl-l{text-transform:lowercase}.ttu-l{text-transform:uppercase}.ttn-l{text-transform:none}.f-6-l,.f-headline-l{font-size:6rem}.f-5-l,.f-subheadline-l{font-size:5rem}.f1-l{font-size:3rem}.f2-l{font-size:2.25rem}.f3-l{font-size:1.5rem}.f4-l{font-size:1.25rem}.f5-l{font-size:1rem}.f6-l{font-size:.875rem}.f7-l{font-size:.75rem}.measure-l{max-width:30em}.measure-wide-l{max-width:34em}.measure-narrow-l{max-width:20em}.indent-l{text-indent:1em;margin-top:0;margin-bottom:0}.small-caps-l{font-variant:small-caps}.truncate-l{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.center-l{margin-right:auto;margin-left:auto}.clip-l{position:fixed!important;position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px)}.ws-normal-l{white-space:normal}.nowrap-l{white-space:nowrap}.pre-l{white-space:pre}.v-base-l{vertical-align:baseline}.v-mid-l{vertical-align:middle}.v-top-l{vertical-align:top}.v-btm-l{vertical-align:bottom}}
`)(),codemirror=(()=>`.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid black;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:#14ff1480;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3,.cm-s-default .cm-type{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error,.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:white}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-vscrollbar,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors,.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:#ff06}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}
`)(),tomorrowNightEighties=(()=>`.CodeMirror{background:rgba(0,0,0,0);transition:background-color .3s ease;color:#ccc;font-size:18px;height:100%}span span.CodeMirror-selectedtext{background:#666666}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:rgba(45,45,45,.99)}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:rgba(45,45,45,.99)}.CodeMirror-gutters{background:#000000;border-right:0px}.CodeMirror-guttermarker{color:#f2777a}.CodeMirror-guttermarker-subtle{color:#777}.CodeMirror-linenumber{color:#515151}.CodeMirror-cursor{border-left:3px solid #999}.cm-s-tomorrow-night-eighties span span.CodeMirror-selectedtext{background:#666666}.cm-s-tomorrow-night-eighties .CodeMirror-line::selection,.cm-s-tomorrow-night-eighties .CodeMirror-line>span::selection,.cm-s-tomorrow-night-eighties .CodeMirror-line>span>span::selection{background:rgba(45,45,45,.99)}.cm-s-tomorrow-night-eighties .CodeMirror-line::-moz-selection,.cm-s-tomorrow-night-eighties .CodeMirror-line>span::-moz-selection,.cm-s-tomorrow-night-eighties .CodeMirror-line>span>span::-moz-selection{background:rgba(45,45,45,.99)}.cm-s-tomorrow-night-eighties .CodeMirror-gutters{background:#000000;border-right:0px}.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker{color:#f2777a}.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker-subtle{color:#777}.cm-s-tomorrow-night-eighties .CodeMirror-linenumber{color:#515151}.cm-s-tomorrow-night-eighties .CodeMirror-cursor{border-left:3px solid #999}.cm-s-tomorrow-night-eighties .CodeMirror-line span span{background-color:#0000;transition:background-color .3s ease}.cm-s-tomorrow-night-eighties span.cm-comment{color:#d27b53}.cm-s-tomorrow-night-eighties span.cm-atom,.cm-s-tomorrow-night-eighties span.cm-number{color:#a16a94}.cm-s-tomorrow-night-eighties span.cm-property,.cm-s-tomorrow-night-eighties span.cm-attribute{color:#9c9}.cm-s-tomorrow-night-eighties span.cm-keyword{color:#f2777a}.cm-s-tomorrow-night-eighties span.cm-string{color:#fc6}.cm-s-tomorrow-night-eighties span.cm-variable{color:#9c9}.cm-s-tomorrow-night-eighties span.cm-variable-2{color:#69c}.cm-s-tomorrow-night-eighties span.cm-def{color:#f99157}.cm-s-tomorrow-night-eighties span.cm-bracket{color:#ccc}.cm-s-tomorrow-night-eighties span.cm-tag{color:#f2777a}.cm-s-tomorrow-night-eighties span.cm-link{color:#a16a94}.cm-s-tomorrow-night-eighties span.cm-error{background:#f2777a;color:#6a6a6a}.cm-s-tomorrow-night-eighties .CodeMirror-activeline-background{background:#343600}.cm-s-tomorrow-night-eighties .CodeMirror-matchingbracket{text-decoration:underline;color:#fff!important}
`)(),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(n){var c=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(e,n,c.get?c:{enumerable:!0,get:function(){return s[n]}})}),e}var hyperscriptAttributeToProperty=attributeToProperty,transform$1={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function attributeToProperty(s){return function(e,n,c){for(var h in n)h in transform$1&&(n[transform$1[h]]=n[h],delete n[h]);return s(e,n,c)}}var attrToProp=hyperscriptAttributeToProperty,VAR=0,TEXT=1,OPEN=2,CLOSE=3,ATTR=4,ATTR_KEY=5,ATTR_KEY_W=6,ATTR_VALUE_W=7,ATTR_VALUE=8,ATTR_VALUE_SQ=9,ATTR_VALUE_DQ=10,ATTR_EQ=11,ATTR_BREAK=12,COMMENT=13,hyperx$1=function(s,e){e||(e={});var n=e.concat||function(h,u){return String(h)+String(u)};return e.attrToProp!==!1&&(s=attrToProp(s)),function(h){for(var u=TEXT,d="",m=arguments.length,g=[],b=0;b<h.length;b++)if(b<m-1){var O=arguments[b+1],v=R(h[b]),y=u;y===ATTR_VALUE_DQ&&(y=ATTR_VALUE),y===ATTR_VALUE_SQ&&(y=ATTR_VALUE),y===ATTR_VALUE_W&&(y=ATTR_VALUE),y===ATTR&&(y=ATTR_KEY),y===OPEN?d==="/"?(v.push([OPEN,"/",O]),d=""):v.push([OPEN,O]):y===COMMENT&&e.comments?d+=String(O):y!==COMMENT&&v.push([VAR,y,O]),g.push.apply(g,v)}else g.push.apply(g,R(h[b]));for(var w=[null,{},[]],S=[[w,-1]],b=0;b<g.length;b++){var A=S[S.length-1][0],v=g[b],E=v[0];if(E===OPEN&&/^\//.test(v[1])){var P=S[S.length-1][1];S.length>1&&(S.pop(),S[S.length-1][0][2][P]=s(A[0],A[1],A[2].length?A[2]:void 0))}else if(E===OPEN){var I=[v[1],{},[]];A[2].push(I),S.push([I,A[2].length-1])}else if(E===ATTR_KEY||E===VAR&&v[1]===ATTR_KEY){for(var U="",z;b<g.length;b++)if(g[b][0]===ATTR_KEY)U=n(U,g[b][1]);else if(g[b][0]===VAR&&g[b][1]===ATTR_KEY)if(typeof g[b][2]=="object"&&!U)for(z in g[b][2])g[b][2].hasOwnProperty(z)&&!A[1][z]&&(A[1][z]=g[b][2][z]);else U=n(U,g[b][2]);else break;g[b][0]===ATTR_EQ&&b++;for(var N=b;b<g.length;b++)if(g[b][0]===ATTR_VALUE||g[b][0]===ATTR_KEY)A[1][U]?g[b][1]===""||(A[1][U]=n(A[1][U],g[b][1])):A[1][U]=c(g[b][1]);else if(g[b][0]===VAR&&(g[b][1]===ATTR_VALUE||g[b][1]===ATTR_KEY))A[1][U]?g[b][2]===""||(A[1][U]=n(A[1][U],g[b][2])):A[1][U]=c(g[b][2]);else{U.length&&!A[1][U]&&b===N&&(g[b][0]===CLOSE||g[b][0]===ATTR_BREAK)&&(A[1][U]=U.toLowerCase()),g[b][0]===CLOSE&&b--;break}}else if(E===ATTR_KEY)A[1][v[1]]=!0;else if(E===VAR&&v[1]===ATTR_KEY)A[1][v[2]]=!0;else if(E===CLOSE){if(selfClosing(A[0])&&S.length){var P=S[S.length-1][1];S.pop(),S[S.length-1][0][2][P]=s(A[0],A[1],A[2].length?A[2]:void 0)}}else if(E===VAR&&v[1]===TEXT)v[2]===void 0||v[2]===null?v[2]="":v[2]||(v[2]=n("",v[2])),Array.isArray(v[2][0])?A[2].push.apply(A[2],v[2]):A[2].push(v[2]);else if(E===TEXT)A[2].push(v[1]);else if(!(E===ATTR_EQ||E===ATTR_BREAK))throw new Error("unhandled: "+E)}if(w[2].length>1&&/^\s*$/.test(w[2][0])&&w[2].shift(),w[2].length>2||w[2].length===2&&/\S/.test(w[2][1])){if(e.createFragment)return e.createFragment(w[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(w[2][0])&&typeof w[2][0][0]=="string"&&Array.isArray(w[2][0][2])&&(w[2][0]=s(w[2][0][0],w[2][0][1],w[2][0][2])),w[2][0];function R(F){var D=[];u===ATTR_VALUE_W&&(u=ATTR);for(var de=0;de<F.length;de++){var H=F.charAt(de);u===TEXT&&H==="<"?(d.length&&D.push([TEXT,d]),d="",u=OPEN):H===">"&&!quot(u)&&u!==COMMENT?(u===OPEN&&d.length?D.push([OPEN,d]):u===ATTR_KEY?D.push([ATTR_KEY,d]):u===ATTR_VALUE&&d.length&&D.push([ATTR_VALUE,d]),D.push([CLOSE]),d="",u=TEXT):u===COMMENT&&/-$/.test(d)&&H==="-"?(e.comments&&D.push([ATTR_VALUE,d.substr(0,d.length-1)]),d="",u=TEXT):u===OPEN&&/^!--$/.test(d)?(e.comments&&D.push([OPEN,d],[ATTR_KEY,"comment"],[ATTR_EQ]),d=H,u=COMMENT):u===TEXT||u===COMMENT?d+=H:u===OPEN&&H==="/"&&d.length||(u===OPEN&&/\s/.test(H)?(d.length&&D.push([OPEN,d]),d="",u=ATTR):u===OPEN?d+=H:u===ATTR&&/[^\s"'=/]/.test(H)?(u=ATTR_KEY,d=H):u===ATTR&&/\s/.test(H)?(d.length&&D.push([ATTR_KEY,d]),D.push([ATTR_BREAK])):u===ATTR_KEY&&/\s/.test(H)?(D.push([ATTR_KEY,d]),d="",u=ATTR_KEY_W):u===ATTR_KEY&&H==="="?(D.push([ATTR_KEY,d],[ATTR_EQ]),d="",u=ATTR_VALUE_W):u===ATTR_KEY?d+=H:(u===ATTR_KEY_W||u===ATTR)&&H==="="?(D.push([ATTR_EQ]),u=ATTR_VALUE_W):(u===ATTR_KEY_W||u===ATTR)&&!/\s/.test(H)?(D.push([ATTR_BREAK]),/[\w-]/.test(H)?(d+=H,u=ATTR_KEY):u=ATTR):u===ATTR_VALUE_W&&H==='"'?u=ATTR_VALUE_DQ:u===ATTR_VALUE_W&&H==="'"?u=ATTR_VALUE_SQ:u===ATTR_VALUE_DQ&&H==='"'?(D.push([ATTR_VALUE,d],[ATTR_BREAK]),d="",u=ATTR):u===ATTR_VALUE_SQ&&H==="'"?(D.push([ATTR_VALUE,d],[ATTR_BREAK]),d="",u=ATTR):u===ATTR_VALUE_W&&!/\s/.test(H)?(u=ATTR_VALUE,de--):u===ATTR_VALUE&&/\s/.test(H)?(D.push([ATTR_VALUE,d],[ATTR_BREAK]),d="",u=ATTR):(u===ATTR_VALUE||u===ATTR_VALUE_SQ||u===ATTR_VALUE_DQ)&&(d+=H))}return u===TEXT&&d.length?(D.push([TEXT,d]),d=""):u===ATTR_VALUE&&d.length?(D.push([ATTR_VALUE,d]),d=""):u===ATTR_VALUE_DQ&&d.length?(D.push([ATTR_VALUE,d]),d=""):u===ATTR_VALUE_SQ&&d.length?(D.push([ATTR_VALUE,d]),d=""):u===ATTR_KEY&&(D.push([ATTR_KEY,d]),d=""),D}};function c(h){return typeof h=="function"||typeof h=="string"||h&&typeof h=="object"||h==null?h:n("",h)}};function quot(s){return s===ATTR_VALUE_SQ||s===ATTR_VALUE_DQ}var closeRE=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9\x7F-\uFFFF_:-]+)*$");function selfClosing(s){return closeRE.test(s)}var trailingNewlineRegex=/\n[\s]+$/,leadingNewlineRegex=/^\n[\s]+/,trailingSpaceRegex=/[\s]+$/,leadingSpaceRegex=/^[\s]+/,multiSpaceRegex=/[\n\s]+/g,TEXT_TAGS=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],VERBATIM_TAGS=["code","pre","textarea"],appendChild$1=function s(e,n){if(!!Array.isArray(n))for(var c=e.nodeName.toLowerCase(),h=!1,u,d,m=0,g=n.length;m<g;m++){var b=n[m];if(Array.isArray(b)){s(e,b);continue}(typeof b=="number"||typeof b=="boolean"||typeof b=="function"||b instanceof Date||b instanceof RegExp)&&(b=b.toString());var O=e.childNodes[e.childNodes.length-1];if(typeof b=="string")h=!0,O&&O.nodeName==="#text"?O.nodeValue+=b:(b=e.ownerDocument.createTextNode(b),e.appendChild(b),O=b),m===g-1&&(h=!1,TEXT_TAGS.indexOf(c)===-1&&VERBATIM_TAGS.indexOf(c)===-1?(u=O.nodeValue.replace(leadingNewlineRegex,"").replace(trailingSpaceRegex,"").replace(trailingNewlineRegex,"").replace(multiSpaceRegex," "),u===""?e.removeChild(O):O.nodeValue=u):VERBATIM_TAGS.indexOf(c)===-1&&(d=m===0?"":" ",u=O.nodeValue.replace(leadingNewlineRegex,d).replace(leadingSpaceRegex," ").replace(trailingSpaceRegex,"").replace(trailingNewlineRegex,"").replace(multiSpaceRegex," "),O.nodeValue=u));else if(b&&b.nodeType){h&&(h=!1,TEXT_TAGS.indexOf(c)===-1&&VERBATIM_TAGS.indexOf(c)===-1?(u=O.nodeValue.replace(leadingNewlineRegex,"").replace(trailingNewlineRegex," ").replace(multiSpaceRegex," "),u===""?e.removeChild(O):O.nodeValue=u):VERBATIM_TAGS.indexOf(c)===-1&&(u=O.nodeValue.replace(leadingSpaceRegex," ").replace(leadingNewlineRegex,"").replace(trailingNewlineRegex," ").replace(multiSpaceRegex," "),O.nodeValue=u));var v=b.nodeName;v&&(c=v.toLowerCase()),e.appendChild(b)}}},svgTags=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],boolProps=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],directProps=["indeterminate"],hyperx=hyperx$1,appendChild=appendChild$1,SVG_TAGS=svgTags,BOOL_PROPS=boolProps,DIRECT_PROPS=directProps,SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",COMMENT_TAG="!--",dom=function(s){function e(h,u,d){var m;SVG_TAGS.indexOf(h)!==-1&&(u.namespace=SVGNS);var g=!1;u.namespace&&(g=u.namespace,delete u.namespace);var b=!1;if(u.is&&(b=u.is,delete u.is),g)b?m=s.createElementNS(g,h,{is:b}):m=s.createElementNS(g,h);else{if(h===COMMENT_TAG)return s.createComment(u.comment);b?m=s.createElement(h,{is:b}):m=s.createElement(h)}for(var O in u)if(u.hasOwnProperty(O)){var v=O.toLowerCase(),y=u[O];if(v==="classname"&&(v="class",O="class"),O==="htmlFor"&&(O="for"),BOOL_PROPS.indexOf(v)!==-1){if(String(y)==="true")y=v;else if(String(y)==="false")continue}v.slice(0,2)==="on"||DIRECT_PROPS.indexOf(v)!==-1?m[O]=y:g?O==="xlink:href"?m.setAttributeNS(XLINKNS,O,y):/^xmlns($|:)/i.test(O)||m.setAttributeNS(null,O,y):m.setAttribute(O,y)}return appendChild(m,d),m}function n(h){for(var u=s.createDocumentFragment(),d=0;d<h.length;d++)h[d]!=null&&(Array.isArray(h[d])?u.appendChild(n(h[d])):(typeof h[d]=="string"&&(h[d]=s.createTextNode(h[d])),u.appendChild(h[d])));return u}var c=hyperx(e,{comments:!0,createFragment:n});return c.default=c,c.createComment=e,c},browser$5=dom(document),html$1=browser$5,objectCreate=Object.create||objectCreatePolyfill,objectKeys$1=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter$3(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}var events$3=EventEmitter$3;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10,hasDefineProperty;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=o.x===0}catch{hasDefineProperty=!1}hasDefineProperty?Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(s){if(typeof s!="number"||s<0||s!==s)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=s}}):EventEmitter$3.defaultMaxListeners=defaultMaxListeners;EventEmitter$3.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function $getMaxListeners(s){return s._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:s._maxListeners}EventEmitter$3.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(s,e,n){if(e)s.call(n);else for(var c=s.length,h=arrayClone(s,c),u=0;u<c;++u)h[u].call(n)}function emitOne(s,e,n,c){if(e)s.call(n,c);else for(var h=s.length,u=arrayClone(s,h),d=0;d<h;++d)u[d].call(n,c)}function emitTwo(s,e,n,c,h){if(e)s.call(n,c,h);else for(var u=s.length,d=arrayClone(s,u),m=0;m<u;++m)d[m].call(n,c,h)}function emitThree(s,e,n,c,h,u){if(e)s.call(n,c,h,u);else for(var d=s.length,m=arrayClone(s,d),g=0;g<d;++g)m[g].call(n,c,h,u)}function emitMany(s,e,n,c){if(e)s.apply(n,c);else for(var h=s.length,u=arrayClone(s,h),d=0;d<h;++d)u[d].apply(n,c)}EventEmitter$3.prototype.emit=function(e){var n,c,h,u,d,m,g=e==="error";if(m=this._events,m)g=g&&m.error==null;else if(!g)return!1;if(g){if(arguments.length>1&&(n=arguments[1]),n instanceof Error)throw n;var b=new Error('Unhandled "error" event. ('+n+")");throw b.context=n,b}if(c=m[e],!c)return!1;var O=typeof c=="function";switch(h=arguments.length,h){case 1:emitNone(c,O,this);break;case 2:emitOne(c,O,this,arguments[1]);break;case 3:emitTwo(c,O,this,arguments[1],arguments[2]);break;case 4:emitThree(c,O,this,arguments[1],arguments[2],arguments[3]);break;default:for(u=new Array(h-1),d=1;d<h;d++)u[d-1]=arguments[d];emitMany(c,O,this,u)}return!0};function _addListener(s,e,n,c){var h,u,d;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(u=s._events,u?(u.newListener&&(s.emit("newListener",e,n.listener?n.listener:n),u=s._events),d=u[e]):(u=s._events=objectCreate(null),s._eventsCount=0),!d)d=u[e]=n,++s._eventsCount;else if(typeof d=="function"?d=u[e]=c?[n,d]:[d,n]:c?d.unshift(n):d.push(n),!d.warned&&(h=$getMaxListeners(s),h&&h>0&&d.length>h)){d.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+d.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');m.name="MaxListenersExceededWarning",m.emitter=s,m.type=e,m.count=d.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",m.name,m.message)}return s}EventEmitter$3.prototype.addListener=function(e,n){return _addListener(this,e,n,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var s=new Array(arguments.length),e=0;e<s.length;++e)s[e]=arguments[e];this.listener.apply(this.target,s)}}function _onceWrap(s,e,n){var c={fired:!1,wrapFn:void 0,target:s,type:e,listener:n},h=bind.call(onceWrapper,c);return h.listener=n,c.wrapFn=h,h}EventEmitter$3.prototype.once=function(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.prependOnceListener=function(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.removeListener=function(e,n){var c,h,u,d,m;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(h=this._events,!h)return this;if(c=h[e],!c)return this;if(c===n||c.listener===n)--this._eventsCount===0?this._events=objectCreate(null):(delete h[e],h.removeListener&&this.emit("removeListener",e,c.listener||n));else if(typeof c!="function"){for(u=-1,d=c.length-1;d>=0;d--)if(c[d]===n||c[d].listener===n){m=c[d].listener,u=d;break}if(u<0)return this;u===0?c.shift():spliceOne(c,u),c.length===1&&(h[e]=c[0]),h.removeListener&&this.emit("removeListener",e,m||n)}return this};EventEmitter$3.prototype.removeAllListeners=function(e){var n,c,h;if(c=this._events,!c)return this;if(!c.removeListener)return arguments.length===0?(this._events=objectCreate(null),this._eventsCount=0):c[e]&&(--this._eventsCount===0?this._events=objectCreate(null):delete c[e]),this;if(arguments.length===0){var u=objectKeys$1(c),d;for(h=0;h<u.length;++h)d=u[h],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if(n=c[e],typeof n=="function")this.removeListener(e,n);else if(n)for(h=n.length-1;h>=0;h--)this.removeListener(e,n[h]);return this};function _listeners(s,e,n){var c=s._events;if(!c)return[];var h=c[e];return h?typeof h=="function"?n?[h.listener||h]:[h]:n?unwrapListeners(h):arrayClone(h,h.length):[]}EventEmitter$3.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$3.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$3.listenerCount=function(s,e){return typeof s.listenerCount=="function"?s.listenerCount(e):listenerCount.call(s,e)};EventEmitter$3.prototype.listenerCount=listenerCount;function listenerCount(s){var e=this._events;if(e){var n=e[s];if(typeof n=="function")return 1;if(n)return n.length}return 0}EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(s,e){for(var n=e,c=n+1,h=s.length;c<h;n+=1,c+=1)s[n]=s[c];s.pop()}function arrayClone(s,e){for(var n=new Array(e),c=0;c<e;++c)n[c]=s[c];return n}function unwrapListeners(s){for(var e=new Array(s.length),n=0;n<e.length;++n)e[n]=s[n].listener||s[n];return e}function objectCreatePolyfill(s){var e=function(){};return e.prototype=s,new e}function objectKeysPolyfill(s){for(var e in s)Object.prototype.hasOwnProperty.call(s,e);return e}function functionBindPolyfill(s){var e=this;return function(){return e.apply(s,arguments)}}var prettierBytes_1=prettierBytes;function prettierBytes(s){if(typeof s!="number"||isNaN(s))throw new TypeError("Expected a number, got "+typeof s);var e=s<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(s=-s),s<1)return(e?"-":"")+s+" B";var c=Math.min(Math.floor(Math.log(s)/Math.log(1e3)),n.length-1);s=Number(s/Math.pow(1e3,c));var h=n[c];return s>=10||s%1===0?(e?"-":"")+s.toFixed(0)+" "+h:(e?"-":"")+s.toFixed(1)+" "+h}var pretty=prettierBytes_1,storage_1=storage$1;function storage$1(){Object.defineProperty(window.choo,"storage",{get:s,set:noop$4});function s(){if(navigator.storage)return navigator.storage.estimate().then(function(n){var c=(n.usage/n.quota).toFixed();clr("Max storage:",fmt(n.quota)),clr("Storage used:",fmt(n.usage)+" ("+c+"%)"),navigator.storage.persisted().then(function(h){var u=h?"enabled":"disabled";clr("Persistent storage:",u)})}),"Calculating storage quota\u2026";var e=window.location.protocol;return/https/.test(e)?"The Storage API is unavailable in this browser. We're sorry!":"The Storage API is unavailable. Serving this site over HTTPS might help enable it!"}}function clr(s,e){var n="#cc99cc";console.log("%c"+s,"color: "+n,e)}function fmt(s){return pretty(s).replace(" ","")}function noop$4(){}var assert$n={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function shouldUseNative(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var c=Object.getOwnPropertyNames(e).map(function(u){return e[u]});if(c.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(u){h[u]=u}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign$1=shouldUseNative()?Object.assign:function(s,e){for(var n,c=toObject(s),h,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var d in n)hasOwnProperty.call(n,d)&&(c[d]=n[d]);if(getOwnPropertySymbols){h=getOwnPropertySymbols(n);for(var m=0;m<h.length;m++)propIsEnumerable.call(n,h[m])&&(c[h[m]]=n[h[m]])}}return c},util$2={},isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:inherits_browser$1.exports=function(e,n){e.super_=n;var c=function(){};c.prototype=n.prototype,e.prototype=new c,e.prototype.constructor=e};(function(s){var e=/%[sdj%]/g;s.format=function(B){if(!U(B)){for(var K=[],te=0;te<arguments.length;te++)K.push(h(arguments[te]));return K.join(" ")}for(var te=1,Se=arguments,Te=Se.length,Ne=String(B).replace(e,function(Ie){if(Ie==="%%")return"%";if(te>=Te)return Ie;switch(Ie){case"%s":return String(Se[te++]);case"%d":return Number(Se[te++]);case"%j":try{return JSON.stringify(Se[te++])}catch{return"[Circular]"}default:return Ie}}),Re=Se[te];te<Te;Re=Se[++te])E(Re)||!F(Re)?Ne+=" "+Re:Ne+=" "+h(Re);return Ne},s.deprecate=function(B,K){if(N(commonjsGlobal.process))return function(){return s.deprecate(B,K).apply(this,arguments)};if(process.noDeprecation===!0)return B;var te=!1;function Se(){if(!te){if(process.throwDeprecation)throw new Error(K);process.traceDeprecation?console.trace(K):console.error(K),te=!0}return B.apply(this,arguments)}return Se};var n={},c;s.debuglog=function(B){if(N(c)&&(c={}.NODE_DEBUG||""),B=B.toUpperCase(),!n[B])if(new RegExp("\\b"+B+"\\b","i").test(c)){var K=process.pid;n[B]=function(){var te=s.format.apply(s,arguments);console.error("%s %d: %s",B,K,te)}}else n[B]=function(){};return n[B]};function h(B,K){var te={seen:[],stylize:d};return arguments.length>=3&&(te.depth=arguments[2]),arguments.length>=4&&(te.colors=arguments[3]),A(K)?te.showHidden=K:K&&s._extend(te,K),N(te.showHidden)&&(te.showHidden=!1),N(te.depth)&&(te.depth=2),N(te.colors)&&(te.colors=!1),N(te.customInspect)&&(te.customInspect=!0),te.colors&&(te.stylize=u),g(te,B,te.depth)}s.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(B,K){var te=h.styles[K];return te?"\x1B["+h.colors[te][0]+"m"+B+"\x1B["+h.colors[te][1]+"m":B}function d(B,K){return B}function m(B){var K={};return B.forEach(function(te,Se){K[te]=!0}),K}function g(B,K,te){if(B.customInspect&&K&&H(K.inspect)&&K.inspect!==s.inspect&&!(K.constructor&&K.constructor.prototype===K)){var Se=K.inspect(te,B);return U(Se)||(Se=g(B,Se,te)),Se}var Te=b(B,K);if(Te)return Te;var Ne=Object.keys(K),Re=m(Ne);if(B.showHidden&&(Ne=Object.getOwnPropertyNames(K)),de(K)&&(Ne.indexOf("message")>=0||Ne.indexOf("description")>=0))return O(K);if(Ne.length===0){if(H(K)){var Ie=K.name?": "+K.name:"";return B.stylize("[Function"+Ie+"]","special")}if(R(K))return B.stylize(RegExp.prototype.toString.call(K),"regexp");if(D(K))return B.stylize(Date.prototype.toString.call(K),"date");if(de(K))return O(K)}var Me="",Be=!1,Ue=["{","}"];if(S(K)&&(Be=!0,Ue=["[","]"]),H(K)){var Pe=K.name?": "+K.name:"";Me=" [Function"+Pe+"]"}if(R(K)&&(Me=" "+RegExp.prototype.toString.call(K)),D(K)&&(Me=" "+Date.prototype.toUTCString.call(K)),de(K)&&(Me=" "+O(K)),Ne.length===0&&(!Be||K.length==0))return Ue[0]+Me+Ue[1];if(te<0)return R(K)?B.stylize(RegExp.prototype.toString.call(K),"regexp"):B.stylize("[Object]","special");B.seen.push(K);var it;return Be?it=v(B,K,te,Re,Ne):it=Ne.map(function(ut){return y(B,K,te,Re,ut,Be)}),B.seen.pop(),w(it,Me,Ue)}function b(B,K){if(N(K))return B.stylize("undefined","undefined");if(U(K)){var te="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(te,"string")}if(I(K))return B.stylize(""+K,"number");if(A(K))return B.stylize(""+K,"boolean");if(E(K))return B.stylize("null","null")}function O(B){return"["+Error.prototype.toString.call(B)+"]"}function v(B,K,te,Se,Te){for(var Ne=[],Re=0,Ie=K.length;Re<Ie;++Re)pe(K,String(Re))?Ne.push(y(B,K,te,Se,String(Re),!0)):Ne.push("");return Te.forEach(function(Me){Me.match(/^\d+$/)||Ne.push(y(B,K,te,Se,Me,!0))}),Ne}function y(B,K,te,Se,Te,Ne){var Re,Ie,Me;if(Me=Object.getOwnPropertyDescriptor(K,Te)||{value:K[Te]},Me.get?Me.set?Ie=B.stylize("[Getter/Setter]","special"):Ie=B.stylize("[Getter]","special"):Me.set&&(Ie=B.stylize("[Setter]","special")),pe(Se,Te)||(Re="["+Te+"]"),Ie||(B.seen.indexOf(Me.value)<0?(E(te)?Ie=g(B,Me.value,null):Ie=g(B,Me.value,te-1),Ie.indexOf(`
`)>-1&&(Ne?Ie=Ie.split(`
`).map(function(Be){return"  "+Be}).join(`
`).substr(2):Ie=`
`+Ie.split(`
`).map(function(Be){return"   "+Be}).join(`
`))):Ie=B.stylize("[Circular]","special")),N(Re)){if(Ne&&Te.match(/^\d+$/))return Ie;Re=JSON.stringify(""+Te),Re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Re=Re.substr(1,Re.length-2),Re=B.stylize(Re,"name")):(Re=Re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Re=B.stylize(Re,"string"))}return Re+": "+Ie}function w(B,K,te){var Se=B.reduce(function(Te,Ne){return Ne.indexOf(`
`)>=0,Te+Ne.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Se>60?te[0]+(K===""?"":K+`
 `)+" "+B.join(`,
  `)+" "+te[1]:te[0]+K+" "+B.join(", ")+" "+te[1]}function S(B){return Array.isArray(B)}s.isArray=S;function A(B){return typeof B=="boolean"}s.isBoolean=A;function E(B){return B===null}s.isNull=E;function P(B){return B==null}s.isNullOrUndefined=P;function I(B){return typeof B=="number"}s.isNumber=I;function U(B){return typeof B=="string"}s.isString=U;function z(B){return typeof B=="symbol"}s.isSymbol=z;function N(B){return B===void 0}s.isUndefined=N;function R(B){return F(B)&&ae(B)==="[object RegExp]"}s.isRegExp=R;function F(B){return typeof B=="object"&&B!==null}s.isObject=F;function D(B){return F(B)&&ae(B)==="[object Date]"}s.isDate=D;function de(B){return F(B)&&(ae(B)==="[object Error]"||B instanceof Error)}s.isError=de;function H(B){return typeof B=="function"}s.isFunction=H;function he(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B=="undefined"}s.isPrimitive=he,s.isBuffer=isBufferBrowser;function ae(B){return Object.prototype.toString.call(B)}function Oe(B){return B<10?"0"+B.toString(10):B.toString(10)}var ye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ke(){var B=new Date,K=[Oe(B.getHours()),Oe(B.getMinutes()),Oe(B.getSeconds())].join(":");return[B.getDate(),ye[B.getMonth()],K].join(" ")}s.log=function(){console.log("%s - %s",ke(),s.format.apply(s,arguments))},s.inherits=inherits_browser$1.exports,s._extend=function(B,K){if(!K||!F(K))return B;for(var te=Object.keys(K),Se=te.length;Se--;)B[te[Se]]=K[te[Se]];return B};function pe(B,K){return Object.prototype.hasOwnProperty.call(B,K)}})(util$2);var objectAssign=objectAssign$1;/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function compare$1(s,e){if(s===e)return 0;for(var n=s.length,c=e.length,h=0,u=Math.min(n,c);h<u;++h)if(s[h]!==e[h]){n=s[h],c=e[h];break}return n<c?-1:c<n?1:0}function isBuffer(s){return commonjsGlobal.Buffer&&typeof commonjsGlobal.Buffer.isBuffer=="function"?commonjsGlobal.Buffer.isBuffer(s):!!(s!=null&&s._isBuffer)}var util$1=util$2,hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames=function(){return function(){}.name==="foo"}();function pToString(s){return Object.prototype.toString.call(s)}function isView(s){return isBuffer(s)||typeof commonjsGlobal.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s?!!(s instanceof DataView||s.buffer&&s.buffer instanceof ArrayBuffer):!1}var assert$m=assert$n.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;function getName(s){if(!!util$1.isFunction(s)){if(functionsHaveNames)return s.name;var e=s.toString(),n=e.match(regex);return n&&n[1]}}assert$m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var n=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var c=new Error;if(c.stack){var h=c.stack,u=getName(n),d=h.indexOf(`
`+u);if(d>=0){var m=h.indexOf(`
`,d+1);h=h.substring(m+1)}this.stack=h}}};util$1.inherits(assert$m.AssertionError,Error);function truncate(s,e){return typeof s=="string"?s.length<e?s:s.slice(0,e):s}function inspect(s){if(functionsHaveNames||!util$1.isFunction(s))return util$1.inspect(s);var e=getName(s),n=e?": "+e:"";return"[Function"+n+"]"}function getMessage(s){return truncate(inspect(s.actual),128)+" "+s.operator+" "+truncate(inspect(s.expected),128)}function fail(s,e,n,c,h){throw new assert$m.AssertionError({message:n,actual:s,expected:e,operator:c,stackStartFunction:h})}assert$m.fail=fail;function ok(s,e){s||fail(s,!0,e,"==",assert$m.ok)}assert$m.ok=ok;assert$m.equal=function(e,n,c){e!=n&&fail(e,n,c,"==",assert$m.equal)};assert$m.notEqual=function(e,n,c){e==n&&fail(e,n,c,"!=",assert$m.notEqual)};assert$m.deepEqual=function(e,n,c){_deepEqual(e,n,!1)||fail(e,n,c,"deepEqual",assert$m.deepEqual)};assert$m.deepStrictEqual=function(e,n,c){_deepEqual(e,n,!0)||fail(e,n,c,"deepStrictEqual",assert$m.deepStrictEqual)};function _deepEqual(s,e,n,c){if(s===e)return!0;if(isBuffer(s)&&isBuffer(e))return compare$1(s,e)===0;if(util$1.isDate(s)&&util$1.isDate(e))return s.getTime()===e.getTime();if(util$1.isRegExp(s)&&util$1.isRegExp(e))return s.source===e.source&&s.global===e.global&&s.multiline===e.multiline&&s.lastIndex===e.lastIndex&&s.ignoreCase===e.ignoreCase;if((s===null||typeof s!="object")&&(e===null||typeof e!="object"))return n?s===e:s==e;if(isView(s)&&isView(e)&&pToString(s)===pToString(e)&&!(s instanceof Float32Array||s instanceof Float64Array))return compare$1(new Uint8Array(s.buffer),new Uint8Array(e.buffer))===0;if(isBuffer(s)!==isBuffer(e))return!1;c=c||{actual:[],expected:[]};var h=c.actual.indexOf(s);return h!==-1&&h===c.expected.indexOf(e)?!0:(c.actual.push(s),c.expected.push(e),objEquiv(s,e,n,c))}function isArguments(s){return Object.prototype.toString.call(s)=="[object Arguments]"}function objEquiv(s,e,n,c){if(s==null||e===null||e===void 0)return!1;if(util$1.isPrimitive(s)||util$1.isPrimitive(e))return s===e;if(n&&Object.getPrototypeOf(s)!==Object.getPrototypeOf(e))return!1;var h=isArguments(s),u=isArguments(e);if(h&&!u||!h&&u)return!1;if(h)return s=pSlice.call(s),e=pSlice.call(e),_deepEqual(s,e,n);var d=objectKeys(s),m=objectKeys(e),g,b;if(d.length!==m.length)return!1;for(d.sort(),m.sort(),b=d.length-1;b>=0;b--)if(d[b]!==m[b])return!1;for(b=d.length-1;b>=0;b--)if(g=d[b],!_deepEqual(s[g],e[g],n,c))return!1;return!0}assert$m.notDeepEqual=function(e,n,c){_deepEqual(e,n,!1)&&fail(e,n,c,"notDeepEqual",assert$m.notDeepEqual)};assert$m.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(s,e,n){_deepEqual(s,e,!0)&&fail(s,e,n,"notDeepStrictEqual",notDeepStrictEqual)}assert$m.strictEqual=function(e,n,c){e!==n&&fail(e,n,c,"===",assert$m.strictEqual)};assert$m.notStrictEqual=function(e,n,c){e===n&&fail(e,n,c,"!==",assert$m.notStrictEqual)};function expectedException(s,e){if(!s||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(s);try{if(s instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},s)===!0}function _tryBlock(s){var e;try{s()}catch(n){e=n}return e}function _throws(s,e,n,c){var h;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(c=n,n=null),h=_tryBlock(e),c=(n&&n.name?" ("+n.name+").":".")+(c?" "+c:"."),s&&!h&&fail(h,n,"Missing expected exception"+c);var u=typeof c=="string",d=!s&&util$1.isError(h),m=!s&&h&&!n;if((d&&u&&expectedException(h,n)||m)&&fail(h,n,"Got unwanted exception"+c),s&&h&&n&&!expectedException(h,n)||!s&&h)throw h}assert$m.throws=function(s,e,n){_throws(!0,s,e,n)};assert$m.doesNotThrow=function(s,e,n){_throws(!1,s,e,n)};assert$m.ifError=function(s){if(s)throw s};function strict(s,e){s||fail(s,!0,e,"==",strict)}assert$m.strict=objectAssign(strict,assert$m,{equal:assert$m.strictEqual,deepEqual:assert$m.deepStrictEqual,notEqual:assert$m.notStrictEqual,notDeepEqual:assert$m.notDeepStrictEqual});assert$m.strict.strict=assert$m.strict;var objectKeys=Object.keys||function(s){var e=[];for(var n in s)hasOwn.call(s,n)&&e.push(n);return e},assert$l=assert$n.exports,hasWindow=typeof window!="undefined";function createScheduler(){var s;return hasWindow?(window._nanoScheduler||(window._nanoScheduler=new NanoScheduler(!0)),s=window._nanoScheduler):s=new NanoScheduler,s}function NanoScheduler(s){this.hasWindow=s,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}NanoScheduler.prototype.push=function(s){assert$l.equal(typeof s,"function","nanoscheduler.push: cb should be type function"),this.queue.push(s),this.schedule()};NanoScheduler.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var s=this;this.method(function(e){for(var n;s.queue.length&&e.timeRemaining()>0;)n=s.queue.shift(),n(e);s.scheduled=!1,s.queue.length&&s.schedule()})}};NanoScheduler.prototype.setTimeout=function(s){setTimeout(s,0,{timeRemaining:function(){return 1}})};var nanoscheduler=createScheduler,assert$k=assert$n.exports,emojis={trace:"\u{1F50D}",debug:"\u{1F41B}",info:"\u2728",warn:"\u26A0\uFE0F",error:"\u{1F6A8}",fatal:"\u{1F480}"},levels={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},defaultColors={foreground:"#d3c0c8",background:"#2d2d2d",black:"#2d2d2d",red:"#f2777a",green:"#99cc99",yellow:"#ffcc66",blue:"#6699cc",magenta:"#cc99cc",cyan:"#66cccc",white:"#d3d0c8",brightBlack:"#747369"},nanologger$3=Nanologger;function Nanologger(s,e){if(e=e||{},!(this instanceof Nanologger))return new Nanologger(s,e);assert$k.equal(typeof e,"object","nanologger: opts should be type object"),this._name=s||"",this._colors=Object.assign({},defaultColors,e.colors||{});try{this.logLevel=window.localStorage.getItem("logLevel")||"info"}catch{this.logLevel="info"}this._logLevel=levels[this.logLevel]}Nanologger.prototype.trace=function(){for(var s=["trace"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype.debug=function(){for(var s=["debug"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype.info=function(){for(var s=["info"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype.warn=function(){for(var s=["warn"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype.error=function(){for(var s=["error"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype.fatal=function(){for(var s=["fatal"],e=0,n=arguments.length;e<n;e++)s.push(arguments[e]);this._print.apply(this,s)};Nanologger.prototype._print=function(s){if(!(levels[s]<this._logLevel)){var e=getTimeStamp(),n=emojis[s],c=this._name||"unknown",h=s==="error"||s.fatal?this._colors.red:s==="warn"?this._colors.yellow:this._colors.green,u=[],d=[null],m="%c%s "+n+" %c%s";d.push(color(this._colors.brightBlack),e),d.push(color(this._colors.magenta),c);for(var g=1,b=arguments.length;g<b;g++){var O=arguments[g];typeof O=="string"?g===1?(m+=" %c%s",d.push(color(h)),d.push(O)):/ms$/.test(O)?(m+=" %c%s",d.push(color(this._colors.brightBlack)),d.push(O)):(m+=" %c%s",d.push(color(this._colors.white)),d.push(O)):typeof O=="number"?(m+=" %c%d",d.push(color(this._colors.magenta)),d.push(O)):u.push(O)}d[0]=m,u.forEach(function(v){d.push(v)}),Function.prototype.apply.apply(console.log,[console,d])}};function color(s){return"color: "+s+";"}function getTimeStamp(){var s=new Date,e=pad(s.getHours().toString()),n=pad(s.getMinutes().toString()),c=pad(s.getSeconds().toString());return e+":"+n+":"+c}function pad(s){return s.length!==2?0+s:s}var scheduler$4=nanoscheduler(),assert$j=assert$n.exports,entryTypes=["frame","measure","navigation","resource","longtask"],browser$4=onPerformance$2;function onPerformance$2(s){assert$j.equal(typeof s,"function","on-performance: cb should be type function");var e=typeof window!="undefined"&&window.PerformanceObserver;if(!e)return;if(window._onperformance)return window._onperformance.push(s),c;window._onperformance=[s];var n=new e(h);return setTimeout(function(){h(window.performance),n.observe({entryTypes})},0),c;function c(){window._onperformance.splice(window._onperformance.indexOf(s),1)}function h(d){d.getEntries().forEach(function(m){scheduler$4.push(function(){u(m),window._onperformance.forEach(function(g){g(m)})})})}function u(d){var m=d.entryType;m==="measure"?window.performance.clearMeasures(d.name):m==="resource"&&window.performance.clearResourceTimings()}}var onPerformance$1=browser$4,scheduler$3=nanoscheduler(),assert$i=assert$n.exports,chooHooks=ChooHooks;function ChooHooks(s){if(!(this instanceof ChooHooks))return new ChooHooks(s);assert$i.equal(typeof s,"object"),this.hasWindow=typeof window!="undefined",this.hasIdleCallback=this.hasWindow&&window.requestIdleCallback,this.hasPerformance=this.hasWindow&&window.performance&&window.performance.getEntriesByName,this.emitter=s,this.listeners={},this.buffer={render:{},events:{}}}ChooHooks.prototype.on=function(s,e){this.listeners[s]=e};ChooHooks.prototype.start=function(){var s=this;this.hasPerformance&&(window.performance.onresourcetimingbufferfull=function(){var e=s.listeners["resource-timing-buffer-full"];e&&e()}),onPerformance$1(function(e){if(!!e&&e.entryType==="measure"){var n=e.name;if(/choo\.morph/.test(n))s.buffer.render.morph=e;else if(/choo\.route/.test(n))s.buffer.render.route=e;else if(/choo\.render/.test(n))s.buffer.render.render=e;else if(/choo\.emit/.test(n)&&!/log:/.test(n)){var c=s.listeners.event;if(c){var h=n.match(/choo\.emit\('(.*)'\)/)[1];if(h==="render"||h==="DOMContentLoaded")return;var u=n.match(/\[(\d+)\]/)[1],d=s.buffer.events[u];s.buffer.events[u]=null,c(h,d,e)}}var m=s.buffer.render;if(m.render&&m.route&&m.morph){var g=s.listeners.render;if(!g)return;for(var b={};s.buffer.render.length;){var O=s.buffer.render.pop(),v=O.name;/choo\.render/.test(v)?b.render=O:/choo\.morph/.test(v)?b.morph=O:b.route=O}m.render=m.route=m.morph=void 0,g(b)}}}),this.emitter.on("*",function(e,n,c){var h=/^log:(\w{4,5})/.exec(e);if(!s.hasPerformance&&e==="render"){var u=s.listeners.render;u&&u()}else if(e==="DOMContentLoaded")s._emitLoaded();else if(h){h=h[1];var d=s.listeners["log:"+h];d&&d.apply(null,Array.prototype.slice.call(arguments,0,arguments.length-1))}else if(s.emitter.listeners(e).length)e!=="render"&&s.hasPerformance&&(s.buffer.events[c]=n);else{var m=s.listeners.unhandled;m&&m(e,n)}})};ChooHooks.prototype._emitLoaded=function(){var s=this;scheduler$3.push(function(){var n=s.listeners.DOMContentLoaded,c=s.hasWindow&&window.performance&&window.performance.timing;n&&c&&n({interactive:c.domInteractive-c.navigationStart,loaded:c.domContentLoadedEventEnd-c.navigationStart})})};var scheduler$2=nanoscheduler(),nanologger$2=nanologger$3,Hooks=chooHooks,logger_1=logger$1;function logger$1(s,e,n){var c=!0,h=Hooks(e),u=nanologger$2("choo");h.on("log:debug",d("debug")),h.on("log:info",d("info")),h.on("log:warn",d("warn")),h.on("log:error",d("error")),h.on("log:fatal",d("fatal")),h.on("event",function(m,g,b){if(!(n.filter&&!n.filter(m,g,b)))if(b){var O=b.duration.toFixed(),v=O<50?"info":"warn";g!==void 0?d(v)(m,g,O+"ms"):d(v)(m,O+"ms")}else g!==void 0?d("info")(m,g):d("info")(m)}),h.on("unhandled",function(m,g){d("error")("No listeners for "+m)}),h.on("DOMContentLoaded",function(m){if(!m)return d("info")("DOMContentLoaded");var g=m.interactive<1e3?"info":"warn";d(g)("DOMContentLoaded",m.interactive+"ms to interactive")}),h.on("render",function(m){if(!m||!m.render)return d("info")("render");var g=m.render.duration.toFixed(),b="render";c&&(c=!1,b="initial "+b);var O=Math.min((600/g).toFixed(),60);if(O===60)d("info")(b,O+"fps",g+"ms");else{var v={render:m.render.duration.toFixed()+"ms"};m.morph&&(v.morph=m.morph.duration.toFixed()+"ms"),d("warn")(b,O+"fps",g+"ms",v)}}),h.on("resource-timing-buffer-full",function(){d("error")("The browser's Resource Resource timing buffer is full. Cannot store any more timing information")}),h.start();function d(m){return function(){for(var g=[],b=0,O=arguments.length;b<O;b++)g.push(arguments[b]);scheduler$2.push(function(){u[m].apply(u,g)})}}}var assert$h=assert$n.exports,objectChangeCallsite_1=objectChangeCallsite;function objectChangeCallsite(s,e){return assert$h.equal(typeof s,"object","object-change-callsite: target should be type object"),assert$h.equal(typeof e,"function","object-change-callsite: callback should be type function"),new Proxy(s,{set:function(n,c,h){var u=new Error,d=strip(u.stack);return e(c,h,d),n[c]=h,!0},deleteProperty:function(n,c){var h=new Error,u=strip(h.stack);return e(c,void 0,u),c in n?(delete n[c],!0):!1}})}function strip(s){var e=s.split(`
`);return e=e.length>2?e.slice(2):e,e[0]=e[0].replace(/^ {4}at /,""),`
`+e.join(`
`)}var onChange=objectChangeCallsite_1,nanologger$1=nanologger$3,assert$g=assert$n.exports,enabledMessage="Debugging enabled. To disable run: `choo.debug = false`",disabledMessage="Debugging disabled. We hope it was helpful! \u{1F64C}",debug_1=debug$1;function debug$1(s,e,n,c){var h=nanologger$1("choo-devtools"),u=window.localStorage.logLevel==="debug";u&&h.info(enabledMessage),s=onChange(s,function(d,m,g){!u||(g=g.split(`
`)[1].replace(/^ +/,""),h.info("state."+d,m,`
`+g))}),n.state=s,Object.defineProperty(window.choo,"debug",{get:function(){return window.localStorage.logLevel="debug",c.emit("debug",!0),u=!0,enabledMessage},set:function(d){assert$g.equal(typeof d,"boolean","choo-devtools.debug: bool should be type boolean"),window.localStorage.logLevel=d?"debug":"info",u=d,c.emit("debug",u),u?h.info(enabledMessage):h.info(disabledMessage)}})}var fastSafeStringify$1=stringify;stringify.default=stringify;stringify.stable=deterministicStringify;stringify.stableStringify=deterministicStringify;var arr=[],replacerStack=[];function stringify(s,e,n){decirc(s,"",[],void 0);var c;for(replacerStack.length===0?c=JSON.stringify(s,e,n):c=JSON.stringify(s,replaceGetterValues(e),n);arr.length!==0;){var h=arr.pop();h.length===4?Object.defineProperty(h[0],h[1],h[3]):h[0][h[1]]=h[2]}return c}function decirc(s,e,n,c){var h;if(typeof s=="object"&&s!==null){for(h=0;h<n.length;h++)if(n[h]===s){var u=Object.getOwnPropertyDescriptor(c,e);u.get!==void 0?u.configurable?(Object.defineProperty(c,e,{value:"[Circular]"}),arr.push([c,e,s,u])):replacerStack.push([s,e]):(c[e]="[Circular]",arr.push([c,e,s]));return}if(n.push(s),Array.isArray(s))for(h=0;h<s.length;h++)decirc(s[h],h,n,s);else{var d=Object.keys(s);for(h=0;h<d.length;h++){var m=d[h];decirc(s[m],m,n,s)}}n.pop()}}function compareFunction(s,e){return s<e?-1:s>e?1:0}function deterministicStringify(s,e,n){var c=deterministicDecirc(s,"",[],void 0)||s,h;for(replacerStack.length===0?h=JSON.stringify(c,e,n):h=JSON.stringify(c,replaceGetterValues(e),n);arr.length!==0;){var u=arr.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}return h}function deterministicDecirc(s,e,n,c){var h;if(typeof s=="object"&&s!==null){for(h=0;h<n.length;h++)if(n[h]===s){var u=Object.getOwnPropertyDescriptor(c,e);u.get!==void 0?u.configurable?(Object.defineProperty(c,e,{value:"[Circular]"}),arr.push([c,e,s,u])):replacerStack.push([s,e]):(c[e]="[Circular]",arr.push([c,e,s]));return}if(typeof s.toJSON=="function")return;if(n.push(s),Array.isArray(s))for(h=0;h<s.length;h++)deterministicDecirc(s[h],h,n,s);else{var d={},m=Object.keys(s).sort(compareFunction);for(h=0;h<m.length;h++){var g=m[h];deterministicDecirc(s[g],g,n,s),d[g]=s[g]}if(c!==void 0)arr.push([c,e,s]),c[e]=d;else return d}n.pop()}}function replaceGetterValues(s){return s=s!==void 0?s:function(e,n){return n},function(e,n){if(replacerStack.length>0)for(var c=0;c<replacerStack.length;c++){var h=replacerStack[c];if(h[1]===e&&h[0]===n){n="[Circular]",replacerStack.splice(c,1);break}}return s.call(this,e,n)}}var clipboardCopy_1=clipboardCopy;function clipboardCopy(s){if(navigator.clipboard)return navigator.clipboard.writeText(s).catch(function(u){throw u!==void 0?u:new DOMException("The request is not allowed","NotAllowedError")});var e=document.createElement("span");e.textContent=s,e.style.whiteSpace="pre",document.body.appendChild(e);var n=window.getSelection(),c=window.document.createRange();n.removeAllRanges(),c.selectNode(e),n.addRange(c);var h=!1;try{h=window.document.execCommand("copy")}catch(u){console.log("error",u)}return n.removeAllRanges(),window.document.body.removeChild(e),h?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}var fastSafeStringify=fastSafeStringify$1,copy$2=clipboardCopy_1;function tryStringify(s){try{return JSON.stringify(s)}catch{}}function stateCopy$1(s){var e=tryStringify(s)||fastSafeStringify(s);copy$2(e)}var stateCopy_1=stateCopy$1,plucker_1=plucker;function plucker(s,e){return arguments.length>=2?pluck$1(s)(e):pluck$1(s)}function pluck$1(s){if(s=typeof s=="string"?String(s).trim().split("."):s,s.length<2)return s=s[0],n;var e=s.length;return c;function n(h){return h[s]}function c(h){for(var u=0;u<e&&typeof h!="undefined";u++)h=h[s[u]];return h}}var stateCopy=stateCopy_1,pluck=plucker_1,copy_1=copy$1;function copy$1(s){var e=s&&typeof s=="string",n=e&&arguments.length===1&&s.indexOf("state.")===0;(!s||typeof s=="function")&&(s=window.choo.state),n&&[].push.call(arguments,{state:window.choo.state}),stateCopy(e?pluck.apply(this,arguments):s)}var help_1=help$1;function help$1(){Object.defineProperty(window.choo,"help",{get:s,set:noop$3});function s(){return setTimeout(function(){print("copy","Serialize the current state to the clipboard."),print("debug","Enable Choo debug mode."),print("emit","Emit an event in the Choo emitter."),print("help","Print usage information."),print("log","Print the last 150 events emitted."),print("on","Listen for an event in the Choo emitter."),print("once","Listen for an event once in the Choo emitter."),print("perf","Print out performance metrics"),print("state","Print the Choo state object."),print("storage","Print browser storage information.")},0),"Choo command overview"}}function print(s,e){var n="#cc99cc";console.log("  %cchoo."+s,"color: "+n,"\u2014 "+e)}function noop$3(){}var onPerformance=browser$4,BAR="\u2588",perf_1=perf$2;function perf$2(s,e,n,c){var h={};window.choo.perf={};var u=new Perf(h,"all");Object.defineProperty(window.choo.perf,"all",{get:u.get.bind(u),set:noop$2});var d=new Perf(h,"core",function(b){return/^choo/.test(b)});Object.defineProperty(window.choo.perf,"core",{get:d.get.bind(d),set:noop$2});var m=new Perf(h,"components",function(b){return!/^choo/.test(b)&&!/^bankai/.test(b)});Object.defineProperty(window.choo.perf,"components",{get:m.get.bind(m),set:noop$2});var g=new Perf(h,"events",function(b){return/^choo\.emit/.test(b)},function(b){return b.replace(/^choo\.emit\('/,"").replace(/'\)$/,"")});Object.defineProperty(window.choo.perf,"events",{get:g.get.bind(g),set:noop$2}),onPerformance(function(b){if(b.entryType==="measure"){var O=b.name.replace(/ .*$/,"");h[O]||(h[O]={name:O,count:0,entries:[]});var v=h[O];v.count+=1,v.entries.push(b.duration)}})}function Perf(s,e,n,c){this.stats=s,this.name=e,this.filter=n||function(){return!0},this.rename=c||function(h){return h}}Perf.prototype.get=function(){var s=Object.keys(this.stats).filter(this.filter),e=this,n=0,c=0,h=s.map(function(g){var b=e.stats[g],O=Number(b.entries.reduce(function(w,S){return w+S},0).toFixed(2));O>n&&(n=O);var v=getMedian(b.entries);v>c&&(c=v);var y=e.rename(b.name);return new PerfEntry(y,O,v,b.count)}),u=10;h.forEach(function(g){var b=g["Total Time (ms)"],O=g["Median (ms)"];g[" "]=d(b/n*100/u),g["  "]=d(O/c*100/u)});function d(g){for(var b="",O=0,v=Math.round(g);O<v;O++)b+=BAR;return b}var m=h.sort(function(g,b){return b["Total Time (ms)"]-g["Total Time (ms)"]});return console.table(m),"Showing performance events for '"+this.name+"'"};function PerfEntry(s,e,n,c){this.Name=s,this["Total Time (ms)"]=e,this[" "]=0,this["Median (ms)"]=n,this["  "]=0,this["Total Count"]=c}function getMedian(s){if(!s.length)return 0;var e=s.slice(0).sort(function(u,d){return u-d}),n=Math.floor(e.length/2),c=e.length%2===0,h=c?(e[n]+e[n-1])/2:e[n];return Number(h.toFixed(2))}function noop$2(){}function removeItems$1(s,e,n){var c,h=s.length;if(!(e>=h||n<=0||e<0)){n=e+n>h?h-e:n;var u=h-n;for(c=e;c<u;++c)s[c]=s[c+n];s.length=u}}var removeArrayItems_esm=Object.freeze(Object.defineProperty({__proto__:null,default:removeItems$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(removeArrayItems_esm),clone$1={exports:{}};(function(s){var e=function(){function n(y,w){return w!=null&&y instanceof w}var c;try{c=Map}catch{c=function(){}}var h;try{h=Set}catch{h=function(){}}var u;try{u=Promise}catch{u=function(){}}function d(y,w,S,A,E){typeof w=="object"&&(S=w.depth,A=w.prototype,E=w.includeNonEnumerable,w=w.circular);var P=[],I=[],U=typeof Buffer!="undefined";typeof w=="undefined"&&(w=!0),typeof S=="undefined"&&(S=1/0);function z(N,R){if(N===null)return null;if(R===0)return N;var F,D;if(typeof N!="object")return N;if(n(N,c))F=new c;else if(n(N,h))F=new h;else if(n(N,u))F=new u(function(B,K){N.then(function(te){B(z(te,R-1))},function(te){K(z(te,R-1))})});else if(d.__isArray(N))F=[];else if(d.__isRegExp(N))F=new RegExp(N.source,v(N)),N.lastIndex&&(F.lastIndex=N.lastIndex);else if(d.__isDate(N))F=new Date(N.getTime());else{if(U&&Buffer.isBuffer(N))return Buffer.allocUnsafe?F=Buffer.allocUnsafe(N.length):F=new Buffer(N.length),N.copy(F),F;n(N,Error)?F=Object.create(N):typeof A=="undefined"?(D=Object.getPrototypeOf(N),F=Object.create(D)):(F=Object.create(A),D=A)}if(w){var de=P.indexOf(N);if(de!=-1)return I[de];P.push(N),I.push(F)}n(N,c)&&N.forEach(function(B,K){var te=z(K,R-1),Se=z(B,R-1);F.set(te,Se)}),n(N,h)&&N.forEach(function(B){var K=z(B,R-1);F.add(K)});for(var H in N){var he;D&&(he=Object.getOwnPropertyDescriptor(D,H)),!(he&&he.set==null)&&(F[H]=z(N[H],R-1))}if(Object.getOwnPropertySymbols)for(var ae=Object.getOwnPropertySymbols(N),H=0;H<ae.length;H++){var Oe=ae[H],ye=Object.getOwnPropertyDescriptor(N,Oe);ye&&!ye.enumerable&&!E||(F[Oe]=z(N[Oe],R-1),ye.enumerable||Object.defineProperty(F,Oe,{enumerable:!1}))}if(E)for(var ke=Object.getOwnPropertyNames(N),H=0;H<ke.length;H++){var pe=ke[H],ye=Object.getOwnPropertyDescriptor(N,pe);ye&&ye.enumerable||(F[pe]=z(N[pe],R-1),Object.defineProperty(F,pe,{enumerable:!1}))}return F}return z(y,S)}d.clonePrototype=function(w){if(w===null)return null;var S=function(){};return S.prototype=w,new S};function m(y){return Object.prototype.toString.call(y)}d.__objToStr=m;function g(y){return typeof y=="object"&&m(y)==="[object Date]"}d.__isDate=g;function b(y){return typeof y=="object"&&m(y)==="[object Array]"}d.__isArray=b;function O(y){return typeof y=="object"&&m(y)==="[object RegExp]"}d.__isRegExp=O;function v(y){var w="";return y.global&&(w+="g"),y.ignoreCase&&(w+="i"),y.multiline&&(w+="m"),w}return d.__getRegExpFlags=v,d}();s.exports&&(s.exports=e)})(clone$1);var removeItems=require$$0$1,scheduler$1=nanoscheduler(),nanologger=nanologger$3,_log=nanologger("choo"),clone=clone$1.exports,MAX_HISTORY_LENGTH=150,log_1=log$2;function log$2(s,e,n,c){var h=window.localStorage.logLevel==="debug",u=[],d=0,m=!0;c.on("debug",function(v){h=v}),window.choo._history=u,window.choo.history=g,Object.defineProperty(window.choo,"log",{get:g,set:noop$1}),Object.defineProperty(window.choo,"history",{get:g,set:noop$1}),e.on("*",function(v,y){d+=1;var w=new b(v,y,s);u.push(w),scheduler$1.push(function(){var S=u.length;S>MAX_HISTORY_LENGTH&&removeItems(u,0,S-MAX_HISTORY_LENGTH)})});function g(){setTimeout(function(){console.table(u)},0);var v=d===1?"event":"events",y=d+" "+v+" recorded, showing the last "+MAX_HISTORY_LENGTH+".";return h===!1?y+=" Enable state capture by calling `choo.debug`.":y+=" Disable state capture by calling `choo.debug = false`.",y}function b(v,y,w){this.name=v,this.data=y===void 0?"<no data>":y,this.state=h?O(w):"<disabled>"}function O(v){try{var y=clone(v);return m||(m=!0),y}catch{return m&&(_log.warn("Could not clone your app state. Make sure to have a serializable state so it can be cloned"),m=!1),"<unserializable>"}}}function noop$1(){}var assert$f=assert$n.exports,getAllRoutes_1=getAllRoutes$1,transform=function(s,e){var n=e||"/",c={},h=s.nodes;return Object.keys(h).forEach(function(u){var d=(n==="/"?n:n+"/")+(u==="$$"?":"+s.name:u),m=h[u].cb;if(m!==void 0&&(c[d]=m),Object.keys(h[u].nodes).length!==0){var g=transform(h[u],d);Object.keys(g).forEach(function(b){c[b]=g[b]})}}),c};function getAllRoutes$1(s){assert$f.equal(typeof s,"function","wayfarer.getAllRoutes: router should be an function");var e=s._trie;assert$f.equal(typeof e,"object","wayfarer.getAllRoutes: trie should be an object");var n=e.trie;return transform(n)}var EventEmitter$2=events$3.EventEmitter,storage=storage_1,logger=logger_1,debug=debug_1,copy=copy_1,help=help_1,perf$1=perf_1,log$1=log_1,getAllRoutes=getAllRoutes_1,chooDevtools=expose;function expose(s){return s=s||{},e.storeName="choo-devtools",e;function e(n,c,h){var u=new EventEmitter$2;typeof window!="undefined"&&logger(n,c,s),c.on("DOMContentLoaded",function(){typeof window!="undefined"&&(window.choo={},window.choo.state=n,window.choo.emit=function(){c.emit.apply(c,arguments)},window.choo.on=function(d,m){c.on(d,m)},debug(n,c,h,u),log$1(n,c,h,u),perf$1(),window.choo.copy=copy,h.router&&h.router.router&&(window.choo.routes=Object.keys(getAllRoutes(h.router.router))),storage(),help())})}}var scrollToAnchor_1=scrollToAnchor$1;function scrollToAnchor$1(s,e){if(s)try{var n=document.querySelector(s);n&&n.scrollIntoView(e)}catch{}}var documentReady$1=ready;function ready(s){if(typeof document=="undefined")throw new Error("document-ready only runs in the browser");var e=document.readyState;if(e==="complete"||e==="interactive")return setTimeout(s,0);document.addEventListener("DOMContentLoaded",function(){s()})}var scheduler=nanoscheduler(),assert$e=assert$n.exports,perf;nanotiming$3.disabled=!0;try{perf=window.performance,nanotiming$3.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!perf.mark}catch{}var browser$3=nanotiming$3;function nanotiming$3(s){if(assert$e.equal(typeof s,"string","nanotiming: name should be type string"),nanotiming$3.disabled)return noop;var e=(perf.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+e+"-"+s;perf.mark(n);function c(h){var u="end-"+e+"-"+s;perf.mark(u),scheduler.push(function(){var d=null;try{var m=s+" ["+e+"]";perf.measure(m,n,u),perf.clearMarks(n),perf.clearMarks(u)}catch(g){d=g}h&&h(d,s)})}return c.uuid=e,c}function noop(s){s&&scheduler.push(function(){s(new Error("nanotiming: performance API unavailable"))})}var assert$d=assert$n.exports,trie$1=Trie;function Trie(){if(!(this instanceof Trie))return new Trie;this.trie={nodes:{}}}Trie.prototype.create=function(s){assert$d.equal(typeof s,"string","route should be a string");var e=s.replace(/^\//,"").split("/");function n(c,h){var u=has(e,c)&&e[c];if(u===!1)return h;var d=null;return/^:|^\*/.test(u)?(has(h.nodes,"$$")?d=h.nodes.$$:(d={nodes:{}},h.nodes.$$=d),u[0]==="*"&&(h.wildcard=!0),h.name=u.replace(/^:|^\*/,"")):has(h.nodes,u)?d=h.nodes[u]:(d={nodes:{}},h.nodes[u]=d),n(c+1,d)}return n(0,this.trie)};Trie.prototype.match=function(s){assert$d.equal(typeof s,"string","route should be a string");var e=s.replace(/^\//,"").split("/"),n={};function c(u,d){if(d!==void 0){var m=e[u];if(m===void 0)return d;if(has(d.nodes,m))return c(u+1,d.nodes[m]);if(d.name){try{n[d.name]=decodeURIComponent(m)}catch{return c(u,void 0)}return c(u+1,d.nodes.$$)}else if(d.wildcard){try{n.wildcard=decodeURIComponent(e.slice(u).join("/"))}catch{return c(u,void 0)}return d.nodes.$$}else return c(u+1)}}var h=c(0,this.trie);if(!!h)return h=Object.assign({},h),h.params=n,h};Trie.prototype.mount=function(s,e){assert$d.equal(typeof s,"string","route should be a string"),assert$d.equal(typeof e,"object","trie should be a object");var n=s.replace(/^\//,"").split("/"),c=null,h=null;if(n.length===1)h=n[0],c=this.create(h);else{var u=n.join("/");h=n[0],c=this.create(u)}Object.assign(c.nodes,e.nodes),e.name&&(c.name=e.name),c.nodes[""]&&(Object.keys(c.nodes[""]).forEach(function(d){d!=="nodes"&&(c[d]=c.nodes[""][d])}),Object.assign(c.nodes,c.nodes[""].nodes),delete c.nodes[""].nodes)};function has(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var assert$c=assert$n.exports,trie=trie$1,wayfarer$1=Wayfarer;function Wayfarer(s){if(!(this instanceof Wayfarer))return new Wayfarer(s);var e=(s||"").replace(/^\//,""),n=trie();return h._trie=n,h.on=c,h.emit=h,h.match=u,h._wayfarer=!0,h;function c(m,g){if(assert$c.equal(typeof m,"string"),assert$c.equal(typeof g,"function"),m=m||"/",g._wayfarer&&g._trie)n.mount(m,g._trie.trie);else{var b=n.create(m);b.cb=g,b.route=m}return h}function h(m){var g=u(m),b=new Array(arguments.length);b[0]=g.params;for(var O=1;O<b.length;O++)b[O]=arguments[O];return g.cb.apply(g.cb,b)}function u(m){assert$c.notEqual(m,void 0,"'route' must be defined");var g=n.match(m);if(g&&g.cb)return new d(g);var b=n.match(e);if(b&&b.cb)return new d(b);throw new Error("route '"+m+"' did not match")}function d(m){this.cb=m.cb,this.route=m.route,this.params=m.params}}var assert$b=assert$n.exports,wayfarer=wayfarer$1,isLocalFile=/file:\/\//.test(typeof window=="object"&&window.location&&window.location.origin),electron="^(file://|/)(.*.html?/?)?",protocol="^(http(s)?(://))?(www.)?",domain="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",qs$1="[?].*$",stripElectron=new RegExp(electron),prefix=new RegExp(protocol+domain),normalize=new RegExp("#"),suffix$1=new RegExp(qs$1),nanorouter$1=Nanorouter;function Nanorouter(s){if(!(this instanceof Nanorouter))return new Nanorouter(s);s=s||{},this.router=wayfarer(s.default||"/404")}Nanorouter.prototype.on=function(s,e){assert$b.equal(typeof s,"string"),s=s.replace(/^[#/]/,""),this.router.on(s,e)};Nanorouter.prototype.emit=function(s){return assert$b.equal(typeof s,"string"),s=pathname(s,isLocalFile),this.router.emit(s)};Nanorouter.prototype.match=function(s){return assert$b.equal(typeof s,"string"),s=pathname(s,isLocalFile),this.router.match(s)};function pathname(s,e){return e?s=s.replace(stripElectron,""):s=s.replace(prefix,""),decodeURI(s.replace(suffix$1,"").replace(normalize,"/"))}assert$a.notEqual=notEqual;assert$a.notOk=notOk;assert$a.equal=equal;assert$a.ok=assert$a;var nanoassert=assert$a;function equal(s,e,n){assert$a(s==e,n)}function notEqual(s,e,n){assert$a(s!=e,n)}function notOk(s,e){assert$a(!s,e)}function assert$a(s,e){if(!s)throw new Error(e||"AssertionError")}var events$2=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],events$1=events$2,eventsLength=events$1.length,ELEMENT_NODE=1,TEXT_NODE$1=3,COMMENT_NODE=8,morph_1=morph$2;function morph$2(s,e){var n=s.nodeType,c=s.nodeName;n===ELEMENT_NODE&&copyAttrs(s,e),(n===TEXT_NODE$1||n===COMMENT_NODE)&&e.nodeValue!==s.nodeValue&&(e.nodeValue=s.nodeValue),c==="INPUT"?updateInput(s,e):c==="OPTION"?updateOption(s,e):c==="TEXTAREA"&&updateTextarea(s,e),copyEvents(s,e)}function copyAttrs(s,e){for(var n=e.attributes,c=s.attributes,h=null,u=null,d=null,m=null,g=null,b=c.length-1;b>=0;--b)g=c[b],m=g.name,h=g.namespaceURI,u=g.value,h?(m=g.localName||m,d=e.getAttributeNS(h,m),d!==u&&e.setAttributeNS(h,m,u)):e.hasAttribute(m)?(d=e.getAttribute(m),d!==u&&(u==="null"||u==="undefined"?e.removeAttribute(m):e.setAttribute(m,u))):e.setAttribute(m,u);for(var O=n.length-1;O>=0;--O)g=n[O],g.specified!==!1&&(m=g.name,h=g.namespaceURI,h?(m=g.localName||m,s.hasAttributeNS(h,m)||e.removeAttributeNS(h,m)):s.hasAttributeNS(null,m)||e.removeAttribute(m))}function copyEvents(s,e){for(var n=0;n<eventsLength;n++){var c=events$1[n];s[c]?e[c]=s[c]:e[c]&&(e[c]=void 0)}}function updateOption(s,e){updateAttribute(s,e,"selected")}function updateInput(s,e){var n=s.value,c=e.value;updateAttribute(s,e,"checked"),updateAttribute(s,e,"disabled"),s.indeterminate!==e.indeterminate&&(e.indeterminate=s.indeterminate),e.type!=="file"&&(n!==c&&(e.setAttribute("value",n),e.value=n),n==="null"&&(e.value="",e.removeAttribute("value")),s.hasAttributeNS(null,"value")?e.type==="range"&&(e.value=n):e.removeAttribute("value"))}function updateTextarea(s,e){var n=s.value;if(n!==e.value&&(e.value=n),e.firstChild&&e.firstChild.nodeValue!==n){if(n===""&&e.firstChild.nodeValue===e.placeholder)return;e.firstChild.nodeValue=n}}function updateAttribute(s,e,n){s[n]!==e[n]&&(e[n]=s[n],s[n]?e.setAttribute(n,""):e.removeAttribute(n))}var assert$9=nanoassert,morph$1=morph_1,TEXT_NODE=3,nanomorph_1=nanomorph$1;function nanomorph$1(s,e,n){return assert$9.equal(typeof s,"object","nanomorph: oldTree should be an object"),assert$9.equal(typeof e,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly?(updateChildren(e,s),s):(assert$9.notEqual(e.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),walk(e,s))}function walk(s,e){return e?s?s.isSameNode&&s.isSameNode(e)?e:s.tagName!==e.tagName||getComponentId(s)!==getComponentId(e)?s:(morph$1(s,e),updateChildren(s,e),e):null:s}function getComponentId(s){return s.dataset?s.dataset.nanomorphComponentId:void 0}function updateChildren(s,e){for(var n,c,h,u,d=0,m=0;n=e.childNodes[m],c=s.childNodes[m-d],!(!n&&!c);m++)if(!c)e.removeChild(n),m--;else if(!n)e.appendChild(c),d++;else if(same(c,n))h=walk(c,n),h!==n&&(e.replaceChild(h,n),d++);else{u=null;for(var g=m;g<e.childNodes.length;g++)if(same(e.childNodes[g],c)){u=e.childNodes[g];break}u?(h=walk(c,u),h!==u&&d++,e.insertBefore(h,n)):!c.id&&!n.id?(h=walk(c,n),h!==n&&(e.replaceChild(h,n),d++)):(e.insertBefore(c,n),d++)}}function same(s,e){return s.id?s.id===e.id:s.isSameNode?s.isSameNode(e):s.tagName!==e.tagName?!1:s.type===TEXT_NODE?s.nodeValue===e.nodeValue:!1}var reg=/([^?=&]+)(=([^&]*))?/g,assert$8=assert$n.exports,browser$2=qs;function qs(s){assert$8.equal(typeof s,"string","nanoquery: url should be type string");var e={};return s.replace(/^.*\?/,"").replace(reg,function(n,c,h,u){var d=decodeURIComponent(u),m=decodeURIComponent(c);e.hasOwnProperty(m)?Array.isArray(e[m])?e[m].push(d):e[m]=[e[m],d]:e[m]=d}),e}var assert$7=assert$n.exports,safeExternalLink=/(noopener|noreferrer) (noopener|noreferrer)/,protocolLink=/^[\w-_]+:/,nanohref$1=href;function href(s,e){assert$7.notEqual(typeof window,"undefined","nanohref: expected window to exist"),e=e||window.document,assert$7.equal(typeof s,"function","nanohref: cb should be type function"),assert$7.equal(typeof e,"object","nanohref: root should be type object"),window.addEventListener("click",function(n){if(!(n.button&&n.button!==0||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var c=function h(u){if(!(!u||u===e))return u.localName!=="a"||u.href===void 0?h(u.parentNode):u}(n.target);!c||window.location.protocol!==c.protocol||window.location.hostname!==c.hostname||window.location.port!==c.port||c.hasAttribute("data-nanohref-ignore")||c.hasAttribute("download")||c.getAttribute("target")==="_blank"&&safeExternalLink.test(c.getAttribute("rel"))||protocolLink.test(c.getAttribute("href"))||(n.preventDefault(),s(c))}})}var assert$6=assert$n.exports,nanoraf_1=nanoraf$1;function nanoraf$1(s,e){assert$6.equal(typeof s,"function","nanoraf: render should be a function"),assert$6.ok(typeof e=="function"||typeof e=="undefined","nanoraf: raf should be a function or undefined"),e||(e=window.requestAnimationFrame);var n=!1,c=null;return function(){c===null&&!n&&(n=!0,e(function(){n=!1;for(var d=c.length,m=new Array(d),g=0;g<d;g++)m[g]=c[g];s.apply(s,m),c=null})),c=arguments}}var removeArrayItems=function(e,n,c){var h,u=e.length;if(!(n>=u||c===0)){c=n+c>u?u-n:c;var d=u-c;for(h=n;h<d;++h)e[h]=e[h+c];e.length=d}},splice=removeArrayItems,nanotiming$2=browser$3,assert$5=assert$n.exports,nanobus$1=Nanobus;function Nanobus(s){if(!(this instanceof Nanobus))return new Nanobus(s);this._name=s||"nanobus",this._starListeners=[],this._listeners={}}Nanobus.prototype.emit=function(s){assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.emit: eventName should be type string or symbol");for(var e=[],n=1,c=arguments.length;n<c;n++)e.push(arguments[n]);var h=nanotiming$2(this._name+"('"+s.toString()+"')"),u=this._listeners[s];return u&&u.length>0&&this._emit(this._listeners[s],e),this._starListeners.length>0&&this._emit(this._starListeners,s,e,h.uuid),h(),this};Nanobus.prototype.on=Nanobus.prototype.addListener=function(s,e){return assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.on: eventName should be type string or symbol"),assert$5.equal(typeof e,"function","nanobus.on: listener should be type function"),s==="*"?this._starListeners.push(e):(this._listeners[s]||(this._listeners[s]=[]),this._listeners[s].push(e)),this};Nanobus.prototype.prependListener=function(s,e){return assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.prependListener: eventName should be type string or symbol"),assert$5.equal(typeof e,"function","nanobus.prependListener: listener should be type function"),s==="*"?this._starListeners.unshift(e):(this._listeners[s]||(this._listeners[s]=[]),this._listeners[s].unshift(e)),this};Nanobus.prototype.once=function(s,e){assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.once: eventName should be type string or symbol"),assert$5.equal(typeof e,"function","nanobus.once: listener should be type function");var n=this;this.on(s,c);function c(){e.apply(n,arguments),n.removeListener(s,c)}return this};Nanobus.prototype.prependOnceListener=function(s,e){assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),assert$5.equal(typeof e,"function","nanobus.prependOnceListener: listener should be type function");var n=this;this.prependListener(s,c);function c(){e.apply(n,arguments),n.removeListener(s,c)}return this};Nanobus.prototype.removeListener=function(s,e){if(assert$5.ok(typeof s=="string"||typeof s=="symbol","nanobus.removeListener: eventName should be type string or symbol"),assert$5.equal(typeof e,"function","nanobus.removeListener: listener should be type function"),s==="*")return this._starListeners=this._starListeners.slice(),n(this._starListeners,e);return typeof this._listeners[s]!="undefined"&&(this._listeners[s]=this._listeners[s].slice()),n(this._listeners[s],e);function n(c,h){if(!!c){var u=c.indexOf(h);if(u!==-1)return splice(c,u,1),!0}}};Nanobus.prototype.removeAllListeners=function(s){return s?s==="*"?this._starListeners=[]:this._listeners[s]=[]:(this._starListeners=[],this._listeners={}),this};Nanobus.prototype.listeners=function(s){var e=s!=="*"?this._listeners[s]:this._starListeners,n=[];if(e)for(var c=e.length,h=0;h<c;h++)n.push(e[h]);return n};Nanobus.prototype._emit=function(s,e,n,c){if(typeof s!="undefined"&&s.length!==0){n===void 0&&(n=e,e=null),e&&(c!==void 0?n=[e].concat(n,c):n=[e].concat(n));for(var h=s.length,u=0;u<h;u++){var d=s[u];d.apply(d,n)}}};var nanolru=LRU$1;function LRU$1(s){if(!(this instanceof LRU$1))return new LRU$1(s);typeof s=="number"&&(s={max:s}),s||(s={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=s.max||1e3,this.maxAge=s.maxAge||0}Object.defineProperty(LRU$1.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU$1.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU$1.prototype.remove=function(s){if(typeof s!="string"&&(s=""+s),!!this.cache.hasOwnProperty(s)){var e=this.cache[s];return delete this.cache[s],this._unlink(s,e.prev,e.next),e.value}};LRU$1.prototype._unlink=function(s,e,n){this.length--,this.length===0?this.head=this.tail=null:this.head===s?(this.head=e,this.cache[this.head].next=null):this.tail===s?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[e].next=n,this.cache[n].prev=e)};LRU$1.prototype.peek=function(s){if(!!this.cache.hasOwnProperty(s)){var e=this.cache[s];if(!!this._checkAge(s,e))return e.value}};LRU$1.prototype.set=function(s,e){typeof s!="string"&&(s=""+s);var n;if(this.cache.hasOwnProperty(s)){if(n=this.cache[s],n.value=e,this.maxAge&&(n.modified=Date.now()),s===this.head)return e;this._unlink(s,n.prev,n.next)}else n={value:e,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[s]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=s),this.head=s,this.tail||(this.tail=s),e};LRU$1.prototype._checkAge=function(s,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(s),!1):!0};LRU$1.prototype.get=function(s){if(typeof s!="string"&&(s=""+s),!!this.cache.hasOwnProperty(s)){var e=this.cache[s];if(!!this._checkAge(s,e))return this.head!==s&&(s===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=s,e.prev=this.head,e.next=null,this.head=s),e.value}};LRU$1.prototype.evict=function(){!this.tail||this.remove(this.tail)};var assert$4=assert$n.exports,LRU=nanolru,cache$4=ChooComponentCache;function ChooComponentCache(s,e,n){assert$4.ok(this instanceof ChooComponentCache,"ChooComponentCache should be created with `new`"),assert$4.equal(typeof s,"object","ChooComponentCache: state should be type object"),assert$4.equal(typeof e,"function","ChooComponentCache: emit should be type function"),typeof n=="number"?this.cache=new LRU(n):this.cache=n||new LRU(100),this.state=s,this.emit=e}ChooComponentCache.prototype.render=function(s,e){assert$4.equal(typeof s,"function","ChooComponentCache.render: Component should be type function"),assert$4.ok(typeof e=="string"||typeof e=="number","ChooComponentCache.render: id should be type string or type number");var n=this.cache.get(e);if(!n){for(var c=[],h=2,u=arguments.length;h<u;h++)c.push(arguments[h]);c.unshift(s,e,this.state,this.emit),n=newCall.apply(newCall,c),this.cache.set(e,n)}return n};function newCall(s){return new(s.bind.apply(s,arguments))}var scrollToAnchor=scrollToAnchor_1,documentReady=documentReady$1,nanotiming$1=browser$3,nanorouter=nanorouter$1,nanomorph=nanomorph_1,nanoquery=browser$2,nanohref=nanohref$1,nanoraf=nanoraf_1,nanobus=nanobus$1,assert$3=assert$n.exports,Cache=cache$4,choo=Choo,HISTORY_OBJECT={};function Choo(s){var e=nanotiming$1("choo.constructor");if(!(this instanceof Choo))return new Choo(s);s=s||{},assert$3.equal(typeof s,"object","choo: opts should be type object");var n=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=s.history===void 0?!0:s.history,this._hrefEnabled=s.href===void 0?!0:s.href,this._hashEnabled=s.hash===void 0?!1:s.hash,this._hasWindow=typeof window!="undefined",this._cache=s.cache,this._loaded=!1,this._stores=[h],this._tree=null;var c={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,c):c,delete window.initialState):this.state=c,this.router=nanorouter({curry:!0}),this.emitter=nanobus("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title);function h(u){n.emitter.prependListener(n._events.DOMTITLECHANGE,function(d){assert$3.equal(typeof d,"string","events.DOMTitleChange: title should be type string"),u.title=d,n._hasWindow&&(document.title=d)})}e()}Choo.prototype.route=function(s,e){var n=nanotiming$1("choo.route('"+s+"')");assert$3.equal(typeof s,"string","choo.route: route should be type string"),assert$3.equal(typeof e,"function","choo.handler: route should be type function"),this.router.on(s,e),n()};Choo.prototype.use=function(s){assert$3.equal(typeof s,"function","choo.use: cb should be type function");var e=this;this._stores.push(function(n){var c="choo.use";c=s.storeName?c+"("+s.storeName+")":c;var h=nanotiming$1(c);s(n,e.emitter,e),h()})};Choo.prototype.start=function(){assert$3.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var s=nanotiming$1("choo.start"),e=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){e._matchRoute(e.state),e._loaded&&(e.emitter.emit(e._events.RENDER),setTimeout(scrollToAnchor.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(n){assert$3.equal(typeof n,"string","events.pushState: href should be type string"),window.history.pushState(HISTORY_OBJECT,null,n),e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(n){assert$3.equal(typeof n,"string","events.replaceState: href should be type string"),window.history.replaceState(HISTORY_OBJECT,null,n),e.emitter.emit(e._events.NAVIGATE)}),window.onpopstate=function(){e.emitter.emit(e._events.POPSTATE)},e._hrefEnabled&&nanohref(function(n){var c=n.href,h=n.hash;if(c===window.location.href){!e._hashEnabled&&h&&scrollToAnchor(h);return}e.emitter.emit(e._events.PUSHSTATE,c)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(n){n(e.state)}),this._tree=this._prerender(this.state),assert$3.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(e._events.RENDER,nanoraf(function(){var n=nanotiming$1("choo.render"),c=e._prerender(e.state);assert$3.ok(c,"choo.render: no valid DOM node returned for location "+e.state.href),assert$3.equal(e._tree.nodeName,c.nodeName,"choo.render: The target node <"+e._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+c.nodeName.toLowerCase()+">.");var h=nanotiming$1("choo.morph");nanomorph(e._tree,c),h(),n()})),documentReady(function(){e.emitter.emit(e._events.DOMCONTENTLOADED),e._loaded=!0}),s(),this._tree};Choo.prototype.mount=function(e){var n=nanotiming$1("choo.mount('"+e+"')");if(typeof window!="object")return assert$3.ok(typeof e=="string","choo.mount: selector should be type String"),this.selector=e,n(),this;assert$3.ok(typeof e=="string"||typeof e=="object","choo.mount: selector should be type String or HTMLElement");var c=this;documentReady(function(){var h=nanotiming$1("choo.render"),u=c.start();typeof e=="string"?c._tree=document.querySelector(e):c._tree=e,assert$3.ok(c._tree,"choo.mount: could not query selector: "+e),assert$3.equal(c._tree.nodeName,u.nodeName,"choo.mount: The target node <"+c._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+u.nodeName.toLowerCase()+">.");var d=nanotiming$1("choo.morph");nanomorph(c._tree,u),d(),h()}),n()};Choo.prototype.toString=function(s,e){e=e||{},e.components=e.components||{},e.events=Object.assign({},e.events,this._events),assert$3.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),assert$3.equal(typeof s,"string","choo.toString: location should be type string"),assert$3.equal(typeof e,"object","choo.toString: state should be type object"),this._setCache(e),this._matchRoute(e,s),this.emitter.removeAllListeners(),this._stores.forEach(function(c){c(e)});var n=this._prerender(e);return assert$3.ok(n,"choo.toString: no valid value returned for the route "+s),assert$3(!Array.isArray(n),"choo.toString: return value was an array for the route "+s),typeof n.outerHTML=="string"?n.outerHTML:n.toString()};Choo.prototype._matchRoute=function(s,e){var n,c;e?(n=e.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(n=n.replace(/#.+$/,"")),c=e):(n=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(n+=window.location.hash.replace(/^#/,"/")),c=window.location.search);var h=this.router.match(n);this._handler=h.cb,s.href=n,s.query=nanoquery(c),s.route=h.route,s.params=h.params};Choo.prototype._prerender=function(s){var e=nanotiming$1("choo.prerender('"+s.route+"')"),n=this._handler(s,this.emit);return e(),n};Choo.prototype._setCache=function(s){var e=new Cache(s,this.emitter.emit.bind(this.emitter),this._cache);s.cache=n;function n(c,h){assert$3.equal(typeof c,"function","choo.state.cache: Component should be type function");for(var u=[],d=0,m=arguments.length;d<m;d++)u.push(arguments[d]);return e.render.apply(e,u)}n.toJSON=function(){return null}};var examples={},store=(state,emitter)=>{state.flok={enabled:!1,url:"https://flok.clic.cf/s/rarefaccio?layout=hydra&noHydra=1&bgOpacity=0&readonly=1"},state.style={color1:"#eee",color0:"#000",width:window.innerWidth-500,height:window.innerHeight},state.panels={editor:!0,details:!0,files:!0},state.sketches={name:"",all:{},visible:!1},state.emitter=emitter,emitter.on("draw:select",s=>{state.drawSynth.selectLine(s),emitter.emit("render")}),emitter.on("hideAll",()=>{state.panels.editor=!state.panels.editor,emitter.emit("render")}),emitter.on("midi:select",s=>{console.log("selected midi",s),state.drawSynth.midi.select(parseFloat(s)),emitter.emit("render")}),emitter.on("sketches:updateName",s=>{console.log("updating name",s),state.sketches.name=s,emitter.emit("render")}),emitter.on("sketches:toggle",()=>{state.sketches.visible=!state.sketches.visible,emitter.emit("render")}),emitter.on("sketches:load",s=>{loadCode(s),state.sketches.visible=!1,emitter.emit("render")}),emitter.on("editor:download",s=>{screencap();const e=s,n=new Blob([e],{type:"text/plain"}),c=document.createElement("a");c.style.display="none";let h=new Date;c.download=`${state.sketches.name}-${h.getFullYear()}-${h.getMonth()+1}-${h.getDate()}-${h.getHours()}.${h.getMinutes()}.${h.getSeconds()}.js`,c.href=URL.createObjectURL(n),c.click(),setTimeout(()=>{window.URL.revokeObjectURL(c.href)},300)}),emitter.on("editor:save",s=>{console.log("saving to local storate",s),state.sketches.all[state.sketches.name]=s,localStorage.setItem("spiral-synth",JSON.stringify(state.sketches.all)),emitter.emit("render")}),state.sketches.all=examples;const p=localStorage.getItem("spiral-synth");if(p){const s=Object.assign({},state.sketches.all,JSON.parse(p));for(key in s)typeof s[key]!="string"&&delete s[key];state.sketches.all=s}emitter.on("DOMContentLoaded",()=>{console.log("dom loaded!"),state.drawSynth.midi.on("device update",(s,e)=>{emitter.emit("render")})});function loadCode(s){state.sketches.name=s,console.log("loading",s,state.sketches),state.editor.editor.setValue(state.sketches.all[s]),emitter.emit("render")}emitter.on("toggle",(s,e="panels")=>{state[e][s]=!state[e][s],emitter.emit("render"),e=="renderer"&&emitter.emit(`renderer: toggle ${s}`,state[e][s])}),emitter.on("renderer:delete element",s=>{state.selected!==null&&(state.selected=null,emitter.emit("render"))}),state.flok.enabled===!0&&window.addEventListener("message",function(event){if(event.data){if(event.data.cmd==="evaluateCode")eval(event.data.args.body);else if(event.data.cmd==="initialSync"){const editorText=event.data.args.editors;editorText[0]&&eval(editorText[0])}}})},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1),topLevel=typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof window!="undefined"?window:{},minDoc=require$$0,doccy;typeof document!="undefined"?doccy=document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"],doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc));var document_1=doccy,onLoad={exports:{}},win;typeof window!="undefined"?win=window:typeof commonjsGlobal!="undefined"?win=commonjsGlobal:typeof self!="undefined"?win=self:win={};var window_1=win,document$2=document_1,window$2=window_1,assert$2=assert$n.exports,watch=Object.create(null),KEY_ID="onloadid"+(new Date%9e6).toString(36),KEY_ATTR="data-"+KEY_ID,INDEX=0;if(window$2&&window$2.MutationObserver){var observer=new MutationObserver(function(s){if(!(Object.keys(watch).length<1))for(var e=0;e<s.length;e++){if(s[e].attributeName===KEY_ATTR){eachAttr(s[e],turnon,turnoff);continue}eachMutation(s[e].removedNodes,turnoff),eachMutation(s[e].addedNodes,turnon)}});document$2.body?beginObserve(observer):document$2.addEventListener("DOMContentLoaded",function(s){beginObserve(observer)})}function beginObserve(s){s.observe(document$2.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[KEY_ATTR]})}onLoad.exports=function s(e,n,c,h){return assert$2(document$2.body,"on-load: will not work prior to DOMContentLoaded"),n=n||function(){},c=c||function(){},e.setAttribute(KEY_ATTR,"o"+INDEX),watch["o"+INDEX]=[n,c,0,h||s.caller],INDEX+=1,e};onLoad.exports.KEY_ATTR=KEY_ATTR;onLoad.exports.KEY_ID=KEY_ID;function turnon(s,e){watch[s][0]&&watch[s][2]===0&&(watch[s][0](e),watch[s][2]=1)}function turnoff(s,e){watch[s][1]&&watch[s][2]===1&&(watch[s][1](e),watch[s][2]=0)}function eachAttr(s,e,n){var c=s.target.getAttribute(KEY_ATTR);if(sameOrigin(s.oldValue,c)){watch[c]=watch[s.oldValue];return}watch[s.oldValue]&&n(s.oldValue,s.target),watch[c]&&e(c,s.target)}function sameOrigin(s,e){return!s||!e?!1:watch[s][3]===watch[e][3]}function eachMutation(s,e){for(var n=Object.keys(watch),c=0;c<s.length;c++){if(s[c]&&s[c].getAttribute&&s[c].getAttribute(KEY_ATTR)){var h=s[c].getAttribute(KEY_ATTR);n.forEach(function(u){h===u&&e(u,s[c])})}s[c].childNodes.length>0&&eachMutation(s[c].childNodes,e)}}var document$1=document_1,nanotiming=browser$3,morph=nanomorph_1,onload=onLoad.exports,OL_KEY_ID=onload.KEY_ID,OL_ATTR_ID=onload.KEY_ATTR,assert$1=assert$n.exports,nanocomponent=Nanocomponent;function makeID(){return"ncid-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)}function Nanocomponent(s){this._hasWindow=typeof window!="undefined",this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=s||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];var e=this;Object.defineProperty(this,"element",{get:function(){var n=document$1.getElementById(e._id);if(n)return n.dataset.nanocomponent===e._ncID?n:void 0}})}Nanocomponent.prototype.render=function(){for(var s=nanotiming(this._name+".render"),e=this,n=new Array(arguments.length),c,h=0;h<arguments.length;h++)n[h]=arguments[h];if(this._hasWindow)if(this.element){c=this.element;var d=nanotiming(this._name+".update"),m=this._rerender||this.update.apply(this,n);if(d(),this._rerender&&(this._rerender=!1),m){var g=this._handleRender(n),b=nanotiming(this._name+".morph");morph(c,g),b(),this.afterupdate&&this.afterupdate(c)}return this._proxy||(this._proxy=this._createProxy()),s(),this._proxy}else return this._reset(),c=this._handleRender(n),this.beforerender&&this.beforerender(c),(this.load||this.unload||this.afterreorder)&&(onload(c,e._handleLoad,e._handleUnload,e._ncID),this._olID=c.dataset[OL_KEY_ID]),s(),c;else{var u=nanotiming(this._name+".create");return c=this.createElement.apply(this,n),u(),s(),c}};Nanocomponent.prototype.rerender=function(){assert$1(this.element,"nanocomponent: cant rerender on an unmounted dom node"),this._rerender=!0,this.render.apply(this,this._arguments)};Nanocomponent.prototype._handleRender=function(s){var e=nanotiming(this._name+".createElement"),n=this.createElement.apply(this,s);return e(),this._rootNodeName||(this._rootNodeName=n.nodeName),assert$1(n instanceof window.Element,"nanocomponent: createElement should return a single DOM node"),assert$1.equal(this._rootNodeName,n.nodeName,"nanocomponent: root node types cannot differ between re-renders"),this._arguments=s,this._brandNode(this._ensureID(n))};Nanocomponent.prototype._createProxy=function(){var s=document$1.createElement(this._rootNodeName),e=this;return this._brandNode(s),s.id=this._id,s.setAttribute("data-proxy",""),s.isSameNode=function(n){return n&&n.dataset.nanocomponent===e._ncID},s};Nanocomponent.prototype._reset=function(){this._ncID=makeID(),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null};Nanocomponent.prototype._brandNode=function(s){return s.setAttribute("data-nanocomponent",this._ncID),this._olID&&s.setAttribute(OL_ATTR_ID,this._olID),s};Nanocomponent.prototype._ensureID=function(s){return s.id?this._id=s.id:s.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),s};Nanocomponent.prototype._handleLoad=function(s){if(this._loaded){this.afterreorder&&this.afterreorder(s);return}this._loaded=!0,this.load&&this.load(s)};Nanocomponent.prototype._handleUnload=function(s){this.element||(this._loaded=!1,this.unload&&this.unload(s))};Nanocomponent.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")};Nanocomponent.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};var component=nanocomponent,inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var c=function(){};c.prototype=n.prototype,e.prototype=new c,e.prototype.constructor=e}};function EventEmitter$1(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var events=EventEmitter$1;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._maxListeners=void 0;EventEmitter$1.defaultMaxListeners=10;EventEmitter$1.prototype.setMaxListeners=function(s){if(!isNumber$1(s)||s<0||isNaN(s))throw TypeError("n must be a positive number");return this._maxListeners=s,this};EventEmitter$1.prototype.emit=function(s){var e,n,c,h,u,d;if(this._events||(this._events={}),s==="error"&&(!this._events.error||isObject$1(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var m=new Error('Uncaught, unspecified "error" event. ('+e+")");throw m.context=e,m}if(n=this._events[s],isUndefined(n))return!1;if(isFunction$1(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),n.apply(this,h)}else if(isObject$1(n))for(h=Array.prototype.slice.call(arguments,1),d=n.slice(),c=d.length,u=0;u<c;u++)d[u].apply(this,h);return!0};EventEmitter$1.prototype.addListener=function(s,e){var n;if(!isFunction$1(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,isFunction$1(e.listener)?e.listener:e),this._events[s]?isObject$1(this._events[s])?this._events[s].push(e):this._events[s]=[this._events[s],e]:this._events[s]=e,isObject$1(this._events[s])&&!this._events[s].warned&&(isUndefined(this._maxListeners)?n=EventEmitter$1.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[s].length>n&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),typeof console.trace=="function"&&console.trace())),this};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.once=function(s,e){if(!isFunction$1(e))throw TypeError("listener must be a function");var n=!1;function c(){this.removeListener(s,c),n||(n=!0,e.apply(this,arguments))}return c.listener=e,this.on(s,c),this};EventEmitter$1.prototype.removeListener=function(s,e){var n,c,h,u;if(!isFunction$1(e))throw TypeError("listener must be a function");if(!this._events||!this._events[s])return this;if(n=this._events[s],h=n.length,c=-1,n===e||isFunction$1(n.listener)&&n.listener===e)delete this._events[s],this._events.removeListener&&this.emit("removeListener",s,e);else if(isObject$1(n)){for(u=h;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){c=u;break}if(c<0)return this;n.length===1?(n.length=0,delete this._events[s]):n.splice(c,1),this._events.removeListener&&this.emit("removeListener",s,e)}return this};EventEmitter$1.prototype.removeAllListeners=function(s){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[s]&&delete this._events[s],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[s],isFunction$1(n))this.removeListener(s,n);else if(n)for(;n.length;)this.removeListener(s,n[n.length-1]);return delete this._events[s],this};EventEmitter$1.prototype.listeners=function(s){var e;return!this._events||!this._events[s]?e=[]:isFunction$1(this._events[s])?e=[this._events[s]]:e=this._events[s].slice(),e};EventEmitter$1.prototype.listenerCount=function(s){if(this._events){var e=this._events[s];if(isFunction$1(e))return 1;if(e)return e.length}return 0};EventEmitter$1.listenerCount=function(s,e){return s.listenerCount(e)};function isFunction$1(s){return typeof s=="function"}function isNumber$1(s){return typeof s=="number"}function isObject$1(s){return typeof s=="object"&&s!==null}function isUndefined(s){return s===void 0}var browser$1=commonjsGlobal.performance&&commonjsGlobal.performance.now?function s(){return performance.now()}:Date.now||function s(){return+new Date},raf$2={exports:{}},performanceNow={exports:{}};(function(){var s,e,n,c,h,u;typeof performance!="undefined"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(s()-h)/1e6},e=process.hrtime,s=function(){var d;return d=e(),d[0]*1e9+d[1]},c=s(),u=process.uptime()*1e9,h=c-u):Date.now?(performanceNow.exports=function(){return Date.now()-n},n=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(commonjsGlobal);var now$2=performanceNow.exports,root=typeof window=="undefined"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf$1=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i$1=0;!raf$1&&i$1<vendors.length;i$1++)raf$1=root[vendors[i$1]+"Request"+suffix],caf=root[vendors[i$1]+"Cancel"+suffix]||root[vendors[i$1]+"CancelRequest"+suffix];if(!raf$1||!caf){var last=0,id$1=0,queue=[],frameDuration=1e3/60;raf$1=function(s){if(queue.length===0){var e=now$2(),n=Math.max(0,frameDuration-(e-last));last=n+e,setTimeout(function(){var c=queue.slice(0);queue.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(last)}catch(u){setTimeout(function(){throw u},0)}},Math.round(n))}return queue.push({handle:++id$1,callback:s,cancelled:!1}),id$1},caf=function(s){for(var e=0;e<queue.length;e++)queue[e].handle===s&&(queue[e].cancelled=!0)}}raf$2.exports=function(s){return raf$1.call(root,s)};raf$2.exports.cancel=function(){caf.apply(root,arguments)};raf$2.exports.polyfill=function(s){s||(s=root),s.requestAnimationFrame=raf$1,s.cancelAnimationFrame=caf};var inherits=inherits_browser.exports,EventEmitter=events.EventEmitter,now$1=browser$1,raf=raf$2.exports,rafLoop=Engine;function Engine(s){if(!(this instanceof Engine))return new Engine(s);this.running=!1,this.last=now$1(),this._frame=0,this._tick=this.tick.bind(this),s&&this.on("tick",s)}inherits(Engine,EventEmitter);Engine.prototype.start=function(){if(!this.running)return this.running=!0,this.last=now$1(),this._frame=raf(this._tick),this};Engine.prototype.stop=function(){return this.running=!1,this._frame!==0&&raf.cancel(this._frame),this._frame=0,this};Engine.prototype.tick=function(){this._frame=raf(this._tick);var s=now$1(),e=s-this.last;this.emit("tick",e),this.last=s};class HydraCanvas extends component{constructor(e,n,c){super(e),this.local=n.components[e]={},this.state=n,this.emit=c}load(e){let c=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream?"highp":"mediump";var h=new Hydra({canvas:this.canvas,autoLoop:!1,precision:c});s0.init({src:window.fabricCanvas}),rafLoop(function(u){h.tick(u)}).start(),osc(40).thresh().out(),this.state.hydra=h,this.emit("hydra loaded")}update(e){return!1}createElement({width:e=window.innerWidth,height:n=window.innerHeight}={}){return this.canvas=html$1`<canvas
      style="" width=${e} height=${n}
      ></canvas>`,html$1`<div>${this.canvas}</div>`}}var repl={eval:s=>{const e=`(async() => {
${s}
})().catch(${h=>{const u=h.stack.split(`
`),d=u[1].split(":"),m=parseFloat(d[1])-1,g=d[2];console.log("ERROR INSIDE",u,u[1]),console.log("LINE NUMBER",m,g),window.lintInfo={lineNumber:m,index:g,message:h.message,hasBeenShown:!1},console.log(h.message,h.lineNumber)}})`;var n=document.createElement("script");try{n.language="javascript",n.type="text/javascript",n.defer=!0,n.innerHTML=e;var c=document.getElementsByTagName("head")[0];c.appendChild(n)}catch(h){console.log("error caught",h)}finally{console.log("run at the end"),document.head.removeChild(n)}}};class Text{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,c){let h=[];return this.decompose(0,e,h,2),c.length&&c.decompose(0,c.length,h,3),this.decompose(n,this.length,h,1),TextNode.from(h,this.length-(n-e)+c.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let c=[];return this.decompose(e,n,c,0),TextNode.from(c,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),c=this.length-this.scanIdentical(e,-1),h=new RawTextCursor(this),u=new RawTextCursor(e);for(let d=n,m=n;;){if(h.next(d),u.next(d),d=0,h.lineBreak!=u.lineBreak||h.done!=u.done||h.value!=u.value)return!1;if(m+=h.value.length,h.done||m>=c)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let c;if(e==null)c=this.iter();else{n==null&&(n=this.lines+1);let h=this.line(e).from;c=this.iterRange(h,Math.max(h,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(c)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,c,h){for(let u=0;;u++){let d=this.text[u],m=h+d.length;if((n?c:m)>=e)return new Line$1(h,m,c,d);h=m+1,c++}}decompose(e,n,c,h){let u=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(h&1){let d=c.pop(),m=appendText(u.text,d.text.slice(),0,u.length);if(m.length<=32)c.push(new TextLeaf(m,d.length+u.length));else{let g=m.length>>1;c.push(new TextLeaf(m.slice(0,g)),new TextLeaf(m.slice(g)))}}else c.push(u)}replace(e,n,c){if(!(c instanceof TextLeaf))return super.replace(e,n,c);let h=appendText(this.text,appendText(c.text,sliceText(this.text,0,e)),n),u=this.length+c.length-(n-e);return h.length<=32?new TextLeaf(h,u):TextNode.from(TextLeaf.split(h,[]),u)}sliceString(e,n=this.length,c=`
`){let h="";for(let u=0,d=0;u<=n&&d<this.text.length;d++){let m=this.text[d],g=u+m.length;u>e&&d&&(h+=c),e<g&&n>u&&(h+=m.slice(Math.max(0,e-u),n-u)),u=g+1}return h}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let c=[],h=-1;for(let u of e)c.push(u),h+=u.length+1,c.length==32&&(n.push(new TextLeaf(c,h)),c=[],h=-1);return h>-1&&n.push(new TextLeaf(c,h)),n}}class TextNode extends Text{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let c of e)this.lines+=c.lines}lineInner(e,n,c,h){for(let u=0;;u++){let d=this.children[u],m=h+d.length,g=c+d.lines-1;if((n?g:m)>=e)return d.lineInner(e,n,c,h);h=m+1,c=g+1}}decompose(e,n,c,h){for(let u=0,d=0;d<=n&&u<this.children.length;u++){let m=this.children[u],g=d+m.length;if(e<=g&&n>=d){let b=h&((d<=e?1:0)|(g>=n?2:0));d>=e&&g<=n&&!b?c.push(m):m.decompose(e-d,n-d,c,b)}d=g+1}}replace(e,n,c){if(c.lines<this.lines)for(let h=0,u=0;h<this.children.length;h++){let d=this.children[h],m=u+d.length;if(e>=u&&n<=m){let g=d.replace(e-u,n-u,c),b=this.lines-d.lines+g.lines;if(g.lines<b>>5-1&&g.lines>b>>5+1){let O=this.children.slice();return O[h]=g,new TextNode(O,this.length-(n-e)+c.length)}return super.replace(u,m,g)}u=m+1}return super.replace(e,n,c)}sliceString(e,n=this.length,c=`
`){let h="";for(let u=0,d=0;u<this.children.length&&d<=n;u++){let m=this.children[u],g=d+m.length;d>e&&u&&(h+=c),e<g&&n>d&&(h+=m.sliceString(e-d,n-d,c)),d=g+1}return h}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof TextNode))return 0;let c=0,[h,u,d,m]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;h+=n,u+=n){if(h==d||u==m)return c;let g=this.children[h],b=e.children[u];if(g!=b)return c+g.scanIdentical(b,n);c+=g.length+1}}static from(e,n=e.reduce((c,h)=>c+h.length+1,-1)){let c=0;for(let w of e)c+=w.lines;if(c<32){let w=[];for(let S of e)S.flatten(w);return new TextLeaf(w,n)}let h=Math.max(32,c>>5),u=h<<1,d=h>>1,m=[],g=0,b=-1,O=[];function v(w){let S;if(w.lines>u&&w instanceof TextNode)for(let A of w.children)v(A);else w.lines>d&&(g>d||!g)?(y(),m.push(w)):w instanceof TextLeaf&&g&&(S=O[O.length-1])instanceof TextLeaf&&w.lines+S.lines<=32?(g+=w.lines,b+=w.length+1,O[O.length-1]=new TextLeaf(S.text.concat(w.text),S.length+1+w.length)):(g+w.lines>h&&y(),g+=w.lines,b+=w.length+1,O.push(w))}function y(){g!=0&&(m.push(O.length==1?O[0]:TextNode.from(O,b)),b=-1,g=O.length=0)}for(let w of e)v(w);return y(),m.length==1?m[0]:new TextNode(m,n)}}Text.empty=new TextLeaf([""],0);function textLength(s){let e=-1;for(let n of s)e+=n.length+1;return e}function appendText(s,e,n=0,c=1e9){for(let h=0,u=0,d=!0;u<s.length&&h<=c;u++){let m=s[u],g=h+m.length;g>=n&&(g>c&&(m=m.slice(0,c-h)),h<n&&(m=m.slice(n-h)),d?(e[e.length-1]+=m,d=!1):e.push(m)),h=g+1}return e}function sliceText(s,e,n){return appendText(s,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let c=this.nodes.length-1,h=this.nodes[c],u=this.offsets[c],d=u>>1,m=h instanceof TextLeaf?h.text.length:h.children.length;if(d==(n>0?m:0)){if(c==0)return this.done=!0,this.value="",this;n>0&&this.offsets[c-1]++,this.nodes.pop(),this.offsets.pop()}else if((u&1)==(n>0?0:1)){if(this.offsets[c]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(h instanceof TextLeaf){let g=h.text[d+(n<0?-1:0)];if(this.offsets[c]+=n,g.length>Math.max(0,e))return this.value=e==0?g:n>0?g.slice(e):g.slice(0,g.length-e),this;e-=g.length}else{let g=h.children[d+(n<0?-1:0)];e>g.length?(e-=g.length,this.offsets[c]+=n):(n<0&&this.offsets[c]--,this.nodes.push(g),this.offsets.push(n>0?1:(g instanceof TextLeaf?g.text.length:g.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,c){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>c?-1:1),this.pos=n>c?e.length:0,this.from=Math.min(n,c),this.to=Math.max(n,c)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let c=n<0?this.pos-this.from:this.to-this.pos;e>c&&(e=c),c-=e;let{value:h}=this.cursor.next(e);return this.pos+=(h.length+e)*n,this.value=h.length<=c?h:n<0?h.slice(h.length-c):h.slice(0,c),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:c,value:h}=this.inner.next(e);return n?(this.done=!0,this.value=""):c?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=h,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line$1{constructor(e,n,c,h){this.from=e,this.to=n,this.number=c,this.text=h}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<extend.length;s++)extend[s]+=extend[s-1];function isExtendingChar(s){for(let e=1;e<extend.length;e+=2)if(extend[e]>s)return extend[e-1]<=s;return!1}function isRegionalIndicator(s){return s>=127462&&s<=127487}const ZWJ=8205;function findClusterBreak(s,e,n=!0,c=!0){return(n?nextClusterBreak:prevClusterBreak)(s,e,c)}function nextClusterBreak(s,e,n){if(e==s.length)return e;e&&surrogateLow(s.charCodeAt(e))&&surrogateHigh(s.charCodeAt(e-1))&&e--;let c=codePointAt(s,e);for(e+=codePointSize(c);e<s.length;){let h=codePointAt(s,e);if(c==ZWJ||h==ZWJ||n&&isExtendingChar(h))e+=codePointSize(h),c=h;else if(isRegionalIndicator(h)){let u=0,d=e-2;for(;d>=0&&isRegionalIndicator(codePointAt(s,d));)u++,d-=2;if(u%2==0)break;e+=2}else break}return e}function prevClusterBreak(s,e,n){for(;e>0;){let c=nextClusterBreak(s,e-2,n);if(c<e)return c;e--}return 0}function surrogateLow(s){return s>=56320&&s<57344}function surrogateHigh(s){return s>=55296&&s<56320}function codePointAt(s,e){let n=s.charCodeAt(e);if(!surrogateHigh(n)||e+1==s.length)return n;let c=s.charCodeAt(e+1);return surrogateLow(c)?(n-55296<<10)+(c-56320)+65536:n}function fromCodePoint(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function codePointSize(s){return s<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let c=this.sections[n+1];e+=c<0?this.sections[n]:c}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,c=0,h=0;n<this.sections.length;){let u=this.sections[n++],d=this.sections[n++];d<0?(e(c,h,u),h+=u):h+=d,c+=u}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let c=this.sections[n++],h=this.sections[n++];h<0?e.push(c,h):e.push(h,c)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,c=MapMode.Simple){let h=0,u=0;for(let d=0;d<this.sections.length;){let m=this.sections[d++],g=this.sections[d++],b=h+m;if(g<0){if(b>e)return u+(e-h);u+=m}else{if(c!=MapMode.Simple&&b>=e&&(c==MapMode.TrackDel&&h<e&&b>e||c==MapMode.TrackBefore&&h<e||c==MapMode.TrackAfter&&b>e))return null;if(b>e||b==e&&n<0&&!m)return e==h||n<0?u:u+g;u+=g}h=b}if(e>h)throw new RangeError(`Position ${e} is out of range for changeset of length ${h}`);return u}touchesRange(e,n=e){for(let c=0,h=0;c<this.sections.length&&h<=n;){let u=this.sections[c++],d=this.sections[c++],m=h+u;if(d>=0&&h<=n&&m>=e)return h<e&&m>n?"cover":!0;h=m}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let c=this.sections[n++],h=this.sections[n++];e+=(e?" ":"")+c+(h>=0?":"+h:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,c,h,u,d)=>e=e.replace(h,h+(c-n),d),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),c=[];for(let h=0,u=0;h<n.length;h+=2){let d=n[h],m=n[h+1];if(m>=0){n[h]=m,n[h+1]=d;let g=h>>1;for(;c.length<g;)c.push(Text.empty);c.push(d?e.slice(u,u+d):Text.empty)}u+=d}return new ChangeSet(n,c)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],c=[],h=[],u=new SectionIter(this);e:for(let d=0,m=0;;){let g=d==e.length?1e9:e[d++];for(;m<g||m==g&&u.len==0;){if(u.done)break e;let O=Math.min(u.len,g-m);addSection(h,O,-1);let v=u.ins==-1?-1:u.off==0?u.ins:0;addSection(n,O,v),v>0&&addInsert(c,n,u.text),u.forward(O),m+=O}let b=e[d++];for(;m<b;){if(u.done)break e;let O=Math.min(u.len,b-m);addSection(n,O,-1),addSection(h,O,u.ins==-1?-1:u.off==0?u.ins:0),u.forward(O),m+=O}}return{changes:new ChangeSet(n,c),filtered:ChangeDesc.create(h)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let c=this.sections[n],h=this.sections[n+1];h<0?e.push(c):h==0?e.push([c]):e.push([c].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,c){let h=[],u=[],d=0,m=null;function g(O=!1){if(!O&&!h.length)return;d<n&&addSection(h,n-d,-1);let v=new ChangeSet(h,u);m=m?m.compose(v.map(m)):v,h=[],u=[],d=0}function b(O){if(Array.isArray(O))for(let v of O)b(v);else if(O instanceof ChangeSet){if(O.length!=n)throw new RangeError(`Mismatched change set length (got ${O.length}, expected ${n})`);g(),m=m?m.compose(O.map(m)):O}else{let{from:v,to:y=v,insert:w}=O;if(v>y||v<0||y>n)throw new RangeError(`Invalid change range ${v} to ${y} (in doc of length ${n})`);let S=w?typeof w=="string"?Text.of(w.split(c||DefaultSplit)):w:Text.empty,A=S.length;if(v==y&&A==0)return;v<d&&g(),v>d&&addSection(h,v-d,-1),addSection(h,y-v,A),addInsert(u,h,S),d=y}}return b(e),g(!m),m}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],c=[];for(let h=0;h<e.length;h++){let u=e[h];if(typeof u=="number")n.push(u,-1);else{if(!Array.isArray(u)||typeof u[0]!="number"||u.some((d,m)=>m&&typeof d!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(u.length==1)n.push(u[0],0);else{for(;c.length<h;)c.push(Text.empty);c[h]=Text.of(u.slice(1)),n.push(u[0],c[h].length)}}}return new ChangeSet(n,c)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(s,e,n,c=!1){if(e==0&&n<=0)return;let h=s.length-2;h>=0&&n<=0&&n==s[h+1]?s[h]+=e:e==0&&s[h]==0?s[h+1]+=n:c?(s[h]+=e,s[h+1]+=n):s.push(e,n)}function addInsert(s,e,n){if(n.length==0)return;let c=e.length-2>>1;if(c<s.length)s[s.length-1]=s[s.length-1].append(n);else{for(;s.length<c;)s.push(Text.empty);s.push(n)}}function iterChanges(s,e,n){let c=s.inserted;for(let h=0,u=0,d=0;d<s.sections.length;){let m=s.sections[d++],g=s.sections[d++];if(g<0)h+=m,u+=m;else{let b=h,O=u,v=Text.empty;for(;b+=m,O+=g,g&&c&&(v=v.append(c[d-2>>1])),!(n||d==s.sections.length||s.sections[d+1]<0);)m=s.sections[d++],g=s.sections[d++];e(h,b,u,O,v),h=b,u=O}}}function mapSet(s,e,n,c=!1){let h=[],u=c?[]:null,d=new SectionIter(s),m=new SectionIter(e);for(let g=-1;;)if(d.ins==-1&&m.ins==-1){let b=Math.min(d.len,m.len);addSection(h,b,-1),d.forward(b),m.forward(b)}else if(m.ins>=0&&(d.ins<0||g==d.i||d.off==0&&(m.len<d.len||m.len==d.len&&!n))){let b=m.len;for(addSection(h,m.ins,-1);b;){let O=Math.min(d.len,b);d.ins>=0&&g<d.i&&d.len<=O&&(addSection(h,0,d.ins),u&&addInsert(u,h,d.text),g=d.i),d.forward(O),b-=O}m.next()}else if(d.ins>=0){let b=0,O=d.len;for(;O;)if(m.ins==-1){let v=Math.min(O,m.len);b+=v,O-=v,m.forward(v)}else if(m.ins==0&&m.len<O)O-=m.len,m.next();else break;addSection(h,b,g<d.i?d.ins:0),u&&g<d.i&&addInsert(u,h,d.text),g=d.i,d.forward(d.len-O)}else{if(d.done&&m.done)return u?ChangeSet.createSet(h,u):ChangeDesc.create(h);throw new Error("Mismatched change set lengths")}}function composeSets(s,e,n=!1){let c=[],h=n?[]:null,u=new SectionIter(s),d=new SectionIter(e);for(let m=!1;;){if(u.done&&d.done)return h?ChangeSet.createSet(c,h):ChangeDesc.create(c);if(u.ins==0)addSection(c,u.len,0,m),u.next();else if(d.len==0&&!d.done)addSection(c,0,d.ins,m),h&&addInsert(h,c,d.text),d.next();else{if(u.done||d.done)throw new Error("Mismatched change set lengths");{let g=Math.min(u.len2,d.len),b=c.length;if(u.ins==-1){let O=d.ins==-1?-1:d.off?0:d.ins;addSection(c,g,O,m),h&&O&&addInsert(h,c,d.text)}else d.ins==-1?(addSection(c,u.off?0:u.len,g,m),h&&addInsert(h,c,u.textBit(g))):(addSection(c,u.off?0:u.len,d.off?0:d.ins,m),h&&!d.off&&addInsert(h,c,d.text));m=(u.ins>g||d.ins>=0&&d.len>g)&&(m||c.length>b),u.forward2(g),d.forward(g)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text.empty:e[n]}textBit(e){let{inserted:n}=this.set,c=this.i-2>>1;return c>=n.length&&!e?Text.empty:n[c].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,c){this.from=e,this.to=n,this.flags=c}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let c,h;return this.empty?c=h=e.mapPos(this.from,n):(c=e.mapPos(this.from,1),h=e.mapPos(this.to,-1)),c==this.from&&h==this.to?this:new SelectionRange(c,h,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let c=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,c)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,c){return new SelectionRange(e,n,c)}}class EditorSelection{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:EditorSelection.create(this.ranges.map(c=>c.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,n=!0){return EditorSelection.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let c=this.ranges.slice();return c[n]=e,EditorSelection.create(c,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(n=>SelectionRange.fromJSON(n)),e.main)}static single(e,n=e){return new EditorSelection([EditorSelection.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let c=0,h=0;h<e.length;h++){let u=e[h];if(u.empty?u.from<=c:u.from<c)return EditorSelection.normalized(e.slice(),n);c=u.to}return new EditorSelection(e,n)}static cursor(e,n=0,c,h){return SelectionRange.create(e,e,(n==0?0:n<0?4:8)|(c==null?3:Math.min(2,c))|(h!=null?h:33554431)<<5)}static range(e,n,c){let h=(c!=null?c:33554431)<<5;return n<e?SelectionRange.create(n,e,16|h|8):SelectionRange.create(e,n,h|(n>e?4:0))}static normalized(e,n=0){let c=e[n];e.sort((h,u)=>h.from-u.from),n=e.indexOf(c);for(let h=1;h<e.length;h++){let u=e[h],d=e[h-1];if(u.empty?u.from<=d.to:u.from<d.to){let m=d.from,g=Math.max(u.to,d.to);h<=n&&n--,e.splice(--h,2,u.anchor>u.head?EditorSelection.range(g,m):EditorSelection.range(m,g))}}return new EditorSelection(e,n)}}function checkSelection(s,e){for(let n of s.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,c,h,u){this.combine=e,this.compareInput=n,this.compare=c,this.isStatic=h,this.id=nextID++,this.default=e([]),this.extensions=typeof u=="function"?u(this):u}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,c)=>n===c),e.compare||(e.combine?(n,c)=>n===c:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=c=>c),this.compute([e],c=>n(c.field(e)))}}function sameArray$1(s,e){return s==e||s.length==e.length&&s.every((n,c)=>n===e[c])}class FacetProvider{constructor(e,n,c,h){this.dependencies=e,this.facet=n,this.type=c,this.value=h,this.id=nextID++}dynamicSlot(e){var n;let c=this.value,h=this.facet.compareInput,u=this.id,d=e[u]>>1,m=this.type==2,g=!1,b=!1,O=[];for(let v of this.dependencies)v=="doc"?g=!0:v=="selection"?b=!0:(((n=e[v.id])!==null&&n!==void 0?n:1)&1)==0&&O.push(e[v.id]);return{create(v){return v.values[d]=c(v),1},update(v,y){if(g&&y.docChanged||b&&(y.docChanged||y.selection)||ensureAll(v,O)){let w=c(v);if(m?!compareArray(w,v.values[d],h):!h(w,v.values[d]))return v.values[d]=w,1}return 0},reconfigure:(v,y)=>{let w=c(v),S=y.config.address[u];if(S!=null){let A=getAddr(y,S);if(this.dependencies.every(E=>E instanceof Facet?y.facet(E)===v.facet(E):E instanceof StateField?y.field(E,!1)==v.field(E,!1):!0)||(m?compareArray(w,A,h):h(w,A)))return v.values[d]=A,0}return v.values[d]=w,1}}}}function compareArray(s,e,n){if(s.length!=e.length)return!1;for(let c=0;c<s.length;c++)if(!n(s[c],e[c]))return!1;return!0}function ensureAll(s,e){let n=!1;for(let c of e)ensureAddr(s,c)&1&&(n=!0);return n}function dynamicFacetSlot(s,e,n){let c=n.map(g=>s[g.id]),h=n.map(g=>g.type),u=c.filter(g=>!(g&1)),d=s[e.id]>>1;function m(g){let b=[];for(let O=0;O<c.length;O++){let v=getAddr(g,c[O]);if(h[O]==2)for(let y of v)b.push(y);else b.push(v)}return e.combine(b)}return{create(g){for(let b of c)ensureAddr(g,b);return g.values[d]=m(g),1},update(g,b){if(!ensureAll(g,u))return 0;let O=m(g);return e.compare(O,g.values[d])?0:(g.values[d]=O,1)},reconfigure(g,b){let O=ensureAll(g,c),v=b.config.facets[e.id],y=b.facet(e);if(v&&!O&&sameArray$1(n,v))return g.values[d]=y,0;let w=m(g);return e.compare(w,y)?(g.values[d]=y,0):(g.values[d]=w,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,c,h,u){this.id=e,this.createF=n,this.updateF=c,this.compareF=h,this.spec=u,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((c,h)=>c===h),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(c=>c.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:c=>(c.values[n]=this.create(c),1),update:(c,h)=>{let u=c.values[n],d=this.updateF(u,h);return this.compareF(u,d)?0:(c.values[n]=d,1)},reconfigure:(c,h)=>h.config.address[this.id]!=null?(c.values[n]=h.field(this),0):(c.values[n]=this.create(c),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(s){return e=>new PrecExtension(e,s)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,c,h,u,d){for(this.base=e,this.compartments=n,this.dynamicSlots=c,this.address=h,this.staticValues=u,this.facets=d,this.statusTemplate=[];this.statusTemplate.length<c.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,c){let h=[],u=Object.create(null),d=new Map;for(let y of flatten(e,n,d))y instanceof StateField?h.push(y):(u[y.facet.id]||(u[y.facet.id]=[])).push(y);let m=Object.create(null),g=[],b=[];for(let y of h)m[y.id]=b.length<<1,b.push(w=>y.slot(w));let O=c==null?void 0:c.config.facets;for(let y in u){let w=u[y],S=w[0].facet,A=O&&O[y]||[];if(w.every(E=>E.type==0))if(m[S.id]=g.length<<1|1,sameArray$1(A,w))g.push(c.facet(S));else{let E=S.combine(w.map(P=>P.value));g.push(c&&S.compare(E,c.facet(S))?c.facet(S):E)}else{for(let E of w)E.type==0?(m[E.id]=g.length<<1|1,g.push(E.value)):(m[E.id]=b.length<<1,b.push(P=>E.dynamicSlot(P)));m[S.id]=b.length<<1,b.push(E=>dynamicFacetSlot(E,S,w))}}let v=b.map(y=>y(m));return new Configuration(e,d,v,m,g,u)}}function flatten(s,e,n){let c=[[],[],[],[],[]],h=new Map;function u(d,m){let g=h.get(d);if(g!=null){if(g<=m)return;let b=c[g].indexOf(d);b>-1&&c[g].splice(b,1),d instanceof CompartmentInstance&&n.delete(d.compartment)}if(h.set(d,m),Array.isArray(d))for(let b of d)u(b,m);else if(d instanceof CompartmentInstance){if(n.has(d.compartment))throw new RangeError("Duplicate use of compartment in extensions");let b=e.get(d.compartment)||d.inner;n.set(d.compartment,b),u(b,m)}else if(d instanceof PrecExtension)u(d.inner,d.prec);else if(d instanceof StateField)c[m].push(d),d.provides&&u(d.provides,m);else if(d instanceof FacetProvider)c[m].push(d),d.facet.extensions&&u(d.facet.extensions,m);else{let b=d.extension;if(!b)throw new Error(`Unrecognized extension value in extension set (${d}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);u(b,m)}}return u(s,Prec_.default),c.reduce((d,m)=>d.concat(m))}function ensureAddr(s,e){if(e&1)return 2;let n=e>>1,c=s.status[n];if(c==4)throw new Error("Cyclic dependency between fields and/or facets");if(c&2)return c;s.status[n]=4;let h=s.computeSlot(s,s.config.dynamicSlots[n]);return s.status[n]=2|h}function getAddr(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:s=>s.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:s=>s.length?s[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly$1=Facet.define({combine:s=>s.length?s[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let c=[];for(let h of e){let u=h.map(n);u&&c.push(u)}return c}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,c,h,u,d){this.startState=e,this.changes=n,this.selection=c,this.effects=h,this.annotations=u,this.scrollIntoView=d,this._doc=null,this._state=null,c&&checkSelection(c,n.newLength),u.some(m=>m.type==Transaction.time)||(this.annotations=u.concat(Transaction.time.of(Date.now())))}static create(e,n,c,h,u,d){return new Transaction(e,n,c,h,u,d)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(s,e){let n=[];for(let c=0,h=0;;){let u,d;if(c<s.length&&(h==e.length||e[h]>=s[c]))u=s[c++],d=s[c++];else if(h<e.length)u=e[h++],d=e[h++];else return n;!n.length||n[n.length-1]<u?n.push(u,d):n[n.length-1]<d&&(n[n.length-1]=d)}}function mergeTransaction(s,e,n){var c;let h,u,d;return n?(h=e.changes,u=ChangeSet.empty(e.changes.length),d=s.changes.compose(e.changes)):(h=e.changes.map(s.changes),u=s.changes.mapDesc(e.changes,!0),d=s.changes.compose(h)),{changes:d,selection:e.selection?e.selection.map(u):(c=s.selection)===null||c===void 0?void 0:c.map(h),effects:StateEffect.mapEffects(s.effects,h).concat(StateEffect.mapEffects(e.effects,u)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(s,e,n){let c=e.selection,h=asArray$1(e.annotations);return e.userEvent&&(h=h.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,s.facet(lineSeparator)),selection:c&&(c instanceof EditorSelection?c:EditorSelection.single(c.anchor,c.head)),effects:asArray$1(e.effects),annotations:h,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(s,e,n){let c=resolveTransactionInner(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let u=1;u<e.length;u++){e[u].filter===!1&&(n=!1);let d=!!e[u].sequential;c=mergeTransaction(c,resolveTransactionInner(s,e[u],d?c.changes.newLength:s.doc.length),d)}let h=Transaction.create(s,c.changes,c.selection,c.effects,c.annotations,c.scrollIntoView);return extendTransaction(n?filterTransaction(h):h)}function filterTransaction(s){let e=s.startState,n=!0;for(let h of e.facet(changeFilter)){let u=h(s);if(u===!1){n=!1;break}Array.isArray(u)&&(n=n===!0?u:joinRanges(n,u))}if(n!==!0){let h,u;if(n===!1)u=s.changes.invertedDesc,h=ChangeSet.empty(e.doc.length);else{let d=s.changes.filter(n);h=d.changes,u=d.filtered.mapDesc(d.changes).invertedDesc}s=Transaction.create(e,h,s.selection&&s.selection.map(u),StateEffect.mapEffects(s.effects,u),s.annotations,s.scrollIntoView)}let c=e.facet(transactionFilter);for(let h=c.length-1;h>=0;h--){let u=c[h](s);u instanceof Transaction?s=u:Array.isArray(u)&&u.length==1&&u[0]instanceof Transaction?s=u[0]:s=resolveTransaction(e,asArray$1(u),!1)}return s}function extendTransaction(s){let e=s.startState,n=e.facet(transactionExtender),c=s;for(let h=n.length-1;h>=0;h--){let u=n[h](s);u&&Object.keys(u).length&&(c=mergeTransaction(s,resolveTransactionInner(e,u,s.changes.newLength),!0))}return c==s?s:Transaction.create(e,s.changes,s.selection,c.effects,c.annotations,c.scrollIntoView)}const none$2=[];function asArray$1(s){return s==null?none$2:Array.isArray(s)?s:[s]}var CharCategory=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(s){}function hasWordChar(s){if(wordChar)return wordChar.test(s);for(let e=0;e<s.length;e++){let n=s[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(s){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<s.length;n++)if(e.indexOf(s[n])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,n,c,h,u,d){this.config=e,this.doc=n,this.selection=c,this.values=h,this.status=e.statusTemplate.slice(),this.computeSlot=u,d&&(d._state=this);for(let m=0;m<this.config.dynamicSlots.length;m++)ensureAddr(this,m<<1);this.computeSlot=null}field(e,n=!0){let c=this.config.address[e.id];if(c==null){if(n)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,c),getAddr(this,c)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let n=this.config,{base:c,compartments:h}=n;for(let d of e.effects)d.is(Compartment.reconfigure)?(n&&(h=new Map,n.compartments.forEach((m,g)=>h.set(g,m)),n=null),h.set(d.value.compartment,d.value.extension)):d.is(StateEffect.reconfigure)?(n=null,c=d.value):d.is(StateEffect.appendConfig)&&(n=null,c=asArray$1(c).concat(d.value));let u;n?u=e.startState.values.slice():(n=Configuration.resolve(c,h,this),u=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(m,g)=>g.reconfigure(m,this),null).values),new EditorState(n,e.newDoc,e.newSelection,u,(d,m)=>m.update(d,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:EditorSelection.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,c=e(n.ranges[0]),h=this.changes(c.changes),u=[c.range],d=asArray$1(c.effects);for(let m=1;m<n.ranges.length;m++){let g=e(n.ranges[m]),b=this.changes(g.changes),O=b.map(h);for(let y=0;y<m;y++)u[y]=u[y].map(O);let v=h.mapDesc(b,!0);u.push(g.range.map(v)),h=h.compose(O),d=StateEffect.mapEffects(d,O).concat(StateEffect.mapEffects(asArray$1(g.effects),v))}return{changes:h,selection:EditorSelection.create(u,n.mainIndex),effects:d}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ensureAddr(this,n),getAddr(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let c in e){let h=e[c];h instanceof StateField&&this.config.address[h.id]!=null&&(n[c]=h.spec.toJSON(this.field(e[c]),this))}return n}static fromJSON(e,n={},c){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let h=[];if(c){for(let u in c)if(Object.prototype.hasOwnProperty.call(e,u)){let d=c[u],m=e[u];h.push(d.init(g=>d.spec.fromJSON(m,g)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:n.extensions?h.concat([n.extensions]):h})}static create(e={}){let n=Configuration.resolve(e.extensions||[],new Map),c=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(n.staticFacet(EditorState.lineSeparator)||DefaultSplit)),h=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(h,c.length),n.staticFacet(allowMultipleSelections)||(h=h.asSingle()),new EditorState(n,c,h,n.dynamicSlots.map(()=>null),(u,d)=>d.create(u),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly$1)}phrase(e,...n){for(let c of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(c,e)){e=c[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(c,h)=>{if(h=="$")return"$";let u=+(h||1);return!u||u>n.length?c:n[u-1]})),e}languageDataAt(e,n,c=-1){let h=[];for(let u of this.facet(languageData))for(let d of u(this,n,c))Object.prototype.hasOwnProperty.call(d,e)&&h.push(d[e]);return h}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:c,length:h}=this.doc.lineAt(e),u=this.charCategorizer(e),d=e-c,m=e-c;for(;d>0;){let g=findClusterBreak(n,d,!1);if(u(n.slice(g,d))!=CharCategory.Word)break;d=g}for(;m<h;){let g=findClusterBreak(n,m);if(u(n.slice(m,g))!=CharCategory.Word)break;m=g}return d==m?null:EditorSelection.range(d+c,m+c)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:s=>s.length?s[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly$1;EditorState.phrases=Facet.define({compare(s,e){let n=Object.keys(s),c=Object.keys(e);return n.length==c.length&&n.every(h=>s[h]==e[h])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(s,e,n={}){let c={};for(let h of s)for(let u of Object.keys(h)){let d=h[u],m=c[u];if(m===void 0)c[u]=d;else if(!(m===d||d===void 0))if(Object.hasOwnProperty.call(n,u))c[u]=n[u](m,d);else throw new Error("Config merge conflict for field "+u)}for(let h in e)c[h]===void 0&&(c[h]=e[h]);return c}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range$1{constructor(e,n,c){this.from=e,this.to=n,this.value=c}static create(e,n,c){return new Range$1(e,n,c)}}function cmpRange(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Chunk{constructor(e,n,c,h){this.from=e,this.to=n,this.value=c,this.maxPoint=h}get length(){return this.to[this.to.length-1]}findIndex(e,n,c,h=0){let u=c?this.to:this.from;for(let d=h,m=u.length;;){if(d==m)return d;let g=d+m>>1,b=u[g]-e||(c?this.value[g].endSide:this.value[g].startSide)-n;if(g==d)return b>=0?d:m;b>=0?m=g:d=g+1}}between(e,n,c,h){for(let u=this.findIndex(n,-1e9,!0),d=this.findIndex(c,1e9,!1,u);u<d;u++)if(h(this.from[u]+e,this.to[u]+e,this.value[u])===!1)return!1}map(e,n){let c=[],h=[],u=[],d=-1,m=-1;for(let g=0;g<this.value.length;g++){let b=this.value[g],O=this.from[g]+e,v=this.to[g]+e,y,w;if(O==v){let S=n.mapPos(O,b.startSide,b.mapMode);if(S==null||(y=w=S,b.startSide!=b.endSide&&(w=n.mapPos(O,b.endSide),w<y)))continue}else if(y=n.mapPos(O,b.startSide),w=n.mapPos(v,b.endSide),y>w||y==w&&b.startSide>0&&b.endSide<=0)continue;(w-y||b.endSide-b.startSide)<0||(d<0&&(d=y),b.point&&(m=Math.max(m,w-y)),c.push(b),h.push(y-d),u.push(w-d))}return{mapped:c.length?new Chunk(h,u,c,m):null,pos:d}}}class RangeSet{constructor(e,n,c,h){this.chunkPos=e,this.chunk=n,this.nextLayer=c,this.maxPoint=h}static create(e,n,c,h){return new RangeSet(e,n,c,h)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:c=!1,filterFrom:h=0,filterTo:u=this.length}=e,d=e.filter;if(n.length==0&&!d)return this;if(c&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let m=new LayerCursor(this,null,-1).goto(0),g=0,b=[],O=new RangeSetBuilder;for(;m.value||g<n.length;)if(g<n.length&&(m.from-n[g].from||m.startSide-n[g].value.startSide)>=0){let v=n[g++];O.addInner(v.from,v.to,v.value)||b.push(v)}else m.rangeIndex==1&&m.chunkIndex<this.chunk.length&&(g==n.length||this.chunkEnd(m.chunkIndex)<n[g].from)&&(!d||h>this.chunkEnd(m.chunkIndex)||u<this.chunkPos[m.chunkIndex])&&O.addChunk(this.chunkPos[m.chunkIndex],this.chunk[m.chunkIndex])?m.nextChunk():((!d||h>m.to||u<m.from||d(m.from,m.to,m.value))&&(O.addInner(m.from,m.to,m.value)||b.push(Range$1.create(m.from,m.to,m.value))),m.next());return O.finishInner(this.nextLayer.isEmpty&&!b.length?RangeSet.empty:this.nextLayer.update({add:b,filter:d,filterFrom:h,filterTo:u}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],c=[],h=-1;for(let d=0;d<this.chunk.length;d++){let m=this.chunkPos[d],g=this.chunk[d],b=e.touchesRange(m,m+g.length);if(b===!1)h=Math.max(h,g.maxPoint),n.push(g),c.push(e.mapPos(m));else if(b===!0){let{mapped:O,pos:v}=g.map(m,e);O&&(h=Math.max(h,O.maxPoint),n.push(O),c.push(v))}}let u=this.nextLayer.map(e);return n.length==0?u:new RangeSet(c,n,u||RangeSet.empty,h)}between(e,n,c){if(!this.isEmpty){for(let h=0;h<this.chunk.length;h++){let u=this.chunkPos[h],d=this.chunk[h];if(n>=u&&e<=u+d.length&&d.between(u,e-u,n-u,c)===!1)return}this.nextLayer.between(e,n,c)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,c,h,u=-1){let d=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=u),m=n.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=u),g=findSharedChunks(d,m,c),b=new SpanCursor(d,g,u),O=new SpanCursor(m,g,u);c.iterGaps((v,y,w)=>compare(b,v,O,y,w,h)),c.empty&&c.length==0&&compare(b,0,O,0,0,h)}static eq(e,n,c=0,h){h==null&&(h=1e9);let u=e.filter(O=>!O.isEmpty&&n.indexOf(O)<0),d=n.filter(O=>!O.isEmpty&&e.indexOf(O)<0);if(u.length!=d.length)return!1;if(!u.length)return!0;let m=findSharedChunks(u,d),g=new SpanCursor(u,m,0).goto(c),b=new SpanCursor(d,m,0).goto(c);for(;;){if(g.to!=b.to||!sameValues(g.active,b.active)||g.point&&(!b.point||!g.point.eq(b.point)))return!1;if(g.to>h)return!0;g.next(),b.next()}}static spans(e,n,c,h,u=-1){let d=new SpanCursor(e,null,u).goto(n),m=n,g=d.openStart;for(;;){let b=Math.min(d.to,c);if(d.point?(h.point(m,b,d.point,d.activeForPoint(d.to),g,d.pointRank),g=d.openEnd(b)+(d.to>b?1:0)):b>m&&(h.span(m,b,d.active,g),g=d.openEnd(b)),d.to>c)break;m=d.to,d.next()}return g}static of(e,n=!1){let c=new RangeSetBuilder;for(let h of e instanceof Range$1?[e]:n?lazySort(e):e)c.add(h.from,h.to,h.value);return c.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(s){if(s.length>1)for(let e=s[0],n=1;n<s.length;n++){let c=s[n];if(cmpRange(e,c)>0)return s.slice().sort(cmpRange);e=c}return s}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,n,c){this.addInner(e,n,c)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,c)}addInner(e,n,c){let h=e-this.lastTo||c.startSide-this.last.endSide;if(h<=0&&(e-this.lastFrom||c.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return h<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=c,this.lastFrom=e,this.lastTo=n,this.value.push(c),c.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let c=n.value.length-1;return this.last=n.value[c],this.lastFrom=n.from[c]+e,this.lastTo=n.to[c]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(s,e,n){let c=new Map;for(let u of s)for(let d=0;d<u.chunk.length;d++)u.chunk[d].maxPoint<=0&&c.set(u.chunk[d],u.chunkPos[d]);let h=new Set;for(let u of e)for(let d=0;d<u.chunk.length;d++){let m=c.get(u.chunk[d]);m!=null&&(n?n.mapPos(m):m)==u.chunkPos[d]&&!(n!=null&&n.touchesRange(m,m+u.chunk[d].length))&&h.add(u.chunk[d])}return h}class LayerCursor{constructor(e,n,c,h=0){this.layer=e,this.skip=n,this.minPoint=c,this.rank=h}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,c){for(;this.chunkIndex<this.layer.chunk.length;){let h=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(h)||this.layer.chunkEnd(this.chunkIndex)<e||h.maxPoint<this.minPoint))break;this.chunkIndex++,c=!1}if(this.chunkIndex<this.layer.chunk.length){let h=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!c||this.rangeIndex<h)&&this.setRangeIndex(h)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],c=e+n.from[this.rangeIndex];if(this.from=c,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,c=-1){let h=[];for(let u=0;u<e.length;u++)for(let d=e[u];!d.isEmpty;d=d.nextLayer)d.maxPoint>=c&&h.push(new LayerCursor(d,n,c,u));return h.length==1?h[0]:new HeapCursor(h)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let c of this.heap)c.goto(e,n);for(let c=this.heap.length>>1;c>=0;c--)heapBubble(this.heap,c);return this.next(),this}forward(e,n){for(let c of this.heap)c.forward(e,n);for(let c=this.heap.length>>1;c>=0;c--)heapBubble(this.heap,c);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(s,e){for(let n=s[e];;){let c=(e<<1)+1;if(c>=s.length)break;let h=s[c];if(c+1<s.length&&h.compare(s[c+1])>=0&&(h=s[c+1],c++),n.compare(h)<0)break;s[c]=n,s[e]=h,e=c}}class SpanCursor{constructor(e,n,c){this.minPoint=c,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,c)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:c,to:h,rank:u}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=u;)n++;insert(this.active,n,c),insert(this.activeTo,n,h),insert(this.activeRank,n,u),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let c=this.openStart<0?[]:null,h=0;for(;;){let u=this.minActive;if(u>-1&&(this.activeTo[u]-this.cursor.from||this.active[u].endSide-this.cursor.startSide)<0){if(this.activeTo[u]>e){this.to=this.activeTo[u],this.endSide=this.active[u].endSide;break}this.removeActive(u),c&&remove(c,u)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let d=this.cursor.value;if(!d.point)this.addActive(c),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=d,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=d.endSide,this.cursor.from<e&&(h=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(c){let u=0;for(;u<c.length&&c[u]<e;)u++;this.openStart=u+h}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let c=this.active.length-1;c>=0&&!(this.activeRank[c]<this.pointRank);c--)(this.activeTo[c]>e||this.activeTo[c]==e&&this.active[c].endSide>=this.point.endSide)&&n.push(this.active[c]);return n.reverse()}openEnd(e){let n=0;for(let c=this.activeTo.length-1;c>=0&&this.activeTo[c]>e;c--)n++;return n}}function compare(s,e,n,c,h,u){s.goto(e),n.goto(c);let d=c+h,m=c,g=c-e;for(;;){let b=s.to+g-n.to||s.endSide-n.endSide,O=b<0?s.to+g:n.to,v=Math.min(O,d);if(s.point||n.point?s.point&&n.point&&(s.point==n.point||s.point.eq(n.point))&&sameValues(s.activeForPoint(s.to+g),n.activeForPoint(n.to))||u.comparePoint(m,v,s.point,n.point):v>m&&!sameValues(s.active,n.active)&&u.compareRange(m,v,s.active,n.active),O>d)break;m=O,b<=0&&s.next(),b>=0&&n.next()}}function sameValues(s,e){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!=e[n]&&!s[n].eq(e[n]))return!1;return!0}function remove(s,e){for(let n=e,c=s.length-1;n<c;n++)s[n]=s[n+1];s.pop()}function insert(s,e,n){for(let c=s.length-1;c>=e;c--)s[c+1]=s[c];s[e]=n}function findMinIndex(s,e){let n=-1,c=1e9;for(let h=0;h<e.length;h++)(e[h]-c||s[h].endSide-s[n].endSide)<0&&(n=h,c=e[h]);return n}function countColumn(s,e,n=s.length){let c=0;for(let h=0;h<n;)s.charCodeAt(h)==9?(c+=e-c%e,h++):(c++,h=findClusterBreak(s,h));return c}function findColumn(s,e,n,c){for(let h=0,u=0;;){if(u>=e)return h;if(h==s.length)break;u+=s.charCodeAt(h)==9?n-u%n:1,h=findClusterBreak(s,h)}return c===!0?-1:s.length}const C="\u037C",COUNT=typeof Symbol=="undefined"?"__"+C:Symbol.for(C),SET=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:c}=n||{};function h(d){return/^@/.test(d)?[d]:d.split(/,\s*/)}function u(d,m,g,b){let O=[],v=/^@(\w+)\b/.exec(d[0]),y=v&&v[1]=="keyframes";if(v&&m==null)return g.push(d[0]+";");for(let w in m){let S=m[w];if(/&/.test(w))u(w.split(/,\s*/).map(A=>d.map(E=>A.replace(/&/,E))).reduce((A,E)=>A.concat(E)),S,g);else if(S&&typeof S=="object"){if(!v)throw new RangeError("The value of a property ("+w+") should be a primitive value.");u(h(w),S,O,y)}else S!=null&&O.push(w.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+S+";")}(O.length||y)&&g.push((c&&!v&&!b?d.map(c):d).join(", ")+" {"+O.join(" ")+"}")}for(let d in e)u(h(d),e[d],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,n){(e[SET]||new StyleSet(e)).mount(Array.isArray(n)?n:[n])}}let adoptedSet=null;class StyleSet{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(adoptedSet)return e.adoptedStyleSheets=[adoptedSet.sheet].concat(e.adoptedStyleSheets),e[SET]=adoptedSet;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[SET]=this}mount(e){let n=this.sheet,c=0,h=0;for(let u=0;u<e.length;u++){let d=e[u],m=this.modules.indexOf(d);if(m<h&&m>-1&&(this.modules.splice(m,1),h--,m=-1),m==-1){if(this.modules.splice(h++,0,d),n)for(let g=0;g<d.rules.length;g++)n.insertRule(d.rules[g],c++)}else{for(;h<m;)c+=this.modules[h++].rules.length;c+=d.rules.length,h++}}if(!n){let u="";for(let d=0;d<this.modules.length;d++)u+=this.modules[d].getRules()+`
`;this.styleTag.textContent=u}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},chrome$1=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),safari$1=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),gecko$1=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),mac=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),ie$2=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=chrome$1&&(mac||+chrome$1[1]<57)||gecko$1&&mac;for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var e=brokenModifierNames&&(s.ctrlKey||s.altKey||s.metaKey)||(safari$1||ie$2)&&s.shiftKey&&s.key&&s.key.length==1,n=!e&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function getSelection(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function contains(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(){let s=document.activeElement;for(;s&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function hasSelection(s,e){if(!e.anchorNode)return!1;try{return contains(s,e.anchorNode)}catch{return!1}}function clientRectsFor(s){return s.nodeType==3?textRange(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function isEquivalentPosition(s,e,n,c){return n?scanFor(s,e,n,c,-1)||scanFor(s,e,n,c,1):!1}function domIndex(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function scanFor(s,e,n,c,h){for(;;){if(s==n&&e==c)return!0;if(e==(h<0?0:maxOffset(s))){if(s.nodeName=="DIV")return!1;let u=s.parentNode;if(!u||u.nodeType!=1)return!1;e=domIndex(s)+(h<0?0:1),s=u}else if(s.nodeType==1){if(s=s.childNodes[e+(h<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=h<0?maxOffset(s):0}else return!1}}function maxOffset(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(s,e){let n=e?s.left:s.right;return{left:n,right:n,top:s.top,bottom:s.bottom}}function windowRect(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function scrollRectIntoView(s,e,n,c,h,u,d,m){let g=s.ownerDocument,b=g.defaultView;for(let O=s;O;)if(O.nodeType==1){let v,y=O==g.body;if(y)v=windowRect(b);else{if(O.scrollHeight<=O.clientHeight&&O.scrollWidth<=O.clientWidth){O=O.parentNode;continue}let A=O.getBoundingClientRect();v={left:A.left,right:A.left+O.clientWidth,top:A.top,bottom:A.top+O.clientHeight}}let w=0,S=0;if(h=="nearest")e.top<v.top?(S=-(v.top-e.top+d),n>0&&e.bottom>v.bottom+S&&(S=e.bottom-v.bottom+S+d)):e.bottom>v.bottom&&(S=e.bottom-v.bottom+d,n<0&&e.top-S<v.top&&(S=-(v.top+S-e.top+d)));else{let A=e.bottom-e.top,E=v.bottom-v.top;S=(h=="center"&&A<=E?e.top+A/2-E/2:h=="start"||h=="center"&&n<0?e.top-d:e.bottom-E+d)-v.top}if(c=="nearest"?e.left<v.left?(w=-(v.left-e.left+u),n>0&&e.right>v.right+w&&(w=e.right-v.right+w+u)):e.right>v.right&&(w=e.right-v.right+u,n<0&&e.left<v.left+w&&(w=-(v.left+w-e.left+u))):w=(c=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:c=="start"==m?e.left-u:e.right-(v.right-v.left)+u)-v.left,w||S)if(y)b.scrollBy(w,S);else{if(S){let A=O.scrollTop;O.scrollTop+=S,S=O.scrollTop-A}if(w){let A=O.scrollLeft;O.scrollLeft+=w,w=O.scrollLeft-A}e={left:e.left-w,top:e.top-S,right:e.right-w,bottom:e.bottom-S}}if(y)break;O=O.assignedSlot||O.parentNode,c=h="nearest"}else if(O.nodeType==11)O=O.host;else break}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,n,c,h){this.anchorNode=e,this.anchorOffset=n,this.focusNode=c,this.focusOffset=h}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let e=[];for(let n=s;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let c=e[n++],h=e[n++],u=e[n++];c.scrollTop!=h&&(c.scrollTop=h),c.scrollLeft!=u&&(c.scrollLeft=u)}}}let scratchRange;function textRange(s,e,n=e){let c=scratchRange||(scratchRange=document.createRange());return c.setEnd(s,n),c.setStart(s,e),c}function dispatchKey(s,e,n){let c={key:e,code:e,keyCode:n,which:n,cancelable:!0},h=new KeyboardEvent("keydown",c);h.synthetic=!0,s.dispatchEvent(h);let u=new KeyboardEvent("keyup",c);return u.synthetic=!0,s.dispatchEvent(u),h.defaultPrevented||u.defaultPrevented}function getRoot(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function clearAttributes(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}class DOMPos{constructor(e,n,c=!0){this.node=e,this.offset=n,this.precise=c}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let c of this.children){if(c==e)return n;n+=c.length+c.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,n){return null}sync(e){if(this.dirty&2){let n=this.dom,c=null,h;for(let u of this.children){if(u.dirty){if(!u.dom&&(h=c?c.nextSibling:n.firstChild)){let d=ContentView.get(h);(!d||!d.parent&&d.constructor==u.constructor)&&u.reuseDOM(h)}u.sync(e),u.dirty=0}if(h=c?c.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&h!=u.dom&&(e.written=!0),u.dom.parentNode==n)for(;h&&h!=u.dom;)h=rm$1(h);else n.insertBefore(u.dom,h);c=u.dom}for(h=c?c.nextSibling:n.firstChild,h&&e&&e.node==n&&(e.written=!0);h;)h=rm$1(h)}else if(this.dirty&1)for(let n of this.children)n.dirty&&(n.sync(e),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,n){let c;if(e==this.dom)c=this.dom.childNodes[n];else{let h=maxOffset(e)==0?0:n==0?-1:1;for(;;){let u=e.parentNode;if(u==this.dom)break;h==0&&u.firstChild!=u.lastChild&&(e==u.firstChild?h=-1:h=1),e=u}h<0?c=e:c=e.nextSibling}if(c==this.dom.firstChild)return 0;for(;c&&!ContentView.get(c);)c=c.nextSibling;if(!c)return this.length;for(let h=0,u=0;;h++){let d=this.children[h];if(d.dom==c)return u;u+=d.length+d.breakAfter}}domBoundsAround(e,n,c=0){let h=-1,u=-1,d=-1,m=-1;for(let g=0,b=c,O=c;g<this.children.length;g++){let v=this.children[g],y=b+v.length;if(b<e&&y>n)return v.domBoundsAround(e,n,b);if(y>=e&&h==-1&&(h=g,u=b),b>n&&v.dom.parentNode==this.dom){d=g,m=O;break}O=y,b=y+v.breakAfter}return{from:u,to:m<0?c+this.length:m,startDOM:(h?this.children[h-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:d<this.children.length&&d>=0?this.children[d].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,c=noChildren){this.markDirty();for(let h=e;h<n;h++){let u=this.children[h];u.parent==this&&u.destroy()}this.children.splice(e,n-e,...c);for(let h=0;h<c.length;h++)c[h].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,n,c,h,u,d){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ChildCursor{constructor(e,n,c){this.children=e,this.pos=n,this.i=c,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let c=this.children[--this.i];this.pos-=c.length+c.breakAfter}}}function replaceRange(s,e,n,c,h,u,d,m,g){let{children:b}=s,O=b.length?b[e]:null,v=u.length?u[u.length-1]:null,y=v?v.breakAfter:d;if(!(e==c&&O&&!d&&!y&&u.length<2&&O.merge(n,h,u.length?v:null,n==0,m,g))){if(c<b.length){let w=b[c];w&&h<w.length?(e==c&&(w=w.split(h),h=0),!y&&v&&w.merge(0,h,v,!0,0,g)?u[u.length-1]=w:(h&&w.merge(0,h,null,!1,0,g),u.push(w))):w!=null&&w.breakAfter&&(v?v.breakAfter=1:d=1),c++}for(O&&(O.breakAfter=d,n>0&&(!d&&u.length&&O.merge(n,O.length,u[0],!1,m,0)?O.breakAfter=u.shift().breakAfter:(n<O.length||O.children.length&&O.children[O.children.length-1].length==0)&&O.merge(n,O.length,null,!1,m,0),e++));e<c&&u.length;)if(b[c-1].become(u[u.length-1]))c--,u.pop(),g=u.length?0:m;else if(b[e].become(u[0]))e++,u.shift(),m=u.length?0:g;else break;!u.length&&e&&c<b.length&&!b[e-1].breakAfter&&b[c].merge(0,0,b[e-1],!1,m,g)&&e--,(e<c||u.length)&&s.replaceChildren(e,c,u)}}function mergeChildrenInto(s,e,n,c,h,u){let d=s.childCursor(),{i:m,off:g}=d.findPos(n,1),{i:b,off:O}=d.findPos(e,-1),v=e-n;for(let y of c)v+=y.length;s.length+=v,replaceRange(s,b,O,m,g,c,0,h,u)}let nav=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document!="undefined"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie$1=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie$1&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie$1&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie$1&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:ie$1,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,c){return c&&(!(c instanceof TextView)||this.length-(n-e)+c.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,e)+(c?c.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,n,c){return{from:c,to:c+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return textCoords(this.dom,e,n)}}class MarkView extends ContentView{constructor(e,n=[],c=0){super(),this.mark=e,this.children=n,this.length=c;for(let h of n)h.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,n,c,h,u,d){return c&&(!(c instanceof MarkView&&c.mark.eq(this.mark))||e&&u<=0||n<this.length&&d<=0)?!1:(mergeChildrenInto(this,e,n,c?c.children:[],u-1,d-1),this.markDirty(),!0)}split(e){let n=[],c=0,h=-1,u=0;for(let m of this.children){let g=c+m.length;g>e&&n.push(c<e?m.split(e-c):m),h<0&&c>=e&&(h=u),c=g,u++}let d=this.length-e;return this.length=e,h>-1&&(this.children.length=h,this.markDirty()),new MarkView(this.mark,n,d)}domAtPos(e){return inlineDOMAtPos(this.dom,this.children,e)}coordsAt(e,n){return coordsInChildren(this,e,n)}}function textCoords(s,e,n){let c=s.nodeValue.length;e>c&&(e=c);let h=e,u=e,d=0;e==0&&n<0||e==c&&n>=0?browser.chrome||browser.gecko||(e?(h--,d=1):u<c&&(u++,d=-1)):n<0?h--:u<c&&u++;let m=textRange(s,h,u).getClientRects();if(!m.length)return Rect0;let g=m[(d?d<0:n>=0)?0:m.length-1];return browser.safari&&!d&&g.width==0&&(g=Array.prototype.find.call(m,b=>b.width)||g),d?flattenRect(g,d<0):g||null}class WidgetView extends ContentView{constructor(e,n,c){super(),this.widget=e,this.length=n,this.side=c,this.prevWidget=null}static create(e,n,c){return new(e.customView||WidgetView)(e,n,c)}split(e){let n=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,c,h,u,d){return c&&(!(c instanceof WidgetView)||!this.widget.compare(c.widget)||e>0&&u<=0||n<this.length&&d<=0)?!1:(this.length=e+(c?c.length:0)+(this.length-n),!0)}become(e){return e.length==this.length&&e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let n=e.editorView,c=n&&n.state.doc,h=this.posAtStart;return c?c.slice(h,h+this.length):Text.empty}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let c=this.dom.getClientRects(),h=null;if(!c.length)return Rect0;for(let u=e>0?c.length-1:0;h=c[u],!(e>0?u==0:u==c.length-1||h.top<h.bottom);u+=e>0?-1:1);return e==0&&n>0||e==this.length&&n<=0?h:flattenRect(h,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(e){let{topView:n,text:c}=this.widget;return n?scanCompositionTree(e,0,n,c,(h,u)=>h.domAtPos(u),h=>new DOMPos(c,Math.min(h,c.nodeValue.length))):new DOMPos(c,Math.min(e,c.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,n){let{topView:c,text:h}=this.widget;return c?posFromDOMInCompositionTree(e,n,c,h):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,n){let{topView:c,text:h}=this.widget;return c?scanCompositionTree(e,n,c,h,(u,d,m)=>u.coordsAt(d,m),(u,d)=>textCoords(h,u,d)):textCoords(h,e,n)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function scanCompositionTree(s,e,n,c,h,u){if(n instanceof MarkView){for(let d of n.children){let m=contains(d.dom,c),g=m?c.nodeValue.length:d.length;if(s<g||s==g&&d.getSide()<=0)return m?scanCompositionTree(s,e,d,c,h,u):h(d,s,e);s-=g}return h(n,n.length,-1)}else return n.dom==c?u(s,e):h(n,s,e)}function posFromDOMInCompositionTree(s,e,n,c){if(n instanceof MarkView)for(let h of n.children){let u=0,d=contains(h.dom,c);if(contains(h.dom,s))return u+(d?posFromDOMInCompositionTree(s,e,h,c):h.localPosFromDOM(s,e));u+=d?c.nodeValue.length:h.length}else if(n.dom==c)return Math.min(e,c.nodeValue.length);return n.localPosFromDOM(s,e)}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let n=this.dom.getBoundingClientRect(),c=inlineSiblingRect(this,this.side>0?-1:1);return c&&c.top<n.bottom&&c.bottom>n.top?{left:n.left,right:n.right,top:c.top,bottom:c.bottom}:n}get overrideDOMText(){return Text.empty}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineSiblingRect(s,e){let n=s.parent,c=n?n.children.indexOf(s):-1;for(;n&&c>=0;)if(e<0?c>0:c<n.children.length){let h=n.children[c+e];if(h instanceof TextView){let u=h.coordsAt(e<0?h.length:0,e);if(u)return u}c+=e}else if(n instanceof MarkView&&n.parent)c=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent;else{let h=n.dom.lastChild;if(h&&h.nodeName=="BR")return h.getClientRects()[0];break}}function inlineDOMAtPos(s,e,n){let c=0;for(let h=0;c<e.length;c++){let u=e[c],d=h+u.length;if(!(d==h&&u.getSide()<=0)){if(n>h&&n<d&&u.dom.parentNode==s)return u.domAtPos(n-h);if(n<=h)break;h=d}}for(;c>0;c--){let h=e[c-1].dom;if(h.parentNode==s)return DOMPos.after(h)}return new DOMPos(s,0)}function joinInlineInto(s,e,n){let c,{children:h}=s;n>0&&e instanceof MarkView&&h.length&&(c=h[h.length-1])instanceof MarkView&&c.mark.eq(e.mark)?joinInlineInto(c,e.children[0],n-1):(h.push(e),e.setParent(s)),s.length+=e.length}function coordsInChildren(s,e,n){for(let u=0,d=0;d<s.children.length;d++){let m=s.children[d],g=u+m.length,b;if((n<=0||g==s.length||m.getSide()>0?g>=e:g>e)&&(e<g||d+1==s.children.length||(b=s.children[d+1]).length||b.getSide()>0)){let O=0;if(g==u){if(m.getSide()<=0)continue;O=n=-m.getSide()}let v=m.coordsAt(Math.max(0,e-u),n);return O&&v?flattenRect(v,n<0):v}u=g}let c=s.dom.lastChild;if(!c)return s.dom.getBoundingClientRect();let h=clientRectsFor(c);return h[h.length-1]||null}function combineAttrs(s,e){for(let n in s)n=="class"&&e.class?e.class+=" "+s.class:n=="style"&&e.style?e.style+=";"+s.style:e[n]=s[n];return e}function attrsEq(s,e){if(s==e)return!0;if(!s||!e)return!1;let n=Object.keys(s),c=Object.keys(e);if(n.length!=c.length)return!1;for(let h of n)if(c.indexOf(h)==-1||s[h]!==e[h])return!1;return!0}function updateAttrs(s,e,n){let c=null;if(e)for(let h in e)n&&h in n||s.removeAttribute(c=h);if(n)for(let h in n)e&&e[h]==n[h]||s.setAttribute(c=h,n[h]);return!!c}class WidgetType{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var BlockType=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,c,h){super(),this.startSide=e,this.endSide=n,this.widget=c,this.spec=h}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=e.side||0,c=!!e.block;return n+=c?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,c,e.widget||null,!1)}static replace(e){let n=!!e.block,c,h;if(e.isBlockGap)c=-5e8,h=4e8;else{let{start:u,end:d}=getInclusive(e,n);c=(u?n?-3e8:-1:5e8)-1,h=(d?n?2e8:1:-6e8)+1}return new PointDecoration(e,c,h,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:c}=getInclusive(e);super(n?-1:5e8,c?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&this.class==e.class&&attrsEq(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,c,h,u,d){super(n,c,u,e),this.block=h,this.isReplace=d,this.mapMode=h?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(s,e=!1){let{inclusiveStart:n,inclusiveEnd:c}=s;return n==null&&(n=s.inclusive),c==null&&(c=s.inclusive),{start:n!=null?n:e,end:c!=null?c:e}}function widgetsEq(s,e){return s==e||!!(s&&e&&s.compare(e))}function addRange(s,e,n,c=0){let h=n.length-1;h>=0&&n[h]+c>=s?n[h]=Math.max(n[h],e):n.push(s,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,c,h,u,d){if(c){if(!(c instanceof LineView))return!1;this.dom||c.transferDOM(this)}return h&&this.setDeco(c?c.attrs:null),mergeChildrenInto(this,e,n,c?c.children:[],u,d),!0}split(e){let n=new LineView;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:c,off:h}=this.childPos(e);h&&(n.append(this.children[c].split(h),0),this.children[c].merge(h,this.children[c].length,null,!1,0,0),c++);for(let u=c;u<this.children.length;u++)n.append(this.children[u],0);for(;c>0&&this.children[c-1].length==0;)this.children[--c].destroy();return this.children.length=c,this.markDirty(),this.length=e,n}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){joinInlineInto(this,e,n)}addLineDeco(e){let n=e.spec.attributes,c=e.spec.class;n&&(this.attrs=combineAttrs(n,this.attrs||{})),c&&(this.attrs=combineAttrs({class:c},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var n;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let c=this.dom.lastChild;for(;c&&ContentView.get(c)instanceof MarkView;)c=c.lastChild;if(!c||!this.length||c.nodeName!="BR"&&((n=ContentView.get(c))===null||n===void 0?void 0:n.isEditable)==!1&&(!browser.ios||!this.children.some(h=>h instanceof TextView))){let h=document.createElement("BR");h.cmIgnore=!0,this.dom.appendChild(h)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let n of this.children){if(!(n instanceof TextView))return null;let c=clientRectsFor(n.dom);if(c.length!=1)return null;e+=c[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,n){return coordsInChildren(this,e,n)}become(e){return!1}get type(){return BlockType.Text}static find(e,n){for(let c=0,h=0;c<e.children.length;c++){let u=e.children[c],d=h+u.length;if(d>=n){if(u instanceof LineView)return u;if(d>n)break}h=d+u.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,n,c){super(),this.widget=e,this.length=n,this.type=c,this.breakAfter=0,this.prevWidget=null}merge(e,n,c,h,u,d){return c&&(!(c instanceof BlockWidgetView)||!this.widget.compare(c.widget)||e>0&&u<=0||n<this.length&&d<=0)?!1:(this.length=e+(c?c.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let c=new BlockWidgetView(this.widget,n,this.type);return c.breakAfter=this.breakAfter,c}get children(){return noChildren}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(e,n,c,h){this.doc=e,this.pos=n,this.end=c,this.disallowBlockEffectsFor=h,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof BlockWidgetView&&e.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,n,c){for(;e>0;){if(this.textOff==this.text.length){let{value:u,lineBreak:d,done:m}=this.cursor.next(this.skip);if(this.skip=0,m)throw new Error("Ran out of text content when drawing inline views");if(d){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=u,this.textOff=0}let h=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(0,c)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+h)),n),c),this.atCursorPos=!0,this.textOff+=h,e-=h,c=0}}span(e,n,c,h){this.buildText(n-e,c,h),this.pos=n,this.openStart<0&&(this.openStart=h)}point(e,n,c,h,u,d){if(this.disallowBlockEffectsFor[d]&&c instanceof PointDecoration){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let m=n-e;if(c instanceof PointDecoration)if(c.block){let{type:g}=c;g==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(c.widget||new NullWidget("div"),m,g))}else{let g=WidgetView.create(c.widget||new NullWidget("span"),m,c.startSide),b=this.atCursorPos&&!g.isEditable&&u<=h.length&&(e<n||c.startSide>0),O=!g.isEditable&&(e<n||c.startSide<=0),v=this.getLine();this.pendingBuffer==2&&!b&&(this.pendingBuffer=0),this.flushBuffer(h),b&&(v.append(wrapMarks(new WidgetBufferView(1),h),u),u=h.length+Math.max(0,u-h.length)),v.append(wrapMarks(g,h),u),this.atCursorPos=O,this.pendingBuffer=O?e<n?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(c);m&&(this.textOff+m<=this.text.length?this.textOff+=m:(this.skip+=m-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=u)}static build(e,n,c,h,u){let d=new ContentBuilder(e,n,c,u);return d.openEnd=RangeSet.spans(h,n,c,d),d.openStart<0&&(d.openStart=d.openEnd),d.finish(d.openEnd),d}}function wrapMarks(s,e){for(let n of e)s=new MarkView(n,[s],s.length);return s}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),perLineTextDirection=Facet.define({combine:s=>s.some(e=>e)});class ScrollTarget{constructor(e,n="nearest",c="nearest",h=5,u=5){this.range=e,this.y=n,this.x=c,this.yMargin=h,this.xMargin=u}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(s,e)=>s.map(e)});function logException(s,e,n){let c=s.facet(exceptionSink);c.length?c[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const editable=Facet.define({combine:s=>s.length?s[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,n,c,h){this.id=e,this.create=n,this.domEventHandlers=c,this.extension=h(this)}static define(e,n){const{eventHandlers:c,provide:h,decorations:u}=n||{};return new ViewPlugin(nextPluginID++,e,c,d=>{let m=[viewPlugin.of(d)];return u&&m.push(decorations.of(g=>{let b=g.plugin(d);return b?u(b):Decoration.none})),h&&m.push(h(d)),m})}static fromClass(e,n){return ViewPlugin.define(c=>new e(c),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(c){if(logException(n.state,c,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(c){logException(e.state,c,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(e,n,c,h){this.fromA=e,this.toA=n,this.fromB=c,this.toB=h}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,c=this;for(;n>0;n--){let h=e[n-1];if(!(h.fromA>c.toA)){if(h.toA<c.fromA)break;c=c.join(h),e.splice(n-1,1)}}return e.splice(n,0,c),e}static extendWithRanges(e,n){if(n.length==0)return e;let c=[];for(let h=0,u=0,d=0,m=0;;h++){let g=h==e.length?null:e[h],b=d-m,O=g?g.fromB:1e9;for(;u<n.length&&n[u]<O;){let v=n[u],y=n[u+1],w=Math.max(m,v),S=Math.min(O,y);if(w<=S&&new ChangedRange(w+b,S+b,w,S).addToSet(c),y>O)break;u+=2}if(!g)return c;new ChangedRange(g.fromA,g.toA,g.fromB,g.toB).addToSet(c),d=g.toA,m=g.toB}}}class ViewUpdate{constructor(e,n,c){this.view=e,this.state=n,this.transactions=c,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let d of c)this.changes=this.changes.compose(d.changes);let h=[];this.changes.iterChangedRanges((d,m,g,b)=>h.push(new ChangedRange(d,m,g,b))),this.changedRanges=h;let u=e.hasFocus;u!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=u,this.flags|=1)}static create(e,n,c){return new ViewUpdate(e,n,c)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(s){let e=[];for(let n=0;n<s.length;n++)e.push(1<<+s[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),n=s.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(s){return s<=247?LowTypes[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?ArabicTypes[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203||s==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class BidiSpan{constructor(e,n,c){this.from=e,this.to=n,this.level=c}get dir(){return this.level%2?RTL:LTR}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,c,h){let u=-1;for(let d=0;d<e.length;d++){let m=e[d];if(m.from<=n&&m.to>=n){if(m.level==c)return d;(u<0||(h!=0?h<0?m.from<n:m.to>n:e[u].level>m.level))&&(u=d)}}if(u<0)throw new RangeError("Index out of range");return u}}const types=[];function computeOrder(s,e){let n=s.length,c=e==LTR?1:2,h=e==LTR?2:1;if(!s||c==1&&!BidiRE.test(s))return trivialOrder(n);for(let d=0,m=c,g=c;d<n;d++){let b=charType(s.charCodeAt(d));b==512?b=m:b==8&&g==4&&(b=16),types[d]=b==4?2:b,b&7&&(g=b),m=b}for(let d=0,m=c,g=c;d<n;d++){let b=types[d];if(b==128)d<n-1&&m==types[d+1]&&m&24?b=types[d]=m:types[d]=256;else if(b==64){let O=d+1;for(;O<n&&types[O]==64;)O++;let v=d&&m==8||O<n&&types[O]==8?g==1?1:8:256;for(let y=d;y<O;y++)types[y]=v;d=O-1}else b==8&&g==1&&(types[d]=1);m=b,b&7&&(g=b)}for(let d=0,m=0,g=0,b,O,v;d<n;d++)if(O=Brackets[b=s.charCodeAt(d)])if(O<0){for(let y=m-3;y>=0;y-=3)if(BracketStack[y+1]==-O){let w=BracketStack[y+2],S=w&2?c:w&4?w&1?h:c:0;S&&(types[d]=types[BracketStack[y]]=S),m=y;break}}else{if(BracketStack.length==189)break;BracketStack[m++]=d,BracketStack[m++]=b,BracketStack[m++]=g}else if((v=types[d])==2||v==1){let y=v==c;g=y?0:1;for(let w=m-3;w>=0;w-=3){let S=BracketStack[w+2];if(S&2)break;if(y)BracketStack[w+2]|=2;else{if(S&4)break;BracketStack[w+2]|=4}}}for(let d=0;d<n;d++)if(types[d]==256){let m=d+1;for(;m<n&&types[m]==256;)m++;let g=(d?types[d-1]:c)==1,b=(m<n?types[m]:c)==1,O=g==b?g?1:2:c;for(let v=d;v<m;v++)types[v]=O;d=m-1}let u=[];if(c==1)for(let d=0;d<n;){let m=d,g=types[d++]!=1;for(;d<n&&g==(types[d]!=1);)d++;if(g)for(let b=d;b>m;){let O=b,v=types[--b]!=2;for(;b>m&&v==(types[b-1]!=2);)b--;u.push(new BidiSpan(b,O,v?2:1))}else u.push(new BidiSpan(m,d,0))}else for(let d=0;d<n;){let m=d,g=types[d++]==2;for(;d<n&&g==(types[d]==2);)d++;u.push(new BidiSpan(m,d,g?1:2))}return u}function trivialOrder(s){return[new BidiSpan(0,s,0)]}let movedOver="";function moveVisually(s,e,n,c,h){var u;let d=c.head-s.from,m=-1;if(d==0){if(!h||!s.length)return null;e[0].level!=n&&(d=e[0].side(!1,n),m=0)}else if(d==s.length){if(h)return null;let y=e[e.length-1];y.level!=n&&(d=y.side(!0,n),m=e.length-1)}m<0&&(m=BidiSpan.find(e,d,(u=c.bidiLevel)!==null&&u!==void 0?u:-1,c.assoc));let g=e[m];d==g.side(h,n)&&(g=e[m+=h?1:-1],d=g.side(!h,n));let b=h==(g.dir==n),O=findClusterBreak(s.text,d,b);if(movedOver=s.text.slice(Math.min(d,O),Math.max(d,O)),O!=g.side(h,n))return EditorSelection.cursor(O+s.from,b?-1:1,g.level);let v=m==(h?e.length-1:0)?null:e[m+(h?1:-1)];return!v&&g.level!=n?EditorSelection.cursor(h?s.to:s.from,h?-1:1,n):v&&v.level<g.level?EditorSelection.cursor(v.side(!h,n)+s.from,h?1:-1,v.level):EditorSelection.cursor(O+s.from,h?-1:1,g.level)}const LineBreakPlaceholder="\uFFFF";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let c=e.parentNode;for(let h=e;;){this.findPointBefore(c,h),this.readNode(h);let u=h.nextSibling;if(u==n)break;let d=ContentView.get(h),m=ContentView.get(u);(d&&m?d.breakAfter:(d?d.breakAfter:isBlockElement(h))||isBlockElement(u)&&(h.nodeName!="BR"||h.cmIgnore))&&this.lineBreak(),h=u}return this.findPointBefore(c,n),this}readTextNode(e){let n=e.nodeValue;for(let c of this.points)c.node==e&&(c.pos=this.text.length+Math.min(c.offset,n.length));for(let c=0,h=this.lineSeparator?null:/\r\n?|\n/g;;){let u=-1,d=1,m;if(this.lineSeparator?(u=n.indexOf(this.lineSeparator,c),d=this.lineSeparator.length):(m=h.exec(n))&&(u=m.index,d=m[0].length),this.append(n.slice(c,u<0?n.length:u)),u<0)break;if(this.lineBreak(),d>1)for(let g of this.points)g.node==e&&g.pos>this.text.length&&(g.pos-=d-1);c=u+d}}readNode(e){if(e.cmIgnore)return;let n=ContentView.get(e),c=n&&n.overrideDOMText;if(c!=null){this.findPointInside(e,c.length);for(let h=c.iter();!h.next().done;)h.lineBreak?this.lineBreak():this.append(h.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let c of this.points)c.node==e&&e.childNodes[c.offset]==n&&(c.pos=this.text.length)}findPointInside(e,n){for(let c of this.points)(e.nodeType==3?c.node==e:e.contains(c.node))&&(c.pos=this.text.length+Math.min(n,c.offset))}}function isBlockElement(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DocView extends ContentView{constructor(e){super(),this.view=e,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:m})=>m<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,e.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,h=this.updateDeco(),u=findChangedDeco(c,h,e.changes);return n=ChangedRange.extendWithRanges(n,u),this.dirty==0&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n);let{observer:c}=this.view;c.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=browser.chrome||browser.ios?{node:c.selectionRange.focusNode,written:!1}:void 0;this.sync(u),this.dirty=0,u&&(u.written||c.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""});let h=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof BlockWidgetView&&u.widget instanceof BlockGapWidget&&h.push(u.dom);c.updateGaps(h)}updateChildren(e,n){let c=this.childCursor(n);for(let h=e.length-1;;h--){let u=h>=0?e[h]:null;if(!u)break;let{fromA:d,toA:m,fromB:g,toB:b}=u,{content:O,breakAtStart:v,openStart:y,openEnd:w}=ContentBuilder.build(this.view.state.doc,g,b,this.decorations,this.dynamicDecorationMap),{i:S,off:A}=c.findPos(m,1),{i:E,off:P}=c.findPos(d,-1);replaceRange(this,E,P,S,A,O,v,y,w)}}updateSelection(e=!1,n=!1){if(e&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection())||browser.ios&&this.view.inputState.rapidCompositionStart)return;let c=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,u=this.domAtPos(h.anchor),d=h.empty?u:this.domAtPos(h.head);if(browser.gecko&&h.empty&&betweenUneditable(u)){let g=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(g,u.node.childNodes[u.offset]||null)),u=d=new DOMPos(g,0),c=!0}let m=this.view.observer.selectionRange;(c||!m.focusNode||!isEquivalentPosition(u.node,u.offset,m.anchorNode,m.anchorOffset)||!isEquivalentPosition(d.node,d.offset,m.focusNode,m.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(m.focusNode)&&inUneditable(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let g=getSelection(this.root);if(h.empty){if(browser.gecko){let b=nextToUneditable(u.node,u.offset);if(b&&b!=3){let O=nearbyTextNode(u.node,u.offset,b==1?1:-1);O&&(u=new DOMPos(O,b==1?0:O.nodeValue.length))}}g.collapse(u.node,u.offset),h.bidiLevel!=null&&m.cursorBidiLevel!=null&&(m.cursorBidiLevel=h.bidiLevel)}else if(g.extend)g.collapse(u.node,u.offset),g.extend(d.node,d.offset);else{let b=document.createRange();h.anchor>h.head&&([u,d]=[d,u]),b.setEnd(d.node,d.offset),b.setStart(u.node,u.offset),g.removeAllRanges(),g.addRange(b)}}),this.view.observer.setSelectionRange(u,d)),this.impreciseAnchor=u.precise?null:new DOMPos(m.anchorNode,m.anchorOffset),this.impreciseHead=d.precise?null:new DOMPos(m.focusNode,m.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,n=getSelection(this.root);if(!e.empty||!e.assoc||!n.modify)return;let c=LineView.find(this,e.head);if(!c)return;let h=c.posAtStart;if(e.head==h||e.head==h+c.length)return;let u=this.coordsAt(e.head,-1),d=this.coordsAt(e.head,1);if(!u||!d||u.bottom>d.top)return;let m=this.domAtPos(e.head+e.assoc);n.collapse(m.node,m.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(editable)?this.root.activeElement==this.dom:hasSelection(this.dom,this.view.observer.selectionRange)}nearest(e){for(let n=e;n;){let c=ContentView.get(n);if(c&&c.rootView==this)return c;n=n.parentNode}return null}posFromDOM(e,n){let c=this.nearest(e);if(!c)throw new RangeError("Trying to find position for a DOM position outside of the document");return c.localPosFromDOM(e,n)+c.posAtStart}domAtPos(e){let{i:n,off:c}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let h=this.children[n];if(c<h.length||h instanceof LineView)break;n++,c=0}return this.children[n].domAtPos(c)}coordsAt(e,n){for(let c=this.length,h=this.children.length-1;;h--){let u=this.children[h],d=c-u.breakAfter-u.length;if(e>d||e==d&&u.type!=BlockType.WidgetBefore&&u.type!=BlockType.WidgetAfter&&(!h||n==2||this.children[h-1].breakAfter||this.children[h-1].type==BlockType.WidgetBefore&&n>-2))return u.coordsAt(e-d,n);c=d}}measureVisibleLineHeights(e){let n=[],{from:c,to:h}=e,u=this.view.contentDOM.clientWidth,d=u>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,m=-1,g=this.view.textDirection==Direction.LTR;for(let b=0,O=0;O<this.children.length;O++){let v=this.children[O],y=b+v.length;if(y>h)break;if(b>=c){let w=v.dom.getBoundingClientRect();if(n.push(w.height),d){let S=v.dom.lastChild,A=S?clientRectsFor(S):[];if(A.length){let E=A[A.length-1],P=g?E.right-w.left:w.right-E.left;P>m&&(m=P,this.minWidth=u,this.minWidthFrom=b,this.minWidthTo=y)}}}b=y+v.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let h of this.children)if(h instanceof LineView){let u=h.measureTextSize();if(u)return u}let e=document.createElement("div"),n,c;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let h=clientRectsFor(e.firstChild)[0];n=e.getBoundingClientRect().height,c=h?h.width/27:7,e.remove()}),{lineHeight:n,charWidth:c}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ChildCursor(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let c=0,h=0;;h++){let u=h==n.viewports.length?null:n.viewports[h],d=u?u.from-1:this.length;if(d>c){let m=n.lineBlockAt(d).bottom-n.lineBlockAt(c).top;e.push(Decoration.replace({widget:new BlockGapWidget(m),block:!0,inclusive:!0,isBlockGap:!0}).range(c,d))}if(!u)break;c=u.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((n,c)=>(this.dynamicDecorationMap[c]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,c=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),h;if(!c)return;!n.empty&&(h=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(c={left:Math.min(c.left,h.left),top:Math.min(c.top,h.top),right:Math.max(c.right,h.right),bottom:Math.max(c.bottom,h.bottom)});let u=0,d=0,m=0,g=0;for(let O of this.view.state.facet(scrollMargins).map(v=>v(this.view)))if(O){let{left:v,right:y,top:w,bottom:S}=O;v!=null&&(u=Math.max(u,v)),y!=null&&(d=Math.max(d,y)),w!=null&&(m=Math.max(m,w)),S!=null&&(g=Math.max(g,S))}let b={left:c.left-u,top:c.top-m,right:c.right+d,bottom:c.bottom+g};scrollRectIntoView(this.view.scrollDOM,b,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(s){let e=s.observer.selectionRange,n=e.focusNode&&nearbyTextNode(e.focusNode,e.focusOffset,0);if(!n)return null;let c=s.docView.nearest(n);if(!c)return null;if(c instanceof LineView){let h=n;for(;h.parentNode!=c.dom;)h=h.parentNode;let u=h.previousSibling;for(;u&&!ContentView.get(u);)u=u.previousSibling;let d=u?ContentView.get(u).posAtEnd:c.posAtStart;return{from:d,to:d,node:h,text:n}}else{for(;;){let{parent:u}=c;if(!u)return null;if(u instanceof LineView)break;c=u}let h=c.posAtStart;return{from:h,to:h+c.length,node:c.dom,text:n}}}function computeCompositionDeco(s,e){let n=compositionSurroundingNode(s);if(!n)return Decoration.none;let{from:c,to:h,node:u,text:d}=n,m=e.mapPos(c,1),g=Math.max(m,e.mapPos(h,-1)),{state:b}=s,O=u.nodeType==3?u.nodeValue:new DOMReader([],b).readRange(u.firstChild,null).text;if(g-m<O.length)if(b.doc.sliceString(m,Math.min(b.doc.length,m+O.length),LineBreakPlaceholder)==O)g=m+O.length;else if(b.doc.sliceString(Math.max(0,g-O.length),g,LineBreakPlaceholder)==O)m=g-O.length;else return Decoration.none;else if(b.doc.sliceString(m,g,LineBreakPlaceholder)!=O)return Decoration.none;let v=ContentView.get(u);return v instanceof CompositionView?v=v.widget.topView:v&&(v.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(u,d,v),inclusive:!0}).range(m,g))}class CompositionWidget extends WidgetType{constructor(e,n,c){super(),this.top=e,this.text=n,this.topView=c}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(s,e,n){for(;;){if(s.nodeType==3)return s;if(s.nodeType==1&&e>0&&n<=0)s=s.childNodes[e-1],e=maxOffset(s);else if(s.nodeType==1&&e<s.childNodes.length&&n>=0)s=s.childNodes[e],e=0;else return null}}function nextToUneditable(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(e,n){addRange(e,n,this.changes)}}function findChangedDeco(s,e,n){let c=new DecorationComparator$1;return RangeSet.compare(s,e,n,c),c.changes}function inUneditable(s,e){for(let n=s;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function groupAt(s,e,n=1){let c=s.charCategorizer(e),h=s.doc.lineAt(e),u=e-h.from;if(h.length==0)return EditorSelection.cursor(e);u==0?n=1:u==h.length&&(n=-1);let d=u,m=u;n<0?d=findClusterBreak(h.text,u,!1):m=findClusterBreak(h.text,u);let g=c(h.text.slice(d,m));for(;d>0;){let b=findClusterBreak(h.text,d,!1);if(c(h.text.slice(b,d))!=g)break;d=b}for(;m<h.length;){let b=findClusterBreak(h.text,m);if(c(h.text.slice(m,b))!=g)break;m=b}return EditorSelection.range(d+h.from,m+h.from)}function getdx(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function getdy(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function yOverlap(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function upTop(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function upBot(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function domPosAtCoords(s,e,n){let c,h,u,d,m,g,b,O;for(let w=s.firstChild;w;w=w.nextSibling){let S=clientRectsFor(w);for(let A=0;A<S.length;A++){let E=S[A];h&&yOverlap(h,E)&&(E=upTop(upBot(E,h.bottom),h.top));let P=getdx(e,E),I=getdy(n,E);if(P==0&&I==0)return w.nodeType==3?domPosInText(w,e,n):domPosAtCoords(w,e,n);(!c||d>I||d==I&&u>P)&&(c=w,h=E,u=P,d=I),P==0?n>E.bottom&&(!b||b.bottom<E.bottom)?(m=w,b=E):n<E.top&&(!O||O.top>E.top)&&(g=w,O=E):b&&yOverlap(b,E)?b=upBot(b,E.bottom):O&&yOverlap(O,E)&&(O=upTop(O,E.top))}}if(b&&b.bottom>=n?(c=m,h=b):O&&O.top<=n&&(c=g,h=O),!c)return{node:s,offset:0};let v=Math.max(h.left,Math.min(h.right,e));if(c.nodeType==3)return domPosInText(c,v,n);if(!u&&c.contentEditable=="true")return domPosAtCoords(c,v,n);let y=Array.prototype.indexOf.call(s.childNodes,c)+(e>=(h.left+h.right)/2?1:0);return{node:s,offset:y}}function domPosInText(s,e,n){let c=s.nodeValue.length,h=-1,u=1e9,d=0;for(let m=0;m<c;m++){let g=textRange(s,m,m+1).getClientRects();for(let b=0;b<g.length;b++){let O=g[b];if(O.top==O.bottom)continue;d||(d=e-O.left);let v=(O.top>n?O.top-n:n-O.bottom)-1;if(O.left-1<=e&&O.right+1>=e&&v<u){let y=e>=(O.left+O.right)/2,w=y;if((browser.chrome||browser.gecko)&&textRange(s,m).getBoundingClientRect().left==O.right&&(w=!y),v<=0)return{node:s,offset:m+(w?1:0)};h=m+(w?1:0),u=v}}}return{node:s,offset:h>-1?h:d>0?s.nodeValue.length:0}}function posAtCoords(s,{x:e,y:n},c,h=-1){var u;let d=s.contentDOM.getBoundingClientRect(),m=d.top+s.viewState.paddingTop,g,{docHeight:b}=s.viewState,O=n-m;if(O<0)return 0;if(O>b)return s.state.doc.length;for(let P=s.defaultLineHeight/2,I=!1;g=s.elementAtHeight(O),g.type!=BlockType.Text;)for(;O=h>0?g.bottom+P:g.top-P,!(O>=0&&O<=b);){if(I)return c?null:0;I=!0,h=-h}n=m+O;let v=g.from;if(v<s.viewport.from)return s.viewport.from==0?0:c?null:posAtCoordsImprecise(s,d,g,e,n);if(v>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:c?null:posAtCoordsImprecise(s,d,g,e,n);let y=s.dom.ownerDocument,w=s.root.elementFromPoint?s.root:y,S=w.elementFromPoint(e,n);S&&!s.contentDOM.contains(S)&&(S=null),S||(e=Math.max(d.left+1,Math.min(d.right-1,e)),S=w.elementFromPoint(e,n),S&&!s.contentDOM.contains(S)&&(S=null));let A,E=-1;if(S&&((u=s.docView.nearest(S))===null||u===void 0?void 0:u.isEditable)!=!1){if(y.caretPositionFromPoint){let P=y.caretPositionFromPoint(e,n);P&&({offsetNode:A,offset:E}=P)}else if(y.caretRangeFromPoint){let P=y.caretRangeFromPoint(e,n);P&&({startContainer:A,startOffset:E}=P,browser.safari&&isSuspiciousCaretResult(A,E,e)&&(A=void 0))}}if(!A||!s.docView.dom.contains(A)){let P=LineView.find(s.docView,v);if(!P)return O>g.top+g.height/2?g.to:g.from;({node:A,offset:E}=domPosAtCoords(P.dom,e,n))}return s.docView.posFromDOM(A,E)}function posAtCoordsImprecise(s,e,n,c,h){let u=Math.round((c-e.left)*s.defaultCharacterWidth);s.lineWrapping&&n.height>s.defaultLineHeight*1.5&&(u+=Math.floor((h-n.top)/s.defaultLineHeight)*s.viewState.heightOracle.lineLength);let d=s.state.sliceDoc(n.from,n.to);return n.from+findColumn(d,u,s.state.tabSize)}function isSuspiciousCaretResult(s,e,n){let c;if(s.nodeType!=3||e!=(c=s.nodeValue.length))return!1;for(let h=s.nextSibling;h;h=h.nextSibling)if(h.nodeType!=1||h.nodeName!="BR")return!1;return textRange(s,c-1,c).getBoundingClientRect().left>n}function moveToLineBoundary(s,e,n,c){let h=s.state.doc.lineAt(e.head),u=!c||!s.lineWrapping?null:s.coordsAtPos(e.assoc<0&&e.head>h.from?e.head-1:e.head);if(u){let g=s.dom.getBoundingClientRect(),b=s.textDirectionAt(h.from),O=s.posAtCoords({x:n==(b==Direction.LTR)?g.right-1:g.left+1,y:(u.top+u.bottom)/2});if(O!=null)return EditorSelection.cursor(O,n?-1:1)}let d=LineView.find(s.docView,e.head),m=d?n?d.posAtEnd:d.posAtStart:n?h.to:h.from;return EditorSelection.cursor(m,n?-1:1)}function moveByChar(s,e,n,c){let h=s.state.doc.lineAt(e.head),u=s.bidiSpans(h),d=s.textDirectionAt(h.from);for(let m=e,g=null;;){let b=moveVisually(h,u,d,m,n),O=movedOver;if(!b){if(h.number==(n?s.state.doc.lines:1))return m;O=`
`,h=s.state.doc.line(h.number+(n?1:-1)),u=s.bidiSpans(h),b=EditorSelection.cursor(n?h.from:h.to)}if(g){if(!g(O))return m}else{if(!c)return b;g=c(O)}m=b}}function byGroup(s,e,n){let c=s.state.charCategorizer(e),h=c(n);return u=>{let d=c(u);return h==CharCategory.Space&&(h=d),h==d}}function moveVertically(s,e,n,c){let h=e.head,u=n?1:-1;if(h==(n?s.state.doc.length:0))return EditorSelection.cursor(h,e.assoc);let d=e.goalColumn,m,g=s.contentDOM.getBoundingClientRect(),b=s.coordsAtPos(h),O=s.documentTop;if(b)d==null&&(d=b.left-g.left),m=u<0?b.top:b.bottom;else{let w=s.viewState.lineBlockAt(h);d==null&&(d=Math.min(g.right-g.left,s.defaultCharacterWidth*(h-w.from))),m=(u<0?w.top:w.bottom)+O}let v=g.left+d,y=c!=null?c:s.defaultLineHeight>>1;for(let w=0;;w+=10){let S=m+(y+w)*u,A=posAtCoords(s,{x:v,y:S},!1,u);if(S<g.top||S>g.bottom||(u<0?A<h:A>h))return EditorSelection.cursor(A,e.assoc,void 0,d)}}function skipAtoms(s,e,n){let c=s.state.facet(atomicRanges).map(h=>h(s));for(;;){let h=!1;for(let u of c)u.between(n.from-1,n.from+1,(d,m,g)=>{n.from>d&&n.from<m&&(n=e.from>n.from?EditorSelection.cursor(d,1):EditorSelection.cursor(m,-1),h=!0)});if(!h)return n}}class InputState{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let n in handlers){let c=handlers[n];e.contentDOM.addEventListener(n,h=>{!eventBelongsToEditor(e,h)||this.ignoreDuringComposition(h)||n=="keydown"&&this.keydown(e,h)||(this.mustFlushObserver(h)&&e.observer.forceFlush(),this.runCustomHandlers(n,e,h)?h.preventDefault():c(e,h))}),this.registeredEvents.push(n)}browser.chrome&&browser.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var c;let h;this.customHandlers=[];for(let u of n)if(h=(c=u.update(e).spec)===null||c===void 0?void 0:c.domEventHandlers){this.customHandlers.push({plugin:u.value,handlers:h});for(let d in h)this.registeredEvents.indexOf(d)<0&&d!="scroll"&&(this.registeredEvents.push(d),e.contentDOM.addEventListener(d,m=>{!eventBelongsToEditor(e,m)||this.runCustomHandlers(d,e,m)&&m.preventDefault()}))}}runCustomHandlers(e,n,c){for(let h of this.customHandlers){let u=h.handlers[e];if(u)try{if(u.call(h.plugin,c,n)||c.defaultPrevented)return!0}catch(d){logException(n.state,d)}}return!1}runScrollHandlers(e,n){for(let c of this.customHandlers){let h=c.handlers.scroll;if(h)try{h.call(c.plugin,n,e)}catch(u){logException(e.state,u)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let c;return browser.ios&&(c=PendingKeys.find(h=>h.keyCode==n.keyCode))&&!(n.ctrlKey||n.altKey||n.metaKey)&&!n.synthetic?(this.pendingIOSKey=c,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,dispatchKey(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!browser.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],modifierCodes=[16,17,18,20,91,92,224,225];class MouseSelection{constructor(e,n,c,h){this.view=e,this.style=c,this.mustSelect=h,this.lastEvent=n;let u=e.contentDOM.ownerDocument;u.addEventListener("mousemove",this.move=this.move.bind(this)),u.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragMove=dragMovesSelection(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1,this.dragging===!1&&(n.preventDefault(),this.select(n))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let n=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(s,e){let n=s.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(s,e){let n=s.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(s,e){let{main:n}=s.state.selection;if(n.empty)return!1;let c=getSelection(s.root);if(c.rangeCount==0)return!0;let h=c.getRangeAt(0).getClientRects();for(let u=0;u<h.length;u++){let d=h[u];if(d.left<=e.clientX&&d.right>=e.clientX&&d.top<=e.clientY&&d.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,c;n!=s.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(c=ContentView.get(n))&&c.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(s){let e=s.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{s.focus(),n.remove(),doPaste(s,n.value)},50)}function doPaste(s,e){let{state:n}=s,c,h=1,u=n.toText(e),d=u.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(g=>g.empty)&&lastLinewiseCopy==u.toString()){let g=-1;c=n.changeByRange(b=>{let O=n.doc.lineAt(b.from);if(O.from==g)return{range:b};g=O.from;let v=n.toText((d?u.line(h++).text:e)+n.lineBreak);return{changes:{from:O.from,insert:v},range:EditorSelection.cursor(b.from+v.length)}})}else d?c=n.changeByRange(g=>{let b=u.line(h++);return{changes:{from:g.from,to:g.to,insert:b.text},range:EditorSelection.cursor(g.from+b.length)}}):c=n.replaceSelection(u);s.dispatch(c,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(s,e)=>{s.inputState.setSelectionOrigin("select"),e.keyCode==27?s.inputState.lastEscPress=Date.now():modifierCodes.indexOf(e.keyCode)<0&&(s.inputState.lastEscPress=0)};let lastTouch=0;handlers.touchstart=(s,e)=>{lastTouch=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(s,e)=>{if(s.observer.flush(),lastTouch>Date.now()-2e3&&getClickType(e)==1)return;let n=null;for(let c of s.state.facet(mouseSelectionStyle))if(n=c(s,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(s,e)),n){let c=s.root.activeElement!=s.contentDOM;c&&s.observer.ignore(()=>focusPreventScroll(s.contentDOM)),s.inputState.startMouseSelection(new MouseSelection(s,e,n,c))}};function rangeForClick(s,e,n,c){if(c==1)return EditorSelection.cursor(e,n);if(c==2)return groupAt(s.state,e,n);{let h=LineView.find(s.docView,e),u=s.state.doc.lineAt(h?h.posAtEnd:e),d=h?h.posAtStart:u.from,m=h?h.posAtEnd:u.to;return m<s.state.doc.length&&m==u.to&&m++,EditorSelection.range(d,m)}}let insideY=(s,e)=>s>=e.top&&s<=e.bottom,inside=(s,e,n)=>insideY(e,n)&&s>=n.left&&s<=n.right;function findPositionSide(s,e,n,c){let h=LineView.find(s.docView,e);if(!h)return 1;let u=e-h.posAtStart;if(u==0)return 1;if(u==h.length)return-1;let d=h.coordsAt(u,-1);if(d&&inside(n,c,d))return-1;let m=h.coordsAt(u,1);return m&&inside(n,c,m)?1:d&&insideY(c,d)?-1:1}function queryPos(s,e){let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:findPositionSide(s,n,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(s){if(!BadMouseDetail)return s.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=s,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(s,e){let n=queryPos(s,e),c=getClickType(e),h=s.state.selection,u=n,d=e;return{update(m){m.docChanged&&(n&&(n.pos=m.changes.mapPos(n.pos)),h=h.map(m.changes),d=null)},get(m,g,b){let O;if(d&&m.clientX==d.clientX&&m.clientY==d.clientY?O=u:(O=u=queryPos(s,m),d=m),!O||!n)return h;let v=rangeForClick(s,O.pos,O.bias,c);if(n.pos!=O.pos&&!g){let y=rangeForClick(s,n.pos,n.bias,c),w=Math.min(y.from,v.from),S=Math.max(y.to,v.to);v=w<v.from?EditorSelection.range(w,S):EditorSelection.range(S,w)}return g?h.replaceRange(h.main.extend(v.from,v.to)):b?h.addRange(v):EditorSelection.create([v])}}}handlers.dragstart=(s,e)=>{let{selection:{main:n}}=s.state,{mouseSelection:c}=s.inputState;c&&(c.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function dropText(s,e,n,c){if(!n)return;let h=s.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:u}=s.inputState,d=c&&u&&u.dragging&&u.dragMove?{from:u.dragging.from,to:u.dragging.to}:null,m={from:h,insert:n},g=s.state.changes(d?[d,m]:m);s.focus(),s.dispatch({changes:g,selection:{anchor:g.mapPos(h,-1),head:g.mapPos(h,1)},userEvent:d?"move.drop":"input.drop"})}handlers.drop=(s,e)=>{if(!e.dataTransfer)return;if(s.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let c=Array(n.length),h=0,u=()=>{++h==n.length&&dropText(s,e,c.filter(d=>d!=null).join(s.state.lineBreak),!1)};for(let d=0;d<n.length;d++){let m=new FileReader;m.onerror=u,m.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(m.result)||(c[d]=m.result),u()},m.readAsText(n[d])}}else dropText(s,e,e.dataTransfer.getData("Text"),!0)};handlers.paste=(s,e)=>{if(s.state.readOnly)return e.preventDefault();s.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;n?(doPaste(s,n.getData("text/plain")),e.preventDefault()):capturePaste(s)};function captureCopy(s,e){let n=s.dom.parentNode;if(!n)return;let c=n.appendChild(document.createElement("textarea"));c.style.cssText="position: fixed; left: -10000px; top: 10px",c.value=e,c.focus(),c.selectionEnd=e.length,c.selectionStart=0,setTimeout(()=>{c.remove(),s.focus()},50)}function copiedRange(s){let e=[],n=[],c=!1;for(let h of s.selection.ranges)h.empty||(e.push(s.sliceDoc(h.from,h.to)),n.push(h));if(!e.length){let h=-1;for(let{from:u}of s.selection.ranges){let d=s.doc.lineAt(u);d.number>h&&(e.push(d.text),n.push({from:d.from,to:Math.min(s.doc.length,d.to+1)})),h=d.number}c=!0}return{text:e.join(s.lineBreak),ranges:n,linewise:c}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(s,e)=>{let{text:n,ranges:c,linewise:h}=copiedRange(s.state);if(!n&&!h)return;lastLinewiseCopy=h?n:null;let u=brokenClipboardAPI?null:e.clipboardData;u?(e.preventDefault(),u.clearData(),u.setData("text/plain",n)):captureCopy(s,n),e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:c,scrollIntoView:!0,userEvent:"delete.cut"})};function updateForFocusChange(s){setTimeout(()=>{s.hasFocus!=s.inputState.notifiedFocused&&s.update([])},10)}handlers.focus=updateForFocusChange;handlers.blur=s=>{s.observer.clearSelectionRange(),updateForFocusChange(s)};function forceClearComposition(s,e){if(s.docView.compositionDeco.size){s.inputState.rapidCompositionStart=e;try{s.update([])}finally{s.inputState.rapidCompositionStart=!1}}}handlers.compositionstart=handlers.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0,s.docView.compositionDeco.size&&(s.observer.flush(),forceClearComposition(s,!0)))};handlers.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionFirstChange=null,setTimeout(()=>{s.inputState.composing<0&&forceClearComposition(s,!1)},50)};handlers.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(s,e)=>{var n;let c;if(browser.chrome&&browser.android&&(c=PendingKeys.find(h=>h.inputType==e.inputType))&&(s.observer.delayAndroidKey(c.key,c.keyCode),c.key=="Backspace"||c.key=="Delete")){let h=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var u;(((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0)>h+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(){this.doc=Text.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let c=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(c+=Math.ceil((n-e-c*this.lineLength*.5)/this.lineLength)),this.lineHeight*c}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let c=0;c<e.length;c++){let h=e[c];h<0?c++:this.heightSamples[Math.floor(h*10)]||(n=!0,this.heightSamples[Math.floor(h*10)]=!0)}return n}refresh(e,n,c,h,u){let d=wrappingWhiteSpace.indexOf(e)>-1,m=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=d;if(this.lineWrapping=d,this.lineHeight=n,this.charWidth=c,this.lineLength=h,m){this.heightSamples={};for(let g=0;g<u.length;g++){let b=u[g];b<0?g++:this.heightSamples[Math.floor(b*10)]=!0}}return m}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,c,h,u){this.from=e,this.length=n,this.top=c,this.height=h,this.type=u}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType$1=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,n,c=2){this.length=e,this.height=n,this.flags=c}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Epsilon&&(e.heightChanged=!0),this.height=n)}replace(e,n,c){return HeightMap.of(c)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,c,h){let u=this;for(let d=h.length-1;d>=0;d--){let{fromA:m,toA:g,fromB:b,toB:O}=h[d],v=u.lineAt(m,QueryType$1.ByPosNoHeight,n,0,0),y=v.to>=g?v:u.lineAt(g,QueryType$1.ByPosNoHeight,n,0,0);for(O+=y.to-g,g=y.to;d>0&&v.from<=h[d-1].toA;)m=h[d-1].fromA,b=h[d-1].fromB,d--,m<v.from&&(v=u.lineAt(m,QueryType$1.ByPosNoHeight,n,0,0));b+=v.from-m,m=v.from;let w=NodeBuilder.build(c,e,b,O);u=u.replace(m,g,w)}return u.updateHeight(c,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let n=0,c=e.length,h=0,u=0;for(;;)if(n==c)if(h>u*2){let m=e[n-1];m.break?e.splice(--n,1,m.left,null,m.right):e.splice(--n,1,m.left,m.right),c+=1+m.break,h-=m.size}else if(u>h*2){let m=e[c];m.break?e.splice(c,1,m.left,null,m.right):e.splice(c,1,m.left,m.right),c+=2+m.break,u-=m.size}else break;else if(h<u){let m=e[n++];m&&(h+=m.size)}else{let m=e[--c];m&&(u+=m.size)}let d=0;return e[n-1]==null?(d=1,n--):e[n]==null&&(d=1,c++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),d,HeightMap.of(e.slice(c)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,n,c){super(e,n),this.type=c}blockAt(e,n,c,h){return new BlockInfo(h,this.length,c,this.height,this.type)}lineAt(e,n,c,h,u){return this.blockAt(0,c,h,u)}forEachLine(e,n,c,h,u,d){e<=u+this.length&&n>=u&&d(this.blockAt(0,c,h,u))}updateHeight(e,n=0,c=!1,h){return h&&h.from<=n&&h.more&&this.setHeight(e,h.heights[h.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n){super(e,n,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(e,n,c){let h=c[0];return c.length==1&&(h instanceof HeightMapText||h instanceof HeightMapGap&&h.flags&4)&&Math.abs(this.length-h.length)<10?(h instanceof HeightMapGap?h=new HeightMapText(h.length,this.height):h.height=this.height,this.outdated||(h.outdated=!1),h):HeightMap.of(c)}updateHeight(e,n=0,c=!1,h){return h&&h.from<=n&&h.more?this.setHeight(e,h.heights[h.index++]):(c||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}lines(e,n){let c=e.lineAt(n).number,h=e.lineAt(n+this.length).number;return{firstLine:c,lastLine:h,lineHeight:this.height/(h-c+1)}}blockAt(e,n,c,h){let{firstLine:u,lastLine:d,lineHeight:m}=this.lines(n,h),g=Math.max(0,Math.min(d-u,Math.floor((e-c)/m))),{from:b,length:O}=n.line(u+g);return new BlockInfo(b,O,c+m*g,m,BlockType.Text)}lineAt(e,n,c,h,u){if(n==QueryType$1.ByHeight)return this.blockAt(e,c,h,u);if(n==QueryType$1.ByPosNoHeight){let{from:v,to:y}=c.lineAt(e);return new BlockInfo(v,y-v,0,0,BlockType.Text)}let{firstLine:d,lineHeight:m}=this.lines(c,u),{from:g,length:b,number:O}=c.lineAt(e);return new BlockInfo(g,b,h+m*(O-d),m,BlockType.Text)}forEachLine(e,n,c,h,u,d){let{firstLine:m,lineHeight:g}=this.lines(c,u);for(let b=Math.max(e,u),O=Math.min(u+this.length,n);b<=O;){let v=c.lineAt(b);b==e&&(h+=g*(v.number-m)),d(new BlockInfo(v.from,v.length,h,g,BlockType.Text)),h+=g,b=v.to+1}}replace(e,n,c){let h=this.length-n;if(h>0){let u=c[c.length-1];u instanceof HeightMapGap?c[c.length-1]=new HeightMapGap(u.length+h):c.push(null,new HeightMapGap(h-1))}if(e>0){let u=c[0];u instanceof HeightMapGap?c[0]=new HeightMapGap(e+u.length):c.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(c)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,c=!1,h){let u=n+this.length;if(h&&h.from<=n+this.length&&h.more){let d=[],m=Math.max(n,h.from),g=-1,b=e.heightChanged;for(h.from>n&&d.push(new HeightMapGap(h.from-n-1).updateHeight(e,n));m<=u&&h.more;){let v=e.doc.lineAt(m).length;d.length&&d.push(null);let y=h.heights[h.index++];g==-1?g=y:Math.abs(y-g)>=Epsilon&&(g=-2);let w=new HeightMapText(v,y);w.outdated=!1,d.push(w),m+=v+1}m<=u&&d.push(null,new HeightMapGap(u-m).updateHeight(e,m));let O=HeightMap.of(d);return e.heightChanged=b||g<0||Math.abs(O.height-this.height)>=Epsilon||Math.abs(g-this.lines(e.doc,n).lineHeight)>=Epsilon,O}else(c||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,c){super(e.length+n+c.length,e.height+c.height,n|(e.outdated||c.outdated?2:0)),this.left=e,this.right=c,this.size=e.size+c.size}get break(){return this.flags&1}blockAt(e,n,c,h){let u=c+this.left.height;return e<u?this.left.blockAt(e,n,c,h):this.right.blockAt(e,n,u,h+this.left.length+this.break)}lineAt(e,n,c,h,u){let d=h+this.left.height,m=u+this.left.length+this.break,g=n==QueryType$1.ByHeight?e<d:e<m,b=g?this.left.lineAt(e,n,c,h,u):this.right.lineAt(e,n,c,d,m);if(this.break||(g?b.to<m:b.from>m))return b;let O=n==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return g?b.join(this.right.lineAt(m,O,c,d,m)):this.left.lineAt(m,O,c,h,u).join(b)}forEachLine(e,n,c,h,u,d){let m=h+this.left.height,g=u+this.left.length+this.break;if(this.break)e<g&&this.left.forEachLine(e,n,c,h,u,d),n>=g&&this.right.forEachLine(e,n,c,m,g,d);else{let b=this.lineAt(g,QueryType$1.ByPos,c,h,u);e<b.from&&this.left.forEachLine(e,b.from-1,c,h,u,d),b.to>=e&&b.from<=n&&d(b),n>b.to&&this.right.forEachLine(b.to+1,n,c,m,g,d)}}replace(e,n,c){let h=this.left.length+this.break;if(n<h)return this.balanced(this.left.replace(e,n,c),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-h,n-h,c));let u=[];e>0&&this.decomposeLeft(e,u);let d=u.length;for(let m of c)u.push(m);if(e>0&&mergeGaps(u,d-1),n<this.length){let m=u.length;this.decomposeRight(n,u),mergeGaps(u,m)}return HeightMap.of(u)}decomposeLeft(e,n){let c=this.left.length;if(e<=c)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(c++,e>=c&&n.push(null)),e>c&&this.right.decomposeLeft(e-c,n)}decomposeRight(e,n){let c=this.left.length,h=c+this.break;if(e>=h)return this.right.decomposeRight(e-h,n);e<c&&this.left.decomposeRight(e,n),this.break&&e<h&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,c=!1,h){let{left:u,right:d}=this,m=n+u.length+this.break,g=null;return h&&h.from<=n+u.length&&h.more?g=u=u.updateHeight(e,n,c,h):u.updateHeight(e,n,c),h&&h.from<=m+d.length&&h.more?g=d=d.updateHeight(e,m,c,h):d.updateHeight(e,m,c),g?this.balanced(u,d):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(s,e){let n,c;s[e]==null&&(n=s[e-1])instanceof HeightMapGap&&(c=s[e+1])instanceof HeightMapGap&&s.splice(e-1,3,new HeightMapGap(n.length+1+c.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let c=Math.min(n,this.lineEnd),h=this.nodes[this.nodes.length-1];h instanceof HeightMapText?h.length+=c-this.pos:(c>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(c-this.pos,-1)),this.writtenTo=c,n>c&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,c){if(e<n||c.heightRelevant){let h=c.widget?c.widget.estimatedHeight:0;h<0&&(h=this.oracle.lineHeight);let u=n-e;c.block?this.addBlock(new HeightMapBlock(u,h,c.type)):(u||h>=relevantWidgetHeight)&&this.addLineDeco(h,u)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let c=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(c.flags|=4),c}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine(),e.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=BlockType.WidgetBefore&&(this.covering=e)}addLineDeco(e,n){let c=this.ensureLine();c.length+=n,c.collapsed+=n,c.widgetHeight=Math.max(c.widgetHeight,e),this.writtenTo=this.pos=this.pos+n}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let c=e;for(let h of this.nodes)h instanceof HeightMapText&&h.updateHeight(this.oracle,c),c+=h?h.length:1;return this.nodes}static build(e,n,c,h){let u=new NodeBuilder(c,e);return RangeSet.spans(n,c,h,u,0),u.finish(c)}}function heightRelevantDecoChanges(s,e,n){let c=new DecorationComparator;return RangeSet.compare(s,e,n,c,0),c.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,c,h){(e<n||c&&c.heightRelevant||h&&h.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(s,e){let n=s.getBoundingClientRect(),c=Math.max(0,n.left),h=Math.min(innerWidth,n.right),u=Math.max(0,n.top),d=Math.min(innerHeight,n.bottom),m=s.ownerDocument.body;for(let g=s.parentNode;g&&g!=m;)if(g.nodeType==1){let b=g,O=window.getComputedStyle(b);if((b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth)&&O.overflow!="visible"){let v=b.getBoundingClientRect();c=Math.max(c,v.left),h=Math.min(h,v.right),u=Math.max(u,v.top),d=Math.min(d,v.bottom)}g=O.position=="absolute"||O.position=="fixed"?b.offsetParent:b.parentNode}else if(g.nodeType==11)g=g.host;else break;return{left:c-n.left,right:Math.max(c,h)-n.left,top:u-(n.top+e),bottom:Math.max(u,d)-(n.top+e)}}function fullPixelRange(s,e){let n=s.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,c){this.from=e,this.to=n,this.size=c}static same(e,n){if(e.length!=n.length)return!1;for(let c=0;c<e.length;c++){let h=e[c],u=n[c];if(h.from!=u.from||h.to!=u.to||h.size!=u.size)return!1}return!0}draw(e){return Decoration.replace({widget:new LineGapWidget(this.size,e)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new HeightOracle,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(decorations).filter(n=>typeof n!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(n=>n.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let c=0;c<=1;c++){let h=c?n.head:n.anchor;if(!e.some(({from:u,to:d})=>h>=u&&h<=d)){let{from:u,to:d}=this.lineBlockAt(h);e.push(new Viewport(u,d))}}this.viewports=e.sort((c,h)=>c.from-h.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let c=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(b=>typeof b!="function");let h=e.changedRanges,u=ChangedRange.extendWithRanges(h,heightRelevantDecoChanges(c,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),d=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),u),this.heightMap.height!=d&&(e.flags|=2);let m=u.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<m.from||n.range.head>m.to)||!this.viewportIsAppropriate(m))&&(m=this.getViewport(0,n));let g=!e.changes.empty||e.flags&2||m.from!=this.viewport.from||m.to!=this.viewport.to;this.viewport=m,this.updateForViewport(),g&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,c=window.getComputedStyle(n),h=this.heightOracle,u=c.whiteSpace;this.defaultTextDirection=c.direction=="rtl"?Direction.RTL:Direction.LTR;let d=this.heightOracle.mustRefreshForWrapping(u),m=d||this.mustMeasureContent||this.contentDOMHeight!=n.clientHeight;this.contentDOMHeight=n.clientHeight,this.mustMeasureContent=!1;let g=0,b=0,O=parseInt(c.paddingTop)||0,v=parseInt(c.paddingBottom)||0;(this.paddingTop!=O||this.paddingBottom!=v)&&(this.paddingTop=O,this.paddingBottom=v,g|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(h.lineWrapping&&(m=!0),this.editorWidth=e.scrollDOM.clientWidth,g|=8);let y=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),w=y.top-this.pixelViewport.top,S=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(m=!0)),!this.inView)return 0;let E=n.clientWidth;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=E,this.editorHeight=e.scrollDOM.clientHeight,g|=8),m){let I=e.docView.measureVisibleLineHeights(this.viewport);if(h.mustRefreshForHeights(I)&&(d=!0),d||h.lineWrapping&&Math.abs(E-this.contentDOMWidth)>h.charWidth){let{lineHeight:U,charWidth:z}=e.docView.measureTextSize();d=h.refresh(u,U,z,E/z,I),d&&(e.docView.minWidth=0,g|=8)}w>0&&S>0?b=Math.max(w,S):w<0&&S<0&&(b=Math.min(w,S)),h.heightChanged=!1;for(let U of this.viewports){let z=U.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(U);this.heightMap=this.heightMap.updateHeight(h,0,d,new MeasuredHeights(U.from,z))}h.heightChanged&&(g|=2)}let P=!this.viewportIsAppropriate(this.viewport,b)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(this.viewport=this.getViewport(b,this.scrollTarget)),this.updateForViewport(),(g&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(d?[]:this.lineGaps)),g|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),g}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let c=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),h=this.heightMap,u=this.state.doc,{visibleTop:d,visibleBottom:m}=this,g=new Viewport(h.lineAt(d-c*1e3,QueryType$1.ByHeight,u,0,0).from,h.lineAt(m+(1-c)*1e3,QueryType$1.ByHeight,u,0,0).to);if(n){let{head:b}=n.range;if(b<g.from||b>g.to){let O=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=h.lineAt(b,QueryType$1.ByPos,u,0,0),y;n.y=="center"?y=(v.top+v.bottom)/2-O/2:n.y=="start"||n.y=="nearest"&&b<g.from?y=v.top:y=v.bottom-O,g=new Viewport(h.lineAt(y-1e3/2,QueryType$1.ByHeight,u,0,0).from,h.lineAt(y+O+1e3/2,QueryType$1.ByHeight,u,0,0).to)}}return g}mapViewport(e,n){let c=n.mapPos(e.from,-1),h=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(c,QueryType$1.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(h,QueryType$1.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:n},c=0){if(!this.inView)return!0;let{top:h}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.state.doc,0,0),{bottom:u}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.state.doc,0,0),{visibleTop:d,visibleBottom:m}=this;return(e==0||h<=d-Math.max(10,Math.min(-c,250)))&&(n==this.state.doc.length||u>=m+Math.max(10,Math.min(c,250)))&&h>d-2*1e3&&u<m+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let c=[];for(let h of e)n.touchesRange(h.from,h.to)||c.push(new LineGap(n.mapPos(h.from),n.mapPos(h.to),h.size));return c}ensureLineGaps(e){let n=[];if(this.defaultTextDirection!=Direction.LTR)return n;for(let c of this.viewportLines){if(c.length<4e3)continue;let h=lineStructure(c.from,c.to,this.stateDeco);if(h.total<4e3)continue;let u,d;if(this.heightOracle.lineWrapping){let b=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;u=findPosition(h,(this.visibleTop-c.top-b)/c.height),d=findPosition(h,(this.visibleBottom-c.top+b)/c.height)}else{let b=h.total*this.heightOracle.charWidth,O=2e3*this.heightOracle.charWidth;u=findPosition(h,(this.pixelViewport.left-O)/b),d=findPosition(h,(this.pixelViewport.right+O)/b)}let m=[];u>c.from&&m.push({from:c.from,to:u}),d<c.to&&m.push({from:d,to:c.to});let g=this.state.selection.main;g.from>=c.from&&g.from<=c.to&&cutRange(m,g.from-10,g.from+10),!g.empty&&g.to>=c.from&&g.to<=c.to&&cutRange(m,g.to-10,g.to+10);for(let{from:b,to:O}of m)O-b>1e3&&n.push(find(e,v=>v.from>=c.from&&v.to<=c.to&&Math.abs(v.from-b)<1e3&&Math.abs(v.to-O)<1e3)||new LineGap(b,O,this.gapSize(c,b,O,h)))}return n}gapSize(e,n,c,h){let u=findFraction(h,c)-findFraction(h,n);return this.heightOracle.lineWrapping?e.height*u:h.total*this.heightOracle.charWidth*u}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(h,u){n.push({from:h,to:u})},point(){}},20);let c=n.length!=this.visibleRanges.length||this.visibleRanges.some((h,u)=>h.from!=n[u].from||h.to!=n[u].to);return this.visibleRanges=n,c?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(s,e,n){let c=[],h=s,u=0;return RangeSet.spans(n,s,e,{span(){},point(d,m){d>h&&(c.push({from:h,to:d}),u+=d-h),h=m}},20),h<e&&(c.push({from:h,to:e}),u+=e-h),{total:u,ranges:c}}function findPosition({total:s,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let c=Math.floor(s*n);for(let h=0;;h++){let{from:u,to:d}=e[h],m=d-u;if(c<=m)return u+c;c-=m}}function findFraction(s,e){let n=0;for(let{from:c,to:h}of s.ranges){if(e<=h){n+=e-c;break}n+=h-c}return n/s.total}function cutRange(s,e,n){for(let c=0;c<s.length;c++){let h=s[c];if(h.from<n&&h.to>e){let u=[];h.from<e&&u.push({from:h.from,to:e}),h.to>n&&u.push({from:n,to:h.to}),s.splice(c,1,...u),c+=u.length-1}}}function find(s,e){for(let n of s)if(e(n))return n}const IdScaler={toDOM(s){return s},fromDOM(s){return s},scale:1};class BigScaler{constructor(e,n,c){let h=0,u=0,d=0;this.viewports=c.map(({from:m,to:g})=>{let b=n.lineAt(m,QueryType$1.ByPos,e,0,0).top,O=n.lineAt(g,QueryType$1.ByPos,e,0,0).bottom;return h+=O-b,{from:m,to:g,top:b,bottom:O,domTop:0,domBottom:0}}),this.scale=(7e6-h)/(n.height-h);for(let m of this.viewports)m.domTop=d+(m.top-u)*this.scale,d=m.domBottom=m.domTop+(m.bottom-m.top),u=m.bottom}toDOM(e){for(let n=0,c=0,h=0;;n++){let u=n<this.viewports.length?this.viewports[n]:null;if(!u||e<u.top)return h+(e-c)*this.scale;if(e<=u.bottom)return u.domTop+(e-u.top);c=u.bottom,h=u.domBottom}}fromDOM(e){for(let n=0,c=0,h=0;;n++){let u=n<this.viewports.length?this.viewports[n]:null;if(!u||e<u.domTop)return c+(e-h)/this.scale;if(e<=u.domBottom)return u.top+(e-u.domTop);c=u.bottom,h=u.domBottom}}}function scaleBlock(s,e){if(e.scale==1)return s;let n=e.toDOM(s.top),c=e.toDOM(s.bottom);return new BlockInfo(s.from,s.length,n,c-n,Array.isArray(s.type)?s.type.map(h=>scaleBlock(h,e)):s.type)}const theme=Facet.define({combine:s=>s.join(" ")}),darkTheme=Facet.define({combine:s=>s.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(s,e,n){return new StyleModule(e,{finish(c){return/&/.test(c)?c.replace(/&\w*/,h=>{if(h=="&")return s;if(!n||!n[h])throw new RangeError(`Unsupported selector: ${h}`);return n[h]}):s+" "+c}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e,n,c){this.view=e,this.onChange=n,this.onScrollChanged=c,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(h=>{for(let u of h)this.queue.push(u);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&h.some(u=>u.type=="childList"&&u.removedNodes.length||u.type=="characterData"&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=h=>{this.queue.push({target:h.target,type:"characterData",oldValue:h.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(h=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),h.length>0&&h[h.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(h=>{h.length>0&&h[h.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,c)=>n!=e[c]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,c=this.selectionRange;if(n.state.facet(editable)?n.root.activeElement!=this.dom:!hasSelection(n.dom,c))return;let h=c.anchorNode&&n.docView.nearest(c.anchorNode);h&&h.ignoreEvent(e)||((browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!n.state.selection.main.empty&&c.focusNode&&isEquivalentPosition(c.focusNode,c.focusOffset,c.anchorNode,c.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,n=getSelection(e),c=browser.safari&&e.nodeType==11&&deepActiveElement()==this.view.contentDOM&&safariSelectionRangeHack(this.view)||n;return this.selectionRange.eq(c)?!1:(this.selectionRange.setRange(c),this.selectionChanged=!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let c=this.dom;c;)if(c.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==c?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(c),c=c.assignedSlot||c.parentNode;else if(c.nodeType==11)c=c.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let c of this.scrollTargets)c.removeEventListener("scroll",this.onScroll);for(let c of this.scrollTargets=n)c.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){this.delayedAndroidKey||requestAnimationFrame(()=>{let c=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||dispatchKey(this.view.contentDOM,c.key,c.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let u of this.observer.takeRecords())e.push(u);e.length&&(this.queue=[]);let n=-1,c=-1,h=!1;for(let u of e){let d=this.readMutation(u);!d||(d.typeOver&&(h=!0),n==-1?{from:n,to:c}=d:(n=Math.min(d.from,n),c=Math.max(d.to,c)))}return{from:n,to:c,typeOver:h}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:n,to:c,typeOver:h}=this.processRecords(),u=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(n<0&&!u)return;this.selectionChanged=!1;let d=this.view.state,m=this.onChange(n,c,h);return this.view.state==d&&this.view.update([]),m}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.dirty|=4),e.type=="childList"){let c=findChild(n,e.previousSibling||e.target.previousSibling,-1),h=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:c?n.posAfter(c):n.posAtStart,to:h?n.posBefore(h):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,n,c;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(c=this.resize)===null||c===void 0||c.disconnect();for(let h of this.scrollTargets)h.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function findChild(s,e,n){for(;e;){let c=ContentView.get(e);if(c&&c.parent==s)return c;let h=e.parentNode;e=h!=s.dom?h:n>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(s){let e=null;function n(g){g.preventDefault(),g.stopImmediatePropagation(),e=g.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let c=e.startContainer,h=e.startOffset,u=e.endContainer,d=e.endOffset,m=s.docView.domAtPos(s.state.selection.main.anchor);return isEquivalentPosition(m.node,m.offset,u,d)&&([c,h,u,d]=[u,d,c,h]),{anchorNode:c,anchorOffset:h,focusNode:u,focusOffset:d}}function applyDOMChange(s,e,n,c){let h,u,d=s.state.selection.main;if(e>-1){let m=s.docView.domBoundsAround(e,n,0);if(!m||s.state.readOnly)return!1;let{from:g,to:b}=m,O=s.docView.impreciseHead||s.docView.impreciseAnchor?[]:selectionPoints(s),v=new DOMReader(O,s.state);v.readRange(m.startDOM,m.endDOM);let y=d.from,w=null;(s.inputState.lastKeyCode===8&&s.inputState.lastKeyTime>Date.now()-100||browser.android&&v.text.length<b-g)&&(y=d.to,w="end");let S=findDiff(s.state.doc.sliceString(g,b,LineBreakPlaceholder),v.text,y-g,w);S&&(browser.chrome&&s.inputState.lastKeyCode==13&&S.toB==S.from+2&&v.text.slice(S.from,S.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&S.toB--,h={from:g+S.from,to:g+S.toA,insert:Text.of(v.text.slice(S.from,S.toB).split(LineBreakPlaceholder))}),u=selectionFromPoints(O,g)}else if(s.hasFocus||!s.state.facet(editable)){let m=s.observer.selectionRange,{impreciseHead:g,impreciseAnchor:b}=s.docView,O=g&&g.node==m.focusNode&&g.offset==m.focusOffset||!contains(s.contentDOM,m.focusNode)?s.state.selection.main.head:s.docView.posFromDOM(m.focusNode,m.focusOffset),v=b&&b.node==m.anchorNode&&b.offset==m.anchorOffset||!contains(s.contentDOM,m.anchorNode)?s.state.selection.main.anchor:s.docView.posFromDOM(m.anchorNode,m.anchorOffset);(O!=d.head||v!=d.anchor)&&(u=EditorSelection.single(v,O))}if(!h&&!u)return!1;if(!h&&c&&!d.empty&&u&&u.main.empty?h={from:d.from,to:d.to,insert:s.state.doc.slice(d.from,d.to)}:h&&h.from>=d.from&&h.to<=d.to&&(h.from!=d.from||h.to!=d.to)&&d.to-d.from-(h.to-h.from)<=4?h={from:d.from,to:d.to,insert:s.state.doc.slice(d.from,h.from).append(h.insert).append(s.state.doc.slice(h.to,d.to))}:(browser.mac||browser.android)&&h&&h.from==h.to&&h.from==d.head-1&&h.insert.toString()=="."&&(h={from:d.from,to:d.to,insert:Text.of([" "])}),h){let m=s.state;if(browser.ios&&s.inputState.flushIOSKey(s)||browser.android&&(h.from==d.from&&h.to==d.to&&h.insert.length==1&&h.insert.lines==2&&dispatchKey(s.contentDOM,"Enter",13)||h.from==d.from-1&&h.to==d.to&&h.insert.length==0&&dispatchKey(s.contentDOM,"Backspace",8)||h.from==d.from&&h.to==d.to+1&&h.insert.length==0&&dispatchKey(s.contentDOM,"Delete",46)))return!0;let g=h.insert.toString();if(s.state.facet(inputHandler$1).some(v=>v(s,h.from,h.to,g)))return!0;s.inputState.composing>=0&&s.inputState.composing++;let b;if(h.from>=d.from&&h.to<=d.to&&h.to-h.from>=(d.to-d.from)/3&&(!u||u.main.empty&&u.main.from==h.from+h.insert.length)&&s.inputState.composing<0){let v=d.from<h.from?m.sliceDoc(d.from,h.from):"",y=d.to>h.to?m.sliceDoc(h.to,d.to):"";b=m.replaceSelection(s.state.toText(v+h.insert.sliceString(0,void 0,s.state.lineBreak)+y))}else{let v=m.changes(h),y=u&&!m.selection.main.eq(u.main)&&u.main.to<=v.newLength?u.main:void 0;if(m.selection.ranges.length>1&&s.inputState.composing>=0&&h.to<=d.to&&h.to>=d.to-10){let w=s.state.sliceDoc(h.from,h.to),S=compositionSurroundingNode(s)||s.state.doc.lineAt(d.head),A=d.to-h.to,E=d.to-d.from;b=m.changeByRange(P=>{if(P.from==d.from&&P.to==d.to)return{changes:v,range:y||P.map(v)};let I=P.to-A,U=I-w.length;if(P.to-P.from!=E||s.state.sliceDoc(U,I)!=w||S&&P.to>=S.from&&P.from<=S.to)return{range:P};let z=m.changes({from:U,to:I,insert:h.insert}),N=P.to-d.to;return{changes:z,range:y?EditorSelection.range(Math.max(0,y.anchor+N),Math.max(0,y.head+N)):P.map(z)}})}else b={changes:v,selection:y&&m.selection.replaceRange(y)}}let O="input.type";return s.composing&&(O+=".compose",s.inputState.compositionFirstChange&&(O+=".start",s.inputState.compositionFirstChange=!1)),s.dispatch(b,{scrollIntoView:!0,userEvent:O}),!0}else if(u&&!u.main.eq(d)){let m=!1,g="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(m=!0),g=s.inputState.lastSelectionOrigin),s.dispatch({selection:u,scrollIntoView:m,userEvent:g}),!0}else return!1}function findDiff(s,e,n,c){let h=Math.min(s.length,e.length),u=0;for(;u<h&&s.charCodeAt(u)==e.charCodeAt(u);)u++;if(u==h&&s.length==e.length)return null;let d=s.length,m=e.length;for(;d>0&&m>0&&s.charCodeAt(d-1)==e.charCodeAt(m-1);)d--,m--;if(c=="end"){let g=Math.max(0,u-Math.min(d,m));n-=d+g-u}return d<u&&s.length<e.length?(u-=n<=u&&n>=d?u-n:0,m=u+(m-d),d=u):m<u&&(u-=n<=u&&n>=m?u-n:0,d=u+(d-m),m=u),{from:u,toA:d,toB:m}}function selectionPoints(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:n,anchorOffset:c,focusNode:h,focusOffset:u}=s.observer.selectionRange;return n&&(e.push(new DOMPoint(n,c)),(h!=n||u!=c)&&e.push(new DOMPoint(h,u))),e}function selectionFromPoints(s,e){if(s.length==0)return null;let n=s[0].pos,c=s.length==2?s[1].pos:n;return n>-1&&c>-1?EditorSelection.single(n+e,c+e):null}class EditorView{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this.root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),this.plugins=this.state.facet(viewPlugin).map(n=>new PluginInstance(n));for(let n of this.plugins)n.update(this);this.observer=new DOMObserver(this,(n,c,h)=>applyDOMChange(this,n,c,h),n=>{this.inputState.runScrollHandlers(this,n),this.observer.intersecting&&this.measure()}),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Transaction?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,c=!1,h,u=this.state;for(let m of e){if(m.startState!=u)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");u=m.state}if(this.destroyed){this.viewState.state=u;return}if(this.observer.clear(),u.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(u);h=ViewUpdate.create(this,u,e);let d=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(d&&(d=d.map(m.changes)),m.scrollIntoView){let{main:g}=m.state.selection;d=new ScrollTarget(g.empty?g:EditorSelection.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of m.effects)g.is(scrollIntoView$1)&&(d=g.value)}this.viewState.update(h,d),this.bidiCache=CachedOrder.update(this.bidiCache,h.changes),h.empty||(this.updatePlugins(h),this.inputState.update(h)),n=this.docView.update(h),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),c=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(h.startState.facet(theme)!=h.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(n||c||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!h.empty)for(let m of this.state.facet(updateListener))m(h)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let c of this.plugins)c.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(c=>new PluginInstance(c)),this.pluginMap.clear();for(let c of this.plugins)c.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(viewPlugin),c=e.state.facet(viewPlugin);if(n!=c){let h=[];for(let u of c){let d=n.indexOf(u);if(d<0)h.push(new PluginInstance(u));else{let m=this.plugins[d];m.mustUpdate=e,h.push(m)}}for(let u of this.plugins)u.mustUpdate!=e&&u.destroy(this);this.plugins=h,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let h of this.plugins)h.mustUpdate=e;for(let h=0;h<this.plugins.length;h++)this.plugins[h].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let n=null;try{for(let c=0;;c++){this.updateState=1;let h=this.viewport,u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];u&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(v=>{try{return v.read(this)}catch(y){return logException(this.state,y),BadMeasure}}),g=ViewUpdate.create(this,this.state,[]),b=!1,O=!1;g.flags|=u,n?n.flags|=u:n=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),b=this.docView.update(g));for(let v=0;v<d.length;v++)if(m[v]!=BadMeasure)try{let y=d[v];y.write&&y.write(m[v],this)}catch(y){logException(this.state,y)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,O=!0),b&&this.docView.updateSelection(!0),this.viewport.from==h.from&&this.viewport.to==h.to&&!O&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(updateListener))c(n)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,n);let c=this.observer.ignore(()=>{let h=updateAttrs(this.contentDOM,this.contentAttrs,n),u=updateAttrs(this.dom,this.editorAttrs,e);return h||u});return this.editorAttrs=e,this.contentAttrs=n,c}showAnnouncements(e){let n=!0;for(let c of e)for(let h of c.effects)if(h.is(EditorView.announce)){n&&(this.announceDOM.textContent=""),n=!1;let u=this.announceDOM.appendChild(document.createElement("div"));u.textContent=h.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(c=>c.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,c){return skipAtoms(this,e,moveByChar(this,e,n,c))}moveByGroup(e,n){return skipAtoms(this,e,moveByChar(this,e,n,c=>byGroup(this,e.head,c)))}moveToLineBoundary(e,n,c=!0){return moveToLineBoundary(this,e,n,c)}moveVertically(e,n,c){return skipAtoms(this,e,moveVertically(this,e,n,c))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),posAtCoords(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let c=this.docView.coordsAt(e,n);if(!c||c.left==c.right)return c;let h=this.state.doc.lineAt(e),u=this.bidiSpans(h),d=u[BidiSpan.find(u,e-h.from,-1,n)];return flattenRect(c,d.dir==Direction.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let n=this.textDirectionAt(e.from);for(let h of this.bidiCache)if(h.from==e.from&&h.dir==n)return h.order;let c=computeOrder(e.text,n);return this.bidiCache.push(new CachedOrder(e.from,e.to,n,c)),c}get hasFocus(){var e;return(document.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static theme(e,n){let c=StyleModule.newName(),h=[theme.of(c),styleModule.of(buildTheme(`.${c}`,e))];return n&&n.dark&&h.push(darkTheme.of(!0)),h}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var n;let c=e.querySelector(".cm-content"),h=c&&ContentView.get(c)||ContentView.get(e);return((n=h==null?void 0:h.rootView)===null||n===void 0?void 0:n.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,c,h){this.from=e,this.to=n,this.dir=c,this.order=h}static update(e,n){if(n.empty)return e;let c=[],h=e.length?e[e.length-1].dir:Direction.LTR;for(let u=Math.max(0,e.length-10);u<e.length;u++){let d=e[u];d.dir==h&&!n.touchesRange(d.from,d.to)&&c.push(new CachedOrder(n.mapPos(d.from,1),n.mapPos(d.to,-1),d.dir,d.order))}return c}}function attrsFromFacet(s,e,n){for(let c=s.state.facet(e),h=c.length-1;h>=0;h--){let u=c[h],d=typeof u=="function"?u(s):u;d&&combineAttrs(d,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(s,e){const n=s.split(/-(?!$)/);let c=n[n.length-1];c=="Space"&&(c=" ");let h,u,d,m;for(let g=0;g<n.length-1;++g){const b=n[g];if(/^(cmd|meta|m)$/i.test(b))m=!0;else if(/^a(lt)?$/i.test(b))h=!0;else if(/^(c|ctrl|control)$/i.test(b))u=!0;else if(/^s(hift)?$/i.test(b))d=!0;else if(/^mod$/i.test(b))e=="mac"?m=!0:u=!0;else throw new Error("Unrecognized modifier name: "+b)}return h&&(c="Alt-"+c),u&&(c="Ctrl-"+c),m&&(c="Meta-"+c),d&&(c="Shift-"+c),c}function modifiers(s,e,n){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),n!==!1&&e.shiftKey&&(s="Shift-"+s),s}const handleKeyEvents=EditorView.domEventHandlers({keydown(s,e){return runHandlers(getKeymap(e.state),s,e,"editor")}}),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(s){let e=s.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((c,h)=>c.concat(h),[]))),n}function runScopeHandlers(s,e,n){return runHandlers(getKeymap(s.state),e,s,n)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(s,e=currentPlatform){let n=Object.create(null),c=Object.create(null),h=(d,m)=>{let g=c[d];if(g==null)c[d]=m;else if(g!=m)throw new Error("Key binding "+d+" is used both as a regular binding and as a multi-stroke prefix")},u=(d,m,g,b)=>{let O=n[d]||(n[d]=Object.create(null)),v=m.split(/ (?!$)/).map(S=>normalizeKeyName(S,e));for(let S=1;S<v.length;S++){let A=v.slice(0,S).join(" ");h(A,!0),O[A]||(O[A]={preventDefault:!0,commands:[E=>{let P=storedPrefix={view:E,prefix:A,scope:d};return setTimeout(()=>{storedPrefix==P&&(storedPrefix=null)},PrefixTimeout),!0}]})}let y=v.join(" ");h(y,!1);let w=O[y]||(O[y]={preventDefault:!1,commands:[]});w.commands.push(g),b&&(w.preventDefault=!0)};for(let d of s){let m=d[e]||d.key;if(!!m)for(let g of d.scope?d.scope.split(" "):["editor"])u(g,m,d.run,d.preventDefault),d.shift&&u(g,"Shift-"+m,d.shift,d.preventDefault)}return n}function runHandlers(s,e,n,c){let h=keyName(e),u=h.length==1&&h!=" ",d="",m=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==c&&(d=storedPrefix.prefix+" ",(m=modifierCodes.indexOf(e.keyCode)<0)&&(storedPrefix=null));let g=v=>{if(v){for(let y of v.commands)if(y(n))return!0;v.preventDefault&&(m=!0)}return!1},b=s[c],O;if(b){if(g(b[d+modifiers(h,e,!u)]))return!0;if(u&&(e.shiftKey||e.altKey||e.metaKey)&&(O=base[e.keyCode])&&O!=h){if(g(b[d+modifiers(O,e,!0)]))return!0}else if(u&&e.shiftKey&&g(b[d+modifiers(h,e,!0)]))return!0}return m}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(s){return combineConfig(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function drawSelection(s={}){return[selectionConfig.of(s),drawSelectionPlugin,hideNativeSelection]}class Piece{constructor(e,n,c,h,u){this.left=e,this.top=n,this.width=c,this.height=h,this.className=u}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const drawSelectionPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=s.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=s.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),s.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(selectionConfig).cursorBlinkRate+"ms"}update(s){let e=s.startState.facet(selectionConfig)!=s.state.facet(selectionConfig);(e||s.selectionSet||s.geometryChanged||s.viewportChanged)&&this.view.requestMeasure(this.measureReq),s.transactions.some(n=>n.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:s}=this.view,e=s.facet(selectionConfig),n=s.selection.ranges.map(h=>h.empty?[]:measureRange(this.view,h)).reduce((h,u)=>h.concat(u)),c=[];for(let h of s.selection.ranges){let u=h==s.selection.main;if(h.empty?!u||CanHidePrimary:e.drawRangeCursor){let d=measureCursor(this.view,h,u);d&&c.push(d)}}return{rangePieces:n,cursors:c}}drawSel({rangePieces:s,cursors:e}){if(s.length!=this.rangePieces.length||s.some((n,c)=>!n.eq(this.rangePieces[c]))){this.selectionLayer.textContent="";for(let n of s)this.selectionLayer.appendChild(n.draw());this.rangePieces=s}if(e.length!=this.cursors.length||e.some((n,c)=>!n.eq(this.cursors[c]))){let n=this.cursorLayer.children;if(n.length!==e.length){this.cursorLayer.textContent="";for(const c of e)this.cursorLayer.appendChild(c.draw())}else e.forEach((c,h)=>c.adjust(n[h]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function getBase(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Direction.LTR?e.left:e.right-s.scrollDOM.clientWidth)-s.scrollDOM.scrollLeft,top:e.top-s.scrollDOM.scrollTop}}function wrappedLine(s,e,n){let c=EditorSelection.cursor(e);return{from:Math.max(n.from,s.moveToLineBoundary(c,!1,!0).from),to:Math.min(n.to,s.moveToLineBoundary(c,!0,!0).from),type:BlockType.Text}}function blockAt(s,e){let n=s.lineBlockAt(e);if(Array.isArray(n.type)){for(let c of n.type)if(c.to>e||c.to==e&&(c.to==n.to||c.type==BlockType.Text))return c}return n}function measureRange(s,e){if(e.to<=s.viewport.from||e.from>=s.viewport.to)return[];let n=Math.max(e.from,s.viewport.from),c=Math.min(e.to,s.viewport.to),h=s.textDirection==Direction.LTR,u=s.contentDOM,d=u.getBoundingClientRect(),m=getBase(s),g=window.getComputedStyle(u.firstChild),b=d.left+parseInt(g.paddingLeft)+Math.min(0,parseInt(g.textIndent)),O=d.right-parseInt(g.paddingRight),v=blockAt(s,n),y=blockAt(s,c),w=v.type==BlockType.Text?v:null,S=y.type==BlockType.Text?y:null;if(s.lineWrapping&&(w&&(w=wrappedLine(s,n,w)),S&&(S=wrappedLine(s,c,S))),w&&S&&w.from==S.from)return E(P(e.from,e.to,w));{let U=w?P(e.from,null,w):I(v,!1),z=S?P(null,e.to,S):I(y,!0),N=[];return(w||v).to<(S||y).from-1?N.push(A(b,U.bottom,O,z.top)):U.bottom<z.top&&s.elementAtHeight((U.bottom+z.top)/2).type==BlockType.Text&&(U.bottom=z.top=(U.bottom+z.top)/2),E(U).concat(N).concat(E(z))}function A(U,z,N,R){return new Piece(U-m.left,z-m.top-.01,N-U,R-z+.01,"cm-selectionBackground")}function E({top:U,bottom:z,horizontal:N}){let R=[];for(let F=0;F<N.length;F+=2)R.push(A(N[F],U,N[F+1],z));return R}function P(U,z,N){let R=1e9,F=-1e9,D=[];function de(ae,Oe,ye,ke,pe){let B=s.coordsAtPos(ae,ae==N.to?-2:2),K=s.coordsAtPos(ye,ye==N.from?2:-2);R=Math.min(B.top,K.top,R),F=Math.max(B.bottom,K.bottom,F),pe==Direction.LTR?D.push(h&&Oe?b:B.left,h&&ke?O:K.right):D.push(!h&&ke?b:K.left,!h&&Oe?O:B.right)}let H=U!=null?U:N.from,he=z!=null?z:N.to;for(let ae of s.visibleRanges)if(ae.to>H&&ae.from<he)for(let Oe=Math.max(ae.from,H),ye=Math.min(ae.to,he);;){let ke=s.state.doc.lineAt(Oe);for(let pe of s.bidiSpans(ke)){let B=pe.from+ke.from,K=pe.to+ke.from;if(B>=ye)break;K>Oe&&de(Math.max(B,Oe),U==null&&B<=H,Math.min(K,ye),z==null&&K>=he,pe.dir)}if(Oe=ke.to+1,Oe>=ye)break}return D.length==0&&de(H,U==null,he,z==null,s.textDirection),{top:R,bottom:F,horizontal:D}}function I(U,z){let N=d.top+(z?U.top:U.bottom);return{top:N,bottom:N,horizontal:[]}}}function measureCursor(s,e,n){let c=s.coordsAtPos(e.head,e.assoc||1);if(!c)return null;let h=getBase(s);return new Piece(c.left-h.left,c.top-h.top,-1,c.bottom-c.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const setDropCursorPos=StateEffect.define({map(s,e){return s==null?null:e.mapPos(s)}}),dropCursorPos=StateField.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((n,c)=>c.is(setDropCursorPos)?c.value:n,s)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let n=s.state.field(dropCursorPos);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(dropCursorPos)!=n||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let s=this.view.state.field(dropCursorPos),e=s!=null&&this.view.coordsAtPos(s);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(s){this.cursor&&(s?(this.cursor.style.left=s.left+"px",this.cursor.style.top=s.top+"px",this.cursor.style.height=s.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(dropCursorPos)!=s&&this.view.dispatch({effects:setDropCursorPos.of(s)})}},{eventHandlers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(s,e,n,c,h){e.lastIndex=0;for(let u=s.iterRange(n,c),d=n,m;!u.next().done;d+=u.value.length)if(!u.lineBreak)for(;m=e.exec(u.value);)h(d+m.index,d+m.index+m[0].length,m)}function matchRanges(s,e){let n=s.visibleRanges;if(n.length==1&&n[0].from==s.viewport.from&&n[0].to==s.viewport.to)return n;let c=[];for(let{from:h,to:u}of n)h=Math.max(s.state.doc.lineAt(h).from,h-e),u=Math.min(s.state.doc.lineAt(u).to,u+e),c.length&&c[c.length-1].to>=h?c[c.length-1].to=u:c.push({from:h,to:u});return c}class MatchDecorator{constructor(e){let{regexp:n,decoration:c,boundary:h,maxLength:u=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=n,this.getDeco=typeof c=="function"?c:()=>c,this.boundary=h,this.maxLength=u}createDeco(e){let n=new RangeSetBuilder;for(let{from:c,to:h}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,c,h,(u,d,m)=>n.add(u,d,this.getDeco(m,e,u)));return n.finish()}updateDeco(e,n){let c=1e9,h=-1;return e.docChanged&&e.changes.iterChanges((u,d,m,g)=>{g>e.view.viewport.from&&m<e.view.viewport.to&&(c=Math.min(m,c),h=Math.max(g,h))}),e.viewportChanged||h-c>1e3?this.createDeco(e.view):h>-1?this.updateRange(e.view,n.map(e.changes),c,h):n}updateRange(e,n,c,h){for(let u of e.visibleRanges){let d=Math.max(u.from,c),m=Math.min(u.to,h);if(m>d){let g=e.state.doc.lineAt(d),b=g.to<m?e.state.doc.lineAt(m):g,O=Math.max(u.from,g.from),v=Math.min(u.to,b.to);if(this.boundary){for(;d>g.from;d--)if(this.boundary.test(g.text[d-1-g.from])){O=d;break}for(;m<b.to;m++)if(this.boundary.test(b.text[m-b.from])){v=m;break}}let y=[],w;if(g==b)for(this.regexp.lastIndex=O-g.from;(w=this.regexp.exec(g.text))&&w.index<v-g.from;){let S=w.index+g.from;y.push(this.getDeco(w,e,S).range(S,S+w[0].length))}else iterMatches(e.state.doc,this.regexp,O,v,(S,A,E)=>y.push(this.getDeco(E,e,S).range(S,A)));n=n.update({filterFrom:O,filterTo:v,filter:(S,A)=>S<O||A>v,add:y})}}return n}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var s;if(_supportsTabSize==null&&typeof document!="undefined"&&document.body){let e=document.body.style;_supportsTabSize=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(s){let e=combineConfig(s,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(s={}){return[specialCharConfig.of(s),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new MatchDecorator({regexp:s.specialChars,decoration:(e,n,c)=>{let{doc:h}=n.state,u=codePointAt(e[0],0);if(u==9){let d=h.lineAt(c),m=n.state.tabSize,g=countColumn(d.text,m,c-d.from);return Decoration.replace({widget:new TabWidget((m-g%m)*this.view.defaultCharacterWidth)})}return this.decorationCache[u]||(this.decorationCache[u]=Decoration.replace({widget:new SpecialCharWidget(s,u)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(specialCharConfig);s.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const DefaultPlaceholder="\u2022";function placeholder$1(s){return s>=32?DefaultPlaceholder:s==10?"\u2424":String.fromCharCode(9216+s)}class SpecialCharWidget extends WidgetType{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=placeholder$1(this.code),c=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),h=this.options.render&&this.options.render(this.code,c,n);if(h)return h;let u=document.createElement("span");return u.textContent=n,u.title=c,u.setAttribute("aria-label",c),u.className="cm-specialChar",u}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,n=[];for(let c of s.state.selection.ranges){if(!c.empty)return Decoration.none;let h=s.lineBlockAt(c.head);h.from>e&&(n.push(lineDeco.range(h.from)),e=h.from)}return Decoration.set(n)}},{decorations:s=>s.decorations});class Placeholder extends WidgetType{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function placeholder(s){return ViewPlugin.fromClass(class{constructor(e){this.view=e,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(s),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:e=>e.decorations})}const MaxOff=2e3;function rectangleFor(s,e,n){let c=Math.min(e.line,n.line),h=Math.max(e.line,n.line),u=[];if(e.off>MaxOff||n.off>MaxOff||e.col<0||n.col<0){let d=Math.min(e.off,n.off),m=Math.max(e.off,n.off);for(let g=c;g<=h;g++){let b=s.doc.line(g);b.length<=m&&u.push(EditorSelection.range(b.from+d,b.to+m))}}else{let d=Math.min(e.col,n.col),m=Math.max(e.col,n.col);for(let g=c;g<=h;g++){let b=s.doc.line(g),O=findColumn(b.text,d,s.tabSize,!0);if(O>-1){let v=findColumn(b.text,m,s.tabSize);u.push(EditorSelection.range(b.from+O,b.from+v))}}}return u}function absoluteColumn(s,e){let n=s.coordsAtPos(s.viewport.from);return n?Math.round(Math.abs((n.left-e)/s.defaultCharacterWidth)):-1}function getPos(s,e){let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),c=s.state.doc.lineAt(n),h=n-c.from,u=h>MaxOff?-1:h==c.length?absoluteColumn(s,e.clientX):countColumn(c.text,s.state.tabSize,n-c.from);return{line:c.number,col:u,off:h}}function rectangleSelectionStyle(s,e){let n=getPos(s,e),c=s.state.selection;return n?{update(h){if(h.docChanged){let u=h.changes.mapPos(h.startState.doc.line(n.line).from),d=h.state.doc.lineAt(u);n={line:d.number,col:n.col,off:Math.min(n.off,d.length)},c=c.map(h.changes)}},get(h,u,d){let m=getPos(s,h);if(!m)return c;let g=rectangleFor(s.state,n,m);return g.length?d?EditorSelection.create(g.concat(c.ranges)):EditorSelection.create(g):c}}:null}function rectangularSelection(s){let e=(s==null?void 0:s.eventFilter)||(n=>n.altKey&&n.button==0);return EditorView.mouseSelectionStyle.of((n,c)=>e(c)?rectangleSelectionStyle(n,c):null)}const keys={Alt:[18,s=>s.altKey],Control:[17,s=>s.ctrlKey],Shift:[16,s=>s.shiftKey],Meta:[91,s=>s.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(s={}){let[e,n]=keys[s.key||"Alt"],c=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.isDown=!1}set(h){this.isDown!=h&&(this.isDown=h,this.view.update([]))}},{eventHandlers:{keydown(h){this.set(h.keyCode==e||n(h))},keyup(h){(h.keyCode==e||!n(h))&&this.set(!1)}}});return[c,EditorView.contentAttributes.of(h=>{var u;return!((u=h.plugin(c))===null||u===void 0)&&u.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,n,c){this.facet=n,this.createTooltipView=c,this.input=e.state.facet(n),this.tooltips=this.input.filter(h=>h),this.tooltipViews=this.tooltips.map(c)}update(e){let n=e.state.facet(this.facet),c=n.filter(u=>u);if(n===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let h=[];for(let u=0;u<c.length;u++){let d=c[u],m=-1;if(!!d){for(let g=0;g<this.tooltips.length;g++){let b=this.tooltips[g];b&&b.create==d.create&&(m=g)}if(m<0)h[u]=this.createTooltipView(d);else{let g=h[u]=this.tooltipViews[m];g.update&&g.update(e)}}}for(let u of this.tooltipViews)h.indexOf(u)<0&&u.dom.remove();return this.input=n,this.tooltips=c,this.tooltipViews=h,!0}}function windowSpace(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const tooltipConfig=Facet.define({combine:s=>{var e,n,c;return{position:browser.ios?"absolute":((e=s.find(h=>h.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=s.find(h=>h.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((c=s.find(h=>h.tooltipSpace))===null||c===void 0?void 0:c.tooltipSpace)||windowSpace}}}),tooltipPlugin=ViewPlugin.fromClass(class{constructor(s){var e;this.view=s,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=s.state.facet(tooltipConfig);this.position=n.position,this.parent=n.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(s,showTooltip,c=>this.createTooltip(c)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(c=>{Date.now()>this.lastTransaction-50&&c.length>0&&c[c.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=s.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s);e&&this.observeIntersection();let n=e||s.geometryChanged,c=s.state.facet(tooltipConfig);if(c.position!=this.position){this.position=c.position;for(let h of this.manager.tooltipViews)h.dom.style.position=this.position;n=!0}if(c.parent!=this.parent){this.parent&&this.container.remove(),this.parent=c.parent,this.createContainer();for(let h of this.manager.tooltipViews)this.container.appendChild(h.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Outside,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;(s=this.view.dom.ownerDocument.defaultView)===null||s===void 0||s.removeEventListener("resize",this.measureSoon);for(let{dom:n}of this.manager.tooltipViews)n.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect();return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((e,n)=>{let c=this.manager.tooltipViews[n];return c.getCoords?c.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(s){let{editor:e,space:n}=s,c=[];for(let h=0;h<this.manager.tooltips.length;h++){let u=this.manager.tooltips[h],d=this.manager.tooltipViews[h],{dom:m}=d,g=s.pos[h],b=s.size[h];if(!g||g.bottom<=Math.max(e.top,n.top)||g.top>=Math.min(e.bottom,n.bottom)||g.right<Math.max(e.left,n.left)-.1||g.left>Math.min(e.right,n.right)+.1){m.style.top=Outside;continue}let O=u.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,v=O?7:0,y=b.right-b.left,w=b.bottom-b.top,S=d.offset||noOffset,A=this.view.textDirection==Direction.LTR,E=b.width>n.right-n.left?A?n.left:n.right-b.width:A?Math.min(g.left-(O?14:0)+S.x,n.right-y):Math.max(n.left,g.left-y+(O?14:0)-S.x),P=!!u.above;!u.strictSide&&(P?g.top-(b.bottom-b.top)-S.y<n.top:g.bottom+(b.bottom-b.top)+S.y>n.bottom)&&P==n.bottom-g.bottom>g.top-n.top&&(P=!P);let I=P?g.top-w-v-S.y:g.bottom+v+S.y,U=E+y;if(d.overlap!==!0)for(let z of c)z.left<U&&z.right>E&&z.top<I+w&&z.bottom>I&&(I=P?z.top-w-2-v:z.bottom+v+2);this.position=="absolute"?(m.style.top=I-s.parent.top+"px",m.style.left=E-s.parent.left+"px"):(m.style.top=I+"px",m.style.left=E+"px"),O&&(O.style.left=`${g.left+(A?S.x:-S.x)-(E+14-7)}px`),d.overlap!==!0&&c.push({left:E,top:I,right:U,bottom:I+w}),m.classList.toggle("cm-tooltip-above",P),m.classList.toggle("cm-tooltip-below",!P),d.positioned&&d.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,n=>this.createHostedView(n))}static create(e){return new HoverTooltipHost(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],s=>{let e=s.facet(showHoverTooltip).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class HoverPlugin{constructor(e,n,c,h,u){this.view=e,this.source=n,this.field=c,this.setHover=h,this.hoverTime=u,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let c=this.view.coordsAtPos(n);if(c==null||e.y<c.top||e.y>c.bottom||e.x<c.left-this.view.defaultCharacterWidth||e.x>c.right+this.view.defaultCharacterWidth)return;let h=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(m=>m.from<=n&&m.to>=n),u=h&&h.dir==Direction.RTL?-1:1,d=this.source(this.view,n,e.x<c.left?-u:u);if(d!=null&&d.then){let m=this.pending={pos:n};d.then(g=>{this.pending==m&&(this.pending=null,g&&this.view.dispatch({effects:this.setHover.of(g)}))},g=>logException(this.view.state,g,"hover tooltip"))}else d&&this.view.dispatch({effects:this.setHover.of(d)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let c=this.active;if(c&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:h}=c||this.pending,u=(n=c==null?void 0:c.end)!==null&&n!==void 0?n:h;(h==u?this.view.posAtCoords(this.lastMove)!=h:!isOverRange(this.view,h,u,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(s){for(let e=s;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(s,e,n,c,h,u){let d=document.createRange(),m=s.domAtPos(e),g=s.domAtPos(n);d.setEnd(g.node,g.offset),d.setStart(m.node,m.offset);let b=d.getClientRects();d.detach();for(let O=0;O<b.length;O++){let v=b[O];if(Math.max(v.top-h,h-v.bottom,v.left-c,c-v.right)<=u)return!0}return!1}function hoverTooltip(s,e={}){let n=StateEffect.define(),c=StateField.define({create(){return null},update(h,u){if(h&&(e.hideOnChange&&(u.docChanged||u.selection)||e.hideOn&&e.hideOn(u,h)))return null;if(h&&u.docChanged){let d=u.changes.mapPos(h.pos,-1,MapMode.TrackDel);if(d==null)return null;let m=Object.assign(Object.create(null),h);m.pos=d,h.end!=null&&(m.end=u.changes.mapPos(h.end)),h=m}for(let d of u.effects)d.is(n)&&(h=d.value),d.is(closeHoverTooltipEffect)&&(h=null);return h},provide:h=>showHoverTooltip.from(h)});return[c,ViewPlugin.define(h=>new HoverPlugin(h,s,c,n,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(s,e){let n=s.plugin(tooltipPlugin);if(!n)return null;let c=n.manager.tooltips.indexOf(e);return c<0?null:n.manager.tooltipViews[c]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(s){let e,n;for(let c of s)e=e||c.topContainer,n=n||c.bottomContainer;return{topContainer:e,bottomContainer:n}}});function getPanel(s,e){let n=s.plugin(panelPlugin),c=n?n.specs.indexOf(e):-1;return c>-1?n.panels[c]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(s){this.input=s.state.facet(showPanel),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(s));let e=s.state.facet(panelConfig);this.top=new PanelGroup(s,!0,e.topContainer),this.bottom=new PanelGroup(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(s){let e=s.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=s.state.facet(showPanel);if(n!=this.input){let c=n.filter(g=>g),h=[],u=[],d=[],m=[];for(let g of c){let b=this.specs.indexOf(g),O;b<0?(O=g(s.view),m.push(O)):(O=this.panels[b],O.update&&O.update(s)),h.push(O),(O.top?u:d).push(O)}this.specs=c,this.panels=h,this.top.sync(u),this.bottom.sync(d);for(let g of m)g.dom.classList.add("cm-panel"),g.mount&&g.mount()}else for(let c of this.panels)c.update&&c.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>EditorView.scrollMargins.of(e=>{let n=e.plugin(s);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class PanelGroup{constructor(e,n,c){this.view=e,this.top=n,this.container=c,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(s){let e=s.nextSibling;return s.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(s){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),s))]}const unfixGutters=Facet.define({combine:s=>s.some(e=>e)});function gutters(s){let e=[gutterView];return s&&s.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=s.state.facet(activeGutters).map(e=>new SingleGutterView(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,n=s.view.viewport,c=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(c<(n.to-n.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let n=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),c=[],h=this.gutters.map(u=>new UpdateContext(u,this.view.viewport,-this.view.documentPadding.top));for(let u of this.view.viewportLineBlocks){let d;if(Array.isArray(u.type)){for(let m of u.type)if(m.type==BlockType.Text){d=m;break}}else d=u.type==BlockType.Text?u:void 0;if(!!d){c.length&&(c=[]),advanceCursor(n,c,u.from);for(let m of h)m.line(this.view,d,c)}}for(let u of h)u.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(activeGutters),n=s.state.facet(activeGutters),c=s.docChanged||s.heightChanged||s.viewportChanged||!RangeSet.eq(s.startState.facet(gutterLineClass),s.state.facet(gutterLineClass),s.view.viewport.from,s.view.viewport.to);if(e==n)for(let h of this.gutters)h.update(s)&&(c=!0);else{c=!0;let h=[];for(let u of n){let d=e.indexOf(u);d<0?h.push(new SingleGutterView(this.view,u)):(this.gutters[d].update(s),h.push(this.gutters[d]))}for(let u of this.gutters)u.dom.remove(),h.indexOf(u)<0&&u.destroy();for(let u of h)this.dom.appendChild(u.dom);this.gutters=h}return c}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>EditorView.scrollMargins.of(e=>{let n=e.plugin(s);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Direction.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function asArray(s){return Array.isArray(s)?s:[s]}function advanceCursor(s,e,n){for(;s.value&&s.from<=n;)s.from==n&&e.push(s.value),s.next()}class UpdateContext{constructor(e,n,c){this.gutter=e,this.height=c,this.localMarkers=[],this.i=0,this.cursor=RangeSet.iter(e.markers,n.from)}line(e,n,c){this.localMarkers.length&&(this.localMarkers=[]),advanceCursor(this.cursor,this.localMarkers,n.from);let h=c.length?this.localMarkers.concat(c):this.localMarkers,u=this.gutter.config.lineMarker(e,n,h);u&&h.unshift(u);let d=this.gutter;if(h.length==0&&!d.config.renderEmptyElements)return;let m=n.top-this.height;if(this.i==d.elements.length){let g=new GutterElement(e,n.height,m,h);d.elements.push(g),d.dom.appendChild(g.dom)}else d.elements[this.i].update(e,n.height,m,h);this.height=n.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class SingleGutterView{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let c in n.domEventHandlers)this.dom.addEventListener(c,h=>{let u=e.lineBlockAtHeight(h.clientY-e.documentTop);n.domEventHandlers[c](e,u,h)&&h.preventDefault()});this.markers=asArray(n.markers(e)),n.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let h=this.config.updateSpacer(this.spacer.markers[0],e);h!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[h])}let c=e.view.viewport;return!RangeSet.eq(this.markers,n,c.from,c.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,n,c,h){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,c,h)}update(e,n,c,h){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=c&&(this.dom.style.marginTop=(this.above=c)?c+"px":""),sameMarkers(this.markers,h)||this.setMarkers(e,h)}setMarkers(e,n){let c="cm-gutterElement",h=this.dom.firstChild;for(let u=0,d=0;;){let m=d,g=u<n.length?n[u++]:null,b=!1;if(g){let O=g.elementClass;O&&(c+=" "+O);for(let v=d;v<this.markers.length;v++)if(this.markers[v].compare(g)){m=v,b=!0;break}}else m=this.markers.length;for(;d<m;){let O=this.markers[d++];if(O.toDOM){O.destroy(h);let v=h.nextSibling;h.remove(),h=v}}if(!g)break;g.toDOM&&(b?h=h.nextSibling:this.dom.insertBefore(g.toDOM(e),h)),b&&d++}this.dom.className=c,this.markers=n}destroy(){this.setMarkers(null,[])}}function sameMarkers(s,e){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!s[n].compare(e[n]))return!1;return!0}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],s=>{let e=[],n=-1;for(let c of s.selection.ranges)if(c.empty){let h=s.doc.lineAt(c.head).from;h>n&&(n=h,e.push(activeLineGutterMarker.range(h)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),n=>{let c=e(n);return c===void 0?null:[this,c]}}}NodeProp.closedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.group=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(e,n,c,h=0){this.name=e,this.props=n,this.id=c,this.flags=h}static define(e){let n=e.props&&e.props.length?Object.create(null):noProps,c=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),h=new NodeType(e.name||"",n,e.id,c);if(e.props){for(let u of e.props)if(Array.isArray(u)||(u=u(h)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[u[0].id]=u[1]}}return h}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(NodeProp.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let c in e)for(let h of c.split(" "))n[h]=e[c];return c=>{for(let h=c.prop(NodeProp.group),u=-1;u<(h?h.length:0);u++){let d=n[u<0?c.name:h[u]];if(d)return d}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let c of this.types){let h=null;for(let u of e){let d=u(c);d&&(h||(h=Object.assign({},c.props)),h[d[0].id]=d[1])}n.push(h?new NodeType(c.name,h,c.id,c.flags):c)}return new NodeSet(n)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,n,c,h,u){if(this.type=e,this.children=n,this.positions=c,this.length=h,this.props=null,u&&u.length){this.props=Object.create(null);for(let[d,m]of u)this.props[typeof d=="number"?d:d.id]=m}}toString(){let e=this.prop(NodeProp.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let c of this.children){let h=c.toString();h&&(n&&(n+=","),n+=h)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,n=0,c=0){let h=CachedNode.get(this)||this.topNode,u=new TreeCursor(h);return u.moveTo(e,n),CachedNode.set(this,u._tree),u}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,n=0){let c=resolveNode(CachedNode.get(this)||this.topNode,e,n,!1);return CachedNode.set(this,c),c}resolveInner(e,n=0){let c=resolveNode(CachedInnerNode.get(this)||this.topNode,e,n,!0);return CachedInnerNode.set(this,c),c}iterate(e){let{enter:n,leave:c,from:h=0,to:u=this.length}=e;for(let d=this.cursor((e.mode||0)|IterMode.IncludeAnonymous);;){let m=!1;if(d.from<=u&&d.to>=h&&(d.type.isAnonymous||n(d)!==!1)){if(d.firstChild())continue;m=!0}for(;m&&c&&!d.type.isAnonymous&&c(d),!d.nextSibling();){if(!d.parent())return;m=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(n,c,h)=>new Tree(this.type,n,c,h,this.propValues),e.makeTree||((n,c,h)=>new Tree(NodeType.none,n,c,h)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,c){this.buffer=e,this.length=n,this.set=c}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],c=this.buffer[e+3],h=this.set.types[n],u=h.name;if(/\W/.test(u)&&!h.isError&&(u=JSON.stringify(u)),e+=4,c==e)return u;let d=[];for(;e<c;)d.push(this.childString(e)),e=this.buffer[e+3];return u+"("+d.join(",")+")"}findChild(e,n,c,h,u){let{buffer:d}=this,m=-1;for(let g=e;g!=n&&!(checkSide(u,h,d[g+1],d[g+2])&&(m=g,c>0));g=d[g+3]);return m}slice(e,n,c,h){let u=this.buffer,d=new Uint16Array(n-e);for(let m=e,g=0;m<n;)d[g++]=u[m++],d[g++]=u[m++]-c,d[g++]=u[m++]-c,d[g++]=u[m++]-e;return new TreeBuffer(d,h-c,this.set)}}function checkSide(s,e,n,c){switch(s){case-2:return n<e;case-1:return c>=e&&n<e;case 0:return n<e&&c>e;case 1:return n<=e&&c>e;case 2:return c>e;case 4:return!0}}function enterUnfinishedNodesBefore(s,e){let n=s.childBefore(e);for(;n;){let c=n.lastChild;if(!c||c.to!=n.to)break;c.type.isError&&c.from==c.to?(s=n,n=c.prevSibling):n=c}return s}function resolveNode(s,e,n,c){for(var h;s.from==s.to||(n<1?s.from>=e:s.from>e)||(n>-1?s.to<=e:s.to<e);){let d=!c&&s instanceof TreeNode&&s.index<0?null:s.parent;if(!d)return s;s=d}let u=c?0:IterMode.IgnoreOverlays;if(c)for(let d=s,m=d.parent;m;d=m,m=d.parent)d instanceof TreeNode&&d.index<0&&((h=m.enter(e,n,u))===null||h===void 0?void 0:h.from)!=d.from&&(s=m);for(;;){let d=s.enter(e,n,u);if(!d)return s;s=d}}class TreeNode{constructor(e,n,c,h){this._tree=e,this.from=n,this.index=c,this._parent=h}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,c,h,u=0){for(let d=this;;){for(let{children:m,positions:g}=d._tree,b=n>0?m.length:-1;e!=b;e+=n){let O=m[e],v=g[e]+d.from;if(!!checkSide(h,c,v,v+O.length)){if(O instanceof TreeBuffer){if(u&IterMode.ExcludeBuffers)continue;let y=O.findChild(0,O.buffer.length,n,c-v,h);if(y>-1)return new BufferNode(new BufferContext(d,O,e,v),null,y)}else if(u&IterMode.IncludeAnonymous||!O.type.isAnonymous||hasChild(O)){let y;if(!(u&IterMode.IgnoreMounts)&&O.props&&(y=O.prop(NodeProp.mounted))&&!y.overlay)return new TreeNode(y.tree,v,e,d);let w=new TreeNode(O,v,e,d);return u&IterMode.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(n<0?O.children.length-1:0,n,c,h)}}}if(u&IterMode.IncludeAnonymous||!d.type.isAnonymous||(d.index>=0?e=d.index+n:e=n<0?-1:d._parent._tree.children.length,d=d._parent,!d))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,c=0){let h;if(!(c&IterMode.IgnoreOverlays)&&(h=this._tree.prop(NodeProp.mounted))&&h.overlay){let u=e-this.from;for(let{from:d,to:m}of h.overlay)if((n>0?d<=u:d<u)&&(n<0?m>=u:m>u))return new TreeNode(h.tree,h.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,c)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new TreeCursor(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}getChild(e,n=null,c=null){let h=getChildren(this,e,n,c);return h.length?h[0]:null}getChildren(e,n=null,c=null){return getChildren(this,e,n,c)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}function getChildren(s,e,n,c){let h=s.cursor(),u=[];if(!h.firstChild())return u;if(n!=null){for(;!h.type.is(n);)if(!h.nextSibling())return u}for(;;){if(c!=null&&h.type.is(c))return u;if(h.type.is(e)&&u.push(h.node),!h.nextSibling())return c==null?u:[]}}function matchNodeContext(s,e,n=e.length-1){for(let c=s.parent;n>=0;c=c.parent){if(!c)return!1;if(!c.type.isAnonymous){if(e[n]&&e[n]!=c.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,c,h){this.parent=e,this.buffer=n,this.index=c,this.start=h}}class BufferNode{constructor(e,n,c){this.context=e,this._parent=n,this.index=c,this.type=e.buffer.set.types[e.buffer.buffer[c]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,n,c){let{buffer:h}=this.context,u=h.findChild(this.index+4,h.buffer[this.index+3],e,n-this.context.start,c);return u<0?null:new BufferNode(this.context,this,u)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,c=0){if(c&IterMode.ExcludeBuffers)return null;let{buffer:h}=this.context,u=h.findChild(this.index+4,h.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return u<0?null:new BufferNode(this.context,this,u)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new TreeCursor(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:c}=this.context,h=this.index+4,u=c.buffer[this.index+3];if(u>h){let d=c.buffer[this.index+1],m=c.buffer[this.index+2];e.push(c.slice(h,u,d,m)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,c=null){let h=getChildren(this,e,n,c);return h.length?h[0]:null}getChildren(e,n=null,c=null){return getChildren(this,e,n,c)}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}class TreeCursor{constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let c=e._parent;c;c=c._parent)this.stack.unshift(c.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:c,buffer:h}=this.buffer;return this.type=n||h.set.types[h.buffer[e]],this.from=c+h.buffer[e+1],this.to=c+h.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,c){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,c,this.mode));let{buffer:h}=this.buffer,u=h.findChild(this.index+4,h.buffer[this.index+3],e,n-this.buffer.start,c);return u<0?!1:(this.stack.push(this.index),this.yieldBuf(u))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,c=this.mode){return this.buffer?c&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,c))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,c=this.stack.length-1;if(e<0){let h=c<0?0:this.stack[c]+4;if(this.index!=h)return this.yieldBuf(n.findChild(h,this.index,-1,0,4))}else{let h=n.buffer[this.index+3];if(h<(c<0?n.buffer.length:n.buffer[this.stack[c]+3]))return this.yieldBuf(h)}return c<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,c,{buffer:h}=this;if(h){if(e>0){if(this.index<h.buffer.buffer.length)return!1}else for(let u=0;u<this.index;u++)if(h.buffer.buffer[u+3]<this.index)return!1;({index:n,parent:c}=h)}else({index:n,_parent:c}=this._tree);for(;c;{index:n,_parent:c}=c)if(n>-1)for(let u=n+e,d=e<0?-1:c._tree.children.length;u!=d;u+=e){let m=c._tree.children[u];if(this.mode&IterMode.IncludeAnonymous||m instanceof TreeBuffer||!m.type.isAnonymous||hasChild(m))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,c=0;if(e&&e.context==this.buffer){e:for(let h=this.index,u=this.stack.length;u>=0;){for(let d=e;d;d=d._parent)if(d.index==h){if(h==this.index)return d;n=d,c=u+1;break e}h=this.stack[--u]}}for(let h=c;h<this.stack.length;h++)n=new BufferNode(this.buffer,n,this.stack[h]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let c=0;;){let h=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){c++;continue}this.type.isAnonymous||(h=!0)}for(;h&&n&&n(this),h=this.type.isAnonymous,!this.nextSibling();){if(!c)return;this.parent(),c--,h=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:n}=this.buffer,{types:c}=n.set;for(let h=e.length-1,u=this.stack.length-1;h>=0;u--){if(u<0)return matchNodeContext(this.node,e,h);let d=c[n.buffer[this.stack[u]]];if(!d.isAnonymous){if(e[h]&&e[h]!=d.name)return!1;h--}}return!0}}function hasChild(s){return s.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(s){var e;let{buffer:n,nodeSet:c,maxBufferLength:h=DefaultBufferLength,reused:u=[],minRepeatType:d=c.types.length}=s,m=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,g=c.types,b=0,O=0;function v(z,N,R,F,D){let{id:de,start:H,end:he,size:ae}=m,Oe=O;for(;ae<0;)if(m.next(),ae==-1){let K=u[de];R.push(K),F.push(H-z);return}else if(ae==-3){b=de;return}else if(ae==-4){O=de;return}else throw new RangeError(`Unrecognized record size: ${ae}`);let ye=g[de],ke,pe,B=H-z;if(he-H<=h&&(pe=A(m.pos-N,D))){let K=new Uint16Array(pe.size-pe.skip),te=m.pos-pe.size,Se=K.length;for(;m.pos>te;)Se=E(pe.start,K,Se);ke=new TreeBuffer(K,he-pe.start,c),B=pe.start-z}else{let K=m.pos-ae;m.next();let te=[],Se=[],Te=de>=d?de:-1,Ne=0,Re=he;for(;m.pos>K;)Te>=0&&m.id==Te&&m.size>=0?(m.end<=Re-h&&(w(te,Se,H,Ne,m.end,Re,Te,Oe),Ne=te.length,Re=m.end),m.next()):v(H,K,te,Se,Te);if(Te>=0&&Ne>0&&Ne<te.length&&w(te,Se,H,Ne,H,Re,Te,Oe),te.reverse(),Se.reverse(),Te>-1&&Ne>0){let Ie=y(ye);ke=balanceRange(ye,te,Se,0,te.length,0,he-H,Ie,Ie)}else ke=S(ye,te,Se,he-H,Oe-he)}R.push(ke),F.push(B)}function y(z){return(N,R,F)=>{let D=0,de=N.length-1,H,he;if(de>=0&&(H=N[de])instanceof Tree){if(!de&&H.type==z&&H.length==F)return H;(he=H.prop(NodeProp.lookAhead))&&(D=R[de]+H.length+he)}return S(z,N,R,F,D)}}function w(z,N,R,F,D,de,H,he){let ae=[],Oe=[];for(;z.length>F;)ae.push(z.pop()),Oe.push(N.pop()+R-D);z.push(S(c.types[H],ae,Oe,de-D,he-de)),N.push(D-R)}function S(z,N,R,F,D=0,de){if(b){let H=[NodeProp.contextHash,b];de=de?[H].concat(de):[H]}if(D>25){let H=[NodeProp.lookAhead,D];de=de?[H].concat(de):[H]}return new Tree(z,N,R,F,de)}function A(z,N){let R=m.fork(),F=0,D=0,de=0,H=R.end-h,he={size:0,start:0,skip:0};e:for(let ae=R.pos-z;R.pos>ae;){let Oe=R.size;if(R.id==N&&Oe>=0){he.size=F,he.start=D,he.skip=de,de+=4,F+=4,R.next();continue}let ye=R.pos-Oe;if(Oe<0||ye<ae||R.start<H)break;let ke=R.id>=d?4:0,pe=R.start;for(R.next();R.pos>ye;){if(R.size<0)if(R.size==-3)ke+=4;else break e;else R.id>=d&&(ke+=4);R.next()}D=pe,F+=Oe,de+=ke}return(N<0||F==z)&&(he.size=F,he.start=D,he.skip=de),he.size>4?he:void 0}function E(z,N,R){let{id:F,start:D,end:de,size:H}=m;if(m.next(),H>=0&&F<d){let he=R;if(H>4){let ae=m.pos-(H-4);for(;m.pos>ae;)R=E(z,N,R)}N[--R]=he,N[--R]=de-z,N[--R]=D-z,N[--R]=F}else H==-3?b=F:H==-4&&(O=F);return R}let P=[],I=[];for(;m.pos>0;)v(s.start||0,s.bufferStart||0,P,I,-1);let U=(e=s.length)!==null&&e!==void 0?e:P.length?I[0]+P[0].length:0;return new Tree(g[s.topID],P.reverse(),I.reverse(),U)}const nodeSizeCache=new WeakMap;function nodeSize(s,e){if(!s.isAnonymous||e instanceof TreeBuffer||e.type!=s)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let c of e.children){if(c.type!=s||!(c instanceof Tree)){n=1;break}n+=nodeSize(s,c)}nodeSizeCache.set(e,n)}return n}function balanceRange(s,e,n,c,h,u,d,m,g){let b=0;for(let S=c;S<h;S++)b+=nodeSize(s,e[S]);let O=Math.ceil(b*1.5/8),v=[],y=[];function w(S,A,E,P,I){for(let U=E;U<P;){let z=U,N=A[U],R=nodeSize(s,S[U]);for(U++;U<P;U++){let F=nodeSize(s,S[U]);if(R+F>=O)break;R+=F}if(U==z+1){if(R>O){let F=S[z];w(F.children,F.positions,0,F.children.length,A[z]+I);continue}v.push(S[z])}else{let F=A[U-1]+S[U-1].length-N;v.push(balanceRange(s,S,A,z,U,N,F,null,g))}y.push(N+I-u)}}return w(e,n,c,h,0),(m||g)(v,y,d)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,n,c){let h=this.map.get(e);h||this.map.set(e,h=new Map),h.set(n,c)}getBuffer(e,n){let c=this.map.get(e);return c&&c.get(n)}set(e,n){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,n):e instanceof TreeNode&&this.map.set(e.tree,n)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,n,c,h,u=!1,d=!1){this.from=e,this.to=n,this.tree=c,this.offset=h,this.open=(u?1:0)|(d?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],c=!1){let h=[new TreeFragment(0,e.length,e,0,!1,c)];for(let u of n)u.to>e.length&&h.push(u);return h}static applyChanges(e,n,c=128){if(!n.length)return e;let h=[],u=1,d=e.length?e[0]:null;for(let m=0,g=0,b=0;;m++){let O=m<n.length?n[m]:null,v=O?O.fromA:1e9;if(v-g>=c)for(;d&&d.from<v;){let y=d;if(g>=y.from||v<=y.to||b){let w=Math.max(y.from,g)-b,S=Math.min(y.to,v)-b;y=w>=S?null:new TreeFragment(w,S,y.tree,y.offset+b,m>0,!!O)}if(y&&h.push(y),d.to>v)break;d=u<e.length?e[u++]:null}if(!O)break;g=O.toA,b=O.toA-O.toB}return h}}class Parser{startParse(e,n,c){return typeof e=="string"&&(e=new StringInput(e)),c=c?c.length?c.map(h=>new Range(h.from,h.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,n||[],c)}parse(e,n,c){let h=this.startParse(e,n,c);for(;;){let u=h.advance();if(u)return u}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,n,c){this.set=e,this.base=n,this.modified=c,this.id=nextTagID++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Tag([],null,[]);if(n.set.push(n),e)for(let c of e.set)n.set.push(c);return n}static defineModifier(){let e=new Modifier;return n=>n.modified.indexOf(e)>-1?n:Modifier.get(n.base||n,n.modified.concat(e).sort((c,h)=>c.id-h.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let c=n[0].instances.find(m=>m.base==e&&sameArray(n,m.modified));if(c)return c;let h=[],u=new Tag(h,e,n);for(let m of n)m.instances.push(u);let d=permute(n);for(let m of e.set)for(let g of d)h.push(Modifier.get(m,g));return u}}function sameArray(s,e){return s.length==e.length&&s.every((n,c)=>n==e[c])}function permute(s){let e=[s];for(let n=0;n<s.length;n++)for(let c of permute(s.slice(0,n).concat(s.slice(n+1))))e.push(c);return e}function styleTags(s){let e=Object.create(null);for(let n in s){let c=s[n];Array.isArray(c)||(c=[c]);for(let h of n.split(" "))if(h){let u=[],d=2,m=h;for(let v=0;;){if(m=="..."&&v>0&&v+3==h.length){d=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(m);if(!y)throw new RangeError("Invalid path: "+h);if(u.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),v+=y[0].length,v==h.length)break;let w=h[v++];if(v==h.length&&w=="!"){d=0;break}if(w!="/")throw new RangeError("Invalid path: "+h);m=h.slice(v)}let g=u.length-1,b=u[g];if(!b)throw new RangeError("Invalid path: "+h);let O=new Rule(c,d,g>0?u.slice(0,g):null);e[b]=O.sort(e[b])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,n,c,h){this.tags=e,this.mode=n,this.context=c,this.next=h}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function tagHighlighter(s,e){let n=Object.create(null);for(let u of s)if(!Array.isArray(u.tag))n[u.tag.id]=u.class;else for(let d of u.tag)n[d.id]=u.class;let{scope:c,all:h=null}=e||{};return{style:u=>{let d=h;for(let m of u)for(let g of m.set){let b=n[g.id];if(b){d=d?d+" "+b:b;break}}return d},scope:c}}function highlightTags(s,e){let n=null;for(let c of s){let h=c.style(e);h&&(n=n?n+" "+h:h)}return n}function highlightTree(s,e,n,c=0,h=s.length){let u=new HighlightBuilder(c,Array.isArray(e)?e:[e],n);u.highlightRange(s.cursor(),c,h,"",u.highlighters),u.flush(h)}class HighlightBuilder{constructor(e,n,c){this.at=e,this.highlighters=n,this.span=c,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,c,h,u){let{type:d,from:m,to:g}=e;if(m>=c||g<=n)return;d.isTop&&(u=this.highlighters.filter(w=>!w.scope||w.scope(d)));let b=h,O=d.prop(ruleNodeProp),v=!1;for(;O;){if(!O.context||e.matchContext(O.context)){let w=highlightTags(u,O.tags);w&&(b&&(b+=" "),b+=w,O.mode==1?h+=(h?" ":"")+w:O.mode==0&&(v=!0));break}O=O.next}if(this.startSpan(e.from,b),v)return;let y=e.tree&&e.tree.prop(NodeProp.mounted);if(y&&y.overlay){let w=e.node.enter(y.overlay[0].from+m,1),S=this.highlighters.filter(E=>!E.scope||E.scope(y.tree.type)),A=e.firstChild();for(let E=0,P=m;;E++){let I=E<y.overlay.length?y.overlay[E]:null,U=I?I.from+m:g,z=Math.max(n,P),N=Math.min(c,U);if(z<N&&A)for(;e.from<N&&(this.highlightRange(e,z,N,h,u),this.startSpan(Math.min(c,e.to),b),!(e.to>=U||!e.nextSibling())););if(!I||U>c)break;P=I.to+m,P>n&&(this.highlightRange(w.cursor(),Math.max(n,I.from+m),Math.min(c,P),h,S),this.startSpan(P,b))}A&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=c)break;this.highlightRange(e,n,c,h,u),this.startSpan(Math.min(c,e.to),b)}while(e.nextSibling());e.parent()}}}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(s){return Facet.define({combine:s?e=>e.concat(s):void 0})}class Language{constructor(e,n,c=[]){this.data=e,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=n,this.extension=[language.of(this),EditorState.languageData.of((h,u,d)=>h.facet(languageDataFacetAt(h,u,d)))].concat(c)}isActiveAt(e,n,c=-1){return languageDataFacetAt(e,n,c)==this.data}findRegions(e){let n=e.facet(language);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let c=[],h=(u,d)=>{if(u.prop(languageDataProp)==this.data){c.push({from:d,to:d+u.length});return}let m=u.prop(NodeProp.mounted);if(m){if(m.tree.prop(languageDataProp)==this.data){if(m.overlay)for(let g of m.overlay)c.push({from:g.from+d,to:g.to+d});else c.push({from:d,to:d+u.length});return}else if(m.overlay){let g=c.length;if(h(m.tree,m.overlay[0].from+d),c.length>g)return}}for(let g=0;g<u.children.length;g++){let b=u.children[g];b instanceof Tree&&h(b,u.positions[g]+d)}};return h(syntaxTree(e),0),c}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function languageDataFacetAt(s,e,n){let c=s.facet(language);if(!c)return null;let h=c.data;if(c.allowsNesting)for(let u=syntaxTree(s).topNode;u;u=u.enter(e,n,IterMode.ExcludeBuffers))h=u.type.prop(languageDataProp)||h;return h}class LRLanguage extends Language{constructor(e,n){super(e,n),this.parser=n}static define(e){let n=defineLanguageFacet(e.languageData);return new LRLanguage(n,e.parser.configure({props:[languageDataProp.add(c=>c.isTop?n:void 0)]}))}configure(e){return new LRLanguage(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(s){let e=s.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e,n=e.length){this.doc=e,this.length=n,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let c=this.cursorPos-this.string.length;return e<c||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-c,n-c)}}let currentContext=null;class ParseContext{constructor(e,n,c=[],h,u,d,m,g){this.parser=e,this.state=n,this.fragments=c,this.tree=h,this.treeLen=u,this.viewport=d,this.skipped=m,this.scheduleOn=g,this.parse=null,this.tempSkipped=[]}static create(e,n,c){return new ParseContext(e,n,[],Tree.empty,0,c,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Tree.empty&&this.isDone(n!=null?n:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var c;if(typeof e=="number"){let h=Date.now()+e;e=()=>Date.now()>h}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let h=this.parse.advance();if(h)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(h,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(c=this.parse.stoppedAt)!==null&&c!==void 0?c:this.state.doc.length,this.tree=h,this.parse=null,this.treeLen<(n!=null?n:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=currentContext;currentContext=this;try{return e()}finally{currentContext=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cutFragments(e,n.from,n.to);return e}changes(e,n){let{fragments:c,tree:h,treeLen:u,viewport:d,skipped:m}=this;if(this.takeTree(),!e.empty){let g=[];if(e.iterChangedRanges((b,O,v,y)=>g.push({fromA:b,toA:O,fromB:v,toB:y})),c=TreeFragment.applyChanges(c,g),h=Tree.empty,u=0,d={from:e.mapPos(d.from,-1),to:e.mapPos(d.to,1)},this.skipped.length){m=[];for(let b of this.skipped){let O=e.mapPos(b.from,1),v=e.mapPos(b.to,-1);O<v&&m.push({from:O,to:v})}}}return new ParseContext(this.parser,n,c,h,u,d,m,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let c=0;c<this.skipped.length;c++){let{from:h,to:u}=this.skipped[c];h<e.to&&u>e.from&&(this.fragments=cutFragments(this.fragments,h,u),this.skipped.splice(c--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Parser{createParse(n,c,h){let u=h[0].from,d=h[h.length-1].to;return{parsedPos:u,advance(){let g=currentContext;if(g){for(let b of h)g.tempSkipped.push(b);e&&(g.scheduleOn=g.scheduleOn?Promise.all([g.scheduleOn,e]):e)}return this.parsedPos=d,new Tree(NodeType.none,[],[],d-u)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return currentContext}}function cutFragments(s,e,n){return TreeFragment.applyChanges(s,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),c=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,c)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),c=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return c.work(20,n)||c.takeTree(),new LanguageState(c)}}Language.state=StateField.define({create:LanguageState.init,update(s,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):s.apply(e)}});let requestIdle=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(requestIdle=s=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(s,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator!="undefined"&&((_a=navigator.scheduling)===null||_a===void 0?void 0:_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Language.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Language.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:c,viewport:{to:h}}=this.view,u=c.field(Language.state);if(u.tree==u.context.tree&&u.context.isDone(h+1e5))return;let d=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),m=u.context.treeLen<h&&c.doc.length>h+1e3,g=u.context.work(()=>isInputPending&&isInputPending()||Date.now()>d,h+(m?0:1e5));this.chunkBudget-=Date.now()-n,(g||this.chunkBudget<=0)&&(u.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(u.context))})),this.chunkBudget>0&&!(g&&!m)&&this.scheduleWork(),this.checkAsyncSchedule(u.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>logException(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(s){return s.length?s[0]:null},enables:[Language.state,parseWorker]});class LanguageSupport{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:s=>{if(!s.length)return"  ";if(!/^(?: +|\t+)$/.test(s[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return s[0]}});function getIndentUnit(s){let e=s.facet(indentUnit);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function indentString(s,e){let n="",c=s.tabSize;if(s.facet(indentUnit).charCodeAt(0)==9)for(;e>=c;)n+="	",e-=c;for(let h=0;h<e;h++)n+=" ";return n}function getIndentation(s,e){s instanceof EditorState&&(s=new IndentContext(s));for(let c of s.state.facet(indentService)){let h=c(s,e);if(h!=null)return h}let n=syntaxTree(s.state);return n?syntaxIndentation(s,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let c=this.state.doc.lineAt(e),{simulateBreak:h,simulateDoubleBreak:u}=this.options;return h!=null&&h>=c.from&&h<=c.to?u&&h==e?{text:"",from:e}:(n<0?h<e:h<=e)?{text:c.text.slice(h-c.from),from:h}:{text:c.text.slice(0,h-c.from),from:c.from}:c}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:c,from:h}=this.lineAt(e,n);return c.slice(e-h,Math.min(c.length,e+100-h))}column(e,n=1){let{text:c,from:h}=this.lineAt(e,n),u=this.countColumn(c,e-h),d=this.options.overrideIndentation?this.options.overrideIndentation(h):-1;return d>-1&&(u+=d-this.countColumn(c,c.search(/\S|$/))),u}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:c,from:h}=this.lineAt(e,n),u=this.options.overrideIndentation;if(u){let d=u(h);if(d>-1)return d}return this.countColumn(c,c.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(s,e,n){return indentFrom(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,s)}function ignoreClosed(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function indentStrategy(s){let e=s.type.prop(indentNodeProp);if(e)return e;let n=s.firstChild,c;if(n&&(c=n.type.prop(NodeProp.closedBy))){let h=s.lastChild,u=h&&c.indexOf(h.name)>-1;return d=>delimitedStrategy(d,!0,1,void 0,u&&!ignoreClosed(d)?h.from:void 0)}return s.parent==null?topIndent:null}function indentFrom(s,e,n){for(;s;s=s.parent){let c=indentStrategy(s);if(c)return c(TreeIndentContext.create(n,e,s))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,c){super(e.state,e.options),this.base=e,this.pos=n,this.node=c}static create(e,n,c){return new TreeIndentContext(e,n,c)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(isParent(n,this.node))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?indentFrom(e,this.pos,this.base):0}}function isParent(s,e){for(let n=e;n;n=n.parent)if(s==n)return!0;return!1}function bracketedAligned(s){let e=s.node,n=e.childAfter(e.from),c=e.lastChild;if(!n)return null;let h=s.options.simulateBreak,u=s.state.doc.lineAt(n.from),d=h==null||h<=u.from?u.to:Math.min(u.to,h);for(let m=n.to;;){let g=e.childAfter(m);if(!g||g==c)return null;if(!g.type.isSkipped)return g.from<d?n:null;m=g.to}}function delimitedIndent({closing:s,align:e=!0,units:n=1}){return c=>delimitedStrategy(c,e,n,s)}function delimitedStrategy(s,e,n,c,h){let u=s.textAfter,d=u.match(/^\s*/)[0].length,m=c&&u.slice(d,d+c.length)==c||h==s.pos+d,g=e?bracketedAligned(s):null;return g?m?s.column(g.from):s.column(g.to):s.baseIndent+(m?0:s.unit*n)}const flatIndent=s=>s.baseIndent;function continuedIndent({except:s,units:e=1}={}){return n=>{let c=s&&s.test(n.textAfter);return n.baseIndent+(c?0:e*n.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let n=s.newDoc,{head:c}=s.newSelection.main,h=n.lineAt(c);if(c>h.from+DontIndentBeyond)return s;let u=n.sliceString(h.from,c);if(!e.some(b=>b.test(u)))return s;let{state:d}=s,m=-1,g=[];for(let{head:b}of d.selection.ranges){let O=d.doc.lineAt(b);if(O.from==m)continue;m=O.from;let v=getIndentation(d,O.from);if(v==null)continue;let y=/^\s*/.exec(O.text)[0],w=indentString(d,v);y!=w&&g.push({from:O.from,to:O.from+y.length,insert:w})}return g.length?[s,{changes:g,sequential:!0}]:s})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(s){let e=s.firstChild,n=s.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?s.to:n.from}:null}function syntaxFolding(s,e,n){let c=syntaxTree(s);if(c.length<n)return null;let h=c.resolveInner(n),u=null;for(let d=h;d;d=d.parent){if(d.to<=n||d.from>n)continue;if(u&&d.from<e)break;let m=d.type.prop(foldNodeProp);if(m&&(d.to<c.length-50||c.length==s.doc.length||!isUnfinished(d))){let g=m(d,s);g&&g.from<=n&&g.from>=e&&g.to>n&&(u=g)}}return u}function isUnfinished(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function foldable(s,e,n){for(let c of s.facet(foldService)){let h=c(s,e,n);if(h)return h}return syntaxFolding(s,e,n)}function mapRange(s,e){let n=e.mapPos(s.from,1),c=e.mapPos(s.to,-1);return n>=c?void 0:{from:n,to:c}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(s){let e=[];for(let{head:n}of s.state.selection.ranges)e.some(c=>c.from<=n&&c.to>=n)||e.push(s.lineBlockAt(n));return e}const foldState=StateField.define({create(){return Decoration.none},update(s,e){s=s.map(e.changes);for(let n of e.effects)n.is(foldEffect)&&!foldExists(s,n.value.from,n.value.to)?s=s.update({add:[foldWidget.range(n.value.from,n.value.to)]}):n.is(unfoldEffect)&&(s=s.update({filter:(c,h)=>n.value.from!=c||n.value.to!=h,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:c}=e.selection.main;s.between(c,c,(h,u)=>{h<c&&u>c&&(n=!0)}),n&&(s=s.update({filterFrom:c,filterTo:c,filter:(h,u)=>u<=c||h>=c}))}return s},provide:s=>EditorView.decorations.from(s),toJSON(s,e){let n=[];return s.between(0,e.doc.length,(c,h)=>{n.push(c,h)}),n},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<s.length;){let c=s[n++],h=s[n++];if(typeof c!="number"||typeof h!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(c,h))}return Decoration.set(e,!0)}});function findFold(s,e,n){var c;let h=null;return(c=s.field(foldState,!1))===null||c===void 0||c.between(e,n,(u,d)=>{(!h||h.from>u)&&(h={from:u,to:d})}),h}function foldExists(s,e,n){let c=!1;return s.between(e,e,(h,u)=>{h==e&&u==n&&(c=!0)}),c}function maybeEnable(s,e){return s.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=s=>{for(let e of selectedLines(s)){let n=foldable(s.state,e.from,e.to);if(n)return s.dispatch({effects:maybeEnable(s.state,[foldEffect.of(n),announceFold(s,n)])}),!0}return!1},unfoldCode=s=>{if(!s.state.field(foldState,!1))return!1;let e=[];for(let n of selectedLines(s)){let c=findFold(s.state,n.from,n.to);c&&e.push(unfoldEffect.of(c),announceFold(s,c,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function announceFold(s,e,n=!0){let c=s.state.doc.lineAt(e.from).number,h=s.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${s.state.phrase(n?"Folded lines":"Unfolded lines")} ${c} ${s.state.phrase("to")} ${h}.`)}const foldAll=s=>{let{state:e}=s,n=[];for(let c=0;c<e.doc.length;){let h=s.lineBlockAt(c),u=foldable(e,h.from,h.to);u&&n.push(foldEffect.of(u)),c=(u?s.lineBlockAt(u.to):h).to+1}return n.length&&s.dispatch({effects:maybeEnable(s.state,n)}),!!n.length},unfoldAll=s=>{let e=s.state.field(foldState,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,s.state.doc.length,(c,h)=>{n.push(unfoldEffect.of({from:c,to:h}))}),s.dispatch({effects:n}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:"\u2026"},foldConfig=Facet.define({combine(s){return combineConfig(s,defaultConfig)}});function codeFolding(s){let e=[foldState,baseTheme$1$2];return s&&e.push(foldConfig.of(s)),e}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(s){let{state:e}=s,n=e.facet(foldConfig),c=u=>{let d=s.lineBlockAt(s.posAtDOM(u.target)),m=findFold(s.state,d.from,d.to);m&&s.dispatch({effects:unfoldEffect.of(m)}),u.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,c);let h=document.createElement("span");return h.textContent=n.placeholderText,h.setAttribute("aria-label",e.phrase("folded code")),h.title=e.phrase("unfold"),h.className="cm-foldPlaceholder",h.onclick=c,h}}}),baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,n){let c;function h(m){let g=StyleModule.newName();return(c||(c=Object.create(null)))["."+g]=m,g}const u=typeof n.all=="string"?n.all:n.all?h(n.all):void 0,d=n.scope;this.scope=d instanceof Language?m=>m.prop(languageDataProp)==d.data:d?m=>m==d:void 0,this.style=tagHighlighter(e.map(m=>({tag:m.tag,class:m.class||h(Object.assign({},m,{tag:null}))})),{all:u}).style,this.module=c?new StyleModule(c):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(s){return s.length?[s[0]]:null}});function getHighlighters(s){let e=s.facet(highlighterFacet);return e.length?e:s.facet(fallbackHighlighter)}function syntaxHighlighting(s,e){let n=[treeHighlighter],c;return s instanceof HighlightStyle&&(s.module&&n.push(EditorView.styleModule.of(s.module)),c=s.themeType),e!=null&&e.fallback?n.push(fallbackHighlighter.of(s)):c?n.push(highlighterFacet.computeN([EditorView.darkTheme],h=>h.facet(EditorView.darkTheme)==(c=="dark")?[s]:[])):n.push(highlighterFacet.of(s)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let n=syntaxTree(e.state),c=getHighlighters(e.state),h=c!=getHighlighters(e.startState);n.length<e.view.viewport.to&&!h&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||h)&&(this.tree=n,this.decorations=this.buildDeco(e.view,c))}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let c=new RangeSetBuilder;for(let{from:h,to:u}of e.visibleRanges)highlightTree(this.tree,n,(d,m,g)=>{c.add(d,m,this.markCache[g]||(this.markCache[g]=Decoration.mark({class:g})))},h,u);return c.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:s=>s.decorations})),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(s){return combineConfig(s,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(s){let e=[],n=s.matched?matchingMark:nonmatchingMark;return e.push(n.range(s.start.from,s.start.to)),s.end&&e.push(n.range(s.end.from,s.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let n=[],c=e.state.facet(bracketMatchingConfig);for(let h of e.state.selection.ranges){if(!h.empty)continue;let u=matchBrackets(e.state,h.head,-1,c)||h.head>0&&matchBrackets(e.state,h.head-1,1,c)||c.afterCursor&&(matchBrackets(e.state,h.head,1,c)||h.head<e.state.doc.length&&matchBrackets(e.state,h.head+1,-1,c));u&&(n=n.concat(c.renderMatch(u,e.state)))}return Decoration.set(n,!0)},provide:s=>EditorView.decorations.from(s)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(s={}){return[bracketMatchingConfig.of(s),bracketMatchingUnique]}function matchingNodes(s,e,n){let c=s.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(c)return c;if(s.name.length==1){let h=n.indexOf(s.name);if(h>-1&&h%2==(e<0?1:0))return[n[h+e]]}return null}function matchBrackets(s,e,n,c={}){let h=c.maxScanDistance||DefaultScanDist,u=c.brackets||DefaultBrackets,d=syntaxTree(s),m=d.resolveInner(e,n);for(let g=m;g;g=g.parent){let b=matchingNodes(g.type,n,u);if(b&&g.from<g.to)return matchMarkedBrackets(s,e,n,g,b,u)}return matchPlainBrackets(s,e,n,d,m.type,h,u)}function matchMarkedBrackets(s,e,n,c,h,u){let d=c.parent,m={from:c.from,to:c.to},g=0,b=d==null?void 0:d.cursor();if(b&&(n<0?b.childBefore(c.from):b.childAfter(c.to)))do if(n<0?b.to<=c.from:b.from>=c.to){if(g==0&&h.indexOf(b.type.name)>-1&&b.from<b.to)return{start:m,end:{from:b.from,to:b.to},matched:!0};if(matchingNodes(b.type,n,u))g++;else if(matchingNodes(b.type,-n,u)&&(g--,g==0))return{start:m,end:b.from==b.to?void 0:{from:b.from,to:b.to},matched:!1}}while(n<0?b.prevSibling():b.nextSibling());return{start:m,matched:!1}}function matchPlainBrackets(s,e,n,c,h,u,d){let m=n<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),g=d.indexOf(m);if(g<0||g%2==0!=n>0)return null;let b={from:n<0?e-1:e,to:n>0?e+1:e},O=s.doc.iterRange(e,n>0?s.doc.length:0),v=0;for(let y=0;!O.next().done&&y<=u;){let w=O.value;n<0&&(y+=w.length);let S=e+y*n;for(let A=n>0?0:w.length-1,E=n>0?w.length:-1;A!=E;A+=n){let P=d.indexOf(w[A]);if(!(P<0||c.resolveInner(S+A,1).type!=h))if(P%2==0==n>0)v++;else{if(v==1)return{start:b,end:{from:S+A,to:S+A+1},matched:P>>1==g>>1};v--}}n>0&&(y+=w.length)}return O.done?{start:b,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[s]=createTokenType(noTokens,e);function warnForPart(s,e){warned.indexOf(s)>-1||(warned.push(s),console.warn(e))}function createTokenType(s,e){let n=null;for(let u of e.split(".")){let d=s[u]||tags[u];d?typeof d=="function"?n?n=d(n):warnForPart(u,`Modifier ${u} used at start of tag`):n?warnForPart(u,`Tag ${u} used as modifier`):n=d:warnForPart(u,`Unknown highlighting tag ${u}`)}if(!n)return 0;let c=e.replace(/ /g,"_"),h=NodeType.define({id:typeArray.length,name:c,props:[styleTags({[c]:n})]});return typeArray.push(h),h.id}const toggleComment$1=s=>{let e=getConfig$1(s.state);return e.line?toggleLineComment$1(s):e.block?toggleBlockCommentByLine$1(s):!1};function command$1(s,e){return({state:n,dispatch:c})=>{if(n.readOnly)return!1;let h=s(e,n);return h?(c(n.update(h)),!0):!1}}const toggleLineComment$1=command$1(changeLineComment$1,0),toggleBlockComment$1=command$1(changeBlockComment$1,0),toggleBlockCommentByLine$1=command$1((s,e)=>changeBlockComment$1(s,e,selectedLineRanges$1(e)),0);function getConfig$1(s,e=s.selection.main.head){let n=s.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const SearchMargin$1=50;function findBlockComment$1(s,{open:e,close:n},c,h){let u=s.sliceDoc(c-SearchMargin$1,c),d=s.sliceDoc(h,h+SearchMargin$1),m=/\s*$/.exec(u)[0].length,g=/^\s*/.exec(d)[0].length,b=u.length-m;if(u.slice(b-e.length,b)==e&&d.slice(g,g+n.length)==n)return{open:{pos:c-m,margin:m&&1},close:{pos:h+g,margin:g&&1}};let O,v;h-c<=2*SearchMargin$1?O=v=s.sliceDoc(c,h):(O=s.sliceDoc(c,c+SearchMargin$1),v=s.sliceDoc(h-SearchMargin$1,h));let y=/^\s*/.exec(O)[0].length,w=/\s*$/.exec(v)[0].length,S=v.length-w-n.length;return O.slice(y,y+e.length)==e&&v.slice(S,S+n.length)==n?{open:{pos:c+y+e.length,margin:/\s/.test(O.charAt(y+e.length))?1:0},close:{pos:h-w-n.length,margin:/\s/.test(v.charAt(S-1))?1:0}}:null}function selectedLineRanges$1(s){let e=[];for(let n of s.selection.ranges){let c=s.doc.lineAt(n.from),h=n.to<=c.to?c:s.doc.lineAt(n.to),u=e.length-1;u>=0&&e[u].to>c.from?e[u].to=h.to:e.push({from:c.from,to:h.to})}return e}function changeBlockComment$1(s,e,n=e.selection.ranges){let c=n.map(u=>getConfig$1(e,u.from).block);if(!c.every(u=>u))return null;let h=n.map((u,d)=>findBlockComment$1(e,c[d],u.from,u.to));if(s!=2&&!h.every(u=>u))return{changes:e.changes(n.map((u,d)=>h[d]?[]:[{from:u.from,insert:c[d].open+" "},{from:u.to,insert:" "+c[d].close}]))};if(s!=1&&h.some(u=>u)){let u=[];for(let d=0,m;d<h.length;d++)if(m=h[d]){let g=c[d],{open:b,close:O}=m;u.push({from:b.pos-g.open.length,to:b.pos+b.margin},{from:O.pos-O.margin,to:O.pos+g.close.length})}return{changes:u}}return null}function changeLineComment$1(s,e,n=e.selection.ranges){let c=[],h=-1;for(let{from:u,to:d}of n){let m=c.length,g=1e9;for(let b=u;b<=d;){let O=e.doc.lineAt(b);if(O.from>h&&(u==d||d>O.from)){h=O.from;let v=getConfig$1(e,b).line;if(!v)continue;let y=/^\s*/.exec(O.text)[0].length,w=y==O.length,S=O.text.slice(y,y+v.length)==v?y:-1;y<O.text.length&&y<g&&(g=y),c.push({line:O,comment:S,token:v,indent:y,empty:w,single:!1})}b=O.to+1}if(g<1e9)for(let b=m;b<c.length;b++)c[b].indent<c[b].line.text.length&&(c[b].indent=g);c.length==m+1&&(c[m].single=!0)}if(s!=2&&c.some(u=>u.comment<0&&(!u.empty||u.single))){let u=[];for(let{line:m,token:g,indent:b,empty:O,single:v}of c)(v||!O)&&u.push({from:m.from+b,insert:g+" "});let d=e.changes(u);return{changes:d,selection:e.selection.map(d,1)}}else if(s!=1&&c.some(u=>u.comment>=0)){let u=[];for(let{line:d,comment:m,token:g}of c)if(m>=0){let b=d.from+m,O=b+g.length;d.text[O-d.from]==" "&&O++,u.push({from:b,to:O})}return{changes:u}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(s){return combineConfig(s,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function changeEnd(s){let e=0;return s.iterChangedRanges((n,c)=>e=c),e}const historyField_=StateField.define({create(){return HistoryState.empty},update(s,e){let n=e.state.facet(historyConfig),c=e.annotation(fromHistory);if(c){let g=e.docChanged?EditorSelection.single(changeEnd(e.changes)):void 0,b=HistEvent.fromTransaction(e,g),O=c.side,v=O==0?s.undone:s.done;return b?v=updateBranch(v,v.length,n.minDepth,b):v=addSelection(v,e.startState.selection),new HistoryState(O==0?c.rest:v,O==0?v:c.rest)}let h=e.annotation(isolateHistory);if((h=="full"||h=="before")&&(s=s.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let u=HistEvent.fromTransaction(e),d=e.annotation(Transaction.time),m=e.annotation(Transaction.userEvent);return u?s=s.addChanges(u,d,m,n.newGroupDelay,n.minDepth):e.selection&&(s=s.addSelection(e.startState.selection,d,m,n.newGroupDelay)),(h=="full"||h=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new HistoryState(s.done.map(HistEvent.fromJSON),s.undone.map(HistEvent.fromJSON))}});function history(s={}){return[historyField_,historyConfig.of(s),EditorView.domEventHandlers({beforeinput(e,n){let c=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return c?(e.preventDefault(),c(n)):!1}})]}function cmd(s,e){return function({state:n,dispatch:c}){if(!e&&n.readOnly)return!1;let h=n.field(historyField_,!1);if(!h)return!1;let u=h.pop(s,n,e);return u?(c(u),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,c,h,u){this.changes=e,this.effects=n,this.mapped=c,this.startSelection=h,this.selectionsAfter=u}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,c;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(c=this.startSelection)===null||c===void 0?void 0:c.toJSON(),selectionsAfter:this.selectionsAfter.map(h=>h.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let c=none$1;for(let h of e.startState.facet(invertedEffects)){let u=h(e);u.length&&(c=c.concat(u))}return!c.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),c,void 0,n||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(s,e,n,c){let h=e+1>n+20?e-n-1:0,u=s.slice(h,e);return u.push(c),u}function isAdjacent(s,e){let n=[],c=!1;return s.iterChangedRanges((h,u)=>n.push(h,u)),e.iterChangedRanges((h,u,d,m)=>{for(let g=0;g<n.length;){let b=n[g++],O=n[g++];m>=b&&d<=O&&(c=!0)}}),c}function eqSelectionShape(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((n,c)=>n.empty!=e.ranges[c].empty).length===0}function conc(s,e){return s.length?e.length?s.concat(e):s:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(s,e){if(s.length){let n=s[s.length-1],c=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return c.length&&c[c.length-1].eq(e)?s:(c.push(e),updateBranch(s,s.length-1,1e9,n.setSelAfter(c)))}else return[HistEvent.selection([e])]}function popSelection(s){let e=s[s.length-1],n=s.slice();return n[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(s,e){if(!s.length)return s;let n=s.length,c=none$1;for(;n;){let h=mapEvent(s[n-1],e,c);if(h.changes&&!h.changes.empty||h.effects.length){let u=s.slice(0,n);return u[n-1]=h,u}else e=h.mapped,n--,c=h.selectionsAfter}return c.length?[HistEvent.selection(c)]:none$1}function mapEvent(s,e,n){let c=conc(s.selectionsAfter.length?s.selectionsAfter.map(m=>m.map(e)):none$1,n);if(!s.changes)return HistEvent.selection(c);let h=s.changes.map(e),u=e.mapDesc(s.changes,!0),d=s.mapped?s.mapped.composeDesc(u):u;return new HistEvent(h,StateEffect.mapEffects(s.effects,e),d,s.startSelection.map(u),c)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,c=0,h=void 0){this.done=e,this.undone=n,this.prevTime=c,this.prevUserEvent=h}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,c,h,u){let d=this.done,m=d[d.length-1];return m&&m.changes&&!m.changes.empty&&e.changes&&(!c||joinableUserEvent.test(c))&&(!m.selectionsAfter.length&&n-this.prevTime<h&&isAdjacent(m.changes,e.changes)||c=="input.type.compose")?d=updateBranch(d,d.length-1,u,new HistEvent(e.changes.compose(m.changes),conc(e.effects,m.effects),m.mapped,m.startSelection,none$1)):d=updateBranch(d,d.length,u,e),new HistoryState(d,none$1,n,c)}addSelection(e,n,c,h){let u=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return u.length>0&&n-this.prevTime<h&&c==this.prevUserEvent&&c&&/^select($|\.)/.test(c)&&eqSelectionShape(u[u.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,c)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,c){let h=e==0?this.done:this.undone;if(h.length==0)return null;let u=h[h.length-1];if(c&&u.selectionsAfter.length)return n.update({selection:u.selectionsAfter[u.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(h)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(u.changes){let d=h.length==1?none$1:h.slice(0,h.length-1);return u.mapped&&(d=addMappingToBranch(d,u.mapped)),n.update({changes:u.changes,selection:u.startSelection,effects:u.effects,annotations:fromHistory.of({side:e,rest:d}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(s,e){return EditorSelection.create(s.ranges.map(e),s.mainIndex)}function setSel(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:s,dispatch:e},n){let c=updateSel(s.selection,n);return c.eq(s.selection)?!1:(e(setSel(s,c)),!0)}function rangeEnd(s,e){return EditorSelection.cursor(e?s.to:s.from)}function cursorByChar(s,e){return moveSel(s,n=>n.empty?s.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(s){return s.textDirectionAt(s.state.selection.main.head)==Direction.LTR}const cursorCharLeft=s=>cursorByChar(s,!ltrAtCursor(s)),cursorCharRight=s=>cursorByChar(s,ltrAtCursor(s));function cursorByGroup(s,e){return moveSel(s,n=>n.empty?s.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=s=>cursorByGroup(s,!ltrAtCursor(s)),cursorGroupRight=s=>cursorByGroup(s,ltrAtCursor(s));function interestingNode(s,e,n){if(e.type.prop(n))return!0;let c=e.to-e.from;return c&&(c>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(s,e,n){let c=syntaxTree(s).resolveInner(e.head),h=n?NodeProp.closedBy:NodeProp.openedBy;for(let g=e.head;;){let b=n?c.childAfter(g):c.childBefore(g);if(!b)break;interestingNode(s,b,h)?c=b:g=n?b.to:b.from}let u=c.type.prop(h),d,m;return u&&(d=n?matchBrackets(s,c.from,1):matchBrackets(s,c.to,-1))&&d.matched?m=n?d.end.to:d.end.from:m=n?c.to:c.from,EditorSelection.cursor(m,n?-1:1)}const cursorSyntaxLeft=s=>moveSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),cursorSyntaxRight=s=>moveSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function cursorByLine(s,e){return moveSel(s,n=>{if(!n.empty)return rangeEnd(n,e);let c=s.moveVertically(n,e);return c.head!=n.head?c:s.moveToLineBoundary(n,e)})}const cursorLineUp=s=>cursorByLine(s,!1),cursorLineDown=s=>cursorByLine(s,!0);function pageHeight(s){return Math.max(s.defaultLineHeight,Math.min(s.dom.clientHeight,innerHeight)-5)}function cursorByPage(s,e){let{state:n}=s,c=updateSel(n.selection,m=>m.empty?s.moveVertically(m,e,pageHeight(s)):rangeEnd(m,e));if(c.eq(n.selection))return!1;let h=s.coordsAtPos(n.selection.main.head),u=s.scrollDOM.getBoundingClientRect(),d;return h&&h.top>u.top&&h.bottom<u.bottom&&h.top-u.top<=s.scrollDOM.scrollHeight-s.scrollDOM.scrollTop-s.scrollDOM.clientHeight&&(d=EditorView.scrollIntoView(c.main.head,{y:"start",yMargin:h.top-u.top})),s.dispatch(setSel(n,c),{effects:d}),!0}const cursorPageUp=s=>cursorByPage(s,!1),cursorPageDown=s=>cursorByPage(s,!0);function moveByLineBoundary(s,e,n){let c=s.lineBlockAt(e.head),h=s.moveToLineBoundary(e,n);if(h.head==e.head&&h.head!=(n?c.to:c.from)&&(h=s.moveToLineBoundary(e,n,!1)),!n&&h.head==c.from&&c.length){let u=/^\s*/.exec(s.state.sliceDoc(c.from,Math.min(c.from+100,c.to)))[0].length;u&&e.head!=c.from+u&&(h=EditorSelection.cursor(c.from+u))}return h}const cursorLineBoundaryForward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!0)),cursorLineBoundaryBackward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!1)),cursorLineStart=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from,1)),cursorLineEnd=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to,-1));function toMatchingBracket(s,e,n){let c=!1,h=updateSel(s.selection,u=>{let d=matchBrackets(s,u.head,-1)||matchBrackets(s,u.head,1)||u.head>0&&matchBrackets(s,u.head-1,1)||u.head<s.doc.length&&matchBrackets(s,u.head+1,-1);if(!d||!d.end)return u;c=!0;let m=d.start.from==u.head?d.end.to:d.end.from;return n?EditorSelection.range(u.anchor,m):EditorSelection.cursor(m)});return c?(e(setSel(s,h)),!0):!1}const cursorMatchingBracket=({state:s,dispatch:e})=>toMatchingBracket(s,e,!1);function extendSel(s,e){let n=updateSel(s.state.selection,c=>{let h=e(c);return EditorSelection.range(c.anchor,h.head,h.goalColumn)});return n.eq(s.state.selection)?!1:(s.dispatch(setSel(s.state,n)),!0)}function selectByChar(s,e){return extendSel(s,n=>s.moveByChar(n,e))}const selectCharLeft=s=>selectByChar(s,!ltrAtCursor(s)),selectCharRight=s=>selectByChar(s,ltrAtCursor(s));function selectByGroup(s,e){return extendSel(s,n=>s.moveByGroup(n,e))}const selectGroupLeft=s=>selectByGroup(s,!ltrAtCursor(s)),selectGroupRight=s=>selectByGroup(s,ltrAtCursor(s)),selectSyntaxLeft=s=>extendSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),selectSyntaxRight=s=>extendSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function selectByLine(s,e){return extendSel(s,n=>s.moveVertically(n,e))}const selectLineUp=s=>selectByLine(s,!1),selectLineDown=s=>selectByLine(s,!0);function selectByPage(s,e){return extendSel(s,n=>s.moveVertically(n,e,pageHeight(s)))}const selectPageUp=s=>selectByPage(s,!1),selectPageDown=s=>selectByPage(s,!0),selectLineBoundaryForward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!0)),selectLineBoundaryBackward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!1)),selectLineStart=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from)),selectLineEnd=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to)),cursorDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:0})),!0),cursorDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.doc.length})),!0),selectDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:0})),!0),selectDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),selectAll=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),selectLine=({state:s,dispatch:e})=>{let n=selectedLineBlocks(s).map(({from:c,to:h})=>EditorSelection.range(c,Math.min(h+1,s.doc.length)));return e(s.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:s,dispatch:e})=>{let n=updateSel(s.selection,c=>{var h;let u=syntaxTree(s).resolveInner(c.head,1);for(;!(u.from<c.from&&u.to>=c.to||u.to>c.to&&u.from<=c.from||!(!((h=u.parent)===null||h===void 0)&&h.parent));)u=u.parent;return EditorSelection.range(u.to,u.from)});return e(setSel(s,n)),!0},simplifySelection=({state:s,dispatch:e})=>{let n=s.selection,c=null;return n.ranges.length>1?c=EditorSelection.create([n.main]):n.main.empty||(c=EditorSelection.create([EditorSelection.cursor(n.main.head)])),c?(e(setSel(s,c)),!0):!1};function deleteBy({state:s,dispatch:e},n){if(s.readOnly)return!1;let c="delete.selection",h=s.changeByRange(u=>{let{from:d,to:m}=u;if(d==m){let g=n(d);g<d?c="delete.backward":g>d&&(c="delete.forward"),d=Math.min(d,g),m=Math.max(m,g)}return d==m?{range:u}:{changes:{from:d,to:m},range:EditorSelection.cursor(d)}});return h.changes.empty?!1:(e(s.update(h,{scrollIntoView:!0,userEvent:c,effects:c=="delete.selection"?EditorView.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(s,e,n){if(s instanceof EditorView)for(let c of s.state.facet(EditorView.atomicRanges).map(h=>h(s)))c.between(e,e,(h,u)=>{h<e&&u>e&&(e=n?u:h)});return e}const deleteByChar=(s,e)=>deleteBy(s,n=>{let{state:c}=s,h=c.doc.lineAt(n),u,d;if(!e&&n>h.from&&n<h.from+200&&!/[^ \t]/.test(u=h.text.slice(0,n-h.from))){if(u[u.length-1]=="	")return n-1;let m=countColumn(u,c.tabSize),g=m%getIndentUnit(c)||getIndentUnit(c);for(let b=0;b<g&&u[u.length-1-b]==" ";b++)n--;d=n}else d=findClusterBreak(h.text,n-h.from,e,e)+h.from,d==n&&h.number!=(e?c.doc.lines:1)&&(d+=e?1:-1);return skipAtomic(s,d,e)}),deleteCharBackward=s=>deleteByChar(s,!1),deleteCharForward=s=>deleteByChar(s,!0),deleteByGroup=(s,e)=>deleteBy(s,n=>{let c=n,{state:h}=s,u=h.doc.lineAt(c),d=h.charCategorizer(c);for(let m=null;;){if(c==(e?u.to:u.from)){c==n&&u.number!=(e?h.doc.lines:1)&&(c+=e?1:-1);break}let g=findClusterBreak(u.text,c-u.from,e)+u.from,b=u.text.slice(Math.min(c,g)-u.from,Math.max(c,g)-u.from),O=d(b);if(m!=null&&O!=m)break;(b!=" "||c!=n)&&(m=O),c=g}return skipAtomic(s,c,e)}),deleteGroupBackward=s=>deleteByGroup(s,!1),deleteGroupForward=s=>deleteByGroup(s,!0),deleteToLineEnd=s=>deleteBy(s,e=>{let n=s.lineBlockAt(e).to;return skipAtomic(s,e<n?n:Math.min(s.state.doc.length,e+1),!0)}),deleteToLineStart=s=>deleteBy(s,e=>{let n=s.lineBlockAt(e).from;return skipAtomic(s,e>n?n:Math.max(0,e-1),!1)}),splitLine=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=s.changeByRange(c=>({changes:{from:c.from,to:c.to,insert:Text.of(["",""])},range:EditorSelection.cursor(c.from)}));return e(s.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=s.changeByRange(c=>{if(!c.empty||c.from==0||c.from==s.doc.length)return{range:c};let h=c.from,u=s.doc.lineAt(h),d=h==u.from?h-1:findClusterBreak(u.text,h-u.from,!1)+u.from,m=h==u.to?h+1:findClusterBreak(u.text,h-u.from,!0)+u.from;return{changes:{from:d,to:m,insert:s.doc.slice(h,m).append(s.doc.slice(d,h))},range:EditorSelection.cursor(m)}});return n.changes.empty?!1:(e(s.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(s){let e=[],n=-1;for(let c of s.selection.ranges){let h=s.doc.lineAt(c.from),u=s.doc.lineAt(c.to);if(!c.empty&&c.to==u.from&&(u=s.doc.lineAt(c.to-1)),n>=h.number){let d=e[e.length-1];d.to=u.to,d.ranges.push(c)}else e.push({from:h.from,to:u.to,ranges:[c]});n=u.number+1}return e}function moveLine(s,e,n){if(s.readOnly)return!1;let c=[],h=[];for(let u of selectedLineBlocks(s)){if(n?u.to==s.doc.length:u.from==0)continue;let d=s.doc.lineAt(n?u.to+1:u.from-1),m=d.length+1;if(n){c.push({from:u.to,to:d.to},{from:u.from,insert:d.text+s.lineBreak});for(let g of u.ranges)h.push(EditorSelection.range(Math.min(s.doc.length,g.anchor+m),Math.min(s.doc.length,g.head+m)))}else{c.push({from:d.from,to:u.from},{from:u.to,insert:s.lineBreak+d.text});for(let g of u.ranges)h.push(EditorSelection.range(g.anchor-m,g.head-m))}}return c.length?(e(s.update({changes:c,scrollIntoView:!0,selection:EditorSelection.create(h,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:s,dispatch:e})=>moveLine(s,e,!1),moveLineDown=({state:s,dispatch:e})=>moveLine(s,e,!0);function copyLine(s,e,n){if(s.readOnly)return!1;let c=[];for(let h of selectedLineBlocks(s))n?c.push({from:h.from,insert:s.doc.slice(h.from,h.to)+s.lineBreak}):c.push({from:h.to,insert:s.lineBreak+s.doc.slice(h.from,h.to)});return e(s.update({changes:c,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:s,dispatch:e})=>copyLine(s,e,!1),copyLineDown=({state:s,dispatch:e})=>copyLine(s,e,!0),deleteLine=s=>{if(s.state.readOnly)return!1;let{state:e}=s,n=e.changes(selectedLineBlocks(e).map(({from:h,to:u})=>(h>0?h--:u<e.doc.length&&u++,{from:h,to:u}))),c=updateSel(e.selection,h=>s.moveVertically(h,!0)).map(n);return s.dispatch({changes:n,selection:c,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(s).resolveInner(e),c=n.childBefore(e),h=n.childAfter(e),u;return c&&h&&c.to<=e&&h.from>=e&&(u=c.type.prop(NodeProp.closedBy))&&u.indexOf(h.name)>-1&&s.doc.lineAt(c.to).from==s.doc.lineAt(h.from).from?{from:c.to,to:h.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(s){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let c=e.changeByRange(h=>{let{from:u,to:d}=h,m=e.doc.lineAt(u),g=!s&&u==d&&isBetweenBrackets(e,u);s&&(u=d=(d<=m.to?m:e.doc.lineAt(d)).to);let b=new IndentContext(e,{simulateBreak:u,simulateDoubleBreak:!!g}),O=getIndentation(b,u);for(O==null&&(O=/^\s*/.exec(e.doc.lineAt(u).text)[0].length);d<m.to&&/\s/.test(m.text[d-m.from]);)d++;g?{from:u,to:d}=g:u>m.from&&u<m.from+100&&!/\S/.test(m.text.slice(0,u))&&(u=m.from);let v=["",indentString(e,O)];return g&&v.push(indentString(e,b.lineIndent(m.from,-1))),{changes:{from:u,to:d,insert:Text.of(v)},range:EditorSelection.cursor(u+1+v[1].length)}});return n(e.update(c,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(s,e){let n=-1;return s.changeByRange(c=>{let h=[];for(let d=c.from;d<=c.to;){let m=s.doc.lineAt(d);m.number>n&&(c.empty||c.to>m.from)&&(e(m,h,c),n=m.number),d=m.to+1}let u=s.changes(h);return{changes:h,range:EditorSelection.range(u.mapPos(c.anchor,1),u.mapPos(c.head,1))}})}const indentSelection=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=Object.create(null),c=new IndentContext(s,{overrideIndentation:u=>{let d=n[u];return d==null?-1:d}}),h=changeBySelectedLine(s,(u,d,m)=>{let g=getIndentation(c,u.from);if(g==null)return;/\S/.test(u.text)||(g=0);let b=/^\s*/.exec(u.text)[0],O=indentString(s,g);(b!=O||m.from<u.from+b.length)&&(n[u.from]=g,d.push({from:u.from,to:u.from+b.length,insert:O}))});return h.changes.empty||e(s.update(h,{userEvent:"indent"})),!0},indentMore=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(n,c)=>{c.push({from:n.from,insert:s.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(n,c)=>{let h=/^\s*/.exec(n.text)[0];if(!h)return;let u=countColumn(h,s.tabSize),d=0,m=indentString(s,Math.max(0,u-getIndentUnit(s)));for(;d<h.length&&d<m.length&&h.charCodeAt(d)==m.charCodeAt(d);)d++;c.push({from:n.from+d,to:n.from+h.length,insert:m.slice(d)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment$1},{key:"Alt-A",run:toggleBlockComment$1}].concat(standardKeymap);function crelt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)){var h=n[c];typeof h=="string"?s.setAttribute(c,h):h!=null&&(s[c]=h)}e++}for(;e<arguments.length;e++)add$2(s,arguments[e]);return s}function add$2(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)add$2(s,e[n]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class SearchCursor{constructor(e,n,c=0,h=e.length,u){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(c,h),this.bufferStart=c,this.normalize=u?d=>u(basicNormalize(d)):basicNormalize,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fromCodePoint(e),c=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let h=this.normalize(n);for(let u=0,d=c;;u++){let m=h.charCodeAt(u),g=this.match(m,d);if(g)return this.value=g,this;if(u==h.length-1)break;d==c&&u<n.length&&n.charCodeAt(u)==m&&d++}}}match(e,n){let c=null;for(let h=0;h<this.matches.length;h+=2){let u=this.matches[h],d=!1;this.query.charCodeAt(u)==e&&(u==this.query.length-1?c={from:this.matches[h+1],to:n+1}:(this.matches[h]++,d=!0)),d||(this.matches.splice(h,2),h-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?c={from:n,to:n+1}:this.matches.push(1,n)),c}}typeof Symbol!="undefined"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,n,c,h=0,u=e.length){if(this.to=u,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new MultilineRegExpCursor(e,n,c,h,u);this.re=new RegExp(n,baseFlags+(c!=null&&c.ignoreCase?"i":"")),this.iter=e.iter();let d=e.lineAt(h);this.curLineStart=d.from,this.matchPos=h,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let c=this.curLineStart+n.index,h=c+n[0].length;if(this.matchPos=h+(c==h?1:0),c==this.curLine.length&&this.nextLine(),c<h||c>this.value.to)return this.value={from:c,to:h,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,c){let h=flattened.get(e);if(!h||h.from>=c||h.to<=n){let m=new FlattenedDoc(n,e.sliceString(n,c));return flattened.set(e,m),m}if(h.from==n&&h.to==c)return h;let{text:u,from:d}=h;return d>n&&(u=e.sliceString(n,d)+u,d=n),h.to<c&&(u+=e.sliceString(h.to,c)),flattened.set(e,new FlattenedDoc(d,u)),new FlattenedDoc(n,u.slice(n-d,c-d))}}class MultilineRegExpCursor{constructor(e,n,c,h,u){this.text=e,this.to=u,this.done=!1,this.value=empty,this.matchPos=h,this.re=new RegExp(n,baseFlags+(c!=null&&c.ignoreCase?"i":"")),this.flat=FlattenedDoc.get(e,h,this.chunkEnd(h+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n&&this.flat.to<this.to&&n.index+n[0].length>this.flat.text.length-10&&(n=null),n){let c=this.flat.from+n.index,h=c+n[0].length;return this.value={from:c,to:h,match:n},this.matchPos=h+(c==h?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol!="undefined"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(s){try{return new RegExp(s,baseFlags),!0}catch{return!1}}function createLineDialog(s){let e=crelt("input",{class:"cm-textfield",name:"line"}),n=crelt("form",{class:"cm-gotoLine",onkeydown:h=>{h.keyCode==27?(h.preventDefault(),s.dispatch({effects:dialogEffect.of(!1)}),s.focus()):h.keyCode==13&&(h.preventDefault(),c())},onsubmit:h=>{h.preventDefault(),c()}},crelt("label",s.state.phrase("Go to line"),": ",e)," ",crelt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function c(){let h=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!h)return;let{state:u}=s,d=u.doc.lineAt(u.selection.main.head),[,m,g,b,O]=h,v=b?+b.slice(1):0,y=g?+g:d.number;if(g&&O){let S=y/100;m&&(S=S*(m=="-"?-1:1)+d.number/u.doc.lines),y=Math.round(u.doc.lines*S)}else g&&m&&(y=y*(m=="-"?-1:1)+d.number);let w=u.doc.line(Math.max(1,Math.min(u.doc.lines,y)));s.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(w.from+Math.max(0,Math.min(v,w.length))),scrollIntoView:!0}),s.focus()}return{dom:n}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(s,e){for(let n of e.effects)n.is(dialogEffect)&&(s=n.value);return s},provide:s=>showPanel.from(s,e=>e?createLineDialog:null)}),gotoLine=s=>{let e=getPanel(s,createLineDialog);if(!e){let n=[dialogEffect.of(!0)];s.state.field(dialogField,!1)==null&&n.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),s.dispatch({effects:n}),e=getPanel(s,createLineDialog)}return e&&e.dom.querySelector("input").focus(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(s){return combineConfig(s,defaultHighlightOptions,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(s){let e=[defaultTheme,matchHighlighter];return s&&e.push(highlightConfig.of(s)),e}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(s,e,n,c){return(n==0||s(e.sliceDoc(n-1,n))!=CharCategory.Word)&&(c==e.doc.length||s(e.sliceDoc(c,c+1))!=CharCategory.Word)}function insideWord(s,e,n,c){return s(e.sliceDoc(n,n+1))==CharCategory.Word&&s(e.sliceDoc(c-1,c))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(highlightConfig),{state:n}=s,c=n.selection;if(c.ranges.length>1)return Decoration.none;let h=c.main,u,d=null;if(h.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let g=n.wordAt(h.head);if(!g)return Decoration.none;d=n.charCategorizer(h.head),u=n.sliceDoc(g.from,g.to)}else{let g=h.to-h.from;if(g<e.minSelectionLength||g>200)return Decoration.none;if(e.wholeWords){if(u=n.sliceDoc(h.from,h.to),d=n.charCategorizer(h.head),!(insideWordBoundaries(d,n,h.from,h.to)&&insideWord(d,n,h.from,h.to)))return Decoration.none}else if(u=n.sliceDoc(h.from,h.to).trim(),!u)return Decoration.none}let m=[];for(let g of s.visibleRanges){let b=new SearchCursor(n.doc,u,g.from,g.to);for(;!b.next().done;){let{from:O,to:v}=b.value;if((!d||insideWordBoundaries(d,n,O,v))&&(h.empty&&O<=h.from&&v>=h.to?m.push(mainMatchDeco.range(O,v)):(O>=h.to||v<=h.from)&&m.push(matchDeco.range(O,v)),m.length>e.maxMatches))return Decoration.none}}return Decoration.set(m)}},{decorations:s=>s.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:s,dispatch:e})=>{let{selection:n}=s,c=EditorSelection.create(n.ranges.map(h=>s.wordAt(h.head)||EditorSelection.cursor(h.head)),n.mainIndex);return c.eq(n)?!1:(e(s.update({selection:c})),!0)};function findNextOccurrence(s,e){let{main:n,ranges:c}=s.selection,h=s.wordAt(n.head),u=h&&h.from==n.from&&h.to==n.to;for(let d=!1,m=new SearchCursor(s.doc,e,c[c.length-1].to);;)if(m.next(),m.done){if(d)return null;m=new SearchCursor(s.doc,e,0,Math.max(0,c[c.length-1].from-1)),d=!0}else{if(d&&c.some(g=>g.from==m.value.from))continue;if(u){let g=s.wordAt(m.value.from);if(!g||g.from!=m.value.from||g.to!=m.value.to)continue}return m.value}}const selectNextOccurrence=({state:s,dispatch:e})=>{let{ranges:n}=s.selection;if(n.some(u=>u.from===u.to))return selectWord({state:s,dispatch:e});let c=s.sliceDoc(n[0].from,n[0].to);if(s.selection.ranges.some(u=>s.sliceDoc(u.from,u.to)!=c))return!1;let h=findNextOccurrence(s,c);return h?(e(s.update({selection:s.selection.addRange(EditorSelection.range(h.from,h.to),!1),effects:EditorView.scrollIntoView(h.to)})),!0):!1},searchConfigFacet=Facet.define({combine(s){var e;return{top:s.reduce((n,c)=>n!=null?n:c.top,void 0)||!1,caseSensitive:s.reduce((n,c)=>n!=null?n:c.caseSensitive,void 0)||!1,createPanel:((e=s.find(n=>n.createPanel))===null||e===void 0?void 0:e.createPanel)||(n=>new SearchPanel(n))}}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,(n,c)=>c=="n"?`
`:c=="r"?"\r":c=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,n=0,c=e.length){return this.regexp?regexpCursor(this,e,n,c):stringCursor(this,e,n,c)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(s,e,n,c){return new SearchCursor(e,s.unquoted,n,c,s.caseSensitive?void 0:h=>h.toLowerCase())}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,n,c){let h=stringCursor(this.spec,e,c,e.length).nextOverlapping();return h.done&&(h=stringCursor(this.spec,e,0,n).nextOverlapping()),h.done?null:h.value}prevMatchInRange(e,n,c){for(let h=c;;){let u=Math.max(n,h-1e4-this.spec.unquoted.length),d=stringCursor(this.spec,e,u,h),m=null;for(;!d.nextOverlapping().done;)m=d.value;if(m)return m;if(u==n)return null;h-=1e4}}prevMatch(e,n,c){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,c,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,n){let c=stringCursor(this.spec,e,0,e.length),h=[];for(;!c.next().done;){if(h.length>=n)return null;h.push(c.value)}return h}highlight(e,n,c,h){let u=stringCursor(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(c+this.spec.unquoted.length,e.length));for(;!u.next().done;)h(u.value.from,u.value.to)}}function regexpCursor(s,e,n,c){return new RegExpCursor(e,s.search,s.caseSensitive?void 0:{ignoreCase:!0},n,c)}class RegExpQuery extends QueryType{nextMatch(e,n,c){let h=regexpCursor(this.spec,e,c,e.length).next();return h.done&&(h=regexpCursor(this.spec,e,0,n).next()),h.done?null:h.value}prevMatchInRange(e,n,c){for(let h=1;;h++){let u=Math.max(n,c-h*1e4),d=regexpCursor(this.spec,e,u,c),m=null;for(;!d.next().done;)m=d.value;if(m&&(u==n||m.from>u+10))return m;if(u==n)return null}}prevMatch(e,n,c){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,c,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(n,c)=>c=="$"?"$":c=="&"?e.match[0]:c!="0"&&+c<e.match.length?e.match[c]:n)}matchAll(e,n){let c=regexpCursor(this.spec,e,0,e.length),h=[];for(;!c.next().done;){if(h.length>=n)return null;h.push(c.value)}return h}highlight(e,n,c,h){let u=regexpCursor(this.spec,e,Math.max(0,n-250),Math.min(c+250,e.length));for(;!u.next().done;)h(u.value.from,u.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(s){return new SearchState(defaultQuery(s).create(),null)},update(s,e){for(let n of e.effects)n.is(setSearchQuery)?s=new SearchState(n.value.create(),s.panel):n.is(togglePanel$1)&&(s=new SearchState(s.query,n.value?createSearchPanel:null));return s},provide:s=>showPanel.from(s,e=>e.panel)});class SearchState{constructor(e,n){this.query=e,this.panel=n}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(searchState))}update(s){let e=s.state.field(searchState);(e!=s.startState.field(searchState)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Decoration.none;let{view:n}=this,c=new RangeSetBuilder;for(let h=0,u=n.visibleRanges,d=u.length;h<d;h++){let{from:m,to:g}=u[h];for(;h<d-1&&g>u[h+1].from-2*250;)g=u[++h].to;s.highlight(n.state.doc,m,g,(b,O)=>{let v=n.state.selection.ranges.some(y=>y.from==b&&y.to==O);c.add(b,O,v?selectedMatchMark:matchMark)})}return c.finish()}},{decorations:s=>s.decorations});function searchCommand(s){return e=>{let n=e.state.field(searchState,!1);return n&&n.query.spec.valid?s(e,n):openSearchPanel(e)}}const findNext=searchCommand((s,{query:e})=>{let{from:n,to:c}=s.state.selection.main,h=e.nextMatch(s.state.doc,n,c);return!h||h.from==n&&h.to==c?!1:(s.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0,effects:announceMatch(s,h),userEvent:"select.search"}),!0)}),findPrevious=searchCommand((s,{query:e})=>{let{state:n}=s,{from:c,to:h}=n.selection.main,u=e.prevMatch(n.doc,c,h);return u?(s.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:announceMatch(s,u),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((s,{query:e})=>{let n=e.matchAll(s.state.doc,1e3);return!n||!n.length?!1:(s.dispatch({selection:EditorSelection.create(n.map(c=>EditorSelection.range(c.from,c.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:s,dispatch:e})=>{let n=s.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:c,to:h}=n.main,u=[],d=0;for(let m=new SearchCursor(s.doc,s.sliceDoc(c,h));!m.next().done;){if(u.length>1e3)return!1;m.value.from==c&&(d=u.length),u.push(EditorSelection.range(m.value.from,m.value.to))}return e(s.update({selection:EditorSelection.create(u,d),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((s,{query:e})=>{let{state:n}=s,{from:c,to:h}=n.selection.main;if(n.readOnly)return!1;let u=e.nextMatch(n.doc,c,c);if(!u)return!1;let d=[],m,g,b=[];if(u.from==c&&u.to==h&&(g=n.toText(e.getReplacement(u)),d.push({from:u.from,to:u.to,insert:g}),u=e.nextMatch(n.doc,u.from,u.to),b.push(EditorView.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(c).number)+"."))),u){let O=d.length==0||d[0].from>=u.to?0:u.to-u.from-g.length;m={anchor:u.from-O,head:u.to-O},b.push(announceMatch(s,u))}return s.dispatch({changes:d,selection:m,scrollIntoView:!!m,effects:b,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((s,{query:e})=>{if(s.state.readOnly)return!1;let n=e.matchAll(s.state.doc,1e9).map(h=>{let{from:u,to:d}=h;return{from:u,to:d,insert:e.getReplacement(h)}});if(!n.length)return!1;let c=s.state.phrase("replaced $ matches",n.length)+".";return s.dispatch({changes:n,effects:EditorView.announce.of(c),userEvent:"input.replace.all"}),!0});function createSearchPanel(s){return s.state.facet(searchConfigFacet).createPanel(s)}function defaultQuery(s,e){var n;let c=s.selection.main,h=c.empty||c.to>c.from+100?"":s.sliceDoc(c.from,c.to),u=(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:s.facet(searchConfigFacet).caseSensitive;return e&&!h?e:new SearchQuery({search:h.replace(/\n/g,"\\n"),caseSensitive:u})}const openSearchPanel=s=>{let e=s.state.field(searchState,!1);if(e&&e.panel){let n=getPanel(s,createSearchPanel);if(!n)return!1;let c=n.dom.querySelector("[main-field]");if(c&&c!=s.root.activeElement){let h=defaultQuery(s.state,e.query.spec);h.valid&&s.dispatch({effects:setSearchQuery.of(h)}),c.focus(),c.select()}}else s.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(s.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=s=>{let e=s.state.field(searchState,!1);if(!e||!e.panel)return!1;let n=getPanel(s,createSearchPanel);return n&&n.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let n=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:n.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:n.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",checked:n.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",checked:n.regexp,onchange:this.commit});function c(h,u,d){return crelt("button",{class:"cm-button",name:h,onclick:u,type:"button"},d)}this.dom=crelt("div",{onkeydown:h=>this.keydown(h),class:"cm-search"},[this.searchField,c("next",()=>findNext(e),[phrase(e,"next")]),c("prev",()=>findPrevious(e),[phrase(e,"previous")]),c("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,c("replace",()=>replaceNext(e),[phrase(e,"replace")]),c("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")]),crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let n of e.transactions)for(let c of n.effects)c.is(setSearchQuery)&&!c.value.eq(this.query)&&this.setQuery(c.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(s,e){return s.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(s,{from:e,to:n}){let c=s.state.doc.lineAt(e),h=s.state.doc.lineAt(n).to,u=Math.max(c.from,e-AnnounceMargin),d=Math.min(h,n+AnnounceMargin),m=s.state.sliceDoc(u,d);if(u!=c.from){for(let g=0;g<AnnounceMargin;g++)if(!Break.test(m[g+1])&&Break.test(m[g])){m=m.slice(g);break}}if(d!=h){for(let g=m.length-1;g>m.length-AnnounceMargin;g--)if(!Break.test(m[g-1])&&Break.test(m[g])){m=m.slice(0,g);break}}return EditorView.announce.of(`${s.state.phrase("current match")}. ${m} ${s.state.phrase("on line")} ${c.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class CompletionContext{constructor(e,n,c){this.state=e,this.pos=n,this.explicit=c,this.abortListeners=[]}tokenBefore(e){let n=syntaxTree(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),c=Math.max(n.from,this.pos-250),h=n.text.slice(c-n.from,this.pos-n.from),u=h.search(ensureAnchor(e,!1));return u<0?null:{from:c+u,to:this.pos,text:h.slice(u)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function toSet(s){let e=Object.keys(s).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(s){let e=Object.create(null),n=Object.create(null);for(let{label:h}of s){e[h[0]]=!0;for(let u=1;u<h.length;u++)n[h[u]]=!0}let c=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+c),new RegExp(c)]}function completeFromList(s){let e=s.map(h=>typeof h=="string"?{label:h}:h),[n,c]=e.every(h=>/^\w+$/.test(h.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return h=>{let u=h.matchBefore(c);return u||h.explicit?{from:u?u.from:h.pos,options:e,validFor:n}:null}}function ifNotIn(s,e){return n=>{for(let c=syntaxTree(n.state).resolveInner(n.pos,-1);c;c=c.parent)if(s.indexOf(c.name)>-1)return null;return e(n)}}class Option{constructor(e,n,c){this.completion=e,this.source=n,this.match=c}}function cur(s){return s.selection.main.head}function ensureAnchor(s,e){var n;let{source:c}=s,h=e&&c[0]!="^",u=c[c.length-1]!="$";return!h&&!u?s:new RegExp(`${h?"^":""}(?:${c})${u?"$":""}`,(n=s.flags)!==null&&n!==void 0?n:s.ignoreCase?"i":"")}function insertCompletionText(s,e,n,c){return Object.assign(Object.assign({},s.changeByRange(h=>{if(h==s.selection.main)return{changes:{from:n,to:c,insert:e},range:EditorSelection.cursor(n+e.length)};let u=c-n;return!h.empty||u&&s.sliceDoc(h.from-u,h.from)!=s.sliceDoc(n,c)?{range:h}:{changes:{from:h.from-u,to:h.from,insert:e},range:EditorSelection.cursor(h.from-u+e.length)}})),{userEvent:"input.complete"})}function applyCompletion(s,e){const n=e.completion.apply||e.completion.label;let c=e.source;typeof n=="string"?s.dispatch(insertCompletionText(s.state,n,c.from,c.to)):n(s,e.completion,c.from,c.to)}const SourceCache=new WeakMap;function asSource(s){if(!Array.isArray(s))return s;let e=SourceCache.get(s);return e||SourceCache.set(s,e=completeFromList(s)),e}class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let c=codePointAt(e,n),h=codePointSize(c);this.chars.push(c);let u=e.slice(n,n+h),d=u.toUpperCase();this.folded.push(codePointAt(d==u?u.toLowerCase():d,0)),n+=h}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:n,folded:c,any:h,precise:u,byWord:d}=this;if(n.length==1){let I=codePointAt(e,0);return I==n[0]?[0,0,codePointSize(I)]:I==c[0]?[-200,0,codePointSize(I)]:null}let m=e.indexOf(this.pattern);if(m==0)return[0,0,this.pattern.length];let g=n.length,b=0;if(m<0){for(let I=0,U=Math.min(e.length,200);I<U&&b<g;){let z=codePointAt(e,I);(z==n[b]||z==c[b])&&(h[b++]=I),I+=codePointSize(z)}if(b<g)return null}let O=0,v=0,y=!1,w=0,S=-1,A=-1,E=/[a-z]/.test(e),P=!0;for(let I=0,U=Math.min(e.length,200),z=0;I<U&&v<g;){let N=codePointAt(e,I);m<0&&(O<g&&N==n[O]&&(u[O++]=I),w<g&&(N==n[w]||N==c[w]?(w==0&&(S=I),A=I+1,w++):w=0));let R,F=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(R=fromCodePoint(N))!=R.toLowerCase()?1:R!=R.toUpperCase()?2:0;(!I||F==1&&E||z==0&&F!=0)&&(n[v]==N||c[v]==N&&(y=!0)?d[v++]=I:d.length&&(P=!1)),z=F,I+=codePointSize(N)}return v==g&&d[0]==0&&P?this.result(-100+(y?-200:0),d,e):w==g&&S==0?[-200-e.length,0,A]:m>-1?[-700-e.length,m,m+this.pattern.length]:w==g?[-200+-700-e.length,S,A]:v==g?this.result(-100+(y?-200:0)+-700+(P?0:-1100),d,e):n.length==2?null:this.result((h[0]?-700:0)+-200+-1100,h,e)}result(e,n,c){let h=[e-c.length],u=1;for(let d of n){let m=d+(this.astral?codePointSize(codePointAt(c,d)):1);u>1&&h[u-1]==d?h[u-1]=m:(h[u++]=d,h[u++]=m)}return h}}const completionConfig=Facet.define({combine(s){return combineConfig(s,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,optionClass:(e,n)=>c=>joinClass(e(c),n(c)),addToOptions:(e,n)=>e.concat(n)})}});function joinClass(s,e){return s?e?s+" "+e:s:e}function optionContent(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(n){let c=document.createElement("div");return c.classList.add("cm-completionIcon"),n.type&&c.classList.add(...n.type.split(/\s+/g).map(h=>"cm-completionIcon-"+h)),c.setAttribute("aria-hidden","true"),c},position:20}),e.push({render(n,c,h){let u=document.createElement("span");u.className="cm-completionLabel";let{label:d}=n,m=0;for(let g=1;g<h.length;){let b=h[g++],O=h[g++];b>m&&u.appendChild(document.createTextNode(d.slice(m,b)));let v=u.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(d.slice(b,O))),v.className="cm-completionMatchedText",m=O}return m<d.length&&u.appendChild(document.createTextNode(d.slice(m))),u},position:50},{render(n){if(!n.detail)return null;let c=document.createElement("span");return c.className="cm-completionDetail",c.textContent=n.detail,c},position:80}),e.sort((n,c)=>n.position-c.position).map(n=>n.render)}function rangeAroundSelected(s,e,n){if(s<=n)return{from:0,to:s};if(e<=s>>1){let h=Math.floor(e/n);return{from:h*n,to:(h+1)*n}}let c=Math.floor((s-e)/n);return{from:s-(c+1)*n,to:s-c*n}}class CompletionTooltip{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:m=>this.positionInfo(m),key:this};let c=e.state.field(n),{options:h,selected:u}=c.open,d=e.state.facet(completionConfig);this.optionContent=optionContent(d),this.optionClass=d.optionClass,this.range=rangeAroundSelected(h.length,u,d.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",m=>{for(let g=m.target,b;g&&g!=this.dom;g=g.parentNode)if(g.nodeName=="LI"&&(b=/-(\d+)$/.exec(g.id))&&+b[1]<h.length){applyCompletion(e,h[+b[1]]),m.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(h,c.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=rangeAroundSelected(n.options.length,n.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:c}=n.options[n.selected],{info:h}=c;if(!h)return;let u=typeof h=="string"?document.createTextNode(h):h(c);if(!u)return;"then"in u?u.then(d=>{d&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(d)}).catch(d=>logException(this.view.state,d,"completion info")):this.addInfoPane(u)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let n=null;for(let c=this.list.firstChild,h=this.range.from;c;c=c.nextSibling,h++)h==e?c.hasAttribute("aria-selected")||(c.setAttribute("aria-selected","true"),n=c):c.hasAttribute("aria-selected")&&c.removeAttribute("aria-selected");return n&&scrollIntoView(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),c=this.info.getBoundingClientRect(),h=e.getBoundingClientRect();if(h.top>Math.min(innerHeight,n.bottom)-10||h.bottom<Math.max(0,n.top)+10)return null;let u=Math.max(0,Math.min(h.top,innerHeight-c.height))-n.top,d=this.view.textDirection==Direction.RTL,m=n.left,g=innerWidth-n.right;return d&&m<Math.min(c.width,g)?d=!1:!d&&g<Math.min(c.width,m)&&(d=!0),{top:u,left:d}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,n,c){const h=document.createElement("ul");h.id=n,h.setAttribute("role","listbox"),h.setAttribute("aria-expanded","true"),h.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let u=c.from;u<c.to;u++){let{completion:d,match:m}=e[u];const g=h.appendChild(document.createElement("li"));g.id=n+"-"+u,g.setAttribute("role","option");let b=this.optionClass(d);b&&(g.className=b);for(let O of this.optionContent){let v=O(d,this.view.state,m);v&&g.appendChild(v)}}return c.from&&h.classList.add("cm-completionListIncompleteTop"),c.to<e.length&&h.classList.add("cm-completionListIncompleteBottom"),h}}function completionTooltip(s){return e=>new CompletionTooltip(e,s)}function scrollIntoView(s,e){let n=s.getBoundingClientRect(),c=e.getBoundingClientRect();c.top<n.top?s.scrollTop-=n.top-c.top:c.bottom>n.bottom&&(s.scrollTop+=c.bottom-n.bottom)}function score(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function sortOptions(s,e){let n=[],c=0;for(let d of s)if(d.hasResult())if(d.result.filter===!1){let m=d.result.getMatch;for(let g of d.result.options){let b=[1e9-c++];if(m)for(let O of m(g))b.push(O);n.push(new Option(g,d,b))}}else{let m=new FuzzyMatcher(e.sliceDoc(d.from,d.to)),g;for(let b of d.result.options)(g=m.match(b.label))&&(b.boost!=null&&(g[0]+=b.boost),n.push(new Option(b,d,g)))}let h=[],u=null;for(let d of n.sort(cmpOption))!u||u.label!=d.completion.label||u.detail!=d.completion.detail||u.type!=null&&d.completion.type!=null&&u.type!=d.completion.type||u.apply!=d.completion.apply?h.push(d):score(d.completion)>score(u)&&(h[h.length-1]=d),u=d.completion;return h}class CompletionDialog{constructor(e,n,c,h,u){this.options=e,this.attrs=n,this.tooltip=c,this.timestamp=h,this.selected=u}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(n,e),this.tooltip,this.timestamp,e)}static build(e,n,c,h,u){let d=sortOptions(e,n);if(!d.length)return null;let m=0;if(h&&h.selected){let g=h.options[h.selected].completion;for(let b=0;b<d.length;b++)if(d[b].completion==g){m=b;break}}return new CompletionDialog(d,makeAttrs(c,m),{pos:e.reduce((g,b)=>b.hasResult()?Math.min(g,b.from):g,1e8),create:completionTooltip(completionState),above:u.aboveCursor},h?h.timestamp:Date.now(),m)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class CompletionState{constructor(e,n,c){this.active=e,this.id=n,this.open=c}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,c=n.facet(completionConfig),u=(c.override||n.languageDataAt("autocomplete",cur(n)).map(asSource)).map(m=>(this.active.find(b=>b.source==m)||new ActiveSource(m,this.active.some(b=>b.state!=0)?1:0)).update(e,c));u.length==this.active.length&&u.every((m,g)=>m==this.active[g])&&(u=this.active);let d=e.selection||u.some(m=>m.hasResult()&&e.changes.touchesRange(m.from,m.to))||!sameResults(u,this.active)?CompletionDialog.build(u,n,this.id,this.open,c):this.open&&e.docChanged?this.open.map(e.changes):this.open;!d&&u.every(m=>m.state!=1)&&u.some(m=>m.hasResult())&&(u=u.map(m=>m.hasResult()?new ActiveSource(m.source,0):m));for(let m of e.effects)m.is(setSelectedEffect)&&(d=d&&d.setSelected(m.value,this.id));return u==this.active&&d==this.open?this:new CompletionState(u,this.id,d)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(s,e){if(s==e)return!0;for(let n=0,c=0;;){for(;n<s.length&&!s[n].hasResult;)n++;for(;c<e.length&&!e[c].hasResult;)c++;let h=n==s.length,u=c==e.length;if(h||u)return h==u;if(s[n++].result!=e[c++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(s,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":s+"-"+e,"aria-controls":s}}const none=[];function cmpOption(s,e){let n=e.match[0]-s.match[0];return n||s.completion.label.localeCompare(e.completion.label)}function getUserEvent(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,n,c=-1){this.source=e,this.state=n,this.explicitPos=c}hasResult(){return!1}update(e,n){let c=getUserEvent(e),h=this;c?h=h.handleUserEvent(e,c,n):e.docChanged?h=h.handleChange(e):e.selection&&h.state!=0&&(h=new ActiveSource(h.source,0));for(let u of e.effects)if(u.is(startCompletionEffect))h=new ActiveSource(h.source,1,u.value?cur(e.state):-1);else if(u.is(closeCompletionEffect))h=new ActiveSource(h.source,0);else if(u.is(setActiveEffect))for(let d of u.value)d.source==h.source&&(h=d);return h}handleUserEvent(e,n,c){return n=="delete"||!c.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,n,c,h,u){super(e,2,n),this.result=c,this.from=h,this.to=u}hasResult(){return!0}handleUserEvent(e,n,c){var h;let u=e.changes.mapPos(this.from),d=e.changes.mapPos(this.to,1),m=cur(e.state);if((this.explicitPos<0?m<=u:m<this.from)||m>d||n=="delete"&&cur(e.startState)==this.from)return new ActiveSource(this.source,n=="input"&&c.activateOnTyping?1:0);let g=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),b;return checkValid(this.result.validFor,e.state,u,d)?new ActiveResult(this.source,g,this.result,u,d):this.result.update&&(b=this.result.update(this.result,u,d,new CompletionContext(e.state,m,g>=0)))?new ActiveResult(this.source,g,b,b.from,(h=b.to)!==null&&h!==void 0?h:cur(e.state)):new ActiveSource(this.source,1,g)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(s,e,n,c){if(!s)return!1;let h=e.sliceDoc(n,c);return typeof s=="function"?s(h,n,c,e):ensureAnchor(s,!0).test(h)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map(s,e){return s.map(n=>n.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(s,e){return s.update(e)},provide:s=>[showTooltip.from(s,e=>e.tooltip),EditorView.contentAttributes.from(s,e=>e.attrs)]}),CompletionInteractMargin=75;function moveCompletionSelection(s,e="option"){return n=>{let c=n.state.field(completionState,!1);if(!c||!c.open||Date.now()-c.open.timestamp<CompletionInteractMargin)return!1;let h=1,u;e=="page"&&(u=getTooltip(n,c.open.tooltip))&&(h=Math.max(2,Math.floor(u.dom.offsetHeight/u.dom.querySelector("li").offsetHeight)-1));let d=c.open.selected+h*(s?1:-1),{length:m}=c.open.options;return d<0?d=e=="page"?0:m-1:d>=m&&(d=e=="page"?m-1:0),n.dispatch({effects:setSelectedEffect.of(d)}),!0}}const acceptCompletion=s=>{let e=s.state.field(completionState,!1);return s.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<CompletionInteractMargin?!1:(applyCompletion(s,e.open.options[e.open.selected]),!0)},startCompletion=s=>s.state.field(completionState,!1)?(s.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=s=>{let e=s.state.field(completionState,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(s.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(completionState).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(completionState);if(!s.selectionSet&&!s.docChanged&&s.startState.field(completionState)==e)return;let n=s.transactions.some(c=>(c.selection||c.docChanged)&&!getUserEvent(c));for(let c=0;c<this.running.length;c++){let h=this.running[c];if(n||h.updates.length+s.transactions.length>MaxUpdateCount&&Date.now()-h.time>MinAbortTime){for(let u of h.context.abortListeners)try{u()}catch(d){logException(this.view.state,d)}h.context.abortListeners=null,this.running.splice(c--,1)}else h.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(c=>c.state==1&&!this.running.some(h=>h.active.source==c.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let c of s.transactions)getUserEvent(c)=="input"?this.composing=2:this.composing==2&&c.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(completionState);for(let n of e.active)n.state==1&&!this.running.some(c=>c.active.source==n.source)&&this.startQuery(n)}startQuery(s){let{state:e}=this.view,n=cur(e),c=new CompletionContext(e,n,s.explicitPos==n),h=new RunningQuery(s,c);this.running.push(h),Promise.resolve(s.source(c)).then(u=>{h.context.aborted||(h.done=u||null,this.scheduleAccept())},u=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,u)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(completionConfig);for(let c=0;c<this.running.length;c++){let h=this.running[c];if(h.done===void 0)continue;if(this.running.splice(c--,1),h.done){let d=new ActiveResult(h.active.source,h.active.explicitPos,h.done,h.done.from,(s=h.done.to)!==null&&s!==void 0?s:cur(h.updates.length?h.updates[0].startState:this.view.state));for(let m of h.updates)d=d.update(m,n);if(d.hasResult()){e.push(d);continue}}let u=this.view.state.field(completionState).active.find(d=>d.source==h.active.source);if(u&&u.state==1)if(h.done==null){let d=new ActiveSource(h.active.source,0);for(let m of h.updates)d=d.update(m,n);d.state!=1&&e.push(d)}else this.startQuery(u)}e.length&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(){let s=this.view.state.field(completionState,!1);s&&s.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,n,c,h){this.field=e,this.line=n,this.from=c,this.to=h}}class FieldRange{constructor(e,n,c){this.field=e,this.from=n,this.to=c}map(e){let n=e.mapPos(this.from,-1,MapMode.TrackDel),c=e.mapPos(this.to,1,MapMode.TrackDel);return n==null||c==null?null:new FieldRange(this.field,n,c)}}class Snippet{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let c=[],h=[n],u=e.doc.lineAt(n),d=/^\s*/.exec(u.text)[0];for(let g of this.lines){if(c.length){let b=d,O=/^\t*/.exec(g)[0].length;for(let v=0;v<O;v++)b+=e.facet(indentUnit);h.push(n+b.length-O),g=b+g.slice(O)}c.push(g),n+=g.length+1}let m=this.fieldPositions.map(g=>new FieldRange(g.field,h[g.line]+g.from,h[g.line]+g.to));return{text:c,ranges:m}}static parse(e){let n=[],c=[],h=[],u;for(let d of e.split(/\r\n?|\n/)){for(;u=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(d);){let m=u[1]?+u[1]:null,g=u[2]||u[3]||"",b=-1;for(let O=0;O<n.length;O++)(m!=null?n[O].seq==m:g?n[O].name==g:!1)&&(b=O);if(b<0){let O=0;for(;O<n.length&&(m==null||n[O].seq!=null&&n[O].seq<m);)O++;n.splice(O,0,{seq:m,name:g}),b=O;for(let v of h)v.field>=b&&v.field++}h.push(new FieldPos(b,c.length,u.index,u.index+g.length)),d=d.slice(0,u.index)+g+d.slice(u.index+u[0].length)}for(let m;m=/([$#])\\{/.exec(d);){d=d.slice(0,m.index)+m[1]+"{"+d.slice(m.index+m[0].length);for(let g of h)g.line==c.length&&g.from>m.index&&(g.from--,g.to--)}c.push(d)}return new Snippet(c,h)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,n){this.ranges=e,this.active=n,this.deco=Decoration.set(e.map(c=>(c.from==c.to?fieldMarker:fieldRange).range(c.from,c.to)))}map(e){let n=[];for(let c of this.ranges){let h=c.map(e);if(!h)return null;n.push(h)}return new ActiveSnippet(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(c=>c.field==this.active&&c.from<=n.from&&c.to>=n.to))}}const setActive=StateEffect.define({map(s,e){return s&&s.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(s,e){for(let n of e.effects){if(n.is(setActive))return n.value;if(n.is(moveToField)&&s)return new ActiveSnippet(s.ranges,n.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>EditorView.decorations.from(s,e=>e?e.deco:Decoration.none)});function fieldSelection(s,e){return EditorSelection.create(s.filter(n=>n.field==e).map(n=>EditorSelection.range(n.from,n.to)))}function snippet(s){let e=Snippet.parse(s);return(n,c,h,u)=>{let{text:d,ranges:m}=e.instantiate(n.state,h),g={changes:{from:h,to:u,insert:Text.of(d)},scrollIntoView:!0};if(m.length&&(g.selection=fieldSelection(m,0)),m.length>1){let b=new ActiveSnippet(m,0),O=g.effects=[setActive.of(b)];n.state.field(snippetState,!1)===void 0&&O.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}n.dispatch(n.state.update(g))}}function moveField(s){return({state:e,dispatch:n})=>{let c=e.field(snippetState,!1);if(!c||s<0&&c.active==0)return!1;let h=c.active+s,u=s>0&&!c.ranges.some(d=>d.field==h+s);return n(e.update({selection:fieldSelection(c.ranges,h),effects:setActive.of(u?null:new ActiveSnippet(c.ranges,h))})),!0}}const clearSnippet=({state:s,dispatch:e})=>s.field(snippetState,!1)?(e(s.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(s){return s.length?s[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],s=>s.facet(snippetKeymap)));function snippetCompletion(s,e){return Object.assign(Object.assign({},e),{apply:snippet(s)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(s,e){let n=e.state.field(snippetState,!1),c;if(!n||(c=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let h=n.ranges.find(u=>u.from<=c&&u.to>=c);return!h||h.field==n.active?!1:(e.dispatch({selection:fieldSelection(n.ranges,h.field),effects:setActive.of(n.ranges.some(u=>u.field>h.field)?new ActiveSnippet(n.ranges,h.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>"},closeBracketEffect=StateEffect.define({map(s,e){let n=e.mapPos(s,-1,MapMode.TrackAfter);return n==null?void 0:n}}),skipBracketEffect=StateEffect.define({map(s,e){return e.mapPos(s)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(s,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,c=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(c,-1)&&(s=RangeSet.empty)}s=s.map(e.changes);for(let n of e.effects)n.is(closeBracketEffect)?s=s.update({add:[closedBracket.range(n.value,n.value+1)]}):n.is(skipBracketEffect)&&(s=s.update({filter:c=>c!=n.value}));return s}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(s){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==s)return definedClosing.charAt(e+1);return fromCodePoint(s<128?s:s+1)}function config$1(s,e){return s.languageDataAt("closeBrackets",e)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((s,e,n,c)=>{if((android$1?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let h=s.state.selection.main;if(c.length>2||c.length==2&&codePointSize(codePointAt(c,0))==1||e!=h.from||n!=h.to)return!1;let u=insertBracket(s.state,c);return u?(s.dispatch(u),!0):!1}),deleteBracketPair=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let c=config$1(s,s.selection.main.head).brackets||defaults.brackets,h=null,u=s.changeByRange(d=>{if(d.empty){let m=prevChar(s.doc,d.head);for(let g of c)if(g==m&&nextChar(s.doc,d.head)==closing(codePointAt(g,0)))return{changes:{from:d.head-g.length,to:d.head+g.length},range:EditorSelection.cursor(d.head-g.length),userEvent:"delete.backward"}}return{range:h=d}});return h||e(s.update(u,{scrollIntoView:!0})),!h},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(s,e){let n=config$1(s,s.selection.main.head),c=n.brackets||defaults.brackets;for(let h of c){let u=closing(codePointAt(h,0));if(e==h)return u==h?handleSame(s,h,c.indexOf(h+h+h)>-1):handleOpen(s,h,u,n.before||defaults.before);if(e==u&&closedBracketAt(s,s.selection.main.from))return handleClose(s,h,u)}return null}function closedBracketAt(s,e){let n=!1;return s.field(bracketState).between(0,s.doc.length,c=>{c==e&&(n=!0)}),n}function nextChar(s,e){let n=s.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function prevChar(s,e){let n=s.sliceString(e-2,e);return codePointSize(codePointAt(n,0))==n.length?n:n.slice(1)}function handleOpen(s,e,n,c){let h=null,u=s.changeByRange(d=>{if(!d.empty)return{changes:[{insert:e,from:d.from},{insert:n,from:d.to}],effects:closeBracketEffect.of(d.to+e.length),range:EditorSelection.range(d.anchor+e.length,d.head+e.length)};let m=nextChar(s.doc,d.head);return!m||/\s/.test(m)||c.indexOf(m)>-1?{changes:{insert:e+n,from:d.head},effects:closeBracketEffect.of(d.head+e.length),range:EditorSelection.cursor(d.head+e.length)}:{range:h=d}});return h?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(s,e,n){let c=null,h=s.selection.ranges.map(u=>u.empty&&nextChar(s.doc,u.head)==n?EditorSelection.cursor(u.head+n.length):c=u);return c?null:s.update({selection:EditorSelection.create(h,s.selection.mainIndex),scrollIntoView:!0,effects:s.selection.ranges.map(({from:u})=>skipBracketEffect.of(u))})}function handleSame(s,e,n){let c=null,h=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:closeBracketEffect.of(u.to+e.length),range:EditorSelection.range(u.anchor+e.length,u.head+e.length)};let d=u.head,m=nextChar(s.doc,d);if(m==e){if(nodeStart(s,d))return{changes:{insert:e+e,from:d},effects:closeBracketEffect.of(d+e.length),range:EditorSelection.cursor(d+e.length)};if(closedBracketAt(s,d)){let g=n&&s.sliceDoc(d,d+e.length*3)==e+e+e;return{range:EditorSelection.cursor(d+e.length*(g?3:1)),effects:skipBracketEffect.of(d)}}}else{if(n&&s.sliceDoc(d-2*e.length,d)==e+e&&nodeStart(s,d-2*e.length))return{changes:{insert:e+e+e+e,from:d},effects:closeBracketEffect.of(d+e.length),range:EditorSelection.cursor(d+e.length)};if(s.charCategorizer(d)(m)!=CharCategory.Word){let g=s.sliceDoc(d-1,d);if(g!=e&&s.charCategorizer(d)(g)!=CharCategory.Word&&!probablyInString(s,d,e))return{changes:{insert:e+e,from:d},effects:closeBracketEffect.of(d+e.length),range:EditorSelection.cursor(d+e.length)}}}return{range:c=u}});return c?null:s.update(h,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(s,e){let n=syntaxTree(s).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(s,e,n){let c=syntaxTree(s).resolveInner(e,-1);for(let h=0;h<5;h++){if(s.sliceDoc(c.from,c.from+n.length)==n){let d=c.firstChild;for(;d&&d.from==c.from&&d.to-d.from>n.length;){if(s.sliceDoc(d.to-n.length,d.to)==n)return!1;d=d.firstChild}return!0}let u=c.to==e&&c.parent;if(!u)break;c=u}return!1}function autocompletion(s={}){return[completionState,completionConfig.of(s),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],s=>s.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(e,n,c){this.from=e,this.to=n,this.diagnostic=c}}class LintState{constructor(e,n,c){this.diagnostics=e,this.panel=n,this.selected=c}static init(e,n,c){let h=e,u=c.facet(lintConfig).markerFilter;u&&(h=u(h));let d=Decoration.set(h.map(m=>m.from==m.to||m.from==m.to-1&&c.doc.lineAt(m.from).to==m.from?Decoration.widget({widget:new DiagnosticWidget(m),diagnostic:m}).range(m.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+m.severity},diagnostic:m}).range(m.from,m.to)),!0);return new LintState(d,n,findDiagnostic(d))}}function findDiagnostic(s,e=null,n=0){let c=null;return s.between(n,1e9,(h,u,{spec:d})=>{if(!(e&&d.diagnostic!=e))return c=new SelectedDiagnostic(h,u,d.diagnostic),!1}),c}function hideTooltip(s,e){return!!(s.effects.some(n=>n.is(setDiagnosticsEffect))||s.changes.touchesRange(e.pos))}function maybeEnableLint(s,e){return s.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],n=>{let{selected:c,panel:h}=n.field(lintState);return!c||!h||c.from==c.to?Decoration.none:Decoration.set([activeMark.range(c.from,c.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(s,e){return{effects:maybeEnableLint(s,[setDiagnosticsEffect.of(e)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(s,e){if(e.docChanged){let n=s.diagnostics.map(e.changes),c=null;if(s.selected){let h=e.changes.mapPos(s.selected.from,1);c=findDiagnostic(n,s.selected.diagnostic,h)||findDiagnostic(n,null,h)}s=new LintState(n,s.panel,c)}for(let n of e.effects)n.is(setDiagnosticsEffect)?s=LintState.init(n.value,s.panel,e.state):n.is(togglePanel)?s=new LintState(s.diagnostics,n.value?LintPanel.open:null,s.selected):n.is(movePanelSelection)&&(s=new LintState(s.diagnostics,s.panel,n.value));return s},provide:s=>[showPanel.from(s,e=>e.panel),EditorView.decorations.from(s,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(s,e,n){let{diagnostics:c}=s.state.field(lintState),h=[],u=2e8,d=0;c.between(e-(n<0?1:0),e+(n>0?1:0),(g,b,{spec:O})=>{e>=g&&e<=b&&(g==b||(e>g||n>0)&&(e<b||n<0))&&(h.push(O.diagnostic),u=Math.min(g,u),d=Math.max(b,d))});let m=s.state.facet(lintConfig).tooltipFilter;return m&&(h=m(h)),h.length?{pos:u,end:d,above:s.state.doc.lineAt(u).to<d,create(){return{dom:diagnosticsTooltip(s,h)}}}:null}function diagnosticsTooltip(s,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(n=>renderDiagnostic(s,n,!1)))}const openLintPanel=s=>{let e=s.state.field(lintState,!1);(!e||!e.panel)&&s.dispatch({effects:maybeEnableLint(s.state,[togglePanel.of(!0)])});let n=getPanel(s,LintPanel.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=s=>{let e=s.state.field(lintState,!1);return!e||!e.panel?!1:(s.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=s=>{let e=s.state.field(lintState,!1);if(!e)return!1;let n=s.state.selection.main,c=e.diagnostics.iter(n.to+1);return!c.value&&(c=e.diagnostics.iter(0),!c.value||c.from==n.from&&c.to==n.to)?!1:(s.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.timeout=-1,this.set=!0;let{delay:e}=s.state.facet(lintConfig);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let s=Date.now();if(s<this.lintTime-10)setTimeout(this.run,this.lintTime-s);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(lintConfig);Promise.all(n.map(c=>Promise.resolve(c(this.view)))).then(c=>{let h=c.reduce((u,d)=>u.concat(d));this.view.state.doc==e.doc&&this.view.dispatch(setDiagnostics(this.view.state,h))},c=>{logException(this.view.state,c)})}}update(s){let e=s.state.facet(lintConfig);(s.docChanged||e!=s.startState.facet(lintConfig))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},combineConfig(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:lintPlugin});function linter(s,e={}){return lintConfig.of({source:s,config:e})}function assignKeys(s){let e=[];if(s)e:for(let{name:n}of s){for(let c=0;c<n.length;c++){let h=n[c];if(/[a-zA-Z]/.test(h)&&!e.some(u=>u.toLowerCase()==h.toLowerCase())){e.push(h);continue e}}e.push("")}return e}function renderDiagnostic(s,e,n){var c;let h=n?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(c=e.actions)===null||c===void 0?void 0:c.map((u,d)=>{let m=v=>{v.preventDefault();let y=findDiagnostic(s.state.field(lintState).diagnostics,e);y&&u.apply(s,y.from,y.to)},{name:g}=u,b=h[d]?g.indexOf(h[d]):-1,O=b<0?g:[g.slice(0,b),crelt("u",g.slice(b,b+1)),g.slice(b+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:m,onmousedown:m,"aria-label":` Action: ${g}${b<0?"":` (access key "${h[d]})"`}.`},O)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let n=h=>{if(h.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(h.keyCode==38||h.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(h.keyCode==40||h.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(h.keyCode==36)this.moveSelection(0);else if(h.keyCode==35)this.moveSelection(this.items.length-1);else if(h.keyCode==13)this.view.focus();else if(h.keyCode>=65&&h.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:u}=this.items[this.selectedIndex],d=assignKeys(u.actions);for(let m=0;m<d.length;m++)if(d[m].toUpperCase().charCodeAt(0)==h.keyCode){let g=findDiagnostic(this.view.state.field(lintState).diagnostics,u);g&&u.actions[m].apply(e,g.from,g.to)}}else return;h.preventDefault()},c=h=>{for(let u=0;u<this.items.length;u++)this.items[u].dom.contains(h.target)&&this.moveSelection(u)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:c}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(lintState),c=0,h=!1,u=null;for(e.between(0,this.view.state.doc.length,(d,m,{spec:g})=>{let b=-1,O;for(let v=c;v<this.items.length;v++)if(this.items[v].diagnostic==g.diagnostic){b=v;break}b<0?(O=new PanelItem(this.view,g.diagnostic),this.items.splice(c,0,O),h=!0):(O=this.items[b],b>c&&(this.items.splice(c,b-c),h=!0)),n&&O.diagnostic==n.diagnostic?O.dom.hasAttribute("aria-selected")||(O.dom.setAttribute("aria-selected","true"),u=O):O.dom.hasAttribute("aria-selected")&&O.dom.removeAttribute("aria-selected"),c++});c<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)h=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),h=!0),u?(this.list.setAttribute("aria-activedescendant",u.id),this.view.requestMeasure({key:this,read:()=>({sel:u.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:d,panel:m})=>{d.top<m.top?this.list.scrollTop-=m.top-d.top:d.bottom>m.bottom&&(this.list.scrollTop+=d.bottom-m.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),h&&this.sync()}sync(){let e=this.list.firstChild;function n(){let c=e;e=c.nextSibling,c.remove()}for(let c of this.items)if(c.dom.parentNode==this.list){for(;e!=c.dom;)n();e=c.dom.nextSibling}else this.list.insertBefore(c.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(lintState),c=findDiagnostic(n.diagnostics,this.items[e].diagnostic);!c||this.view.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0,effects:movePanelSelection.of(c)})}static open(e){return new LintPanel(e)}}function svg(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function underline(s){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class LintGutterMarker extends GutterMarker{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((n,c)=>{let h=c.severity;return h=="error"||h=="warning"&&n=="info"?h:n},"info")}toDOM(e){let n=document.createElement("div");n.className="cm-lint-marker cm-lint-marker-"+this.severity;let c=this.diagnostics,h=e.state.facet(lintGutterConfig).tooltipFilter;return h&&(c=h(c)),c.length&&(n.onmouseover=()=>gutterMarkerMouseOver(e,n,c)),n}}function trackHoverOn(s,e){let n=c=>{let h=e.getBoundingClientRect();if(!(c.clientX>h.left-10&&c.clientX<h.right+10&&c.clientY>h.top-10&&c.clientY<h.bottom+10)){for(let u=c.target;u;u=u.parentNode)if(u.nodeType==1&&u.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),s.state.field(lintGutterTooltip)&&s.dispatch({effects:setLintGutterTooltip.of(null)})}};window.addEventListener("mousemove",n)}function gutterMarkerMouseOver(s,e,n){function c(){let d=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(d.from)&&s.dispatch({effects:setLintGutterTooltip.of({pos:d.from,above:!1,create(){return{dom:diagnosticsTooltip(s,n),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,trackHoverOn(s,e)}let{hoverTime:h}=s.state.facet(lintGutterConfig),u=setTimeout(c,h);e.onmouseout=()=>{clearTimeout(u),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(u),u=setTimeout(c,h)}}function markersForDiagnostics(s,e){let n=Object.create(null);for(let h of e){let u=s.lineAt(h.from);(n[u.from]||(n[u.from]=[])).push(h)}let c=[];for(let h in n)c.push(new LintGutterMarker(n[h]).range(+h));return RangeSet.of(c,!0)}const lintGutterExtension=gutter({class:"cm-gutter-lint",markers:s=>s.state.field(lintGutterMarkers)}),lintGutterMarkers=StateField.define({create(){return RangeSet.empty},update(s,e){s=s.map(e.changes);let n=e.state.facet(lintGutterConfig).markerFilter;for(let c of e.effects)if(c.is(setDiagnosticsEffect)){let h=c.value;n&&(h=n(h||[])),s=markersForDiagnostics(e.state.doc,h.slice(0))}return s}}),setLintGutterTooltip=StateEffect.define(),lintGutterTooltip=StateField.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=hideTooltip(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((n,c)=>c.is(setLintGutterTooltip)?c.value:n,s)},provide:s=>showTooltip.from(s)}),lintGutterTheme=EditorView.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:svg('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:svg('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:svg('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),lintGutterConfig=Facet.define({combine(s){return combineConfig(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function lintGutter(s={}){return[lintGutterConfig.of(s),lintGutterMarkers,lintGutterExtension,lintGutterTheme,lintGutterTooltip]}const flashTheme=EditorView.theme({"@keyframes cm-eval-flash":{from:{backgroundColor:"#FFFFFF"},to:{backgroundColor:"#FFFFFF00"}},"& .cm-evaluated":{animation:"cm-eval-flash 0.7s"}}),toggleComment=s=>{let e=getConfig(s.state);return e.line?toggleLineComment(s):e.block?toggleBlockCommentByLine(s):!1};function command(s,e){return({state:n,dispatch:c})=>{if(n.readOnly)return!1;let h=s(e,n);return h?(c(n.update(h)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((s,e)=>changeBlockComment(s,e,selectedLineRanges(e)),0),commentKeymap=[{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}];function getConfig(s,e=s.selection.main.head){let n=s.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(s,{open:e,close:n},c,h){let u=s.sliceDoc(c-SearchMargin,c),d=s.sliceDoc(h,h+SearchMargin),m=/\s*$/.exec(u)[0].length,g=/^\s*/.exec(d)[0].length,b=u.length-m;if(u.slice(b-e.length,b)==e&&d.slice(g,g+n.length)==n)return{open:{pos:c-m,margin:m&&1},close:{pos:h+g,margin:g&&1}};let O,v;h-c<=2*SearchMargin?O=v=s.sliceDoc(c,h):(O=s.sliceDoc(c,c+SearchMargin),v=s.sliceDoc(h-SearchMargin,h));let y=/^\s*/.exec(O)[0].length,w=/\s*$/.exec(v)[0].length,S=v.length-w-n.length;return O.slice(y,y+e.length)==e&&v.slice(S,S+n.length)==n?{open:{pos:c+y+e.length,margin:/\s/.test(O.charAt(y+e.length))?1:0},close:{pos:h-w-n.length,margin:/\s/.test(v.charAt(S-1))?1:0}}:null}function selectedLineRanges(s){let e=[];for(let n of s.selection.ranges){let c=s.doc.lineAt(n.from),h=n.to<=c.to?c:s.doc.lineAt(n.to),u=e.length-1;u>=0&&e[u].to>c.from?e[u].to=h.to:e.push({from:c.from,to:h.to})}return e}function changeBlockComment(s,e,n=e.selection.ranges){let c=n.map(u=>getConfig(e,u.from).block);if(!c.every(u=>u))return null;let h=n.map((u,d)=>findBlockComment(e,c[d],u.from,u.to));if(s!=2&&!h.every(u=>u))return{changes:e.changes(n.map((u,d)=>h[d]?[]:[{from:u.from,insert:c[d].open+" "},{from:u.to,insert:" "+c[d].close}]))};if(s!=1&&h.some(u=>u)){let u=[];for(let d=0,m;d<h.length;d++)if(m=h[d]){let g=c[d],{open:b,close:O}=m;u.push({from:b.pos-g.open.length,to:b.pos+b.margin},{from:O.pos-O.margin,to:O.pos+g.close.length})}return{changes:u}}return null}function changeLineComment(s,e,n=e.selection.ranges){let c=[],h=-1;for(let{from:u,to:d}of n){let m=c.length,g=1e9;for(let b=u;b<=d;){let O=e.doc.lineAt(b);if(O.from>h&&(u==d||d>O.from)){h=O.from;let v=getConfig(e,b).line;if(!v)continue;let y=/^\s*/.exec(O.text)[0].length,w=y==O.length,S=O.text.slice(y,y+v.length)==v?y:-1;y<O.text.length&&y<g&&(g=y),c.push({line:O,comment:S,token:v,indent:y,empty:w,single:!1})}b=O.to+1}if(g<1e9)for(let b=m;b<c.length;b++)c[b].indent<c[b].line.text.length&&(c[b].indent=g);c.length==m+1&&(c[m].single=!0)}if(s!=2&&c.some(u=>u.comment<0&&(!u.empty||u.single))){let u=[];for(let{line:m,token:g,indent:b,empty:O,single:v}of c)(v||!O)&&u.push({from:m.from+b,insert:g+" "});let d=e.changes(u);return{changes:d,selection:e.selection.map(d,1)}}else if(s!=1&&c.some(u=>u.comment>=0)){let u=[];for(let{line:d,comment:m,token:g}of c)if(m>=0){let b=d.from+m,O=b+g.length;d.text[O-d.from]==" "&&O++,u.push({from:b,to:O})}return{changes:u}}return null}class Stack{constructor(e,n,c,h,u,d,m,g,b,O=0,v){this.p=e,this.stack=n,this.state=c,this.reducePos=h,this.pos=u,this.score=d,this.buffer=m,this.bufferBase=g,this.curContext=b,this.lookAhead=O,this.parent=v}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,c=0){let h=e.parser.context;return new Stack(e,[],n,c,c,0,[],0,h?new StackContext(h,h.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let n=e>>19,c=e&65535,{parser:h}=this.p,u=h.dynamicPrecedence(c);if(u&&(this.score+=u),n==0){this.pushState(h.getGoto(this.state,c,!0),this.reducePos),c<h.minRepeatTerm&&this.storeNode(c,this.reducePos,this.reducePos,4,!0),this.reduceContext(c,this.reducePos);return}let d=this.stack.length-(n-1)*3-(e&262144?6:0),m=this.stack[d-2],g=this.stack[d-1],b=this.bufferBase+this.buffer.length-g;if(c<h.minRepeatTerm||e&131072){let O=h.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(c,m,O,b+4,!0)}if(e&262144)this.state=this.stack[d];else{let O=this.stack[d-3];this.state=h.getGoto(O,c,!0)}for(;this.stack.length>d;)this.stack.pop();this.reduceContext(c,m)}storeNode(e,n,c,h=4,u=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let d=this,m=this.buffer.length;if(m==0&&d.parent&&(m=d.bufferBase-d.parent.bufferBase,d=d.parent),m>0&&d.buffer[m-4]==0&&d.buffer[m-1]>-1){if(n==c)return;if(d.buffer[m-2]>=n){d.buffer[m-2]=c;return}}}if(!u||this.pos==c)this.buffer.push(e,n,c,h);else{let d=this.buffer.length;if(d>0&&this.buffer[d-4]!=0)for(;d>0&&this.buffer[d-2]>c;)this.buffer[d]=this.buffer[d-4],this.buffer[d+1]=this.buffer[d-3],this.buffer[d+2]=this.buffer[d-2],this.buffer[d+3]=this.buffer[d-1],d-=4,h>4&&(h-=4);this.buffer[d]=e,this.buffer[d+1]=n,this.buffer[d+2]=c,this.buffer[d+3]=h}}shift(e,n,c){let h=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let u=e,{parser:d}=this.p;(c>this.pos||n<=d.maxNode)&&(this.pos=c,d.stateFlag(u,1)||(this.reducePos=c)),this.pushState(u,h),this.shiftContext(n,h),n<=d.maxNode&&this.buffer.push(n,h,c,4)}else this.pos=c,this.shiftContext(n,h),n<=this.p.parser.maxNode&&this.buffer.push(n,h,c,4)}apply(e,n,c){e&65536?this.reduce(e):this.shift(e,n,c)}useNode(e,n){let c=this.p.reused.length-1;(c<0||this.p.reused[c]!=e)&&(this.p.reused.push(e),c++);let h=this.pos;this.reducePos=this.pos=h+e.length,this.pushState(n,h),this.buffer.push(c,h,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let c=e.buffer.slice(n),h=e.bufferBase+n;for(;e&&h==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,c,h,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let c=e<=this.p.parser.maxNode;c&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,c?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new SimulatedStack(this);;){let c=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if((c&65536)==0)return!0;if(c==0)return!1;n.reduce(c)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>4<<1||this.stack.length>=120){let h=[];for(let u=0,d;u<n.length;u+=2)(d=n[u+1])!=this.state&&this.p.parser.hasAction(d,e)&&h.push(n[u],d);if(this.stack.length<120)for(let u=0;h.length<4<<1&&u<n.length;u+=2){let d=n[u+1];h.some((m,g)=>g&1&&m==d)||h.push(n[u],d)}n=h}let c=[];for(let h=0;h<n.length&&c.length<4;h+=2){let u=n[h+1];if(u==this.state)continue;let d=this.split();d.pushState(u,this.pos),d.storeNode(0,d.pos,d.pos,4,!0),d.shiftContext(n[h],this.pos),d.score-=200,c.push(d)}return c}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let c=e>>19,h=e&65535,u=this.stack.length-c*3;if(u<0||n.getGoto(this.stack[u],h,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new StackContext(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var Recover;(function(s){s[s.Insert=200]="Insert",s[s.Delete=190]="Delete",s[s.Reduce=100]="Reduce",s[s.MaxNext=4]="MaxNext",s[s.MaxInsertStackDepth=300]="MaxInsertStackDepth",s[s.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Recover||(Recover={}));class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,c=e>>19;c==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(c-1)*3;let h=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=h}}class StackBufferCursor{constructor(e,n,c){this.stack=e,this.pos=n,this.index=c,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let c=this.range,h=this.rangeIndex,u=this.pos+e;for(;u<c.from;){if(!h)return null;let d=this.ranges[--h];u-=c.from-d.to,c=d}for(;n<0?u>c.to:u>=c.to;){if(h==this.ranges.length-1)return null;let d=this.ranges[++h];u+=d.from-c.to,c=d}return u}peek(e){let n=this.chunkOff+e,c,h;if(n>=0&&n<this.chunk.length)c=this.pos+e,h=this.chunk.charCodeAt(n);else{let u=this.resolveOffset(e,1);if(u==null)return-1;if(c=u,c>=this.chunk2Pos&&c<this.chunk2Pos+this.chunk2.length)h=this.chunk2.charCodeAt(c-this.chunk2Pos);else{let d=this.rangeIndex,m=this.range;for(;m.to<=c;)m=this.ranges[++d];this.chunk2=this.input.chunk(this.chunk2Pos=c),c+this.chunk2.length>m.to&&(this.chunk2=this.chunk2.slice(0,m.to-c)),h=this.chunk2.charCodeAt(0)}}return c>=this.token.lookAhead&&(this.token.lookAhead=c+1),h}acceptToken(e,n=0){let c=n?this.resolveOffset(n,-1):this.pos;if(c==null||c<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=c}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let c="";for(let h of this.ranges){if(h.from>=n)break;h.to>e&&(c+=this.input.read(Math.max(h.from,e),Math.min(h.to,n)))}return c}}class TokenGroup{constructor(e,n){this.data=e,this.id=n}token(e,n){readToken(this.data,e,n,this.id)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function readToken(s,e,n,c){let h=0,u=1<<c,{parser:d}=n.p,{dialect:m}=d;e:for(;(u&s[h])!=0;){let g=s[h+1];for(let y=h+3;y<g;y+=2)if((s[y+1]&u)>0){let w=s[y];if(m.allows(w)&&(e.token.value==-1||e.token.value==w||d.overrides(w,e.token.value))){e.acceptToken(w);break}}let b=e.next,O=0,v=s[h+2];if(e.next<0&&v>O&&s[g+v*3-3]==65535){h=s[g+v*3-1];continue e}for(;O<v;){let y=O+v>>1,w=g+y+(y<<1),S=s[w],A=s[w+1];if(b<S)v=y;else if(b>=A)O=y+1;else{h=s[w+2],e.advance();continue e}}break}}function decodeArray(s,e=Uint16Array){if(typeof s!="string")return s;let n=null;for(let c=0,h=0;c<s.length;){let u=0;for(;;){let d=s.charCodeAt(c++),m=!1;if(d==126){u=65535;break}d>=92&&d--,d>=34&&d--;let g=d-32;if(g>=46&&(g-=46,m=!0),u+=g,m)break;u*=46}n?n[h++]=u:n=new e(u)}return n}const verbose=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(s){s[s.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(s,e,n){let c=s.cursor(IterMode.IncludeAnonymous);for(c.moveTo(e);;)if(!(n<0?c.childBefore(e):c.childAfter(e)))for(;;){if((n<0?c.to<e:c.from>e)&&!c.type.isError)return n<0?Math.max(0,Math.min(c.to-1,e-25)):Math.min(s.length,Math.max(c.from+1,e+25));if(n<0?c.prevSibling():c.nextSibling())break;if(!c.parent())return n<0?0:s.length}}class FragmentCursor{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let c=this.trees[n],h=this.index[n];if(h==c.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let u=c.children[h],d=this.start[n]+c.positions[h];if(d>e)return this.nextStart=d,null;if(u instanceof Tree){if(d==e){if(d<this.safeFrom)return null;let m=d+u.length;if(m<=this.safeTo){let g=u.prop(NodeProp.lookAhead);if(!g||m+g<this.fragment.to)return u}}this.index[n]++,d+u.length>=Math.max(this.safeFrom,e)&&(this.trees.push(u),this.start.push(d),this.index.push(0))}else this.index[n]++,this.nextStart=d+u.length}}}class TokenCache{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(c=>new CachedToken)}getActions(e){let n=0,c=null,{parser:h}=e.p,{tokenizers:u}=h,d=h.stateSlot(e.state,3),m=e.curContext?e.curContext.hash:0,g=0;for(let b=0;b<u.length;b++){if((1<<b&d)==0)continue;let O=u[b],v=this.tokens[b];if(!(c&&!O.fallback)&&((O.contextual||v.start!=e.pos||v.mask!=d||v.context!=m)&&(this.updateCachedToken(v,O,e),v.mask=d,v.context=m),v.lookAhead>v.end+25&&(g=Math.max(v.lookAhead,g)),v.value!=0)){let y=n;if(v.extended>-1&&(n=this.addActions(e,v.extended,v.end,n)),n=this.addActions(e,v.value,v.end,n),!O.extend&&(c=v,n>y))break}}for(;this.actions.length>n;)this.actions.pop();return g&&e.setLookAhead(g),!c&&e.pos==this.stream.end&&(c=new CachedToken,c.value=e.p.parser.eofTerm,c.start=c.end=e.pos,n=this.addActions(e,c.value,c.end,n)),this.mainToken=c,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new CachedToken,{pos:c,p:h}=e;return n.start=c,n.end=Math.min(c+1,h.stream.end),n.value=c==h.stream.end?h.parser.eofTerm:0,n}updateCachedToken(e,n,c){if(n.token(this.stream.reset(c.pos,e),c),e.value>-1){let{parser:h}=c.p;for(let u=0;u<h.specialized.length;u++)if(h.specialized[u]==e.value){let d=h.specializers[u](this.stream.read(e.start,e.end),c);if(d>=0&&c.p.parser.dialect.allows(d>>1)){(d&1)==0?e.value=d>>1:e.extended=d>>1;break}}}else e.value=0,e.end=Math.min(c.p.stream.end,c.pos+1)}putAction(e,n,c,h){for(let u=0;u<h;u+=3)if(this.actions[u]==e)return h;return this.actions[h++]=e,this.actions[h++]=n,this.actions[h++]=c,h}addActions(e,n,c,h){let{state:u}=e,{parser:d}=e.p,{data:m}=d;for(let g=0;g<2;g++)for(let b=d.stateSlot(u,g?2:1);;b+=3){if(m[b]==65535)if(m[b+1]==1)b=pair(m,b+2);else{h==0&&m[b+1]==2&&(h=this.putAction(pair(m,b+2),n,c,h));break}m[b]==n&&(h=this.putAction(pair(m,b+1),n,c,h))}return h}}var Rec;(function(s){s[s.Distance=5]="Distance",s[s.MaxRemainingPerStep=3]="MaxRemainingPerStep",s[s.MinBufferLengthPrune=500]="MinBufferLengthPrune",s[s.ForceReduceLimit=10]="ForceReduceLimit",s[s.CutDepth=15e3]="CutDepth",s[s.CutTo=9e3]="CutTo"})(Rec||(Rec={}));class Parse{constructor(e,n,c,h){this.parser=e,this.input=n,this.ranges=h,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new InputStream(n,h),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:u}=h[0];this.stacks=[Stack.start(this,e.top[0],u)],this.fragments=c.length&&this.stream.end-u>e.bufferLength*4?new FragmentCursor(c,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,c=this.stacks=[],h,u;for(let d=0;d<e.length;d++){let m=e[d];for(;;){if(this.tokens.mainToken=null,m.pos>n)c.push(m);else{if(this.advanceStack(m,c,e))continue;{h||(h=[],u=[]),h.push(m);let g=this.tokens.getMainToken(m);u.push(g.value,g.end)}}break}}if(!c.length){let d=h&&findFinished(h);if(d)return this.stackToTree(d);if(this.parser.strict)throw verbose&&h&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&h){let d=this.stoppedAt!=null&&h[0].pos>this.stoppedAt?h[0]:this.runRecovery(h,u,c);if(d)return this.stackToTree(d.forceAll())}if(this.recovering){let d=this.recovering==1?1:this.recovering*3;if(c.length>d)for(c.sort((m,g)=>g.score-m.score);c.length>d;)c.pop();c.some(m=>m.reducePos>n)&&this.recovering--}else if(c.length>1){e:for(let d=0;d<c.length-1;d++){let m=c[d];for(let g=d+1;g<c.length;g++){let b=c[g];if(m.sameState(b)||m.buffer.length>500&&b.buffer.length>500)if((m.score-b.score||m.buffer.length-b.buffer.length)>0)c.splice(g--,1);else{c.splice(d--,1);continue e}}}}this.minStackPos=c[0].pos;for(let d=1;d<c.length;d++)c[d].pos<this.minStackPos&&(this.minStackPos=c[d].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,c){let h=e.pos,{parser:u}=this,d=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&h>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let b=e.curContext&&e.curContext.tracker.strict,O=b?e.curContext.hash:0;for(let v=this.fragments.nodeAt(h);v;){let y=this.parser.nodeSet.types[v.type.id]==v.type?u.getGoto(e.state,v.type.id):-1;if(y>-1&&v.length&&(!b||(v.prop(NodeProp.contextHash)||0)==O))return e.useNode(v,y),verbose&&console.log(d+this.stackID(e)+` (via reuse of ${u.getName(v.type.id)})`),!0;if(!(v instanceof Tree)||v.children.length==0||v.positions[0]>0)break;let w=v.children[0];if(w instanceof Tree&&v.positions[0]==0)v=w;else break}}let m=u.stateSlot(e.state,4);if(m>0)return e.reduce(m),verbose&&console.log(d+this.stackID(e)+` (via always-reduce ${u.getName(m&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let g=this.tokens.getActions(e);for(let b=0;b<g.length;){let O=g[b++],v=g[b++],y=g[b++],w=b==g.length||!c,S=w?e:e.split();if(S.apply(O,v,y),verbose&&console.log(d+this.stackID(S)+` (via ${(O&65536)==0?"shift":`reduce of ${u.getName(O&65535)}`} for ${u.getName(v)} @ ${h}${S==e?"":", split"})`),w)return!0;S.pos>h?n.push(S):c.push(S)}return!1}advanceFully(e,n){let c=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>c)return pushStackDedup(e,n),!0}}runRecovery(e,n,c){let h=null,u=!1;for(let d=0;d<e.length;d++){let m=e[d],g=n[d<<1],b=n[(d<<1)+1],O=verbose?this.stackID(m)+" -> ":"";if(m.deadEnd&&(u||(u=!0,m.restart(),verbose&&console.log(O+this.stackID(m)+" (restarted)"),this.advanceFully(m,c))))continue;let v=m.split(),y=O;for(let w=0;v.forceReduce()&&w<10&&(verbose&&console.log(y+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,c));w++)verbose&&(y=this.stackID(v)+" -> ");for(let w of m.recoverByInsert(g))verbose&&console.log(O+this.stackID(w)+" (via recover-insert)"),this.advanceFully(w,c);this.stream.end>m.pos?(b==m.pos&&(b++,g=0),m.recoverByDelete(g,b),verbose&&console.log(O+this.stackID(m)+` (via recover-delete ${this.parser.getName(g)})`),pushStackDedup(m,c)):(!h||h.score<m.score)&&(h=m)}return h}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(stackIDs||(stackIDs=new WeakMap)).get(e);return n||stackIDs.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function pushStackDedup(s,e){for(let n=0;n<e.length;n++){let c=e[n];if(c.pos==s.pos&&c.sameState(s)){e[n].score<s.score&&(e[n]=s);return}}e.push(s)}class Dialect{constructor(e,n,c){this.source=e,this.flags=n,this.disabled=c}allows(e){return!this.disabled||this.disabled[e]==0}}const id=s=>s;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let m=0;m<e.repeatNodeCount;m++)n.push("");let c=Object.keys(e.topRules).map(m=>e.topRules[m][1]),h=[];for(let m=0;m<n.length;m++)h.push([]);function u(m,g,b){h[m].push([g,g.deserialize(String(b))])}if(e.nodeProps)for(let m of e.nodeProps){let g=m[0];typeof g=="string"&&(g=NodeProp[g]);for(let b=1;b<m.length;){let O=m[b++];if(O>=0)u(O,g,m[b++]);else{let v=m[b+-O];for(let y=-O;y>0;y--)u(m[b++],g,v);b++}}}this.nodeSet=new NodeSet(n.map((m,g)=>NodeType.define({name:g>=this.minRepeatTerm?void 0:m,id:g,props:h[g],top:c.indexOf(g)>-1,error:g==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(g)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let d=decodeArray(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let m=0;m<e.specialized.length;m++)this.specialized[m]=e.specialized[m].term,this.specializers[m]=e.specialized[m].get;this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(m=>typeof m=="number"?new TokenGroup(d,m):m),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,c){let h=new Parse(this,e,n,c);for(let u of this.wrappers)h=u(h,e,n,c);return h}getGoto(e,n,c=!1){let h=this.goto;if(n>=h[0])return-1;for(let u=h[n+1];;){let d=h[u++],m=d&1,g=h[u++];if(m&&c)return g;for(let b=u+(d>>1);u<b;u++)if(h[u]==e)return g;if(m)return-1}}hasAction(e,n){let c=this.data;for(let h=0;h<2;h++)for(let u=this.stateSlot(e,h?2:1),d;;u+=3){if((d=c[u])==65535)if(c[u+1]==1)d=c[u=pair(c,u+2)];else{if(c[u+1]==2)return pair(c,u+2);break}if(d==n||d==0)return pair(c,u+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let c=this.stateSlot(e,1);;c+=3){if(this.data[c]==65535)if(this.data[c+1]==1)c=pair(this.data,c+2);else return!1;if(n==pair(this.data,c+1))return!0}}nextStates(e){let n=[];for(let c=this.stateSlot(e,1);;c+=3){if(this.data[c]==65535)if(this.data[c+1]==1)c=pair(this.data,c+2);else break;if((this.data[c+2]&1)==0){let h=this.data[c+1];n.some((u,d)=>d&1&&u==h)||n.push(this.data[c],h)}}return n}overrides(e,n){let c=findOffset(this.data,this.tokenPrecTable,n);return c<0||findOffset(this.data,this.tokenPrecTable,e)<c}configure(e){let n=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let c=this.topRules[e.top];if(!c)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=c}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(c=>{let h=e.tokenizers.find(u=>u.from==c);return h?h.to:c})),e.specializers&&(n.specializers=this.specializers.map(c=>{let h=e.specializers.find(u=>u.from==c);return h?h.to:c})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),c=n.map(()=>!1);if(e)for(let u of e.split(" ")){let d=n.indexOf(u);d>=0&&(c[d]=!0)}let h=null;for(let u=0;u<n.length;u++)if(!c[u])for(let d=this.dialects[n[u]],m;(m=this.data[d++])!=65535;)(h||(h=new Uint8Array(this.maxTerm+1)))[m]=1;return new Dialect(e,c,h)}static deserialize(e){return new LRParser(e)}}function pair(s,e){return s[e]|s[e+1]<<16}function findOffset(s,e,n){for(let c=e,h;(h=s[c])!=65535;c++)if(h==n)return c-e;return-1}function findFinished(s){let e=null;for(let n of s){let c=n.p.stoppedAt;(n.pos==n.p.stream.end||c!=null&&n.pos>c)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}const TSExtends=1,noSemi=281,incdec=2,incdecPrefix=3,templateContent=282,InterpolationStart=4,templateEnd=283,insertSemi=284,spaces=286,newline=287,LineComment=5,BlockComment=6,Dialect_ts=1,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,braceL=123,semicolon=59,slash=47,star=42,plus=43,minus=45,dollar=36,backtick=96,backslash=92,trackNewline=new ContextTracker({start:!1,shift(s,e){return e==LineComment||e==BlockComment||e==spaces?s:e==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((s,e)=>{let{next:n}=s;(n==braceR||n==-1||e.context)&&e.canShift(insertSemi)&&s.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((s,e)=>{let{next:n}=s,c;space.indexOf(n)>-1||n==slash&&((c=s.peek(1))==slash||c==star)||n!=braceR&&n!=semicolon&&n!=-1&&!e.context&&e.canShift(noSemi)&&s.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((s,e)=>{let{next:n}=s;if((n==plus||n==minus)&&(s.advance(),n==s.next)){s.advance();let c=!e.context&&e.canShift(incdec);s.acceptToken(c?incdec:incdecPrefix)}},{contextual:!0}),template=new ExternalTokenizer(s=>{for(let e=!1,n=0;;n++){let{next:c}=s;if(c<0){n&&s.acceptToken(templateContent);break}else if(c==backtick){n?s.acceptToken(templateContent):s.acceptToken(templateEnd,1);break}else if(c==braceL&&e){n==1?s.acceptToken(InterpolationStart,1):s.acceptToken(templateContent,-1);break}else if(c==10&&n){s.advance(),s.acceptToken(templateContent);break}else c==backslash&&s.advance();e=c==dollar,s.advance()}}),tsExtends=new ExternalTokenizer((s,e)=>{if(!(s.next!=101||!e.dialectEnabled(Dialect_ts))){s.advance();for(let n=0;n<6;n++){if(s.next!="xtends".charCodeAt(n))return;s.advance()}s.next>=57&&s.next<=65||s.next>=48&&s.next<=90||s.next==95||s.next>=97&&s.next<=122||s.next>160||s.acceptToken(TSExtends)}}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),Super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,"Arrow : Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName}),spec_identifier={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},spec_word={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},spec_LessThan={__proto__:null,"<":129},parser=LRParser.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:trackNewline,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[tsExtends,noSemicolon,incdecToken,template,0,1,2,3,4,5,6,7,8,9,insertSemicolon],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:s=>spec_identifier[s]||-1},{term:299,get:s=>spec_word[s]||-1},{term:63,get:s=>spec_LessThan[s]||-1}],tokenPrec:12130}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache$3=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(s){return(e,n)=>{let c=e.node.getChild("VariableDefinition");return c&&n(c,s),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(s,e){s.matchContext(functionContext)||e(s,"variable")},TypeDefinition(s,e){e(s,"type")},__proto__:null};function getScope(s,e){let n=cache$3.get(e);if(n)return n;let c=[],h=!0;function u(d,m){let g=s.sliceString(d.from,d.to);c.push({label:g,type:m})}return e.cursor(IterMode.IncludeAnonymous).iterate(d=>{if(h)h=!1;else if(d.name){let m=gatherCompletions[d.name];if(m&&m(d,u)||ScopeNodes.has(d.name))return!1}else if(d.to-d.from>8192){for(let m of getScope(s,d.node))c.push(m);return!1}}),cache$3.set(e,c),c}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(s){let e=syntaxTree(s.state).resolveInner(s.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let n=e.to-e.from<20&&Identifier.test(s.state.sliceDoc(e.from,e.to));if(!n&&!s.explicit)return null;let c=[];for(let h=e;h;h=h.parent)ScopeNodes.has(h.name)&&(c=c.concat(getScope(s.state.doc,h)));return{options:c,from:n?e.from:s.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:s=>{let e=s.textAfter,n=/^\s*\}/.test(e),c=/^\s*(case|default)\b/.test(e);return s.baseIndent+(n?0:c?1:2)*s.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:s=>s.baseIndent+s.unit,"TemplateString BlockComment":()=>-1,"Statement Property":continuedIndent({except:/^{/}),JSXElement(s){let e=/^\s*<\//.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},JSXEscape(s){let e=/\s*\}/.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},"JSXOpenTag JSXSelfClosingTag"(s){return s.column(s.node.from)+s.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":foldInside,BlockComment(s){return{from:s.from+2,to:s.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),typescriptLanguage=javascriptLanguage.configure({dialect:"ts"}),jsxLanguage=javascriptLanguage.configure({dialect:"jsx"}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts"}),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(s=>({label:s,type:"keyword"}));function javascript$1(s={}){let e=s.jsx?s.typescript?tsxLanguage:jsxLanguage:s.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(e,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),s.jsx?autoCloseTags:[]])}function elementName(s,e,n=s.length){if(!e)return"";let c=e.getChild("JSXIdentifier");return c?s.sliceString(c.from,Math.min(c.to,n)):""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((s,e,n,c)=>{if((android?s.composing:s.compositionStarted)||s.state.readOnly||e!=n||c!=">"&&c!="/"||!javascriptLanguage.isActiveAt(s.state,e,-1))return!1;let{state:h}=s,u=h.changeByRange(d=>{var m,g,b;let{head:O}=d,v=syntaxTree(h).resolveInner(O,-1),y;if(v.name=="JSXStartTag"&&(v=v.parent),c==">"&&v.name=="JSXFragmentTag")return{range:EditorSelection.cursor(O+1),changes:{from:O,insert:"><>"}};if(c==">"&&v.name=="JSXIdentifier"){if(((g=(m=v.parent)===null||m===void 0?void 0:m.lastChild)===null||g===void 0?void 0:g.name)!="JSXEndTag"&&(y=elementName(h.doc,v.parent,O)))return{range:EditorSelection.cursor(O+1),changes:{from:O,insert:`></${y}>`}}}else if(c=="/"&&v.name=="JSXFragmentTag"){let w=v.parent,S=w==null?void 0:w.parent;if(w.from==O-1&&((b=S.lastChild)===null||b===void 0?void 0:b.name)!="JSXEndTag"&&(y=elementName(h.doc,S==null?void 0:S.firstChild,O))){let A=`/${y}>`;return{range:EditorSelection.cursor(O+A.length),changes:{from:O,insert:A}}}}return{range:d}});return u.changes.empty?!1:(s.dispatch(u,{userEvent:"input.type",scrollIntoView:!0}),!0)}),chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:highlightBackground},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)],flashEffect=StateEffect.define();function flashAction(s=()=>{}){return EditorState.transactionExtender.of(e=>{for(let n of e.effects)if(n.is(flashEffect)){let{from:c,to:h}=n.value;s(e.newDoc.sliceString(c,h))}return null})}function flashDecoration(){return ViewPlugin.fromClass(class{constructor(){Zi(this,"decorations",Decoration.none)}update({transactions:e}){for(let n of e)this.decorations=this.decorations.map(n.changes),this.decorations=this.decorations.update({add:n.effects.filter(c=>c.is(flashEffect)&&c.value.from!==c.value.to).map(({value:{from:c,to:h}})=>Decoration.mark({class:"cm-evaluated",time:n.annotation(Transaction.time)}).range(c,h)),sort:!0,filter:(c,h,{spec:{time:u}})=>typeof u=="number"&&u+500>Date.now()})}},{decorations:e=>e.decorations})}function getLine({state:s,dispatch:e}){const n=s.doc.lineAt(s.selection.main.from);e({effects:flashEffect.of(n)});let{from:c,to:h}=n,u=s.doc.sliceString(c,h);return console.log("running get line"),u}function getAll({state:s,view:e,dispatch:n},c=!0){return c&&n({effects:flashEffect.of({from:0,to:s.doc.length})}),s.doc.toString()}function getBlock({state:s,dispatch:e}){let{doc:n,selection:c}=s,{text:h,number:u}=s.doc.lineAt(c.main.from);if(h.trim().length===0)return!0;let d,m;for(d=m=u;d>1&&n.line(d-1).text.trim().length>0;)d-=1;for(;m<n.lines&&n.line(m+1).text.trim().length>0;)m+=1;let{from:g}=n.line(d),{to:b}=n.line(m);return e({effects:flashEffect.of({from:g,to:b})}),h=s.doc.sliceString(g,b),h}function flash(s){return[flashAction(s),flashDecoration()]}var hydraKeys={"Ctrl-Enter":"editor:evalLine","Ctrl-/":"editor:toggleComment","Alt-Enter":"editor:evalBlock","Shift-Ctrl-Enter":"editor:evalAll","Shift-Ctrl-g":"gallery:shareSketch","Shift-Ctrl-f":"editor:formatCode","Shift-Ctrl-d":"editor:formatCode","Shift-Ctrl-l":"gallery:saveToURL","Shift-Ctrl-h":"hideAll","Shift-Ctrl-s":"screencap","Ctrl--":"editor:zoomOut","Ctrl-=":"editor:zoomIn","Ctrl-S":"editor:saveToLocalStorage"},hydraKeymaps=({emit:s})=>Object.entries(hydraKeys).map(([e,n])=>({key:e,run:c=>{console.log("called event",n,c);let h="";n==="editor:evalLine"?h=getLine(c):n==="editor:evalBlock"?h=getBlock(c):n==="editor:evalAll"&&(h=getAll(c)),console.log("emiting",n,h),s(n,h)}}));const hydraSyntaxStyle=HighlightStyle.define([{tag:tags.keyword,color:"white"},{tag:tags.name,color:"pink"},{tag:[tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"white"},{tag:[tags.function(tags.variableName),tags.labelName],color:"white"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#ff0"},{tag:[tags.definition(tags.name),tags.separator],color:"white"}]),hydraEditorTheme=EditorView.theme({"&":{backgroundColor:"transparent",fontSize:"15px",fontFamily:"'Roboto Mono', monospace"},"& .cm-scroller":{fontFamily:"'Roboto Mono', monospace"},"& .cm-line":{maxWidth:"fit-content",background:"hsla(50,23%,5%,0.6)",padding:"0px"},"& .cm-activeLine":{},"& .\u037Co":{color:"white"},"& .cm-tooltip.cm-tooltip-autocomplete > ul":{minWidth:"80px",fontFamily:"'Roboto Mono', monospace"},"&.cm-focused":{outline:"none"},"& .cm-gutters":{background:"none"},"& .cm-tooltip":{background:"rgba(0, 0, 0, 0.5)"},"& .cm-tooltip-autocomplete > ul > li[aria-selected]":{color:"white",backgroundColor:"rgba(255, 0, 0, 0.7)"},".cm-completionInfo":{fontFamily:"'Roboto Mono', monospace",fontStyle:"italic",padding:"1.5px 9px"},".cm-completionIcon":{width:"4px",height:"10px",opacity:1,paddingRight:"0px",marginRight:"6px"},".cm-completionIcon-src":{backgroundColor:"orange"},".cm-completionIcon-coord":{backgroundColor:"yellow"},".cm-completionIcon-color":{backgroundColor:"lightgreen"},".cm-completionIcon-combine":{backgroundColor:"lightblue"},".cm-completionIcon-combineCoord":{backgroundColor:"purple"},".cm-completionIcon-src:after":{content:"\u0192"},".cm-panels":{background:"none"},".cm-panels.cm-panels-bottom":{border:"none"},".cm-diagnostic-info":{border:"none"},".cm-diagnostic-error":{background:"none",color:"red"},".cm-panel.cm-panel-lint ul [aria-selected]":{backgroundColor:"rgba(0, 0, 0, 0)"},".cm-lint-marker-info":{content:"none"},".cm-cursor":{borderLeft:"4px solid white",borderRight:"4px solid black"}}),jsLinter=()=>s=>{const e=s.state.doc;if(window.lintInfo!==void 0&&window.lintInfo.hasBeenShown===!1){const{lineNumber:c,index:h,message:u}=window.lintInfo,d=e.line(c).from;return window.lintInfo.hasBeenShown=!0,[{from:d,message:u,severity:"error",to:d}]}const n=s.state.doc.toString();try{const c=esprima.parseScript(n)}catch(c){const h=e.line(c.lineNumber).from+c.column;return[{from:h-1,message:c.description,severity:"warning",to:h}]}return[{severity:"info",message:"//",from:0,to:0}]};let evalLinter=new Compartment;const setup=({autocompleteOptions:s=[],emit:e=()=>{}})=>[highlightActiveLineGutter(),placeholder("//"),highlightSpecialChars(),history(),lintGutter(),drawSelection(),dropCursor(),EditorView.lineWrapping,flash(),EditorView.domEventHandlers({click:(n,c)=>{},touchstart:(n,c)=>{startCompletion(c)}}),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(hydraSyntaxStyle),syntaxHighlighting(oneDarkHighlightStyle,{fallback:!0}),bracketMatching(),autocompletion({override:[s],closeOnBlur:!1}),closeBrackets(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap,...commentKeymap,...snippetKeymap.default,...hydraKeymaps({emit:e})]),javascript$1(),hydraEditorTheme,flashTheme,oneDark,evalLinter.of(linter(jsLinter()))];var js={exports:{}},src$1={},javascript={exports:{}},beautifier$2={},output={};function OutputLine(s){this.__parent=s,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}OutputLine.prototype.clone_empty=function(){var s=new OutputLine(this.__parent);return s.set_indent(this.__indent_count,this.__alignment_count),s};OutputLine.prototype.item=function(s){return s<0?this.__items[this.__items.length+s]:this.__items[s]};OutputLine.prototype.has_match=function(s){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(s))return!0;return!1};OutputLine.prototype.set_indent=function(s,e){this.is_empty()&&(this.__indent_count=s||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};OutputLine.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};OutputLine.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};OutputLine.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var s=this.__parent.current_line;return s.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),s.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),s.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,s.__items[0]===" "&&(s.__items.splice(0,1),s.__character_count-=1),!0}return!1};OutputLine.prototype.is_empty=function(){return this.__items.length===0};OutputLine.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};OutputLine.prototype.push=function(s){this.__items.push(s);var e=s.lastIndexOf(`
`);e!==-1?this.__character_count=s.length-e:this.__character_count+=s.length};OutputLine.prototype.pop=function(){var s=null;return this.is_empty()||(s=this.__items.pop(),this.__character_count-=s.length),s};OutputLine.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};OutputLine.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};OutputLine.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};OutputLine.prototype.toString=function(){var s="";return this.is_empty()?this.__parent.indent_empty_lines&&(s=this.__parent.get_indent_string(this.__indent_count)):(s=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),s+=this.__items.join("")),s};function IndentStringCache(s,e){this.__cache=[""],this.__indent_size=s.indent_size,this.__indent_string=s.indent_char,s.indent_with_tabs||(this.__indent_string=new Array(s.indent_size+1).join(s.indent_char)),e=e||"",s.indent_level>0&&(e=new Array(s.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}IndentStringCache.prototype.get_indent_size=function(s,e){var n=this.__base_string_length;return e=e||0,s<0&&(n=0),n+=s*this.__indent_size,n+=e,n};IndentStringCache.prototype.get_indent_string=function(s,e){var n=this.__base_string;return e=e||0,s<0&&(s=0,n=""),e+=s*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e],n};IndentStringCache.prototype.__ensure_cache=function(s){for(;s>=this.__cache.length;)this.__add_column()};IndentStringCache.prototype.__add_column=function(){var s=this.__cache.length,e=0,n="";this.__indent_size&&s>=this.__indent_size&&(e=Math.floor(s/this.__indent_size),s-=e*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),s&&(n+=new Array(s+1).join(" ")),this.__cache.push(n)};function Output$3(s,e){this.__indent_cache=new IndentStringCache(s,e),this.raw=!1,this._end_with_newline=s.end_with_newline,this.indent_size=s.indent_size,this.wrap_line_length=s.wrap_line_length,this.indent_empty_lines=s.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new OutputLine(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}Output$3.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};Output$3.prototype.get_line_number=function(){return this.__lines.length};Output$3.prototype.get_indent_string=function(s,e){return this.__indent_cache.get_indent_string(s,e)};Output$3.prototype.get_indent_size=function(s,e){return this.__indent_cache.get_indent_size(s,e)};Output$3.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};Output$3.prototype.add_new_line=function(s){return this.is_empty()||!s&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};Output$3.prototype.get_code=function(s){this.trim(!0);var e=this.current_line.pop();e&&(e[e.length-1]===`
`&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join(`
`);return s!==`
`&&(n=n.replace(/[\n]/g,s)),n};Output$3.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};Output$3.prototype.set_indent=function(s,e){return s=s||0,e=e||0,this.next_line.set_indent(s,e),this.__lines.length>1?(this.current_line.set_indent(s,e),!0):(this.current_line.set_indent(),!1)};Output$3.prototype.add_raw_token=function(s){for(var e=0;e<s.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(s.whitespace_before),this.current_line.push(s.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};Output$3.prototype.add_token=function(s){this.__add_space_before_token(),this.current_line.push(s),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};Output$3.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};Output$3.prototype.remove_indent=function(s){for(var e=this.__lines.length;s<e;)this.__lines[s]._remove_indent(),s++;this.current_line._remove_wrap_indent()};Output$3.prototype.trim=function(s){for(s=s===void 0?!1:s,this.current_line.trim();s&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};Output$3.prototype.just_added_newline=function(){return this.current_line.is_empty()};Output$3.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};Output$3.prototype.ensure_empty_line_above=function(s,e){for(var n=this.__lines.length-2;n>=0;){var c=this.__lines[n];if(c.is_empty())break;if(c.item(0).indexOf(s)!==0&&c.item(-1)!==e){this.__lines.splice(n+1,0,new OutputLine(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}};output.Output=Output$3;var token={};function Token$2(s,e,n,c){this.type=s,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=c||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}token.Token=Token$2;var acorn$2={};(function(s){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",n="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",c="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",h="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",u="(?:\\\\u[0-9a-fA-F]{4}|["+e+c+"])",d="(?:\\\\u[0-9a-fA-F]{4}|["+n+c+h+"])*";s.identifier=new RegExp(u+d,"g"),s.identifierStart=new RegExp(u),s.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+n+c+h+"])+"),s.newline=/[\n\r\u2028\u2029]/,s.lineBreak=new RegExp(`\r
|`+s.newline.source),s.allLineBreaks=new RegExp(s.lineBreak.source,"g")})(acorn$2);var options$3={},options$2={};function Options$9(s,e){this.raw_options=_mergeOpts(s,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}Options$9.prototype._get_array=function(s,e){var n=this.raw_options[s],c=e||[];return typeof n=="object"?n!==null&&typeof n.concat=="function"&&(c=n.concat()):typeof n=="string"&&(c=n.split(/[^a-zA-Z0-9_\/\-]+/)),c};Options$9.prototype._get_boolean=function(s,e){var n=this.raw_options[s],c=n===void 0?!!e:!!n;return c};Options$9.prototype._get_characters=function(s,e){var n=this.raw_options[s],c=e||"";return typeof n=="string"&&(c=n.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),c};Options$9.prototype._get_number=function(s,e){var n=this.raw_options[s];e=parseInt(e,10),isNaN(e)&&(e=0);var c=parseInt(n,10);return isNaN(c)&&(c=e),c};Options$9.prototype._get_selection=function(s,e,n){var c=this._get_selection_list(s,e,n);if(c.length!==1)throw new Error("Invalid Option Value: The option '"+s+`' can only be one of the following values:
`+e+`
You passed in: '`+this.raw_options[s]+"'");return c[0]};Options$9.prototype._get_selection_list=function(s,e,n){if(!e||e.length===0)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var c=this._get_array(s,n);if(!this._is_valid_selection(c,e))throw new Error("Invalid Option Value: The option '"+s+`' can contain only the following values:
`+e+`
You passed in: '`+this.raw_options[s]+"'");return c};Options$9.prototype._is_valid_selection=function(s,e){return s.length&&e.length&&!s.some(function(n){return e.indexOf(n)===-1})};function _mergeOpts(s,e){var n={};s=_normalizeOpts(s);var c;for(c in s)c!==e&&(n[c]=s[c]);if(e&&s[e])for(c in s[e])n[c]=s[e][c];return n}function _normalizeOpts(s){var e={},n;for(n in s){var c=n.replace(/-/g,"_");e[c]=s[n]}return e}options$2.Options=Options$9;options$2.normalizeOpts=_normalizeOpts;options$2.mergeOpts=_mergeOpts;var BaseOptions$2=options$2.Options,validPositionValues$1=["before-newline","after-newline","preserve-newline"];function Options$8(s){BaseOptions$2.call(this,s,"js");var e=this.raw_options.brace_style||null;e==="expand-strict"?this.raw_options.brace_style="expand":e==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var c=0;c<n.length;c++)n[c]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=n[c];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",validPositionValues$1),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Options$8.prototype=new BaseOptions$2;options$3.Options=Options$8;var tokenizer$2={},inputscanner={},regexp_has_sticky=RegExp.prototype.hasOwnProperty("sticky");function InputScanner$3(s){this.__input=s||"",this.__input_length=this.__input.length,this.__position=0}InputScanner$3.prototype.restart=function(){this.__position=0};InputScanner$3.prototype.back=function(){this.__position>0&&(this.__position-=1)};InputScanner$3.prototype.hasNext=function(){return this.__position<this.__input_length};InputScanner$3.prototype.next=function(){var s=null;return this.hasNext()&&(s=this.__input.charAt(this.__position),this.__position+=1),s};InputScanner$3.prototype.peek=function(s){var e=null;return s=s||0,s+=this.__position,s>=0&&s<this.__input_length&&(e=this.__input.charAt(s)),e};InputScanner$3.prototype.__match=function(s,e){s.lastIndex=e;var n=s.exec(this.__input);return n&&!(regexp_has_sticky&&s.sticky)&&n.index!==e&&(n=null),n};InputScanner$3.prototype.test=function(s,e){return e=e||0,e+=this.__position,e>=0&&e<this.__input_length?!!this.__match(s,e):!1};InputScanner$3.prototype.testChar=function(s,e){var n=this.peek(e);return s.lastIndex=0,n!==null&&s.test(n)};InputScanner$3.prototype.match=function(s){var e=this.__match(s,this.__position);return e?this.__position+=e[0].length:e=null,e};InputScanner$3.prototype.read=function(s,e,n){var c="",h;return s&&(h=this.match(s),h&&(c+=h[0])),e&&(h||!s)&&(c+=this.readUntil(e,n)),c};InputScanner$3.prototype.readUntil=function(s,e){var n="",c=this.__position;s.lastIndex=this.__position;var h=s.exec(this.__input);return h?(c=h.index,e&&(c+=h[0].length)):c=this.__input_length,n=this.__input.substring(this.__position,c),this.__position=c,n};InputScanner$3.prototype.readUntilAfter=function(s){return this.readUntil(s,!0)};InputScanner$3.prototype.get_regexp=function(s,e){var n=null,c="g";return e&&regexp_has_sticky&&(c="y"),typeof s=="string"&&s!==""?n=new RegExp(s,c):s&&(n=new RegExp(s.source,c)),n};InputScanner$3.prototype.get_literal_regexp=function(s){return RegExp(s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))};InputScanner$3.prototype.peekUntilAfter=function(s){var e=this.__position,n=this.readUntilAfter(s);return this.__position=e,n};InputScanner$3.prototype.lookBack=function(s){var e=this.__position-1;return e>=s.length&&this.__input.substring(e-s.length,e).toLowerCase()===s};inputscanner.InputScanner=InputScanner$3;var tokenizer$1={},tokenstream={};function TokenStream$1(s){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=s}TokenStream$1.prototype.restart=function(){this.__position=0};TokenStream$1.prototype.isEmpty=function(){return this.__tokens_length===0};TokenStream$1.prototype.hasNext=function(){return this.__position<this.__tokens_length};TokenStream$1.prototype.next=function(){var s=null;return this.hasNext()&&(s=this.__tokens[this.__position],this.__position+=1),s};TokenStream$1.prototype.peek=function(s){var e=null;return s=s||0,s+=this.__position,s>=0&&s<this.__tokens_length&&(e=this.__tokens[s]),e};TokenStream$1.prototype.add=function(s){this.__parent_token&&(s.parent=this.__parent_token),this.__tokens.push(s),this.__tokens_length+=1};tokenstream.TokenStream=TokenStream$1;var whitespacepattern={},pattern={};function Pattern$5(s,e){this._input=s,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}Pattern$5.prototype.read=function(){var s=this._input.read(this._starting_pattern);return(!this._starting_pattern||s)&&(s+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),s};Pattern$5.prototype.read_match=function(){return this._input.match(this._match_pattern)};Pattern$5.prototype.until_after=function(s){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(s),e._update(),e};Pattern$5.prototype.until=function(s){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(s),e._update(),e};Pattern$5.prototype.starting_with=function(s){var e=this._create();return e._starting_pattern=this._input.get_regexp(s,!0),e._update(),e};Pattern$5.prototype.matching=function(s){var e=this._create();return e._match_pattern=this._input.get_regexp(s,!0),e._update(),e};Pattern$5.prototype._create=function(){return new Pattern$5(this._input,this)};Pattern$5.prototype._update=function(){};pattern.Pattern=Pattern$5;var Pattern$4=pattern.Pattern;function WhitespacePattern$1(s,e){Pattern$4.call(this,s,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}WhitespacePattern$1.prototype=new Pattern$4;WhitespacePattern$1.prototype.__set_whitespace_patterns=function(s,e){s+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+s+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")};WhitespacePattern$1.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var s=this._input.read(this._match_pattern);if(s===" ")this.whitespace_before_token=" ";else if(s){var e=this.__split(this._newline_regexp,s);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return s};WhitespacePattern$1.prototype.matching=function(s,e){var n=this._create();return n.__set_whitespace_patterns(s,e),n._update(),n};WhitespacePattern$1.prototype._create=function(){return new WhitespacePattern$1(this._input,this)};WhitespacePattern$1.prototype.__split=function(s,e){s.lastIndex=0;for(var n=0,c=[],h=s.exec(e);h;)c.push(e.substring(n,h.index)),n=h.index+h[0].length,h=s.exec(e);return n<e.length?c.push(e.substring(n,e.length)):c.push(""),c};whitespacepattern.WhitespacePattern=WhitespacePattern$1;var InputScanner$2=inputscanner.InputScanner,Token$1=token.Token,TokenStream=tokenstream.TokenStream,WhitespacePattern=whitespacepattern.WhitespacePattern,TOKEN$4={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Tokenizer$4=function(s,e){this._input=new InputScanner$2(s),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new WhitespacePattern(this._input)};Tokenizer$4.prototype.tokenize=function(){this._input.restart(),this.__tokens=new TokenStream,this._reset();for(var s,e=new Token$1(TOKEN$4.START,""),n=null,c=[],h=new TokenStream;e.type!==TOKEN$4.EOF;){for(s=this._get_next_token(e,n);this._is_comment(s);)h.add(s),s=this._get_next_token(e,n);h.isEmpty()||(s.comments_before=h,h=new TokenStream),s.parent=n,this._is_opening(s)?(c.push(n),n=s):n&&this._is_closing(s,n)&&(s.opened=n,n.closed=s,n=c.pop(),s.parent=n),s.previous=e,e.next=s,this.__tokens.add(s),e=s}return this.__tokens};Tokenizer$4.prototype._is_first_token=function(){return this.__tokens.isEmpty()};Tokenizer$4.prototype._reset=function(){};Tokenizer$4.prototype._get_next_token=function(s,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(TOKEN$4.RAW,n):this._create_token(TOKEN$4.EOF,"")};Tokenizer$4.prototype._is_comment=function(s){return!1};Tokenizer$4.prototype._is_opening=function(s){return!1};Tokenizer$4.prototype._is_closing=function(s,e){return!1};Tokenizer$4.prototype._create_token=function(s,e){var n=new Token$1(s,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return n};Tokenizer$4.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};tokenizer$1.Tokenizer=Tokenizer$4;tokenizer$1.TOKEN=TOKEN$4;var directives={};function Directives$3(s,e){s=typeof s=="string"?s:s.source,e=typeof e=="string"?e:e.source,this.__directives_block_pattern=new RegExp(s+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(s+/\sbeautify\signore:end\s/.source+e,"g")}Directives$3.prototype.get_directives=function(s){if(!s.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(s);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(s);return e};Directives$3.prototype.readIgnored=function(s){return s.readUntilAfter(this.__directives_end_ignore_pattern)};directives.Directives=Directives$3;var templatablepattern={},Pattern$3=pattern.Pattern,template_names={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function TemplatablePattern$2(s,e){Pattern$3.call(this,s,e),this.__template_pattern=null,this._disabled=Object.assign({},template_names),this._excluded=Object.assign({},template_names),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new Pattern$3(s);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}TemplatablePattern$2.prototype=new Pattern$3;TemplatablePattern$2.prototype._create=function(){return new TemplatablePattern$2(this._input,this)};TemplatablePattern$2.prototype._update=function(){this.__set_templated_pattern()};TemplatablePattern$2.prototype.disable=function(s){var e=this._create();return e._disabled[s]=!0,e._update(),e};TemplatablePattern$2.prototype.read_options=function(s){var e=this._create();for(var n in template_names)e._disabled[n]=s.templating.indexOf(n)===-1;return e._update(),e};TemplatablePattern$2.prototype.exclude=function(s){var e=this._create();return e._excluded[s]=!0,e._update(),e};TemplatablePattern$2.prototype.read=function(){var s="";this._match_pattern?s=this._input.read(this._starting_pattern):s=this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),s+=e,e=this._read_template();return this._until_after&&(s+=this._input.readUntilAfter(this._until_pattern)),s};TemplatablePattern$2.prototype.__set_templated_pattern=function(){var s=[];this._disabled.php||s.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||s.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(s.push(this.__patterns.django._starting_pattern.source),s.push(this.__patterns.django_value._starting_pattern.source),s.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||s.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&s.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+s.join("|")+")")};TemplatablePattern$2.prototype._read_template=function(){var s="",e=this._input.peek();if(e==="<"){var n=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&n==="?"&&(s=s||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&n==="%"&&(s=s||this.__patterns.erb.read())}else e==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(s=s||this.__patterns.handlebars_comment.read(),s=s||this.__patterns.handlebars_unescaped.read(),s=s||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(s=s||this.__patterns.django_value.read()),this._excluded.django||(s=s||this.__patterns.django_comment.read(),s=s||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(s=s||this.__patterns.smarty_comment.read(),s=s||this.__patterns.smarty_literal.read(),s=s||this.__patterns.smarty.read()));return s};templatablepattern.TemplatablePattern=TemplatablePattern$2;var InputScanner$1=inputscanner.InputScanner,BaseTokenizer$1=tokenizer$1.Tokenizer,BASETOKEN$1=tokenizer$1.TOKEN,Directives$2=directives.Directives,acorn$1=acorn$2,Pattern$2=pattern.Pattern,TemplatablePattern$1=templatablepattern.TemplatablePattern;function in_array$2(s,e){return e.indexOf(s)!==-1}var TOKEN$3={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:BASETOKEN$1.START,RAW:BASETOKEN$1.RAW,EOF:BASETOKEN$1.EOF},directives_core$2=new Directives$2(/\/\*/,/\*\//),number_pattern=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,digit=/[0-9]/,dot_pattern=/[^\d\.]/,positionable_operators$1=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),punct=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";punct=punct.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");punct="\\?\\.(?!\\d) "+punct;punct=punct.replace(/ /g,"|");var punct_pattern=new RegExp(punct),line_starters$1="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),reserved_words=line_starters$1.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),reserved_word_pattern=new RegExp("^(?:"+reserved_words.join("|")+")$"),in_html_comment,Tokenizer$3=function(s,e){BaseTokenizer$1.call(this,s,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new Pattern$2(this._input),c=new TemplatablePattern$1(this._input).read_options(this._options);this.__patterns={template:c,identifier:c.starting_with(acorn$1.identifier).matching(acorn$1.identifierMatch),number:n.matching(number_pattern),punct:n.matching(punct_pattern),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(acorn$1.lineBreak),shebang:n.starting_with(/#!/).until_after(acorn$1.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:c.until(/['\\\n\r\u2028\u2029]/),double_quote:c.until(/["\\\n\r\u2028\u2029]/),template_text:c.until(/[`\\$]/),template_expression:c.until(/[`}\\]/)}};Tokenizer$3.prototype=new BaseTokenizer$1;Tokenizer$3.prototype._is_comment=function(s){return s.type===TOKEN$3.COMMENT||s.type===TOKEN$3.BLOCK_COMMENT||s.type===TOKEN$3.UNKNOWN};Tokenizer$3.prototype._is_opening=function(s){return s.type===TOKEN$3.START_BLOCK||s.type===TOKEN$3.START_EXPR};Tokenizer$3.prototype._is_closing=function(s,e){return(s.type===TOKEN$3.END_BLOCK||s.type===TOKEN$3.END_EXPR)&&e&&(s.text==="]"&&e.text==="["||s.text===")"&&e.text==="("||s.text==="}"&&e.text==="{")};Tokenizer$3.prototype._reset=function(){in_html_comment=!1};Tokenizer$3.prototype._get_next_token=function(s,e){var n=null;this._readWhitespace();var c=this._input.peek();return c===null?this._create_token(TOKEN$3.EOF,""):(n=n||this._read_non_javascript(c),n=n||this._read_string(c),n=n||this._read_word(s),n=n||this._read_singles(c),n=n||this._read_comment(c),n=n||this._read_regexp(c,s),n=n||this._read_xml(c,s),n=n||this._read_punctuation(),n=n||this._create_token(TOKEN$3.UNKNOWN,this._input.next()),n)};Tokenizer$3.prototype._read_word=function(s){var e;if(e=this.__patterns.identifier.read(),e!=="")return e=e.replace(acorn$1.allLineBreaks,`
`),!(s.type===TOKEN$3.DOT||s.type===TOKEN$3.RESERVED&&(s.text==="set"||s.text==="get"))&&reserved_word_pattern.test(e)?(e==="in"||e==="of")&&(s.type===TOKEN$3.WORD||s.type===TOKEN$3.STRING)?this._create_token(TOKEN$3.OPERATOR,e):this._create_token(TOKEN$3.RESERVED,e):this._create_token(TOKEN$3.WORD,e);if(e=this.__patterns.number.read(),e!=="")return this._create_token(TOKEN$3.WORD,e)};Tokenizer$3.prototype._read_singles=function(s){var e=null;return s==="("||s==="["?e=this._create_token(TOKEN$3.START_EXPR,s):s===")"||s==="]"?e=this._create_token(TOKEN$3.END_EXPR,s):s==="{"?e=this._create_token(TOKEN$3.START_BLOCK,s):s==="}"?e=this._create_token(TOKEN$3.END_BLOCK,s):s===";"?e=this._create_token(TOKEN$3.SEMICOLON,s):s==="."&&dot_pattern.test(this._input.peek(1))?e=this._create_token(TOKEN$3.DOT,s):s===","&&(e=this._create_token(TOKEN$3.COMMA,s)),e&&this._input.next(),e};Tokenizer$3.prototype._read_punctuation=function(){var s=this.__patterns.punct.read();if(s!=="")return s==="="?this._create_token(TOKEN$3.EQUALS,s):s==="?."?this._create_token(TOKEN$3.DOT,s):this._create_token(TOKEN$3.OPERATOR,s)};Tokenizer$3.prototype._read_non_javascript=function(s){var e="";if(s==="#"){if(this._is_first_token()&&(e=this.__patterns.shebang.read(),e))return this._create_token(TOKEN$3.UNKNOWN,e.trim()+`
`);if(e=this.__patterns.include.read(),e)return this._create_token(TOKEN$3.UNKNOWN,e.trim()+`
`);s=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(digit)){do s=this._input.next(),n+=s;while(this._input.hasNext()&&s!=="#"&&s!=="=");return s==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(n+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(n+="{}",this._input.next(),this._input.next())),this._create_token(TOKEN$3.WORD,n)}this._input.back()}else if(s==="<"&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read(),e){for(;this._input.hasNext()&&!this._input.testChar(acorn$1.newline);)e+=this._input.next();return in_html_comment=!0,this._create_token(TOKEN$3.COMMENT,e)}}else if(in_html_comment&&s==="-"&&(e=this.__patterns.html_comment_end.read(),e))return in_html_comment=!1,this._create_token(TOKEN$3.COMMENT,e);return null};Tokenizer$3.prototype._read_comment=function(s){var e=null;if(s==="/"){var n="";if(this._input.peek(1)==="*"){n=this.__patterns.block_comment.read();var c=directives_core$2.get_directives(n);c&&c.ignore==="start"&&(n+=directives_core$2.readIgnored(this._input)),n=n.replace(acorn$1.allLineBreaks,`
`),e=this._create_token(TOKEN$3.BLOCK_COMMENT,n),e.directives=c}else this._input.peek(1)==="/"&&(n=this.__patterns.comment.read(),e=this._create_token(TOKEN$3.COMMENT,n))}return e};Tokenizer$3.prototype._read_string=function(s){if(s==="`"||s==="'"||s==='"'){var e=this._input.next();return this.has_char_escapes=!1,s==="`"?e+=this._read_string_recursive("`",!0,"${"):e+=this._read_string_recursive(s),this.has_char_escapes&&this._options.unescape_strings&&(e=unescape_string(e)),this._input.peek()===s&&(e+=this._input.next()),e=e.replace(acorn$1.allLineBreaks,`
`),this._create_token(TOKEN$3.STRING,e)}return null};Tokenizer$3.prototype._allow_regexp_or_xml=function(s){return s.type===TOKEN$3.RESERVED&&in_array$2(s.text,["return","case","throw","else","do","typeof","yield"])||s.type===TOKEN$3.END_EXPR&&s.text===")"&&s.opened.previous.type===TOKEN$3.RESERVED&&in_array$2(s.opened.previous.text,["if","while","for"])||in_array$2(s.type,[TOKEN$3.COMMENT,TOKEN$3.START_EXPR,TOKEN$3.START_BLOCK,TOKEN$3.START,TOKEN$3.END_BLOCK,TOKEN$3.OPERATOR,TOKEN$3.EQUALS,TOKEN$3.EOF,TOKEN$3.SEMICOLON,TOKEN$3.COMMA])};Tokenizer$3.prototype._read_regexp=function(s,e){if(s==="/"&&this._allow_regexp_or_xml(e)){for(var n=this._input.next(),c=!1,h=!1;this._input.hasNext()&&(c||h||this._input.peek()!==s)&&!this._input.testChar(acorn$1.newline);)n+=this._input.peek(),c?c=!1:(c=this._input.peek()==="\\",this._input.peek()==="["?h=!0:this._input.peek()==="]"&&(h=!1)),this._input.next();return this._input.peek()===s&&(n+=this._input.next(),n+=this._input.read(acorn$1.identifier)),this._create_token(TOKEN$3.STRING,n)}return null};Tokenizer$3.prototype._read_xml=function(s,e){if(this._options.e4x&&s==="<"&&this._allow_regexp_or_xml(e)){var n="",c=this.__patterns.xml.read_match();if(c){for(var h=c[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),u=h.indexOf("{")===0,d=0;c;){var m=!!c[1],g=c[2],b=!!c[c.length-1]||g.slice(0,8)==="![CDATA[";if(!b&&(g===h||u&&g.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(m?--d:++d),n+=c[0],d<=0)break;c=this.__patterns.xml.read_match()}return c||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(acorn$1.allLineBreaks,`
`),this._create_token(TOKEN$3.STRING,n)}}return null};function unescape_string(s){for(var e="",n=0,c=new InputScanner$1(s),h=null;c.hasNext();)if(h=c.match(/([\s]|[^\\]|\\\\)+/g),h&&(e+=h[0]),c.peek()==="\\"){if(c.next(),c.peek()==="x")h=c.match(/x([0-9A-Fa-f]{2})/g);else if(c.peek()==="u")h=c.match(/u([0-9A-Fa-f]{4})/g);else{e+="\\",c.hasNext()&&(e+=c.next());continue}if(!h||(n=parseInt(h[1],16),n>126&&n<=255&&h[0].indexOf("x")===0))return s;if(n>=0&&n<32){e+="\\"+h[0];continue}else n===34||n===39||n===92?e+="\\"+String.fromCharCode(n):e+=String.fromCharCode(n)}return e}Tokenizer$3.prototype._read_string_recursive=function(s,e,n){var c,h;s==="'"?h=this.__patterns.single_quote:s==='"'?h=this.__patterns.double_quote:s==="`"?h=this.__patterns.template_text:s==="}"&&(h=this.__patterns.template_expression);for(var u=h.read(),d="";this._input.hasNext();){if(d=this._input.next(),d===s||!e&&acorn$1.newline.test(d)){this._input.back();break}else d==="\\"&&this._input.hasNext()?(c=this._input.peek(),c==="x"||c==="u"?this.has_char_escapes=!0:c==="\r"&&this._input.peek(1)===`
`&&this._input.next(),d+=this._input.next()):n&&(n==="${"&&d==="$"&&this._input.peek()==="{"&&(d+=this._input.next()),n===d&&(s==="`"?d+=this._read_string_recursive("}",e,"`"):d+=this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(d+=this._input.next())));d+=h.read(),u+=d}return u};tokenizer$2.Tokenizer=Tokenizer$3;tokenizer$2.TOKEN=TOKEN$3;tokenizer$2.positionable_operators=positionable_operators$1.slice();tokenizer$2.line_starters=line_starters$1.slice();var Output$2=output.Output,Token=token.Token,acorn=acorn$2,Options$7=options$3.Options,Tokenizer$2=tokenizer$2.Tokenizer,line_starters=tokenizer$2.line_starters,positionable_operators=tokenizer$2.positionable_operators,TOKEN$2=tokenizer$2.TOKEN;function in_array$1(s,e){return e.indexOf(s)!==-1}function ltrim(s){return s.replace(/^\s+/g,"")}function generateMapFromStrings(s){for(var e={},n=0;n<s.length;n++)e[s[n].replace(/-/g,"_")]=s[n];return e}function reserved_word(s,e){return s&&s.type===TOKEN$2.RESERVED&&s.text===e}function reserved_array(s,e){return s&&s.type===TOKEN$2.RESERVED&&in_array$1(s.text,e)}var special_words=["case","return","do","if","throw","else","await","break","continue","async"],validPositionValues=["before-newline","after-newline","preserve-newline"],OPERATOR_POSITION=generateMapFromStrings(validPositionValues),OPERATOR_POSITION_BEFORE_OR_PRESERVE=[OPERATOR_POSITION.before_newline,OPERATOR_POSITION.preserve_newline],MODE={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function remove_redundant_indentation(s,e){e.multiline_frame||e.mode===MODE.ForInitializer||e.mode===MODE.Conditional||s.remove_indent(e.start_line_index)}function split_linebreaks(s){s=s.replace(acorn.allLineBreaks,`
`);for(var e=[],n=s.indexOf(`
`);n!==-1;)e.push(s.substring(0,n)),s=s.substring(n+1),n=s.indexOf(`
`);return s.length&&e.push(s),e}function is_array(s){return s===MODE.ArrayLiteral}function is_expression(s){return in_array$1(s,[MODE.Expression,MODE.ForInitializer,MODE.Conditional])}function all_lines_start_with(s,e){for(var n=0;n<s.length;n++){var c=s[n].trim();if(c.charAt(0)!==e)return!1}return!0}function each_line_matches_indent(s,e){for(var n=0,c=s.length,h;n<c;n++)if(h=s[n],h&&h.indexOf(e)!==0)return!1;return!0}function Beautifier$5(s,e){e=e||{},this._source_text=s||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Options$7(e)}Beautifier$5.prototype.create_flags=function(s,e){var n=0;s&&(n=s.indentation_level,!this._output.just_added_newline()&&s.line_indent_level>n&&(n=s.line_indent_level));var c={mode:e,parent:s,last_token:s?s.last_token:new Token(TOKEN$2.START_BLOCK,""),last_word:s?s.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:n,alignment:0,line_indent_level:s?s.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0};return c};Beautifier$5.prototype._reset=function(s){var e=s.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new Output$2(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(MODE.BlockStatement);var n=new Tokenizer$2(s,this._options);return this._tokens=n.tokenize(),s};Beautifier$5.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var s,e=this._reset(this._source_text),n=this._options.eol;this._options.eol==="auto"&&(n=`
`,e&&acorn.lineBreak.test(e||"")&&(n=e.match(acorn.lineBreak)[0]));for(var c=this._tokens.next();c;)this.handle_token(c),this._last_last_text=this._flags.last_token.text,this._flags.last_token=c,c=this._tokens.next();return s=this._output.get_code(n),s};Beautifier$5.prototype.handle_token=function(s,e){s.type===TOKEN$2.START_EXPR?this.handle_start_expr(s):s.type===TOKEN$2.END_EXPR?this.handle_end_expr(s):s.type===TOKEN$2.START_BLOCK?this.handle_start_block(s):s.type===TOKEN$2.END_BLOCK?this.handle_end_block(s):s.type===TOKEN$2.WORD?this.handle_word(s):s.type===TOKEN$2.RESERVED?this.handle_word(s):s.type===TOKEN$2.SEMICOLON?this.handle_semicolon(s):s.type===TOKEN$2.STRING?this.handle_string(s):s.type===TOKEN$2.EQUALS?this.handle_equals(s):s.type===TOKEN$2.OPERATOR?this.handle_operator(s):s.type===TOKEN$2.COMMA?this.handle_comma(s):s.type===TOKEN$2.BLOCK_COMMENT?this.handle_block_comment(s,e):s.type===TOKEN$2.COMMENT?this.handle_comment(s,e):s.type===TOKEN$2.DOT?this.handle_dot(s):s.type===TOKEN$2.EOF?this.handle_eof(s):s.type===TOKEN$2.UNKNOWN?this.handle_unknown(s,e):this.handle_unknown(s,e)};Beautifier$5.prototype.handle_whitespace_and_comments=function(s,e){var n=s.newlines,c=this._options.keep_array_indentation&&is_array(this._flags.mode);if(s.comments_before)for(var h=s.comments_before.next();h;)this.handle_whitespace_and_comments(h,e),this.handle_token(h,e),h=s.comments_before.next();if(c)for(var u=0;u<n;u+=1)this.print_newline(u>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var d=1;d<n;d+=1)this.print_newline(!0,e)}};var newline_restricted_tokens=["async","break","continue","return","throw","yield"];Beautifier$5.prototype.allow_wrap_or_preserved_newline=function(s,e){if(e=e===void 0?!1:e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&s.newlines||e,c=in_array$1(this._flags.last_token.text,positionable_operators)||in_array$1(s.text,positionable_operators);if(c){var h=in_array$1(this._flags.last_token.text,positionable_operators)&&in_array$1(this._options.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)||in_array$1(s.text,positionable_operators);n=n&&h}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(reserved_array(this._flags.last_token,newline_restricted_tokens))return;this._output.set_wrap_point()}}};Beautifier$5.prototype.print_newline=function(s,e){if(!e&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==TOKEN$2.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var n=this._tokens.peek();this._flags.mode===MODE.Statement&&!(this._flags.if_block&&reserved_word(n,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(s)&&(this._flags.multiline_frame=!0)};Beautifier$5.prototype.print_token_line_indentation=function(s){this._output.just_added_newline()&&(this._options.keep_array_indentation&&s.newlines&&(s.text==="["||is_array(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(s.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};Beautifier$5.prototype.print_token=function(s){if(this._output.raw){this._output.add_raw_token(s);return}if(this._options.comma_first&&s.previous&&s.previous.type===TOKEN$2.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(s),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(s),this._output.non_breaking_space=!0,this._output.add_token(s.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};Beautifier$5.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};Beautifier$5.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};Beautifier$5.prototype.set_mode=function(s){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,s),this._flags=this.create_flags(this._previous_flags,s),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};Beautifier$5.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===MODE.Statement&&remove_redundant_indentation(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};Beautifier$5.prototype.start_of_object_property=function(){return this._flags.parent.mode===MODE.ObjectLiteral&&this._flags.mode===MODE.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||reserved_array(this._flags.last_token,["get","set"]))};Beautifier$5.prototype.start_of_statement=function(s){var e=!1;return e=e||reserved_array(this._flags.last_token,["var","let","const"])&&s.type===TOKEN$2.WORD,e=e||reserved_word(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===MODE.ObjectLiteral&&this._flags.mode===MODE.Statement)&&reserved_array(this._flags.last_token,newline_restricted_tokens)&&!s.newlines,e=e||reserved_word(this._flags.last_token,"else")&&!(reserved_word(s,"if")&&!s.comments_before),e=e||this._flags.last_token.type===TOKEN$2.END_EXPR&&(this._previous_flags.mode===MODE.ForInitializer||this._previous_flags.mode===MODE.Conditional),e=e||this._flags.last_token.type===TOKEN$2.WORD&&this._flags.mode===MODE.BlockStatement&&!this._flags.in_case&&!(s.text==="--"||s.text==="++")&&this._last_last_text!=="function"&&s.type!==TOKEN$2.WORD&&s.type!==TOKEN$2.RESERVED,e=e||this._flags.mode===MODE.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||reserved_array(this._flags.last_token,["get","set"])),e?(this.set_mode(MODE.Statement),this.indent(),this.handle_whitespace_and_comments(s,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(s,reserved_array(s,["do","for","if","while"])),!0):!1};Beautifier$5.prototype.handle_start_expr=function(s){this.start_of_statement(s)||this.handle_whitespace_and_comments(s);var e=MODE.Expression;if(s.text==="["){if(this._flags.last_token.type===TOKEN$2.WORD||this._flags.last_token.text===")"){reserved_array(this._flags.last_token,line_starters)&&(this._output.space_before_token=!0),this.print_token(s),this.set_mode(e),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}e=MODE.ArrayLiteral,is_array(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),in_array$1(this._flags.last_token.type,[TOKEN$2.START_EXPR,TOKEN$2.END_EXPR,TOKEN$2.WORD,TOKEN$2.OPERATOR,TOKEN$2.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===TOKEN$2.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,e=MODE.ForInitializer):in_array$1(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=MODE.Conditional):in_array$1(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&s.whitespace_before===""?this._output.space_before_token=!1:(in_array$1(this._flags.last_token.text,line_starters)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===TOKEN$2.EQUALS||this._flags.last_token.type===TOKEN$2.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(s);else if(this._flags.last_token.type===TOKEN$2.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var c=this._tokens.peek(-4);reserved_array(n,["async","function"])||n.text==="*"&&reserved_array(c,["async","function"])?this._output.space_before_token=!0:this._flags.mode===MODE.ObjectLiteral?(n.text==="{"||n.text===","||n.text==="*"&&(c.text==="{"||c.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(s);(this._flags.last_token.type===TOKEN$2.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(in_array$1(this._last_last_text,["function","yield"])||this._flags.mode===MODE.ObjectLiteral&&in_array$1(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===TOKEN$2.START_BLOCK?this.print_newline():(this._flags.last_token.type===TOKEN$2.END_EXPR||this._flags.last_token.type===TOKEN$2.START_EXPR||this._flags.last_token.type===TOKEN$2.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===TOKEN$2.COMMA)&&this.allow_wrap_or_preserved_newline(s,s.newlines),this.print_token(s),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};Beautifier$5.prototype.handle_end_expr=function(s){for(;this._flags.mode===MODE.Statement;)this.restore_mode();this.handle_whitespace_and_comments(s),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(s,s.text==="]"&&is_array(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===TOKEN$2.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(s),this.restore_mode(),remove_redundant_indentation(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===MODE.Conditional&&(this._previous_flags.mode=MODE.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};Beautifier$5.prototype.handle_start_block=function(s){this.handle_whitespace_and_comments(s);var e=this._tokens.peek(),n=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===TOKEN$2.END_EXPR?(this.set_mode(MODE.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(MODE.BlockStatement):n&&(in_array$1(n.text,[":",","])&&in_array$1(e.type,[TOKEN$2.STRING,TOKEN$2.WORD,TOKEN$2.RESERVED])||in_array$1(e.text,["get","set","..."])&&in_array$1(n.type,[TOKEN$2.WORD,TOKEN$2.RESERVED]))?in_array$1(this._last_last_text,["class","interface"])&&!in_array$1(n.text,[":",","])?this.set_mode(MODE.BlockStatement):this.set_mode(MODE.ObjectLiteral):this._flags.last_token.type===TOKEN$2.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(MODE.BlockStatement):in_array$1(this._flags.last_token.type,[TOKEN$2.EQUALS,TOKEN$2.START_EXPR,TOKEN$2.COMMA,TOKEN$2.OPERATOR])||reserved_array(this._flags.last_token,["return","throw","import","default"])?this.set_mode(MODE.ObjectLiteral):this.set_mode(MODE.BlockStatement),this._flags.last_token&&reserved_array(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var c=!e.comments_before&&e.text==="}",h=c&&this._flags.last_word==="function"&&this._flags.last_token.type===TOKEN$2.END_EXPR;if(this._options.brace_preserve_inline){var u=0,d=null;this._flags.inline_frame=!0;do if(u+=1,d=this._tokens.peek(u-1),d.newlines){this._flags.inline_frame=!1;break}while(d.type!==TOKEN$2.EOF&&!(d.type===TOKEN$2.END_BLOCK&&d.opened===s))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&s.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==TOKEN$2.OPERATOR&&(h||this._flags.last_token.type===TOKEN$2.EQUALS||reserved_array(this._flags.last_token,special_words)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(is_array(this._previous_flags.mode)&&(this._flags.last_token.type===TOKEN$2.START_EXPR||this._flags.last_token.type===TOKEN$2.COMMA)&&((this._flags.last_token.type===TOKEN$2.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===TOKEN$2.COMMA||this._flags.last_token.type===TOKEN$2.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(s),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==TOKEN$2.OPERATOR&&this._flags.last_token.type!==TOKEN$2.START_EXPR&&(this._flags.last_token.type===TOKEN$2.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(s),this.indent(),!c&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};Beautifier$5.prototype.handle_end_block=function(s){for(this.handle_whitespace_and_comments(s);this._flags.mode===MODE.Statement;)this.restore_mode();var e=this._flags.last_token.type===TOKEN$2.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:this._options.brace_style==="expand"?e||this.print_newline():e||(is_array(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(s)};Beautifier$5.prototype.handle_word=function(s){if(s.type===TOKEN$2.RESERVED){if(in_array$1(s.text,["set","get"])&&this._flags.mode!==MODE.ObjectLiteral)s.type=TOKEN$2.WORD;else if(s.text==="import"&&in_array$1(this._tokens.peek().text,["(","."]))s.type=TOKEN$2.WORD;else if(in_array$1(s.text,["as","from"])&&!this._flags.import_block)s.type=TOKEN$2.WORD;else if(this._flags.mode===MODE.ObjectLiteral){var e=this._tokens.peek();e.text===":"&&(s.type=TOKEN$2.WORD)}}if(this.start_of_statement(s)?reserved_array(this._flags.last_token,["var","let","const"])&&s.type===TOKEN$2.WORD&&(this._flags.declaration_statement=!0):s.newlines&&!is_expression(this._flags.mode)&&(this._flags.last_token.type!==TOKEN$2.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==TOKEN$2.EQUALS&&(this._options.preserve_newlines||!reserved_array(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(s),this.print_newline()):this.handle_whitespace_and_comments(s),this._flags.do_block&&!this._flags.do_while)if(reserved_word(s,"while")){this._output.space_before_token=!0,this.print_token(s),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&reserved_word(s,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===MODE.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&reserved_array(s,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(s),this._flags.in_case=!0;return}if((this._flags.last_token.type===TOKEN$2.COMMA||this._flags.last_token.type===TOKEN$2.START_EXPR||this._flags.last_token.type===TOKEN$2.EQUALS||this._flags.last_token.type===TOKEN$2.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(s)),reserved_word(s,"function")){(in_array$1(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(in_array$1(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===TOKEN$2.OPERATOR))&&!this._output.just_added_blankline()&&!s.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===TOKEN$2.RESERVED||this._flags.last_token.type===TOKEN$2.WORD?reserved_array(this._flags.last_token,["get","set","new","export"])||reserved_array(this._flags.last_token,newline_restricted_tokens)?this._output.space_before_token=!0:reserved_word(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===TOKEN$2.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(is_expression(this._flags.mode)||is_array(this._flags.mode))||this.print_newline(),this.print_token(s),this._flags.last_word=s.text;return}var n="NONE";if(this._flags.last_token.type===TOKEN$2.END_BLOCK?this._previous_flags.inline_frame?n="SPACE":reserved_array(s,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&s.newlines?n="NEWLINE":(n="SPACE",this._output.space_before_token=!0):n="NEWLINE":this._flags.last_token.type===TOKEN$2.SEMICOLON&&this._flags.mode===MODE.BlockStatement?n="NEWLINE":this._flags.last_token.type===TOKEN$2.SEMICOLON&&is_expression(this._flags.mode)?n="SPACE":this._flags.last_token.type===TOKEN$2.STRING?n="NEWLINE":this._flags.last_token.type===TOKEN$2.RESERVED||this._flags.last_token.type===TOKEN$2.WORD||this._flags.last_token.text==="*"&&(in_array$1(this._last_last_text,["function","yield"])||this._flags.mode===MODE.ObjectLiteral&&in_array$1(this._last_last_text,["{",","]))?n="SPACE":this._flags.last_token.type===TOKEN$2.START_BLOCK?this._flags.inline_frame?n="SPACE":n="NEWLINE":this._flags.last_token.type===TOKEN$2.END_EXPR&&(this._output.space_before_token=!0,n="NEWLINE"),reserved_array(s,line_starters)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?n="SPACE":n="NEWLINE"),reserved_array(s,["else","catch","finally"]))if((!(this._flags.last_token.type===TOKEN$2.END_BLOCK&&this._previous_flags.mode===MODE.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&s.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var c=this._output.current_line;c.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else n==="NEWLINE"?reserved_array(this._flags.last_token,special_words)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&reserved_array(s,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==TOKEN$2.END_EXPR?(this._flags.last_token.type!==TOKEN$2.START_EXPR||!reserved_array(s,["var","let","const"]))&&this._flags.last_token.text!==":"&&(reserved_word(s,"if")&&reserved_word(s.previous,"else")?this._output.space_before_token=!0:this.print_newline()):reserved_array(s,line_starters)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&is_array(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():n==="SPACE"&&(this._output.space_before_token=!0);s.previous&&(s.previous.type===TOKEN$2.WORD||s.previous.type===TOKEN$2.RESERVED)&&(this._output.space_before_token=!0),this.print_token(s),this._flags.last_word=s.text,s.type===TOKEN$2.RESERVED&&(s.text==="do"?this._flags.do_block=!0:s.text==="if"?this._flags.if_block=!0:s.text==="import"?this._flags.import_block=!0:this._flags.import_block&&reserved_word(s,"from")&&(this._flags.import_block=!1))};Beautifier$5.prototype.handle_semicolon=function(s){this.start_of_statement(s)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(s);for(var e=this._tokens.peek();this._flags.mode===MODE.Statement&&!(this._flags.if_block&&reserved_word(e,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(s)};Beautifier$5.prototype.handle_string=function(s){s.text.startsWith("`")&&s.newlines===0&&s.whitespace_before===""&&(s.previous.text===")"||this._flags.last_token.type===TOKEN$2.WORD)||(this.start_of_statement(s)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(s),this._flags.last_token.type===TOKEN$2.RESERVED||this._flags.last_token.type===TOKEN$2.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===TOKEN$2.COMMA||this._flags.last_token.type===TOKEN$2.START_EXPR||this._flags.last_token.type===TOKEN$2.EQUALS||this._flags.last_token.type===TOKEN$2.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(s):s.text.startsWith("`")&&this._flags.last_token.type===TOKEN$2.END_EXPR&&(s.previous.text==="]"||s.previous.text===")")&&s.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(s)};Beautifier$5.prototype.handle_equals=function(s){this.start_of_statement(s)||this.handle_whitespace_and_comments(s),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(s),this._output.space_before_token=!0};Beautifier$5.prototype.handle_comma=function(s){this.handle_whitespace_and_comments(s,!0),this.print_token(s),this._output.space_before_token=!0,this._flags.declaration_statement?(is_expression(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(s)):this._flags.mode===MODE.ObjectLiteral||this._flags.mode===MODE.Statement&&this._flags.parent.mode===MODE.ObjectLiteral?(this._flags.mode===MODE.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(s)};Beautifier$5.prototype.handle_operator=function(s){var e=s.text==="*"&&(reserved_array(this._flags.last_token,["function","yield"])||in_array$1(this._flags.last_token.type,[TOKEN$2.START_BLOCK,TOKEN$2.COMMA,TOKEN$2.END_BLOCK,TOKEN$2.SEMICOLON])),n=in_array$1(s.text,["-","+"])&&(in_array$1(this._flags.last_token.type,[TOKEN$2.START_BLOCK,TOKEN$2.START_EXPR,TOKEN$2.EQUALS,TOKEN$2.OPERATOR])||in_array$1(this._flags.last_token.text,line_starters)||this._flags.last_token.text===",");if(!this.start_of_statement(s)){var c=!e;this.handle_whitespace_and_comments(s,c)}if(s.text==="*"&&this._flags.last_token.type===TOKEN$2.DOT){this.print_token(s);return}if(s.text==="::"){this.print_token(s);return}if(this._flags.last_token.type===TOKEN$2.OPERATOR&&in_array$1(this._options.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)&&this.allow_wrap_or_preserved_newline(s),s.text===":"&&this._flags.in_case){this.print_token(s),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==TOKEN$2.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var h=!0,u=!0,d=!1;if(s.text===":"?this._flags.ternary_depth===0?h=!1:(this._flags.ternary_depth-=1,d=!0):s.text==="?"&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&in_array$1(s.text,positionable_operators)){var m=s.text===":",g=m&&d,b=m&&!d;switch(this._options.operator_position){case OPERATOR_POSITION.before_newline:this._output.space_before_token=!b,this.print_token(s),(!m||g)&&this.allow_wrap_or_preserved_newline(s),this._output.space_before_token=!0;return;case OPERATOR_POSITION.after_newline:this._output.space_before_token=!0,!m||g?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(s):this._output.space_before_token=!1,this.print_token(s),this._output.space_before_token=!0;return;case OPERATOR_POSITION.preserve_newline:b||this.allow_wrap_or_preserved_newline(s),h=!(this._output.just_added_newline()||b),this._output.space_before_token=h,this.print_token(s),this._output.space_before_token=!0;return}}if(e){this.allow_wrap_or_preserved_newline(s),h=!1;var O=this._tokens.peek();u=O&&in_array$1(O.type,[TOKEN$2.WORD,TOKEN$2.RESERVED])}else if(s.text==="...")this.allow_wrap_or_preserved_newline(s),h=this._flags.last_token.type===TOKEN$2.START_BLOCK,u=!1;else if(in_array$1(s.text,["--","++","!","~"])||n){if((this._flags.last_token.type===TOKEN$2.COMMA||this._flags.last_token.type===TOKEN$2.START_EXPR)&&this.allow_wrap_or_preserved_newline(s),h=!1,u=!1,s.newlines&&(s.text==="--"||s.text==="++"||s.text==="~")){var v=reserved_array(this._flags.last_token,special_words)&&s.newlines;v&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(v,!0)}this._flags.last_token.text===";"&&is_expression(this._flags.mode)&&(h=!0),this._flags.last_token.type===TOKEN$2.RESERVED?h=!0:this._flags.last_token.type===TOKEN$2.END_EXPR?h=!(this._flags.last_token.text==="]"&&(s.text==="--"||s.text==="++")):this._flags.last_token.type===TOKEN$2.OPERATOR&&(h=in_array$1(s.text,["--","-","++","+"])&&in_array$1(this._flags.last_token.text,["--","-","++","+"]),in_array$1(s.text,["+","-"])&&in_array$1(this._flags.last_token.text,["--","++"])&&(u=!0)),(this._flags.mode===MODE.BlockStatement&&!this._flags.inline_frame||this._flags.mode===MODE.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||h,this.print_token(s),this._output.space_before_token=u};Beautifier$5.prototype.handle_block_comment=function(s,e){if(this._output.raw){this._output.add_raw_token(s),s.directives&&s.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(s.directives){this.print_newline(!1,e),this.print_token(s),s.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!acorn.newline.test(s.text)&&!s.newlines){this._output.space_before_token=!0,this.print_token(s),this._output.space_before_token=!0;return}else this.print_block_commment(s,e)};Beautifier$5.prototype.print_block_commment=function(s,e){var n=split_linebreaks(s.text),c,h=!1,u=!1,d=s.whitespace_before,m=d.length;if(this.print_newline(!1,e),this.print_token_line_indentation(s),this._output.add_token(n[0]),this.print_newline(!1,e),n.length>1){for(n=n.slice(1),h=all_lines_start_with(n,"*"),u=each_line_matches_indent(n,d),h&&(this._flags.alignment=1),c=0;c<n.length;c++)h?(this.print_token_line_indentation(s),this._output.add_token(ltrim(n[c]))):u&&n[c]?(this.print_token_line_indentation(s),this._output.add_token(n[c].substring(m))):(this._output.current_line.set_indent(-1),this._output.add_token(n[c])),this.print_newline(!1,e);this._flags.alignment=0}};Beautifier$5.prototype.handle_comment=function(s,e){s.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(s),this.print_newline(!1,e)};Beautifier$5.prototype.handle_dot=function(s){this.start_of_statement(s)||this.handle_whitespace_and_comments(s,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),reserved_array(this._flags.last_token,special_words)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(s,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(s)};Beautifier$5.prototype.handle_unknown=function(s,e){this.print_token(s),s.text[s.text.length-1]===`
`&&this.print_newline(!1,e)};Beautifier$5.prototype.handle_eof=function(s){for(;this._flags.mode===MODE.Statement;)this.restore_mode();this.handle_whitespace_and_comments(s)};beautifier$2.Beautifier=Beautifier$5;var Beautifier$4=beautifier$2.Beautifier,Options$6=options$3.Options;function js_beautify$1(s,e){var n=new Beautifier$4(s,e);return n.beautify()}javascript.exports=js_beautify$1;javascript.exports.defaultOptions=function(){return new Options$6};var css$1={exports:{}},beautifier$1={},options$1={},BaseOptions$1=options$2.Options;function Options$5(s){BaseOptions$1.call(this,s,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var c=0;c<n.length;c++)n[c]!=="expand"?this.brace_style="collapse":this.brace_style=n[c]}Options$5.prototype=new BaseOptions$1;options$1.Options=Options$5;var Options$4=options$1.Options,Output$1=output.Output,InputScanner=inputscanner.InputScanner,Directives$1=directives.Directives,directives_core$1=new Directives$1(/\/\*/,/\*\//),lineBreak$1=/\r\n|[\r\n]/,allLineBreaks$1=/\r\n|[\r\n]/g,whitespaceChar=/\s/,whitespacePattern=/(?:\s|\n)+/g,block_comment_pattern=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,comment_pattern=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Beautifier$3(s,e){this._source_text=s||"",this._options=new Options$4(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}Beautifier$3.prototype.eatString=function(s){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,this._ch==="\\")e+=this._input.next();else if(s.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return e};Beautifier$3.prototype.eatWhitespace=function(s){for(var e=whitespaceChar.test(this._input.peek()),n=0;whitespaceChar.test(this._input.peek());)this._ch=this._input.next(),s&&this._ch===`
`&&(n===0||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return e};Beautifier$3.prototype.foundNestedPseudoClass=function(){for(var s=0,e=1,n=this._input.peek(e);n;){if(n==="{")return!0;if(n==="(")s+=1;else if(n===")"){if(s===0)return!1;s-=1}else if(n===";"||n==="}")return!1;e++,n=this._input.peek(e)}return!1};Beautifier$3.prototype.print_string=function(s){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(s)};Beautifier$3.prototype.preserveSingleSpace=function(s){s&&(this._output.space_before_token=!0)};Beautifier$3.prototype.indent=function(){this._indentLevel++};Beautifier$3.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--};Beautifier$3.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var s=this._source_text,e=this._options.eol;e==="auto"&&(e=`
`,s&&lineBreak$1.test(s||"")&&(e=s.match(lineBreak$1)[0])),s=s.replace(allLineBreaks$1,`
`);var n=s.match(/^[\t ]*/)[0];this._output=new Output$1(this._options,n),this._input=new InputScanner(s),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var c=0,h=!1,u=!1,d=!1,m=!1,g=!1,b=!1,O=this._ch,v=!1,y,w,S;y=this._input.read(whitespacePattern),w=y!=="",S=O,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),O=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var A=this._input.read(block_comment_pattern),E=directives_core$1.get_directives(A);E&&E.ignore==="start"&&(A+=directives_core$1.readIgnored(this._input)),this.print_string(A),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(comment_pattern)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(w),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var P=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);P.match(/[ :]$/)&&(P=this.eatString(": ").replace(/\s$/,""),this.print_string(P),this._output.space_before_token=!0),P=P.replace(/\s$/,""),P==="extend"?m=!0:P==="import"&&(g=!0),P in this.NESTED_AT_RULE?(this._nestedLevel+=1,P in this.CONDITIONAL_GROUP_RULE&&(d=!0)):!h&&c===0&&P.indexOf(":")!==-1&&(u=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(w),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")u&&(u=!1,this.outdent()),d?(d=!1,h=this._indentLevel>=this._nestedLevel):h=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&h&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(S==="("?this._output.space_before_token=!1:S!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),S==="{"&&this._output.trim(!0),g=!1,m=!1,u&&(this.outdent(),u=!1),this.print_string(this._ch),h=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var I=0;I<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;I++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[I])){v=!0;break}(h||d)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!m&&c===0?(this.print_string(":"),u||(u=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var U=S==='"'||S==="'";this.preserveSingleSpace(U||w),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")v=!1,c===0?(u&&(this.outdent(),u=!1),m=!1,g=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),c++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),c&&(c--,this.outdent()));else{var z=!1;this._input.lookBack("with")&&(z=!0),this.preserveSingleSpace(w||z),this.print_string(this._ch),u&&S==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),b=!0):(this.eatWhitespace(),c++,this.indent())}else if(this._ch===")")c&&(c--,this.outdent()),b&&this._input.peek()===";"&&this._options.selector_separator_newline&&(b=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!u||b)&&c===0&&!g&&!m?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!u&&c===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&whitespaceChar.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(w),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),whitespaceChar.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var N=S==='"'||S==="'";this.preserveSingleSpace(N||w),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&v&&this._output.add_new_line()}var R=this._output.get_code(e);return R};beautifier$1.Beautifier=Beautifier$3;var Beautifier$2=beautifier$1.Beautifier,Options$3=options$1.Options;function css_beautify$1(s,e){var n=new Beautifier$2(s,e);return n.beautify()}css$1.exports=css_beautify$1;css$1.exports.defaultOptions=function(){return new Options$3};var html={exports:{}},beautifier={},options={},BaseOptions=options$2.Options;function Options$2(s){BaseOptions.call(this,s,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Options$2.prototype=new BaseOptions;options.Options=Options$2;var tokenizer={},BaseTokenizer=tokenizer$1.Tokenizer,BASETOKEN=tokenizer$1.TOKEN,Directives=directives.Directives,TemplatablePattern=templatablepattern.TemplatablePattern,Pattern$1=pattern.Pattern,TOKEN$1={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:BASETOKEN.START,RAW:BASETOKEN.RAW,EOF:BASETOKEN.EOF},directives_core=new Directives(/<\!--/,/-->/),Tokenizer$1=function(s,e){BaseTokenizer.call(this,s,e),this._current_tag_name="";var n=new TemplatablePattern(this._input).read_options(this._options),c=new Pattern$1(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:c.starting_with(/{{!--/).until_after(/--}}/),handlebars:c.starting_with(/{{/).until_after(/}}/),handlebars_open:c.until(/[\n\r\t }]/),handlebars_raw_close:c.until(/}}/),comment:c.starting_with(/<!--/).until_after(/-->/),cdata:c.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:c.starting_with(/<!\[/).until_after(/]>/),processing:c.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var h=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=c.matching(h).until_after(h)}};Tokenizer$1.prototype=new BaseTokenizer;Tokenizer$1.prototype._is_comment=function(s){return!1};Tokenizer$1.prototype._is_opening=function(s){return s.type===TOKEN$1.TAG_OPEN};Tokenizer$1.prototype._is_closing=function(s,e){return s.type===TOKEN$1.TAG_CLOSE&&e&&((s.text===">"||s.text==="/>")&&e.text[0]==="<"||s.text==="}}"&&e.text[0]==="{"&&e.text[1]==="{")};Tokenizer$1.prototype._reset=function(){this._current_tag_name=""};Tokenizer$1.prototype._get_next_token=function(s,e){var n=null;this._readWhitespace();var c=this._input.peek();return c===null?this._create_token(TOKEN$1.EOF,""):(n=n||this._read_open_handlebars(c,e),n=n||this._read_attribute(c,s,e),n=n||this._read_close(c,e),n=n||this._read_raw_content(c,s,e),n=n||this._read_content_word(c),n=n||this._read_comment_or_cdata(c),n=n||this._read_processing(c),n=n||this._read_open(c,e),n=n||this._create_token(TOKEN$1.UNKNOWN,this._input.next()),n)};Tokenizer$1.prototype._read_comment_or_cdata=function(s){var e=null,n=null,c=null;if(s==="<"){var h=this._input.peek(1);h==="!"&&(n=this.__patterns.comment.read(),n?(c=directives_core.get_directives(n),c&&c.ignore==="start"&&(n+=directives_core.readIgnored(this._input))):n=this.__patterns.cdata.read()),n&&(e=this._create_token(TOKEN$1.COMMENT,n),e.directives=c)}return e};Tokenizer$1.prototype._read_processing=function(s){var e=null,n=null,c=null;if(s==="<"){var h=this._input.peek(1);(h==="!"||h==="?")&&(n=this.__patterns.conditional_comment.read(),n=n||this.__patterns.processing.read()),n&&(e=this._create_token(TOKEN$1.COMMENT,n),e.directives=c)}return e};Tokenizer$1.prototype._read_open=function(s,e){var n=null,c=null;return e||s==="<"&&(n=this._input.next(),this._input.peek()==="/"&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),c=this._create_token(TOKEN$1.TAG_OPEN,n)),c};Tokenizer$1.prototype._read_open_handlebars=function(s,e){var n=null,c=null;return e||this._options.indent_handlebars&&s==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(n=this.__patterns.handlebars_comment.read(),n=n||this.__patterns.handlebars.read(),c=this._create_token(TOKEN$1.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),c=this._create_token(TOKEN$1.TAG_OPEN,n))),c};Tokenizer$1.prototype._read_close=function(s,e){var n=null,c=null;return e&&(e.text[0]==="<"&&(s===">"||s==="/"&&this._input.peek(1)===">")?(n=this._input.next(),s==="/"&&(n+=this._input.next()),c=this._create_token(TOKEN$1.TAG_CLOSE,n)):e.text[0]==="{"&&s==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),c=this._create_token(TOKEN$1.TAG_CLOSE,"}}"))),c};Tokenizer$1.prototype._read_attribute=function(s,e,n){var c=null,h="";if(n&&n.text[0]==="<")if(s==="=")c=this._create_token(TOKEN$1.EQUALS,this._input.next());else if(s==='"'||s==="'"){var u=this._input.next();s==='"'?u+=this.__patterns.double_quote.read():u+=this.__patterns.single_quote.read(),c=this._create_token(TOKEN$1.VALUE,u)}else h=this.__patterns.attribute.read(),h&&(e.type===TOKEN$1.EQUALS?c=this._create_token(TOKEN$1.VALUE,h):c=this._create_token(TOKEN$1.ATTRIBUTE,h));return c};Tokenizer$1.prototype._is_content_unformatted=function(s){return this._options.void_elements.indexOf(s)===-1&&(this._options.content_unformatted.indexOf(s)!==-1||this._options.unformatted.indexOf(s)!==-1)};Tokenizer$1.prototype._read_raw_content=function(s,e,n){var c="";if(n&&n.text[0]==="{")c=this.__patterns.handlebars_raw_close.read();else if(e.type===TOKEN$1.TAG_CLOSE&&e.opened.text[0]==="<"&&e.text[0]!=="/"){var h=e.opened.text.substr(1).toLowerCase();if(h==="script"||h==="style"){var u=this._read_comment_or_cdata(s);if(u)return u.type=TOKEN$1.TEXT,u;c=this._input.readUntil(new RegExp("</"+h+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(h)&&(c=this._input.readUntil(new RegExp("</"+h+"[\\n\\r\\t ]*?>","ig")))}return c?this._create_token(TOKEN$1.TEXT,c):null};Tokenizer$1.prototype._read_content_word=function(s){var e="";if(this._options.unformatted_content_delimiter&&s===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(TOKEN$1.TEXT,e)};tokenizer.Tokenizer=Tokenizer$1;tokenizer.TOKEN=TOKEN$1;var Options$1=options.Options,Output=output.Output,Tokenizer=tokenizer.Tokenizer,TOKEN=tokenizer.TOKEN,lineBreak=/\r\n|[\r\n]/,allLineBreaks=/\r\n|[\r\n]/g,Printer=function(s,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=s.max_preserve_newlines,this.preserve_newlines=s.preserve_newlines,this._output=new Output(s,e)};Printer.prototype.current_line_has_match=function(s){return this._output.current_line.has_match(s)};Printer.prototype.set_space_before_token=function(s,e){this._output.space_before_token=s,this._output.non_breaking_space=e};Printer.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()};Printer.prototype.add_raw_token=function(s){this._output.add_raw_token(s)};Printer.prototype.print_preserved_newlines=function(s){var e=0;s.type!==TOKEN.TEXT&&s.previous.type!==TOKEN.TEXT&&(e=s.newlines?1:0),this.preserve_newlines&&(e=s.newlines<this.max_preserve_newlines+1?s.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return e!==0};Printer.prototype.traverse_whitespace=function(s){return s.whitespace_before||s.newlines?(this.print_preserved_newlines(s)||(this._output.space_before_token=!0),!0):!1};Printer.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};Printer.prototype.print_newline=function(s){this._output.add_new_line(s)};Printer.prototype.print_token=function(s){s.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(s.text))};Printer.prototype.indent=function(){this.indent_level++};Printer.prototype.get_full_indent=function(s){return s=this.indent_level+(s||0),s<1?"":this._output.get_indent_string(s)};var get_type_attribute=function(s){for(var e=null,n=s.next;n.type!==TOKEN.EOF&&s.closed!==n;){if(n.type===TOKEN.ATTRIBUTE&&n.text==="type"){n.next&&n.next.type===TOKEN.EQUALS&&n.next.next&&n.next.next.type===TOKEN.VALUE&&(e=n.next.next.text);break}n=n.next}return e},get_custom_beautifier_name=function(s,e){var n=null,c=null;return e.closed?(s==="script"?n="text/javascript":s==="style"&&(n="text/css"),n=get_type_attribute(e)||n,n.search("text/css")>-1?c="css":n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?c="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?c="html":n.search(/test\/null/)>-1&&(c="null"),c):null};function in_array(s,e){return e.indexOf(s)!==-1}function TagFrame(s,e,n){this.parent=s||null,this.tag=e?e.tag_name:"",this.indent_level=n||0,this.parser_token=e||null}function TagStack(s){this._printer=s,this._current_frame=null}TagStack.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};TagStack.prototype.record_tag=function(s){var e=new TagFrame(this._current_frame,s,this._printer.indent_level);this._current_frame=e};TagStack.prototype._try_pop_frame=function(s){var e=null;return s&&(e=s.parser_token,this._printer.indent_level=s.indent_level,this._current_frame=s.parent),e};TagStack.prototype._get_frame=function(s,e){for(var n=this._current_frame;n&&s.indexOf(n.tag)===-1;){if(e&&e.indexOf(n.tag)!==-1){n=null;break}n=n.parent}return n};TagStack.prototype.try_pop=function(s,e){var n=this._get_frame([s],e);return this._try_pop_frame(n)};TagStack.prototype.indent_to_tag=function(s){var e=this._get_frame(s);e&&(this._printer.indent_level=e.indent_level)};function Beautifier$1(s,e,n,c){this._source_text=s||"",e=e||{},this._js_beautify=n,this._css_beautify=c,this._tag_stack=null;var h=new Options$1(e,"html");this._options=h,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Beautifier$1.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var s=this._source_text,e=this._options.eol;this._options.eol==="auto"&&(e=`
`,s&&lineBreak.test(s)&&(e=s.match(lineBreak)[0])),s=s.replace(allLineBreaks,`
`);var n=s.match(/^[\t ]*/)[0],c={text:"",type:""},h=new TagOpenParserToken,u=new Printer(this._options,n),d=new Tokenizer(s,this._options).tokenize();this._tag_stack=new TagStack(u);for(var m=null,g=d.next();g.type!==TOKEN.EOF;)g.type===TOKEN.TAG_OPEN||g.type===TOKEN.COMMENT?(m=this._handle_tag_open(u,g,h,c),h=m):g.type===TOKEN.ATTRIBUTE||g.type===TOKEN.EQUALS||g.type===TOKEN.VALUE||g.type===TOKEN.TEXT&&!h.tag_complete?m=this._handle_inside_tag(u,g,h,d):g.type===TOKEN.TAG_CLOSE?m=this._handle_tag_close(u,g,h):g.type===TOKEN.TEXT?m=this._handle_text(u,g,h):u.add_raw_token(g),c=m,g=d.next();var b=u._output.get_code(e);return b};Beautifier$1.prototype._handle_tag_close=function(s,e,n){var c={text:e.text,type:e.type};return s.alignment_size=0,n.tag_complete=!0,s.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),n.is_unformatted?s.add_raw_token(e):(n.tag_start_char==="<"&&(s.set_space_before_token(e.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&s.print_newline(!1)),s.print_token(e)),n.indent_content&&!(n.is_unformatted||n.is_content_unformatted)&&(s.indent(),n.indent_content=!1),!n.is_inline_element&&!(n.is_unformatted||n.is_content_unformatted)&&s.set_wrap_point(),c};Beautifier$1.prototype._handle_inside_tag=function(s,e,n,c){var h=n.has_wrapped_attrs,u={text:e.text,type:e.type};if(s.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),n.is_unformatted)s.add_raw_token(e);else if(n.tag_start_char==="{"&&e.type===TOKEN.TEXT)s.print_preserved_newlines(e)?(e.newlines=0,s.add_raw_token(e)):s.print_token(e);else{if(e.type===TOKEN.ATTRIBUTE?(s.set_space_before_token(!0),n.attr_count+=1):(e.type===TOKEN.EQUALS||e.type===TOKEN.VALUE&&e.previous.type===TOKEN.EQUALS)&&s.set_space_before_token(!1),e.type===TOKEN.ATTRIBUTE&&n.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(s.traverse_whitespace(e),h=h||e.newlines!==0),this._is_wrap_attributes_force)){var d=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&n.attr_count===1){var m=!0,g=0,b;do{if(b=c.peek(g),b.type===TOKEN.ATTRIBUTE){m=!1;break}g+=1}while(g<4&&b.type!==TOKEN.EOF&&b.type!==TOKEN.TAG_CLOSE);d=!m}d&&(s.print_newline(!1),h=!0)}s.print_token(e),h=h||s.previous_token_wrapped(),n.has_wrapped_attrs=h}return u};Beautifier$1.prototype._handle_text=function(s,e,n){var c={text:e.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(s,e,n):n.is_unformatted||n.is_content_unformatted?s.add_raw_token(e):(s.traverse_whitespace(e),s.print_token(e)),c};Beautifier$1.prototype._print_custom_beatifier_text=function(s,e,n){var c=this;if(e.text!==""){var h=e.text,u,d=1,m="",g="";n.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?u=this._js_beautify:n.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?u=this._css_beautify:n.custom_beautifier_name==="html"&&(u=function(S,A){var E=new Beautifier$1(S,A,c._js_beautify,c._css_beautify);return E.beautify()}),this._options.indent_scripts==="keep"?d=0:this._options.indent_scripts==="separate"&&(d=-s.indent_level);var b=s.get_full_indent(d);if(h=h.replace(/\n[ \t]*$/,""),n.custom_beautifier_name!=="html"&&h[0]==="<"&&h.match(/^(<!--|<!\[CDATA\[)/)){var O=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(h);if(!O){s.add_raw_token(e);return}m=b+O[1]+`
`,h=O[4],O[5]&&(g=b+O[5]),h=h.replace(/\n[ \t]*$/,""),(O[2]||O[3].indexOf(`
`)!==-1)&&(O=O[3].match(/[ \t]+$/),O&&(e.whitespace_before=O[0]))}if(h)if(u){var v=function(){this.eol=`
`};v.prototype=this._options.raw_options;var y=new v;h=u(b+h,y)}else{var w=e.whitespace_before;w&&(h=h.replace(new RegExp(`
(`+w+")?","g"),`
`)),h=b+h.replace(/\n/g,`
`+b)}m&&(h?h=m+h+`
`+g:h=m+g),s.print_newline(!1),h&&(e.text=h,e.whitespace_before="",e.newlines=0,s.add_raw_token(e),s.print_newline(!0))}};Beautifier$1.prototype._handle_tag_open=function(s,e,n,c){var h=this._get_tag_open_token(e);return(n.is_unformatted||n.is_content_unformatted)&&!n.is_empty_element&&e.type===TOKEN.TAG_OPEN&&e.text.indexOf("</")===0?(s.add_raw_token(e),h.start_tag_token=this._tag_stack.try_pop(h.tag_name)):(s.traverse_whitespace(e),this._set_tag_position(s,e,h,n,c),h.is_inline_element||s.set_wrap_point(),s.print_token(e)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(h.alignment_size=e.text.length+1),!h.tag_complete&&!h.is_unformatted&&(s.alignment_size=h.alignment_size),h};var TagOpenParserToken=function(s,e){if(this.parent=s||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!e)this.tag_complete=!0;else{var n;this.tag_start_char=e.text[0],this.text=e.text,this.tag_start_char==="<"?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=e.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"",(e.text.startsWith("{{#>")||e.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&e.next!==null?this.tag_check=e.next.text.split(" ")[0]:this.tag_check=e.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),e.type===TOKEN.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&e.closed.text==="/>";var c=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(c=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(c)))}};Beautifier$1.prototype._get_tag_open_token=function(s){var e=new TagOpenParserToken(this._tag_stack.get_parser_token(),s);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||in_array(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&in_array(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&in_array(e.tag_check,this._options.content_unformatted),e.is_inline_element=in_array(e.tag_name,this._options.inline)||e.tag_start_char==="{",e};Beautifier$1.prototype._set_tag_position=function(s,e,n,c,h){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||s.print_newline(!1)),this._tag_stack.record_tag(n),(n.tag_name==="script"||n.tag_name==="style")&&!(n.is_unformatted||n.is_content_unformatted)&&(n.custom_beautifier_name=get_custom_beautifier_name(n.tag_check,e)))),in_array(n.tag_check,this._options.extra_liners)&&(s.print_newline(!1),s._output.just_added_blankline()||s.print_newline(!0)),n.is_empty_element){if(n.tag_start_char==="{"&&n.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0;var u=s.current_line_has_match(/{{#if/);u||s.print_newline(!1)}n.tag_name==="!--"&&h.type===TOKEN.TAG_CLOSE&&c.is_end_tag&&n.text.indexOf(`
`)===-1||(n.is_inline_element||n.is_unformatted||s.print_newline(!1),this._calcluate_parent_multiline(s,n))}else if(n.is_end_tag){var d=!1;d=n.start_tag_token&&n.start_tag_token.multiline_content,d=d||!n.is_inline_element&&!(c.is_inline_element||c.is_unformatted)&&!(h.type===TOKEN.TAG_CLOSE&&n.start_tag_token===c)&&h.type!=="TK_CONTENT",(n.is_content_unformatted||n.is_unformatted)&&(d=!1),d&&s.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,n.tag_start_char==="<"&&(n.tag_name==="html"?n.indent_content=this._options.indent_inner_html:n.tag_name==="head"?n.indent_content=this._options.indent_head_inner_html:n.tag_name==="body"&&(n.indent_content=this._options.indent_body_inner_html)),!(n.is_inline_element||n.is_unformatted)&&(h.type!=="TK_CONTENT"||n.is_content_unformatted)&&s.print_newline(!1),this._calcluate_parent_multiline(s,n)};Beautifier$1.prototype._calcluate_parent_multiline=function(s,e){e.parent&&s._output.just_added_newline()&&!((e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element)&&(e.parent.multiline_content=!0)};var p_closers=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],p_parent_excludes=["a","audio","del","ins","map","noscript","video"];Beautifier$1.prototype._do_optional_end_element=function(s){var e=null;if(!(s.is_empty_element||!s.is_start_tag||!s.parent)){if(s.tag_name==="body")e=e||this._tag_stack.try_pop("head");else if(s.tag_name==="li")e=e||this._tag_stack.try_pop("li",["ol","ul"]);else if(s.tag_name==="dd"||s.tag_name==="dt")e=e||this._tag_stack.try_pop("dt",["dl"]),e=e||this._tag_stack.try_pop("dd",["dl"]);else if(s.parent.tag_name==="p"&&p_closers.indexOf(s.tag_name)!==-1){var n=s.parent.parent;(!n||p_parent_excludes.indexOf(n.tag_name)===-1)&&(e=e||this._tag_stack.try_pop("p"))}else s.tag_name==="rp"||s.tag_name==="rt"?(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]),e=e||this._tag_stack.try_pop("rp",["ruby","rtc"])):s.tag_name==="optgroup"?e=e||this._tag_stack.try_pop("optgroup",["select"]):s.tag_name==="option"?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):s.tag_name==="colgroup"?e=e||this._tag_stack.try_pop("caption",["table"]):s.tag_name==="thead"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"])):s.tag_name==="tbody"||s.tag_name==="tfoot"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("thead",["table"]),e=e||this._tag_stack.try_pop("tbody",["table"])):s.tag_name==="tr"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(s.tag_name==="th"||s.tag_name==="td")&&(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),e=e||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return s.parent=this._tag_stack.get_parser_token(),e}};beautifier.Beautifier=Beautifier$1;var Beautifier=beautifier.Beautifier,Options=options.Options;function style_html$1(s,e,n,c){var h=new Beautifier(s,e,n,c);return h.beautify()}html.exports=style_html$1;html.exports.defaultOptions=function(){return new Options};var js_beautify=javascript.exports,css_beautify=css$1.exports,html_beautify=html.exports;function style_html(s,e,n,c){return n=n||js_beautify,c=c||css_beautify,html_beautify(s,e,n,c)}style_html.defaultOptions=html_beautify.defaultOptions;src$1.js=js_beautify;src$1.css=css_beautify;src$1.html=style_html;(function(s){function e(n,c,h){var u=function(d,m){return n.js_beautify(d,m)};return u.js=n.js_beautify,u.css=c.css_beautify,u.html=h.html_beautify,u.js_beautify=n.js_beautify,u.css_beautify=c.css_beautify,u.html_beautify=h.html_beautify,u}(function(n){var c=src$1;c.js_beautify=c.js,c.css_beautify=c.css,c.html_beautify=c.html,n.exports=e(c,c,c)})(s)})(js);class Editor$1 extends events$3{constructor({parent:e=document.body,autocompleteOptions:n=[]}={}){super();const c=this;this.cm=new EditorView({state:EditorState.create({lineWrapping:!0,extensions:setup({autocompleteOptions:n,emit:(h,u)=>{console.log("EMITTING",c,h,u),c.emit(h,u)}})}),parent:e}),openLintPanel(this.cm),window.cm=this.cm}formatCode(){const e=js.exports.js_beautify(this.cm.state.doc.toString(),{indent_size:2,break_chained_methods:!0});this.cm.dispatch({changes:{from:0,to:cm.state.doc.length,insert:e}})}setValue(e=""){this.cm.dispatch({changes:{from:0,to:cm.state.doc.length,insert:e}})}toggle(){this.cm.dom.style.opacity==0?this.cm.dom.style.opacity=1:this.cm.dom.style.opacity=0}}var glslFunctions=()=>[{name:"noise",type:"src",inputs:[{type:"float",name:"scale",default:10},{type:"float",name:"offset",default:.1}],glsl:"   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);"},{name:"voronoi",type:"src",inputs:[{type:"float",name:"scale",default:5},{type:"float",name:"speed",default:.3},{type:"float",name:"blending",default:.3}],glsl:`   vec3 color = vec3(.0);
   // Scale
   _st *= scale;
   // Tile the space
   vec2 i_st = floor(_st);
   vec2 f_st = fract(_st);
   float m_dist = 10.;  // minimun distance
   vec2 m_point;        // minimum point
   for (int j=-1; j<=1; j++ ) {
   for (int i=-1; i<=1; i++ ) {
   vec2 neighbor = vec2(float(i),float(j));
   vec2 p = i_st + neighbor;
   vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);
   point = 0.5 + 0.5*sin(time*speed + 6.2831*point);
   vec2 diff = neighbor + point - f_st;
   float dist = length(diff);
   if( dist < m_dist ) {
   m_dist = dist;
   m_point = point;
   }
   }
   }
   // Assign a color using the closest point position
   color += dot(m_point,vec2(.3,.6));
   color *= 1.0 - blending*m_dist;
   return vec4(color, 1.0);`},{name:"osc",type:"src",inputs:[{type:"float",name:"frequency",default:60},{type:"float",name:"sync",default:.1},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st;
   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;
   float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;
   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;
   return vec4(r, g, b, 1.0);`},{name:"shape",type:"src",inputs:[{type:"float",name:"sides",default:3},{type:"float",name:"radius",default:.3},{type:"float",name:"smoothing",default:.01}],glsl:`   vec2 st = _st * 2. - 1.;
   // Angle and radius from the current pixel
   float a = atan(st.x,st.y)+3.1416;
   float r = (2.*3.1416)/sides;
   float d = cos(floor(.5+a/r)*r-a)*length(st);
   return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`},{name:"gradient",type:"src",inputs:[{type:"float",name:"speed",default:0}],glsl:"   return vec4(_st, sin(time*speed), 1.0);"},{name:"src",type:"src",inputs:[{type:"sampler2D",name:"tex",default:NaN}],glsl:`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);
   return texture2D(tex, fract(_st));`},{name:"solid",type:"src",inputs:[{type:"float",name:"r",default:0},{type:"float",name:"g",default:0},{type:"float",name:"b",default:0},{type:"float",name:"a",default:1}],glsl:"   return vec4(r, g, b, a);"},{name:"rotate",type:"coord",inputs:[{type:"float",name:"angle",default:10},{type:"float",name:"speed",default:0}],glsl:`   vec2 xy = _st - vec2(0.5);
   float ang = angle + speed *time;
   xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;
   xy += 0.5;
   return xy;`},{name:"scale",type:"coord",inputs:[{type:"float",name:"amount",default:1.5},{type:"float",name:"xMult",default:1},{type:"float",name:"yMult",default:1},{type:"float",name:"offsetX",default:.5},{type:"float",name:"offsetY",default:.5}],glsl:`   vec2 xy = _st - vec2(offsetX, offsetY);
   xy*=(1.0/vec2(amount*xMult, amount*yMult));
   xy+=vec2(offsetX, offsetY);
   return xy;
   `},{name:"pixelate",type:"coord",inputs:[{type:"float",name:"pixelX",default:20},{type:"float",name:"pixelY",default:20}],glsl:`   vec2 xy = vec2(pixelX, pixelY);
   return (floor(_st * xy) + 0.5)/xy;`},{name:"posterize",type:"color",inputs:[{type:"float",name:"bins",default:3},{type:"float",name:"gamma",default:.6}],glsl:`   vec4 c2 = pow(_c0, vec4(gamma));
   c2 *= vec4(bins);
   c2 = floor(c2);
   c2/= vec4(bins);
   c2 = pow(c2, vec4(1.0/gamma));
   return vec4(c2.xyz, _c0.a);`},{name:"shift",type:"color",inputs:[{type:"float",name:"r",default:.5},{type:"float",name:"g",default:0},{type:"float",name:"b",default:0},{type:"float",name:"a",default:0}],glsl:`   vec4 c2 = vec4(_c0);
   c2.r = fract(c2.r + r);
   c2.g = fract(c2.g + g);
   c2.b = fract(c2.b + b);
   c2.a = fract(c2.a + a);
   return vec4(c2.rgba);`},{name:"repeat",type:"coord",inputs:[{type:"float",name:"repeatX",default:3},{type:"float",name:"repeatY",default:3},{type:"float",name:"offsetX",default:0},{type:"float",name:"offsetY",default:0}],glsl:`   vec2 st = _st * vec2(repeatX, repeatY);
   st.x += step(1., mod(st.y,2.0)) * offsetX;
   st.y += step(1., mod(st.x,2.0)) * offsetY;
   return fract(st);`},{name:"modulateRepeat",type:"combineCoord",inputs:[{type:"float",name:"repeatX",default:3},{type:"float",name:"repeatY",default:3},{type:"float",name:"offsetX",default:.5},{type:"float",name:"offsetY",default:.5}],glsl:`   vec2 st = _st * vec2(repeatX, repeatY);
   st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;
   st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;
   return fract(st);`},{name:"repeatX",type:"coord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
   //  float f =  mod(_st.y,2.0);
   st.y += step(1., mod(st.x,2.0))* offset;
   return fract(st);`},{name:"modulateRepeatX",type:"combineCoord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:.5}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
   //  float f =  mod(_st.y,2.0);
   st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;
   return fract(st);`},{name:"repeatY",type:"coord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st * vec2(1.0, reps);
   //  float f =  mod(_st.y,2.0);
   st.x += step(1., mod(st.y,2.0))* offset;
   return fract(st);`},{name:"modulateRepeatY",type:"combineCoord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:.5}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
   //  float f =  mod(_st.y,2.0);
   st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;
   return fract(st);`},{name:"kaleid",type:"coord",inputs:[{type:"float",name:"nSides",default:4}],glsl:`   vec2 st = _st;
   st -= 0.5;
   float r = length(st);
   float a = atan(st.y, st.x);
   float pi = 2.*3.1416;
   a = mod(a,pi/nSides);
   a = abs(a-pi/nSides/2.);
   return r*vec2(cos(a), sin(a));`},{name:"modulateKaleid",type:"combineCoord",inputs:[{type:"float",name:"nSides",default:4}],glsl:`   vec2 st = _st - 0.5;
   float r = length(st);
   float a = atan(st.y, st.x);
   float pi = 2.*3.1416;
   a = mod(a,pi/nSides);
   a = abs(a-pi/nSides/2.);
   return (_c0.r+r)*vec2(cos(a), sin(a));`},{name:"scroll",type:"coord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"scrollY",default:.5},{type:"float",name:"speedX",default:0},{type:"float",name:"speedY",default:0}],glsl:`
   _st.x += scrollX + time*speedX;
   _st.y += scrollY + time*speedY;
   return fract(_st);`},{name:"scrollX",type:"coord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.x += scrollX + time*speed;
   return fract(_st);`},{name:"modulateScrollX",type:"combineCoord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.x += _c0.r*scrollX + time*speed;
   return fract(_st);`},{name:"scrollY",type:"coord",inputs:[{type:"float",name:"scrollY",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.y += scrollY + time*speed;
   return fract(_st);`},{name:"modulateScrollY",type:"combineCoord",inputs:[{type:"float",name:"scrollY",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.y += _c0.r*scrollY + time*speed;
   return fract(_st);`},{name:"add",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return (_c0+_c1)*amount + _c0*(1.0-amount);"},{name:"sub",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return (_c0-_c1)*amount + _c0*(1.0-amount);"},{name:"layer",type:"combine",inputs:[],glsl:"   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), clamp(_c0.a + _c1.a, 0.0, 1.0));"},{name:"blend",type:"combine",inputs:[{type:"float",name:"amount",default:.5}],glsl:"   return _c0*(1.0-amount)+_c1*amount;"},{name:"mult",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return _c0*(1.0-amount)+(_c0*_c1)*amount;"},{name:"diff",type:"combine",inputs:[],glsl:"   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));"},{name:"modulate",type:"combineCoord",inputs:[{type:"float",name:"amount",default:.1}],glsl:`   //  return fract(st+(_c0.xy-0.5)*amount);
   return _st + _c0.xy*amount;`},{name:"modulateScale",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:1},{type:"float",name:"offset",default:1}],glsl:`   vec2 xy = _st - vec2(0.5);
   xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));
   xy+=vec2(0.5);
   return xy;`},{name:"modulatePixelate",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:10},{type:"float",name:"offset",default:3}],glsl:`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);
   return (floor(_st * xy) + 0.5)/xy;`},{name:"modulateRotate",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:1},{type:"float",name:"offset",default:0}],glsl:`   vec2 xy = _st - vec2(0.5);
   float angle = offset + _c0.x * multiple;
   xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;
   xy += 0.5;
   return xy;`},{name:"modulateHue",type:"combineCoord",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);"},{name:"invert",type:"color",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);"},{name:"contrast",type:"color",inputs:[{type:"float",name:"amount",default:1.6}],glsl:`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);
   return vec4(c.rgb, _c0.a);`},{name:"brightness",type:"color",inputs:[{type:"float",name:"amount",default:.4}],glsl:"   return vec4(_c0.rgb + vec3(amount), _c0.a);"},{name:"mask",type:"combine",inputs:[],glsl:`   float a = _luminance(_c1.rgb);
  return vec4(_c0.rgb*a, a*_c0.a);`},{name:"luma",type:"color",inputs:[{type:"float",name:"threshold",default:.5},{type:"float",name:"tolerance",default:.1}],glsl:`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));
   return vec4(_c0.rgb*a, a);`},{name:"thresh",type:"color",inputs:[{type:"float",name:"threshold",default:.5},{type:"float",name:"tolerance",default:.04}],glsl:"   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);"},{name:"color",type:"color",inputs:[{type:"float",name:"r",default:1},{type:"float",name:"g",default:1},{type:"float",name:"b",default:1},{type:"float",name:"a",default:1}],glsl:`   vec4 c = vec4(r, g, b, a);
   vec4 pos = step(0.0, c); // detect whether negative
   // if > 0, return r * _c0
   // if < 0 return (1.0-r) * _c0
   return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`},{name:"saturate",type:"color",inputs:[{type:"float",name:"amount",default:2}],glsl:`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);
   vec3 intensity = vec3(dot(_c0.rgb, W));
   return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`},{name:"hue",type:"color",inputs:[{type:"float",name:"hue",default:.4}],glsl:`   vec3 c = _rgbToHsv(_c0.rgb);
   c.r += hue;
   //  c.r = fract(c.r);
   return vec4(_hsvToRgb(c), _c0.a);`},{name:"colorama",type:"color",inputs:[{type:"float",name:"amount",default:.005}],glsl:`   vec3 c = _rgbToHsv(_c0.rgb);
   c += vec3(amount);
   c = _hsvToRgb(c);
   c = fract(c);
   return vec4(c, _c0.a);`},{name:"prev",type:"src",inputs:[],glsl:"   return texture2D(prevBuffer, fract(_st));"},{name:"sum",type:"color",inputs:[{type:"vec4",name:"scale",default:1}],glsl:`   vec4 v = _c0 * s;
   return v.r + v.g + v.b + v.a;
   }
   float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded
   vec2 v = _st.xy * s.xy;
   return v.x + v.y;`},{name:"r",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.r * scale + offset);"},{name:"g",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.g * scale + offset);"},{name:"b",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.b * scale + offset);"},{name:"a",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.a * scale + offset);"}];const filterOut=["prev","sum"];var hydraLang=s=>{const e=Object.entries(s.synth).map(([E,P])=>{console.log(E,P,typeof P);let I=E,U=typeof P,z="";return U==="function"?I+="()":U==="object"&&(U=P.constructor.name),{label:I,type:U,name:E,info:z}}),n=glslFunctions().filter(E=>!filterOut.includes(E.name)),c=n.map(E=>{const P=Object.assign({},E,{glsl:"<placeholder>"}),I=JSON.stringify(P,null,2),U=`\`
     ${E.glsl}
    \``,z=I.replace('"<placeholder>"',U);return{label:`setFunction(<${E.name}>)`,apply:z}});n.forEach(E=>{(E.type==="combine"||E.type==="combineCoord")&&(E.inputs=[{type:"vec4",name:"texture"},...E.inputs])});const h=n.map(E=>(E.inputs!==void 0?`${E.name}${E.inputs.map(P=>`#{${P.hasOwnProperty("default")?`${P.name}${Math.floor(Math.random()*10)}`:""}}`).join(", ")}`:`${E.name}`,{label:`${E.name}()`,type:E.type,name:E.name,apply:`${E.name}(${Math.random()*4})`,id:E.name,boost:E.type==="src"?99:E.type==="coord"?90:E.type==="color"?40:E.type==="combine"?20:0})),u=[{label:"fft[0]",apply:"() => a.fft[0]"},{label:"fft[1]",apply:"() => a.fft[1]"},{label:"cc[0]",apply:"() => cc[0]"},{label:"cc[1]",apply:"() => cc[1]"}];console.log("HYDRA FUNCTION OPTIONS",h),h.push({label:"out()",id:"out"});const d=h.filter(E=>E.type==="src"),m=d.map(E=>E.name),g=h.filter(E=>E.type!="src"),b=e.filter(E=>E.type==="Output"),O=e.filter(E=>E.type==="HydraSource"),v=s.sandbox.userProps,y=["a","mouse","width","height","time"],w=e.filter(E=>y.includes(E.label)),S=h.filter(E=>E.type==="combine"||E.type==="combineCoord").map(E=>E.name),A=e.filter(E=>E.type==="function"&&!m.includes(E.name)||v.includes(E.label));return console.log("functionOptions",h,m,e),{srcOptions:d,chainOptions:g,arrowFunctions:u,hydraGlobals:A,setFunctionOptions:c,hydraConstants:w,outputOptions:b,externalSourceOptions:O,combineNames:S}},config={minValue:1,maxValue:10,minBoundedValue:0,maxBoundedValue:1,minFunctions:2,maxFunctions:5,mouseProbability:0,sources:["gradient","osc","noise","shape","osc"],colorTransforms:["contrast","color","saturate","hue","colorama"],coordTransforms:["rotate","scale","pixelate","repeat","kaleid","scrollX","scrollY"],modulateTransforms:["modulate","diff","modulateKaleid","modulatePixelate","modulateRotate","modulateScale","modulateRepeat"]};console.log("CONFIG IS",config);const{colorTransforms,coordTransforms,modulateTransforms}=config,getMouseFunction=(s,e,n)=>`() => ${s.toFixed(2)} + mouse.${n}*(${(e-s).toFixed(2)}/width)`,map=(s,e,n,c,h)=>n+(s-e)*(h-n)/(c-e),allTransforms=[...colorTransforms,...coordTransforms,...modulateTransforms],rng=Math.random,extraCode="",templates={gradient:()=>`gradient(${r(-.2,.2)})`,osc:()=>`osc(${rInt(2,15)}, ${r(-.1,.1)}, ${r(-3,3)})`,noise:()=>`noise(${r(1.5,5)}, ${r(-.1,.1)})`,shape:()=>`shape(${genRandomValue(!1)+2}, ${r(.15,.85)}, ${r(0,.4)})`,voronoi:()=>`voronoi(${genRandomValue(!1)}, ${r(-.2,.2)}, ${genRandomValue(!0)})`,feedback:()=>"src(o0)",invert:()=>`.invert(${genRandomValue(!1)})`,contrast:()=>`.contrast(${r(1,5)})`,brightness:()=>`.brightness(${genRandomValue(!0)})`,luma:()=>`.luma(${genRandomValue(!0)})`,thresh:()=>`.thresh(${genRandomValue(!0)}, ${genRandomValue(!0)})`,color:()=>`.color(${r(-2,2)}, ${r(-2,2)}, ${r(-2,2)})`,saturate:()=>`.saturate(${genRandomValue(!1)})`,hue:()=>`.hue(${genRandomValue(!0)})`,colorama:()=>`.colorama(${r(0,3)})`,rotate:()=>`.rotate(${genRandomValue(!1)}, ${r(-.5,.5)})`,scale:()=>`.scale(${r(.1,4)}, ${r(.1,4)}, ${r(.1,4)})`,pixelate:()=>`.pixelate(${r(4,90)}, ${r(4,90)})`,repeat:()=>`.repeat(${rInt(1,4)}, ${rInt(1,4)}, ${r(0,1)}, ${r(0,1)})`,kaleid:()=>`.scrollY(0.5).kaleid(${genRandomValue(!1)})`,scrollX:()=>`.scrollX(${genRandomValue(!1)}, ${r(-.1,.1)})`,scrollY:()=>`.scrollY(${genRandomValue(!1)}, ${r(-.1,.1)})`,layer:()=>`.layer(${generateMultiple(1)}
      .mask(
        ${generateMultiple(1)}.thresh(${r(.4,.6)}, ${r(0,.3)})
      )
    )`,layerBW:()=>`.layer(${generateMultiple()}.saturate(0).mask(${generateMultiple(1)}.thresh(${r(.4,.6)}, ${r(0,.3)})))`,diff:()=>`.diff(${generateMultiple(3)})`,blend:()=>`.blend(${generateMultiple(1)})`,modulate:()=>`.modulate(${generateMultiple(1)}, ${genRandomValue(!0)})`,modulateHue:()=>`.modulateHue(${generateMultiple(1)}, ${genRandomValue(!0)})`,modulateKaleid:()=>`.scrollY(0.5).modulateKaleid(${generateElementFrom(config.sources)}, ${r(.1,20)})`,modulatePixelate:()=>`.modulatePixelate(${generateElementFrom(config.sources)}, ${rInt(3,100)}, ${rInt(3,100)})`,modulateRotate:()=>`.modulateRotate(${generateElementFrom(config.sources)}, ${genRandomValue(!0)})`,modulateScale:()=>`.modulateScale(${generateElementFrom(config.sources)}, ${genRandomValue(!0)})`,modulateRepeat:()=>`.modulateRepeat(${generateElementFrom(config.sources)}, ${genRandomValue(!0)})`};function getFromName(s){if(templates[s]!==void 0){let n=templates[s]();return n.indexOf(".")===0&&(n=n.substring(1,n.length)),n}return`${s}()`}function generateRandom(){let s="";s+=extraCode,s+=generateMultiple(),s+=`
`,s+=templates.layer();let e=getRandomBetween(0,2,!1);for(var n=0;n<e;n++)s+=`
`,s+=generateElementFrom(allTransforms);return s+=`
.out(o0)`,s}const testSnippets=[{label:"layer",detail:"short",apply:"layer(osc(4, 0.05, 1.2).mask(shape(4, 0.1, 0)))"},{label:"modulate",detail:"gradient out",apply:`modulate(solid()
    .add(gradient()
      .pixelate(2, 2)
      .brightness(-0.5)
    ),
   -0.08)
    `},{label:"mult",detail:"mask lines",apply:`.mult(
      osc(40, 0.0).rotate(Math.PI/2).pixelate(10, 10).modulateScale(osc(4).color(0, 1).pixelate(10, 10), -0.9, 1).thresh(0.1))`}];function generateMultiple(s=config.maxFunctions,e=config.minFunctions){let n=getRandomBetween(e,s,!1),c="";c+=generateElementFrom(config.sources);for(var h=0;h<n;h++)c+=`
`,c+=generateElementFrom(allTransforms);return c}function getRandomBetween(s,e,n){return n?(rng()*(e-s)+s).toFixed(2):Math.floor(rng()*(e-s+1))+s}function genRandomValue(s){return s?getRandomBetween(config.minBoundedValue,config.maxBoundedValue,!0):getRandomBetween(config.minValue,config.maxValue,!1)}function r(s=config.minValue,e=config.maxValue){const n=map(rng(),0,s,1,e);return rng()<config.mouseProbability?getMouseFunction(n*.6,n*1.5,rng()>.5?"x":"y"):n.toFixed(2)}function rInt(s,e){const n=map(rng(),0,s,1,e).toFixed(0);if(rng()<config.mouseProbability){const c=rng()>.5?"x":"y";return`() => ${n}+(mouse.${c}/width)*${4}`}else return Math.floor(n)}function generateElementFrom(s){let e=getRandomBetween(0,s.length-1,!1),n=s[e];return templates[n]()}const completePropertyAfter=["PropertyName",".","?."],getObjectFromName=(s="")=>{const e=s.split(".");return e[e.length-1].replace("(","").replace(")","")},getFunctionText=(s=()=>{})=>s.toString().split("{")[0],randomize=s=>s.map(e=>Object.assign({},e,{apply:getFromName(e.id)})),createAutocomplete=({arrowFunctions:s,hydraConstants:e,srcOptions:n,setFunctionOptions:c,externalSourceOptions:h,combineNames:u,chainOptions:d,outputOptions:m,hydraGlobals:g})=>b=>{var w,S,A,E,P,I,U,z,N,R,F;let O=b.matchBefore(/\w*/),v=syntaxTree(b.state).resolveInner(b.pos,-1);console.log("running autocomplete",O);const y=D=>{var ae;let de=(ae=D.parent)==null?void 0:ae.getChild("Expression"),H=b.state.sliceDoc(de.from,de.to),he=getObjectFromName(H);return he==="out"?m:u.includes(he)?[...randomize(n),...m,...h]:he==="src"?[...h,...m]:he==="setFunction"?c:[]};if(console.log("before",v.name,(w=v.parent)==null?void 0:w.name,(A=(S=v.parent)==null?void 0:S.parent)==null?void 0:A.name),v.name==="ArrowFunction"||((E=v.parent)==null?void 0:E.name)==="ArrowFunction")return{from:O.from,options:[...e]};if(((P=v.parent)==null?void 0:P.name)==="ArgList"){const D=y(v.parent);return{from:O.from,options:D}}if(v.name==="ArgList"){const D=y(v);return{from:O.from,options:D}}if(completePropertyAfter.includes(v.name)&&((I=v.parent)==null?void 0:I.name)=="MemberExpression"){let D=v.parent.getChild("Expression");if((D==null?void 0:D.name)==="VariableName"){let de=b.state.sliceDoc(D.from,D.to);const H=window[de];if(((z=(U=v.parent)==null?void 0:U.parent)==null?void 0:z.name)==="ArrowFunction"){const he=Object.keys(H).map(ae=>({label:ae}));return{from:O.from,options:he}}else{const he=Object.getOwnPropertyNames(Object.getPrototypeOf(H)).map(ae=>({label:ae,info:getFunctionText(H[ae])}));return{from:O.from,options:he}}}else if((D==null?void 0:D.name)==="CallExpression")return b.state.sliceDoc(D.from,D.to),{from:O.from,options:[...d.map(de=>Object.assign({},de,{apply:getFromName(de.id)})),...testSnippets]}}return v.name==="("?{from:O.from,options:s}:v.name==="Script"||((N=v.parent)==null?void 0:N.name)==="Script"||((F=(R=v.parent)==null?void 0:R.parent)==null?void 0:F.name)==="Script"?{from:O.from,options:[...randomize(n),...g,{label:"rAnDoM",apply:generateRandom(),boost:200}]}:null};var createHydraAutocomplete=s=>{const e=hydraLang(s);return createAutocomplete(e)};class Editor extends component{constructor(e,n,c){super(e),this.local=n.components[e]={},n.editor=this,this.emit=c,console.log("EDITOR is",Editor$1),this.state=n}load(e){const n=createHydraAutocomplete(this.state.hydra),c=new Editor$1({parent:this.textEl,autocompleteOptions:n});this.editor=c,c.on("*",(h,u)=>{console.log("22222emitting",h,u),this.emit(h,u)}),c.on("editor:evalLine",h=>{console.log("called eval line!"),repl.eval(h)}),c.on("editor:evalAll",h=>{console.log("called eval line!"),repl.eval(h)}),c.on("editor:evalBlock",h=>{console.log("called eval line!"),repl.eval(h)}),c.on("hideAll",(h,u)=>{console.log("called",h,u)})}hide(){this.editor.cm.dom.style.opacity=0}show(){this.editor.cm.dom.style.opacity=1}update(e){return console.log("state",e),typeof e!="undefined"&&(e.panels.editor===!1?(console.log("hiding"),this.hide()):this.show()),!1}createElement({width:e=window.innerWidth,height:n=window.innerHeight}={}){return this.textEl=html$1` <div></div>`,this.logElement=html$1`<div class="console cm-s-default"></div>`,html$1`<div id="editor-container" style="display:flex;flex-direction:column;" class="overflow-y-scroll">
       ${this.textEl}
       ${this.logElement}
       </div>`}}const colorString$1=s=>s==null?"#000":`rgb(${s[0]}, ${s[1]}, ${s[2]})`;var drawTools=(s,e)=>{if(s.drawSynth){const n=[{}].concat(s.drawSynth.lines),c=html$1`
    <div class="w4 z-4" onblur="${()=>e("sketches:close")}">
    <input style="background-color:${s.style.color0};color:${s.style.color1};border-color:${s.style.color1}" class="f7 courier ba b--white h1 w4" value=${s.sketches.name} oninput=${g=>e("sketches:updateName",g.target.value)} type="text" id="file-name" name="file-name"/>
    ${s.sketches.visible?html$1`
    <div 
      class="overflow-y-auto f7 ba b--white" style="position: relative;top: -138px;height: 120px;"
      onfocusout="${()=>e("sketches:close")}">
      ${Object.keys(s.sketches.all).reverse().map(g=>html$1`<div style="background-color:${s.style.color0};color:${s.style.color1}" class="dim pointer" onclick=${b=>e("sketches:load",g)}>${g}</div>`)}</div>`:""}
    </div>
    <div class="tc w2 f7 courier pa0 pv2 dim pointer ba b--white" onclick=${()=>e("sketches:toggle")}>${s.sketches.visible?"^":"..."}</div>
    `,h=html$1`<div class="flex h1"> 
    <div class="flex"> 
      ${n.map((g,b)=>html$1`
      <div class=" ${b===0?"w0 pa0":"w2 pa2"} h1 b--white ${s.drawSynth.currIndex===b?"ba":""}" onclick=${()=>e("draw:select",b)} style="background-color:${colorString$1(g.color)}">
      </div>`)}
    </div>
    ${c}
    </div>`,u="",d=s.drawSynth.midi,m=html$1`<select onchange=${g=>e("midi:select",g.target.value)} style="background-color:${s.style.color0};color:${s.style.color1};border-color:${s.style.color1}" class="f7 courier h1" name="midi">
     ${d.outputs.map((g,b)=>html$1`<option value=${b} ${b==d.currDevice?"selected":""}>${g.name}</option>`)}</select>`;return html$1`<div>
    ${h}
    ${m}
    ${u}
    </div>`}return html$1`<div> drawing tools willl go here</div>`};function getSquareDistance(s,e){var n=s.x-e.x,c=s.y-e.y,h=s.t-e.t;return n*n+c*c+h*h}function getSquareSegmentDistance(s,e,n){var c=e.x,h=e.y,u=e.t,d=n.x-c,m=n.y-h,g=n.t-u;if(d!==0||m!==0||g!==0){var u=((s.x-c)*d+(s.y-h)*m+(s.t-u)*g)/(d*d+m*m+g*g);u>1?(c=n.x,h=n.y,u=n.t):u>0&&(c+=d*u,h+=m*u,u+=g*u)}return d=s.x-c,m=s.y-h,g=s.t-u,d*d+m*m+g*g}function simplifyRadialDistance(s,e){for(var n=s[0],c=[n],h,u=1,d=s.length;u<d;u++)h=s[u],getSquareDistance(h,n)>e&&(c.push(h),n=h);return n!==h&&c.push(h),c}function simplifyDouglasPeucker(s,e){var n=s.length,c=typeof Uint8Array!="undefined"?Uint8Array:Array,h=new c(n),u=0,d=n-1,m=[],g=[],b,O,v,y;for(h[u]=h[d]=1;d;){for(O=0,b=u+1;b<d;b++)v=getSquareSegmentDistance(s[b],s[u],s[d]),v>O&&(y=b,O=v);O>e&&(h[y]=1,m.push(u,y,y,d)),d=m.pop(),u=m.pop()}for(b=0;b<n;b++)h[b]&&g.push(s[b]);return g}function simplify(s,e,n){var c=e!==void 0?e*e:1;return s=n?s:simplifyRadialDistance(s,c),s=simplifyDouglasPeucker(s,c),s}var chroma$1={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(s,e){(function(n,c){s.exports=c()})(commonjsGlobal,function(){for(var n=function(x,k,$){return k===void 0&&(k=0),$===void 0&&($=1),x<k?k:x>$?$:x},c=n,h=function(x){x._clipped=!1,x._unclipped=x.slice(0);for(var k=0;k<=3;k++)k<3?((x[k]<0||x[k]>255)&&(x._clipped=!0),x[k]=c(x[k],0,255)):k===3&&(x[k]=c(x[k],0,1));return x},u={},d=0,m=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];d<m.length;d+=1){var g=m[d];u["[object "+g+"]"]=g.toLowerCase()}var b=function(x){return u[Object.prototype.toString.call(x)]||"object"},O=b,v=function(x,k){return k===void 0&&(k=null),x.length>=3?Array.prototype.slice.call(x):O(x[0])=="object"&&k?k.split("").filter(function($){return x[0][$]!==void 0}).map(function($){return x[0][$]}):x[0]},y=b,w=function(x){if(x.length<2)return null;var k=x.length-1;return y(x[k])=="string"?x[k].toLowerCase():null},S=Math.PI,A={clip_rgb:h,limit:n,type:b,unpack:v,last:w,PI:S,TWOPI:S*2,PITHIRD:S/3,DEG2RAD:S/180,RAD2DEG:180/S},E={format:{},autodetect:[]},P=A.last,I=A.clip_rgb,U=A.type,z=E,N=function(){for(var k=[],$=arguments.length;$--;)k[$]=arguments[$];var M=this;if(U(k[0])==="object"&&k[0].constructor&&k[0].constructor===this.constructor)return k[0];var q=P(k),X=!1;if(!q){X=!0,z.sorted||(z.autodetect=z.autodetect.sort(function(ve,Ae){return Ae.p-ve.p}),z.sorted=!0);for(var Q=0,J=z.autodetect;Q<J.length;Q+=1){var ee=J[Q];if(q=ee.test.apply(ee,k),q)break}}if(z.format[q]){var _e=z.format[q].apply(null,X?k:k.slice(0,-1));M._rgb=I(_e)}else throw new Error("unknown format: "+k);M._rgb.length===3&&M._rgb.push(1)};N.prototype.toString=function(){return U(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var R=N,F=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(F.Color,[null].concat(x)))};F.Color=R,F.version="2.4.2";var D=F,de=A.unpack,H=Math.max,he=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=de(x,"rgb"),M=$[0],q=$[1],X=$[2];M=M/255,q=q/255,X=X/255;var Q=1-H(M,H(q,X)),J=Q<1?1/(1-Q):0,ee=(1-M-Q)*J,_e=(1-q-Q)*J,ve=(1-X-Q)*J;return[ee,_e,ve,Q]},ae=he,Oe=A.unpack,ye=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=Oe(x,"cmyk");var $=x[0],M=x[1],q=x[2],X=x[3],Q=x.length>4?x[4]:1;return X===1?[0,0,0,Q]:[$>=1?0:255*(1-$)*(1-X),M>=1?0:255*(1-M)*(1-X),q>=1?0:255*(1-q)*(1-X),Q]},ke=ye,pe=D,B=R,K=E,te=A.unpack,Se=A.type,Te=ae;B.prototype.cmyk=function(){return Te(this._rgb)},pe.cmyk=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(B,[null].concat(x,["cmyk"])))},K.format.cmyk=ke,K.autodetect.push({p:2,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=te(x,"cmyk"),Se(x)==="array"&&x.length===4)return"cmyk"}});var Ne=A.unpack,Re=A.last,Ie=function(x){return Math.round(x*100)/100},Me=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=Ne(x,"hsla"),M=Re(x)||"lsa";return $[0]=Ie($[0]||0),$[1]=Ie($[1]*100)+"%",$[2]=Ie($[2]*100)+"%",M==="hsla"||$.length>3&&$[3]<1?($[3]=$.length>3?$[3]:1,M="hsla"):$.length=3,M+"("+$.join(",")+")"},Be=Me,Ue=A.unpack,Pe=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=Ue(x,"rgba");var $=x[0],M=x[1],q=x[2];$/=255,M/=255,q/=255;var X=Math.min($,M,q),Q=Math.max($,M,q),J=(Q+X)/2,ee,_e;return Q===X?(ee=0,_e=Number.NaN):ee=J<.5?(Q-X)/(Q+X):(Q-X)/(2-Q-X),$==Q?_e=(M-q)/(Q-X):M==Q?_e=2+(q-$)/(Q-X):q==Q&&(_e=4+($-M)/(Q-X)),_e*=60,_e<0&&(_e+=360),x.length>3&&x[3]!==void 0?[_e,ee,J,x[3]]:[_e,ee,J]},it=Pe,ut=A.unpack,_t=A.last,Ot=Be,en=it,Lt=Math.round,Ce=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=ut(x,"rgba"),M=_t(x)||"rgb";return M.substr(0,3)=="hsl"?Ot(en($),M):($[0]=Lt($[0]),$[1]=Lt($[1]),$[2]=Lt($[2]),(M==="rgba"||$.length>3&&$[3]<1)&&($[3]=$.length>3?$[3]:1,M="rgba"),M+"("+$.slice(0,M==="rgb"?3:4).join(",")+")")},Qe=Ce,tt=A.unpack,Ke=Math.round,Ge=function(){for(var x,k=[],$=arguments.length;$--;)k[$]=arguments[$];k=tt(k,"hsl");var M=k[0],q=k[1],X=k[2],Q,J,ee;if(q===0)Q=J=ee=X*255;else{var _e=[0,0,0],ve=[0,0,0],Ae=X<.5?X*(1+q):X+q-X*q,we=2*X-Ae,$e=M/360;_e[0]=$e+1/3,_e[1]=$e,_e[2]=$e-1/3;for(var Ee=0;Ee<3;Ee++)_e[Ee]<0&&(_e[Ee]+=1),_e[Ee]>1&&(_e[Ee]-=1),6*_e[Ee]<1?ve[Ee]=we+(Ae-we)*6*_e[Ee]:2*_e[Ee]<1?ve[Ee]=Ae:3*_e[Ee]<2?ve[Ee]=we+(Ae-we)*(2/3-_e[Ee])*6:ve[Ee]=we;x=[Ke(ve[0]*255),Ke(ve[1]*255),Ke(ve[2]*255)],Q=x[0],J=x[1],ee=x[2]}return k.length>3?[Q,J,ee,k[3]]:[Q,J,ee,1]},et=Ge,lt=et,ft=E,vt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Ct=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,qt=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Wt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,En=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,$n=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Nn=Math.round,Pn=function(x){x=x.toLowerCase().trim();var k;if(ft.format.named)try{return ft.format.named(x)}catch{}if(k=x.match(vt)){for(var $=k.slice(1,4),M=0;M<3;M++)$[M]=+$[M];return $[3]=1,$}if(k=x.match(Ct)){for(var q=k.slice(1,5),X=0;X<4;X++)q[X]=+q[X];return q}if(k=x.match(qt)){for(var Q=k.slice(1,4),J=0;J<3;J++)Q[J]=Nn(Q[J]*2.55);return Q[3]=1,Q}if(k=x.match(Wt)){for(var ee=k.slice(1,5),_e=0;_e<3;_e++)ee[_e]=Nn(ee[_e]*2.55);return ee[3]=+ee[3],ee}if(k=x.match(En)){var ve=k.slice(1,4);ve[1]*=.01,ve[2]*=.01;var Ae=lt(ve);return Ae[3]=1,Ae}if(k=x.match($n)){var we=k.slice(1,4);we[1]*=.01,we[2]*=.01;var $e=lt(we);return $e[3]=+k[4],$e}};Pn.test=function(x){return vt.test(x)||Ct.test(x)||qt.test(x)||Wt.test(x)||En.test(x)||$n.test(x)};var Ki=Pn,Ji=D,Mn=R,Rn=E,er=A.type,tr=Qe,Dn=Ki;Mn.prototype.css=function(x){return tr(this._rgb,x)},Ji.css=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Mn,[null].concat(x,["css"])))},Rn.format.css=Dn,Rn.autodetect.push({p:5,test:function(x){for(var k=[],$=arguments.length-1;$-- >0;)k[$]=arguments[$+1];if(!k.length&&er(x)==="string"&&Dn.test(x))return"css"}});var Qn=R,nr=D,ir=E,rr=A.unpack;ir.format.gl=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=rr(x,"rgba");return $[0]*=255,$[1]*=255,$[2]*=255,$},nr.gl=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Qn,[null].concat(x,["gl"])))},Qn.prototype.gl=function(){var x=this._rgb;return[x[0]/255,x[1]/255,x[2]/255,x[3]]};var or=A.unpack,sr=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=or(x,"rgb"),M=$[0],q=$[1],X=$[2],Q=Math.min(M,q,X),J=Math.max(M,q,X),ee=J-Q,_e=ee*100/255,ve=Q/(255-ee)*100,Ae;return ee===0?Ae=Number.NaN:(M===J&&(Ae=(q-X)/ee),q===J&&(Ae=2+(X-M)/ee),X===J&&(Ae=4+(M-q)/ee),Ae*=60,Ae<0&&(Ae+=360)),[Ae,_e,ve]},ar=sr,lr=A.unpack,cr=Math.floor,hr=function(){for(var x,k,$,M,q,X,Q=[],J=arguments.length;J--;)Q[J]=arguments[J];Q=lr(Q,"hcg");var ee=Q[0],_e=Q[1],ve=Q[2],Ae,we,$e;ve=ve*255;var Ee=_e*255;if(_e===0)Ae=we=$e=ve;else{ee===360&&(ee=0),ee>360&&(ee-=360),ee<0&&(ee+=360),ee/=60;var Fe=cr(ee),Ve=ee-Fe,We=ve*(1-_e),Xe=We+Ee*(1-Ve),st=We+Ee*Ve,ot=We+Ee;switch(Fe){case 0:x=[ot,st,We],Ae=x[0],we=x[1],$e=x[2];break;case 1:k=[Xe,ot,We],Ae=k[0],we=k[1],$e=k[2];break;case 2:$=[We,ot,st],Ae=$[0],we=$[1],$e=$[2];break;case 3:M=[We,Xe,ot],Ae=M[0],we=M[1],$e=M[2];break;case 4:q=[st,We,ot],Ae=q[0],we=q[1],$e=q[2];break;case 5:X=[ot,We,Xe],Ae=X[0],we=X[1],$e=X[2];break}}return[Ae,we,$e,Q.length>3?Q[3]:1]},ur=hr,fr=A.unpack,dr=A.type,pr=D,In=R,Fn=E,mr=ar;In.prototype.hcg=function(){return mr(this._rgb)},pr.hcg=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(In,[null].concat(x,["hcg"])))},Fn.format.hcg=ur,Fn.autodetect.push({p:1,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=fr(x,"hcg"),dr(x)==="array"&&x.length===3)return"hcg"}});var gr=A.unpack,br=A.last,zt=Math.round,_r=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=gr(x,"rgba"),M=$[0],q=$[1],X=$[2],Q=$[3],J=br(x)||"auto";Q===void 0&&(Q=1),J==="auto"&&(J=Q<1?"rgba":"rgb"),M=zt(M),q=zt(q),X=zt(X);var ee=M<<16|q<<8|X,_e="000000"+ee.toString(16);_e=_e.substr(_e.length-6);var ve="0"+zt(Q*255).toString(16);switch(ve=ve.substr(ve.length-2),J.toLowerCase()){case"rgba":return"#"+_e+ve;case"argb":return"#"+ve+_e;default:return"#"+_e}},Ln=_r,Or=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,vr=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,yr=function(x){if(x.match(Or)){(x.length===4||x.length===7)&&(x=x.substr(1)),x.length===3&&(x=x.split(""),x=x[0]+x[0]+x[1]+x[1]+x[2]+x[2]);var k=parseInt(x,16),$=k>>16,M=k>>8&255,q=k&255;return[$,M,q,1]}if(x.match(vr)){(x.length===5||x.length===9)&&(x=x.substr(1)),x.length===4&&(x=x.split(""),x=x[0]+x[0]+x[1]+x[1]+x[2]+x[2]+x[3]+x[3]);var X=parseInt(x,16),Q=X>>24&255,J=X>>16&255,ee=X>>8&255,_e=Math.round((X&255)/255*100)/100;return[Q,J,ee,_e]}throw new Error("unknown hex color: "+x)},Bn=yr,wr=D,jn=R,xr=A.type,Vn=E,Sr=Ln;jn.prototype.hex=function(x){return Sr(this._rgb,x)},wr.hex=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(jn,[null].concat(x,["hex"])))},Vn.format.hex=Bn,Vn.autodetect.push({p:4,test:function(x){for(var k=[],$=arguments.length-1;$-- >0;)k[$]=arguments[$+1];if(!k.length&&xr(x)==="string"&&[3,4,5,6,7,8,9].indexOf(x.length)>=0)return"hex"}});var Tr=A.unpack,qn=A.TWOPI,kr=Math.min,Ar=Math.sqrt,Cr=Math.acos,Er=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=Tr(x,"rgb"),M=$[0],q=$[1],X=$[2];M/=255,q/=255,X/=255;var Q,J=kr(M,q,X),ee=(M+q+X)/3,_e=ee>0?1-J/ee:0;return _e===0?Q=NaN:(Q=(M-q+(M-X))/2,Q/=Ar((M-q)*(M-q)+(M-X)*(q-X)),Q=Cr(Q),X>q&&(Q=qn-Q),Q/=qn),[Q*360,_e,ee]},$r=Er,Nr=A.unpack,tn=A.limit,Et=A.TWOPI,nn=A.PITHIRD,$t=Math.cos,Pr=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=Nr(x,"hsi");var $=x[0],M=x[1],q=x[2],X,Q,J;return isNaN($)&&($=0),isNaN(M)&&(M=0),$>360&&($-=360),$<0&&($+=360),$/=360,$<1/3?(J=(1-M)/3,X=(1+M*$t(Et*$)/$t(nn-Et*$))/3,Q=1-(J+X)):$<2/3?($-=1/3,X=(1-M)/3,Q=(1+M*$t(Et*$)/$t(nn-Et*$))/3,J=1-(X+Q)):($-=2/3,Q=(1-M)/3,J=(1+M*$t(Et*$)/$t(nn-Et*$))/3,X=1-(Q+J)),X=tn(q*X*3),Q=tn(q*Q*3),J=tn(q*J*3),[X*255,Q*255,J*255,x.length>3?x[3]:1]},Mr=Pr,Rr=A.unpack,Dr=A.type,Qr=D,Wn=R,zn=E,Ir=$r;Wn.prototype.hsi=function(){return Ir(this._rgb)},Qr.hsi=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Wn,[null].concat(x,["hsi"])))},zn.format.hsi=Mr,zn.autodetect.push({p:2,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=Rr(x,"hsi"),Dr(x)==="array"&&x.length===3)return"hsi"}});var Fr=A.unpack,Lr=A.type,Br=D,Gn=R,Un=E,jr=it;Gn.prototype.hsl=function(){return jr(this._rgb)},Br.hsl=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Gn,[null].concat(x,["hsl"])))},Un.format.hsl=et,Un.autodetect.push({p:2,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=Fr(x,"hsl"),Lr(x)==="array"&&x.length===3)return"hsl"}});var Vr=A.unpack,qr=Math.min,Wr=Math.max,zr=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=Vr(x,"rgb");var $=x[0],M=x[1],q=x[2],X=qr($,M,q),Q=Wr($,M,q),J=Q-X,ee,_e,ve;return ve=Q/255,Q===0?(ee=Number.NaN,_e=0):(_e=J/Q,$===Q&&(ee=(M-q)/J),M===Q&&(ee=2+(q-$)/J),q===Q&&(ee=4+($-M)/J),ee*=60,ee<0&&(ee+=360)),[ee,_e,ve]},Gr=zr,Ur=A.unpack,Xr=Math.floor,Zr=function(){for(var x,k,$,M,q,X,Q=[],J=arguments.length;J--;)Q[J]=arguments[J];Q=Ur(Q,"hsv");var ee=Q[0],_e=Q[1],ve=Q[2],Ae,we,$e;if(ve*=255,_e===0)Ae=we=$e=ve;else{ee===360&&(ee=0),ee>360&&(ee-=360),ee<0&&(ee+=360),ee/=60;var Ee=Xr(ee),Fe=ee-Ee,Ve=ve*(1-_e),We=ve*(1-_e*Fe),Xe=ve*(1-_e*(1-Fe));switch(Ee){case 0:x=[ve,Xe,Ve],Ae=x[0],we=x[1],$e=x[2];break;case 1:k=[We,ve,Ve],Ae=k[0],we=k[1],$e=k[2];break;case 2:$=[Ve,ve,Xe],Ae=$[0],we=$[1],$e=$[2];break;case 3:M=[Ve,We,ve],Ae=M[0],we=M[1],$e=M[2];break;case 4:q=[Xe,Ve,ve],Ae=q[0],we=q[1],$e=q[2];break;case 5:X=[ve,Ve,We],Ae=X[0],we=X[1],$e=X[2];break}}return[Ae,we,$e,Q.length>3?Q[3]:1]},Hr=Zr,Yr=A.unpack,Kr=A.type,Jr=D,Xn=R,Zn=E,eo=Gr;Xn.prototype.hsv=function(){return eo(this._rgb)},Jr.hsv=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Xn,[null].concat(x,["hsv"])))},Zn.format.hsv=Hr,Zn.autodetect.push({p:2,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=Yr(x,"hsv"),Kr(x)==="array"&&x.length===3)return"hsv"}});var Gt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Nt=Gt,to=A.unpack,Hn=Math.pow,no=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=to(x,"rgb"),M=$[0],q=$[1],X=$[2],Q=io(M,q,X),J=Q[0],ee=Q[1],_e=Q[2],ve=116*ee-16;return[ve<0?0:ve,500*(J-ee),200*(ee-_e)]},rn=function(x){return(x/=255)<=.04045?x/12.92:Hn((x+.055)/1.055,2.4)},on=function(x){return x>Nt.t3?Hn(x,1/3):x/Nt.t2+Nt.t0},io=function(x,k,$){x=rn(x),k=rn(k),$=rn($);var M=on((.4124564*x+.3575761*k+.1804375*$)/Nt.Xn),q=on((.2126729*x+.7151522*k+.072175*$)/Nt.Yn),X=on((.0193339*x+.119192*k+.9503041*$)/Nt.Zn);return[M,q,X]},Yn=no,Pt=Gt,ro=A.unpack,oo=Math.pow,so=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=ro(x,"lab");var $=x[0],M=x[1],q=x[2],X,Q,J,ee,_e,ve;return Q=($+16)/116,X=isNaN(M)?Q:Q+M/500,J=isNaN(q)?Q:Q-q/200,Q=Pt.Yn*an(Q),X=Pt.Xn*an(X),J=Pt.Zn*an(J),ee=sn(3.2404542*X-1.5371385*Q-.4985314*J),_e=sn(-.969266*X+1.8760108*Q+.041556*J),ve=sn(.0556434*X-.2040259*Q+1.0572252*J),[ee,_e,ve,x.length>3?x[3]:1]},sn=function(x){return 255*(x<=.00304?12.92*x:1.055*oo(x,1/2.4)-.055)},an=function(x){return x>Pt.t1?x*x*x:Pt.t2*(x-Pt.t0)},Kn=so,ao=A.unpack,lo=A.type,co=D,Jn=R,ei=E,ho=Yn;Jn.prototype.lab=function(){return ho(this._rgb)},co.lab=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Jn,[null].concat(x,["lab"])))},ei.format.lab=Kn,ei.autodetect.push({p:2,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=ao(x,"lab"),lo(x)==="array"&&x.length===3)return"lab"}});var uo=A.unpack,fo=A.RAD2DEG,po=Math.sqrt,mo=Math.atan2,go=Math.round,bo=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=uo(x,"lab"),M=$[0],q=$[1],X=$[2],Q=po(q*q+X*X),J=(mo(X,q)*fo+360)%360;return go(Q*1e4)===0&&(J=Number.NaN),[M,Q,J]},ti=bo,_o=A.unpack,Oo=Yn,vo=ti,yo=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=_o(x,"rgb"),M=$[0],q=$[1],X=$[2],Q=Oo(M,q,X),J=Q[0],ee=Q[1],_e=Q[2];return vo(J,ee,_e)},wo=yo,xo=A.unpack,So=A.DEG2RAD,To=Math.sin,ko=Math.cos,Ao=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=xo(x,"lch"),M=$[0],q=$[1],X=$[2];return isNaN(X)&&(X=0),X=X*So,[M,ko(X)*q,To(X)*q]},ni=Ao,Co=A.unpack,Eo=ni,$o=Kn,No=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=Co(x,"lch");var $=x[0],M=x[1],q=x[2],X=Eo($,M,q),Q=X[0],J=X[1],ee=X[2],_e=$o(Q,J,ee),ve=_e[0],Ae=_e[1],we=_e[2];return[ve,Ae,we,x.length>3?x[3]:1]},ii=No,Po=A.unpack,Mo=ii,Ro=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=Po(x,"hcl").reverse();return Mo.apply(void 0,$)},Do=Ro,Qo=A.unpack,Io=A.type,ri=D,Ut=R,ln=E,oi=wo;Ut.prototype.lch=function(){return oi(this._rgb)},Ut.prototype.hcl=function(){return oi(this._rgb).reverse()},ri.lch=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Ut,[null].concat(x,["lch"])))},ri.hcl=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Ut,[null].concat(x,["hcl"])))},ln.format.lch=ii,ln.format.hcl=Do,["lch","hcl"].forEach(function(x){return ln.autodetect.push({p:2,test:function(){for(var k=[],$=arguments.length;$--;)k[$]=arguments[$];if(k=Qo(k,x),Io(k)==="array"&&k.length===3)return x}})});var Fo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},si=Fo,Lo=R,ai=E,Bo=A.type,Bt=si,jo=Bn,Vo=Ln;Lo.prototype.name=function(){for(var x=Vo(this._rgb,"rgb"),k=0,$=Object.keys(Bt);k<$.length;k+=1){var M=$[k];if(Bt[M]===x)return M.toLowerCase()}return x},ai.format.named=function(x){if(x=x.toLowerCase(),Bt[x])return jo(Bt[x]);throw new Error("unknown color name: "+x)},ai.autodetect.push({p:5,test:function(x){for(var k=[],$=arguments.length-1;$-- >0;)k[$]=arguments[$+1];if(!k.length&&Bo(x)==="string"&&Bt[x.toLowerCase()])return"named"}});var qo=A.unpack,Wo=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=qo(x,"rgb"),M=$[0],q=$[1],X=$[2];return(M<<16)+(q<<8)+X},zo=Wo,Go=A.type,Uo=function(x){if(Go(x)=="number"&&x>=0&&x<=16777215){var k=x>>16,$=x>>8&255,M=x&255;return[k,$,M,1]}throw new Error("unknown num color: "+x)},Xo=Uo,Zo=D,li=R,ci=E,Ho=A.type,Yo=zo;li.prototype.num=function(){return Yo(this._rgb)},Zo.num=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(li,[null].concat(x,["num"])))},ci.format.num=Xo,ci.autodetect.push({p:5,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x.length===1&&Ho(x[0])==="number"&&x[0]>=0&&x[0]<=16777215)return"num"}});var Ko=D,cn=R,hi=E,ui=A.unpack,fi=A.type,di=Math.round;cn.prototype.rgb=function(x){return x===void 0&&(x=!0),x===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(di)},cn.prototype.rgba=function(x){return x===void 0&&(x=!0),this._rgb.slice(0,4).map(function(k,$){return $<3?x===!1?k:di(k):k})},Ko.rgb=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(cn,[null].concat(x,["rgb"])))},hi.format.rgb=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=ui(x,"rgba");return $[3]===void 0&&($[3]=1),$},hi.autodetect.push({p:3,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=ui(x,"rgba"),fi(x)==="array"&&(x.length===3||x.length===4&&fi(x[3])=="number"&&x[3]>=0&&x[3]<=1))return"rgb"}});var Xt=Math.log,Jo=function(x){var k=x/100,$,M,q;return k<66?($=255,M=k<6?0:-155.25485562709179-.44596950469579133*(M=k-2)+104.49216199393888*Xt(M),q=k<20?0:-254.76935184120902+.8274096064007395*(q=k-10)+115.67994401066147*Xt(q)):($=351.97690566805693+.114206453784165*($=k-55)-40.25366309332127*Xt($),M=325.4494125711974+.07943456536662342*(M=k-50)-28.0852963507957*Xt(M),q=255),[$,M,q,1]},pi=Jo,es=pi,ts=A.unpack,ns=Math.round,is=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];for(var $=ts(x,"rgb"),M=$[0],q=$[2],X=1e3,Q=4e4,J=.4,ee;Q-X>J;){ee=(Q+X)*.5;var _e=es(ee);_e[2]/_e[0]>=q/M?Q=ee:X=ee}return ns(ee)},rs=is,hn=D,Zt=R,un=E,os=rs;Zt.prototype.temp=Zt.prototype.kelvin=Zt.prototype.temperature=function(){return os(this._rgb)},hn.temp=hn.kelvin=hn.temperature=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Zt,[null].concat(x,["temp"])))},un.format.temp=un.format.kelvin=un.format.temperature=pi;var ss=A.unpack,fn=Math.cbrt,as=Math.pow,ls=Math.sign,cs=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=ss(x,"rgb"),M=$[0],q=$[1],X=$[2],Q=[dn(M/255),dn(q/255),dn(X/255)],J=Q[0],ee=Q[1],_e=Q[2],ve=fn(.4122214708*J+.5363325363*ee+.0514459929*_e),Ae=fn(.2119034982*J+.6806995451*ee+.1073969566*_e),we=fn(.0883024619*J+.2817188376*ee+.6299787005*_e);return[.2104542553*ve+.793617785*Ae-.0040720468*we,1.9779984951*ve-2.428592205*Ae+.4505937099*we,.0259040371*ve+.7827717662*Ae-.808675766*we]},mi=cs;function dn(x){var k=Math.abs(x);return k<.04045?x/12.92:(ls(x)||1)*as((k+.055)/1.055,2.4)}var hs=A.unpack,Ht=Math.pow,us=Math.sign,fs=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=hs(x,"lab");var $=x[0],M=x[1],q=x[2],X=Ht($+.3963377774*M+.2158037573*q,3),Q=Ht($-.1055613458*M-.0638541728*q,3),J=Ht($-.0894841775*M-1.291485548*q,3);return[255*pn(4.0767416621*X-3.3077115913*Q+.2309699292*J),255*pn(-1.2684380046*X+2.6097574011*Q-.3413193965*J),255*pn(-.0041960863*X-.7034186147*Q+1.707614701*J),x.length>3?x[3]:1]},gi=fs;function pn(x){var k=Math.abs(x);return k>.0031308?(us(x)||1)*(1.055*Ht(k,1/2.4)-.055):x*12.92}var ds=A.unpack,ps=A.type,ms=D,bi=R,_i=E,gs=mi;bi.prototype.oklab=function(){return gs(this._rgb)},ms.oklab=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(bi,[null].concat(x,["oklab"])))},_i.format.oklab=gi,_i.autodetect.push({p:3,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=ds(x,"oklab"),ps(x)==="array"&&x.length===3)return"oklab"}});var bs=A.unpack,_s=mi,Os=ti,vs=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];var $=bs(x,"rgb"),M=$[0],q=$[1],X=$[2],Q=_s(M,q,X),J=Q[0],ee=Q[1],_e=Q[2];return Os(J,ee,_e)},ys=vs,ws=A.unpack,xs=ni,Ss=gi,Ts=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];x=ws(x,"lch");var $=x[0],M=x[1],q=x[2],X=xs($,M,q),Q=X[0],J=X[1],ee=X[2],_e=Ss(Q,J,ee),ve=_e[0],Ae=_e[1],we=_e[2];return[ve,Ae,we,x.length>3?x[3]:1]},ks=Ts,As=A.unpack,Cs=A.type,Es=D,Oi=R,vi=E,$s=ys;Oi.prototype.oklch=function(){return $s(this._rgb)},Es.oklch=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];return new(Function.prototype.bind.apply(Oi,[null].concat(x,["oklch"])))},vi.format.oklch=ks,vi.autodetect.push({p:3,test:function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];if(x=As(x,"oklch"),Cs(x)==="array"&&x.length===3)return"oklch"}});var yi=R,Ns=A.type;yi.prototype.alpha=function(x,k){return k===void 0&&(k=!1),x!==void 0&&Ns(x)==="number"?k?(this._rgb[3]=x,this):new yi([this._rgb[0],this._rgb[1],this._rgb[2],x],"rgb"):this._rgb[3]};var Ps=R;Ps.prototype.clipped=function(){return this._rgb._clipped||!1};var Tt=R,Ms=Gt;Tt.prototype.darken=function(x){x===void 0&&(x=1);var k=this,$=k.lab();return $[0]-=Ms.Kn*x,new Tt($,"lab").alpha(k.alpha(),!0)},Tt.prototype.brighten=function(x){return x===void 0&&(x=1),this.darken(-x)},Tt.prototype.darker=Tt.prototype.darken,Tt.prototype.brighter=Tt.prototype.brighten;var Rs=R;Rs.prototype.get=function(x){var k=x.split("."),$=k[0],M=k[1],q=this[$]();if(M){var X=$.indexOf(M)-($.substr(0,2)==="ok"?2:0);if(X>-1)return q[X];throw new Error("unknown channel "+M+" in mode "+$)}else return q};var Mt=R,Ds=A.type,Qs=Math.pow,Is=1e-7,Fs=20;Mt.prototype.luminance=function(x){if(x!==void 0&&Ds(x)==="number"){if(x===0)return new Mt([0,0,0,this._rgb[3]],"rgb");if(x===1)return new Mt([255,255,255,this._rgb[3]],"rgb");var k=this.luminance(),$="rgb",M=Fs,q=function(Q,J){var ee=Q.interpolate(J,.5,$),_e=ee.luminance();return Math.abs(x-_e)<Is||!M--?ee:_e>x?q(Q,ee):q(ee,J)},X=(k>x?q(new Mt([0,0,0]),this):q(this,new Mt([255,255,255]))).rgb();return new Mt(X.concat([this._rgb[3]]))}return Ls.apply(void 0,this._rgb.slice(0,3))};var Ls=function(x,k,$){return x=mn(x),k=mn(k),$=mn($),.2126*x+.7152*k+.0722*$},mn=function(x){return x/=255,x<=.03928?x/12.92:Qs((x+.055)/1.055,2.4)},ht={},wi=R,xi=A.type,Yt=ht,Si=function(x,k,$){$===void 0&&($=.5);for(var M=[],q=arguments.length-3;q-- >0;)M[q]=arguments[q+3];var X=M[0]||"lrgb";if(!Yt[X]&&!M.length&&(X=Object.keys(Yt)[0]),!Yt[X])throw new Error("interpolation mode "+X+" is not defined");return xi(x)!=="object"&&(x=new wi(x)),xi(k)!=="object"&&(k=new wi(k)),Yt[X](x,k,$).alpha(x.alpha()+$*(k.alpha()-x.alpha()))},Ti=R,Bs=Si;Ti.prototype.mix=Ti.prototype.interpolate=function(x,k){k===void 0&&(k=.5);for(var $=[],M=arguments.length-2;M-- >0;)$[M]=arguments[M+2];return Bs.apply(void 0,[this,x,k].concat($))};var ki=R;ki.prototype.premultiply=function(x){x===void 0&&(x=!1);var k=this._rgb,$=k[3];return x?(this._rgb=[k[0]*$,k[1]*$,k[2]*$,$],this):new ki([k[0]*$,k[1]*$,k[2]*$,$],"rgb")};var gn=R,Vs=Gt;gn.prototype.saturate=function(x){x===void 0&&(x=1);var k=this,$=k.lch();return $[1]+=Vs.Kn*x,$[1]<0&&($[1]=0),new gn($,"lch").alpha(k.alpha(),!0)},gn.prototype.desaturate=function(x){return x===void 0&&(x=1),this.saturate(-x)};var Ai=R,Ci=A.type;Ai.prototype.set=function(x,k,$){$===void 0&&($=!1);var M=x.split("."),q=M[0],X=M[1],Q=this[q]();if(X){var J=q.indexOf(X)-(q.substr(0,2)==="ok"?2:0);if(J>-1){if(Ci(k)=="string")switch(k.charAt(0)){case"+":Q[J]+=+k;break;case"-":Q[J]+=+k;break;case"*":Q[J]*=+k.substr(1);break;case"/":Q[J]/=+k.substr(1);break;default:Q[J]=+k}else if(Ci(k)==="number")Q[J]=k;else throw new Error("unsupported value for Color.set");var ee=new Ai(Q,q);return $?(this._rgb=ee._rgb,this):ee}throw new Error("unknown channel "+X+" in mode "+q)}else return Q};var Ws=R,zs=function(x,k,$){var M=x._rgb,q=k._rgb;return new Ws(M[0]+$*(q[0]-M[0]),M[1]+$*(q[1]-M[1]),M[2]+$*(q[2]-M[2]),"rgb")};ht.rgb=zs;var Gs=R,bn=Math.sqrt,Rt=Math.pow,Us=function(x,k,$){var M=x._rgb,q=M[0],X=M[1],Q=M[2],J=k._rgb,ee=J[0],_e=J[1],ve=J[2];return new Gs(bn(Rt(q,2)*(1-$)+Rt(ee,2)*$),bn(Rt(X,2)*(1-$)+Rt(_e,2)*$),bn(Rt(Q,2)*(1-$)+Rt(ve,2)*$),"rgb")};ht.lrgb=Us;var Xs=R,Zs=function(x,k,$){var M=x.lab(),q=k.lab();return new Xs(M[0]+$*(q[0]-M[0]),M[1]+$*(q[1]-M[1]),M[2]+$*(q[2]-M[2]),"lab")};ht.lab=Zs;var Ei=R,Dt=function(x,k,$,M){var q,X,Q,J;M==="hsl"?(Q=x.hsl(),J=k.hsl()):M==="hsv"?(Q=x.hsv(),J=k.hsv()):M==="hcg"?(Q=x.hcg(),J=k.hcg()):M==="hsi"?(Q=x.hsi(),J=k.hsi()):M==="lch"||M==="hcl"?(M="hcl",Q=x.hcl(),J=k.hcl()):M==="oklch"&&(Q=x.oklch().reverse(),J=k.oklch().reverse());var ee,_e,ve,Ae,we,$e;(M.substr(0,1)==="h"||M==="oklch")&&(q=Q,ee=q[0],ve=q[1],we=q[2],X=J,_e=X[0],Ae=X[1],$e=X[2]);var Ee,Fe,Ve,We;return!isNaN(ee)&&!isNaN(_e)?(_e>ee&&_e-ee>180?We=_e-(ee+360):_e<ee&&ee-_e>180?We=_e+360-ee:We=_e-ee,Fe=ee+$*We):isNaN(ee)?isNaN(_e)?Fe=Number.NaN:(Fe=_e,(we==1||we==0)&&M!="hsv"&&(Ee=Ae)):(Fe=ee,($e==1||$e==0)&&M!="hsv"&&(Ee=ve)),Ee===void 0&&(Ee=ve+$*(Ae-ve)),Ve=we+$*($e-we),M==="oklch"?new Ei([Ve,Ee,Fe],M):new Ei([Fe,Ee,Ve],M)},Hs=Dt,$i=function(x,k,$){return Hs(x,k,$,"lch")};ht.lch=$i,ht.hcl=$i;var Ys=R,Ks=function(x,k,$){var M=x.num(),q=k.num();return new Ys(M+$*(q-M),"num")};ht.num=Ks;var Js=Dt,ea=function(x,k,$){return Js(x,k,$,"hcg")};ht.hcg=ea;var ta=Dt,na=function(x,k,$){return ta(x,k,$,"hsi")};ht.hsi=na;var ia=Dt,ra=function(x,k,$){return ia(x,k,$,"hsl")};ht.hsl=ra;var oa=Dt,sa=function(x,k,$){return oa(x,k,$,"hsv")};ht.hsv=sa;var aa=R,la=function(x,k,$){var M=x.oklab(),q=k.oklab();return new aa(M[0]+$*(q[0]-M[0]),M[1]+$*(q[1]-M[1]),M[2]+$*(q[2]-M[2]),"oklab")};ht.oklab=la;var ca=Dt,ha=function(x,k,$){return ca(x,k,$,"oklch")};ht.oklch=ha;var _n=R,ua=A.clip_rgb,On=Math.pow,vn=Math.sqrt,yn=Math.PI,Ni=Math.cos,Pi=Math.sin,fa=Math.atan2,da=function(x,k,$){k===void 0&&(k="lrgb"),$===void 0&&($=null);var M=x.length;$||($=Array.from(new Array(M)).map(function(){return 1}));var q=M/$.reduce(function(Fe,Ve){return Fe+Ve});if($.forEach(function(Fe,Ve){$[Ve]*=q}),x=x.map(function(Fe){return new _n(Fe)}),k==="lrgb")return pa(x,$);for(var X=x.shift(),Q=X.get(k),J=[],ee=0,_e=0,ve=0;ve<Q.length;ve++)if(Q[ve]=(Q[ve]||0)*$[0],J.push(isNaN(Q[ve])?0:$[0]),k.charAt(ve)==="h"&&!isNaN(Q[ve])){var Ae=Q[ve]/180*yn;ee+=Ni(Ae)*$[0],_e+=Pi(Ae)*$[0]}var we=X.alpha()*$[0];x.forEach(function(Fe,Ve){var We=Fe.get(k);we+=Fe.alpha()*$[Ve+1];for(var Xe=0;Xe<Q.length;Xe++)if(!isNaN(We[Xe]))if(J[Xe]+=$[Ve+1],k.charAt(Xe)==="h"){var st=We[Xe]/180*yn;ee+=Ni(st)*$[Ve+1],_e+=Pi(st)*$[Ve+1]}else Q[Xe]+=We[Xe]*$[Ve+1]});for(var $e=0;$e<Q.length;$e++)if(k.charAt($e)==="h"){for(var Ee=fa(_e/J[$e],ee/J[$e])/yn*180;Ee<0;)Ee+=360;for(;Ee>=360;)Ee-=360;Q[$e]=Ee}else Q[$e]=Q[$e]/J[$e];return we/=M,new _n(Q,k).alpha(we>.99999?1:we,!0)},pa=function(x,k){for(var $=x.length,M=[0,0,0,0],q=0;q<x.length;q++){var X=x[q],Q=k[q]/$,J=X._rgb;M[0]+=On(J[0],2)*Q,M[1]+=On(J[1],2)*Q,M[2]+=On(J[2],2)*Q,M[3]+=J[3]*Q}return M[0]=vn(M[0]),M[1]=vn(M[1]),M[2]=vn(M[2]),M[3]>.9999999&&(M[3]=1),new _n(ua(M))},dt=D,Qt=A.type,ma=Math.pow,wn=function(x){var k="rgb",$=dt("#ccc"),M=0,q=[0,1],X=[],Q=[0,0],J=!1,ee=[],_e=!1,ve=0,Ae=1,we=!1,$e={},Ee=!0,Fe=1,Ve=function(xe){if(xe=xe||["#fff","#000"],xe&&Qt(xe)==="string"&&dt.brewer&&dt.brewer[xe.toLowerCase()]&&(xe=dt.brewer[xe.toLowerCase()]),Qt(xe)==="array"){xe.length===1&&(xe=[xe[0],xe[0]]),xe=xe.slice(0);for(var De=0;De<xe.length;De++)xe[De]=dt(xe[De]);X.length=0;for(var je=0;je<xe.length;je++)X.push(je/(xe.length-1))}return ct(),ee=xe},We=function(xe){if(J!=null){for(var De=J.length-1,je=0;je<De&&xe>=J[je];)je++;return je-1}return 0},Xe=function(xe){return xe},st=function(xe){return xe},ot=function(xe,De){var je,Le;if(De==null&&(De=!1),isNaN(xe)||xe===null)return $;if(De)Le=xe;else if(J&&J.length>2){var at=We(xe);Le=at/(J.length-2)}else Ae!==ve?Le=(xe-ve)/(Ae-ve):Le=1;Le=st(Le),De||(Le=Xe(Le)),Fe!==1&&(Le=ma(Le,Fe)),Le=Q[0]+Le*(1-Q[0]-Q[1]),Le=Math.min(1,Math.max(0,Le));var Je=Math.floor(Le*1e4);if(Ee&&$e[Je])je=$e[Je];else{if(Qt(ee)==="array")for(var ze=0;ze<X.length;ze++){var Ze=X[ze];if(Le<=Ze){je=ee[ze];break}if(Le>=Ze&&ze===X.length-1){je=ee[ze];break}if(Le>Ze&&Le<X[ze+1]){Le=(Le-Ze)/(X[ze+1]-Ze),je=dt.interpolate(ee[ze],ee[ze+1],Le,k);break}}else Qt(ee)==="function"&&(je=ee(Le));Ee&&($e[Je]=je)}return je},ct=function(){return $e={}};Ve(x);var qe=function(xe){var De=dt(ot(xe));return _e&&De[_e]?De[_e]():De};return qe.classes=function(xe){if(xe!=null){if(Qt(xe)==="array")J=xe,q=[xe[0],xe[xe.length-1]];else{var De=dt.analyze(q);xe===0?J=[De.min,De.max]:J=dt.limits(De,"e",xe)}return qe}return J},qe.domain=function(xe){if(!arguments.length)return q;ve=xe[0],Ae=xe[xe.length-1],X=[];var De=ee.length;if(xe.length===De&&ve!==Ae)for(var je=0,Le=Array.from(xe);je<Le.length;je+=1){var at=Le[je];X.push((at-ve)/(Ae-ve))}else{for(var Je=0;Je<De;Je++)X.push(Je/(De-1));if(xe.length>2){var ze=xe.map(function(He,Ye){return Ye/(xe.length-1)}),Ze=xe.map(function(He){return(He-ve)/(Ae-ve)});Ze.every(function(He,Ye){return ze[Ye]===He})||(st=function(He){if(He<=0||He>=1)return He;for(var Ye=0;He>=Ze[Ye+1];)Ye++;var mt=(He-Ze[Ye])/(Ze[Ye+1]-Ze[Ye]),xt=ze[Ye]+mt*(ze[Ye+1]-ze[Ye]);return xt})}}return q=[ve,Ae],qe},qe.mode=function(xe){return arguments.length?(k=xe,ct(),qe):k},qe.range=function(xe,De){return Ve(xe),qe},qe.out=function(xe){return _e=xe,qe},qe.spread=function(xe){return arguments.length?(M=xe,qe):M},qe.correctLightness=function(xe){return xe==null&&(xe=!0),we=xe,ct(),we?Xe=function(De){for(var je=ot(0,!0).lab()[0],Le=ot(1,!0).lab()[0],at=je>Le,Je=ot(De,!0).lab()[0],ze=je+(Le-je)*De,Ze=Je-ze,He=0,Ye=1,mt=20;Math.abs(Ze)>.01&&mt-- >0;)(function(){return at&&(Ze*=-1),Ze<0?(He=De,De+=(Ye-De)*.5):(Ye=De,De+=(He-De)*.5),Je=ot(De,!0).lab()[0],Ze=Je-ze})();return De}:Xe=function(De){return De},qe},qe.padding=function(xe){return xe!=null?(Qt(xe)==="number"&&(xe=[xe,xe]),Q=xe,qe):Q},qe.colors=function(xe,De){arguments.length<2&&(De="hex");var je=[];if(arguments.length===0)je=ee.slice(0);else if(xe===1)je=[qe(.5)];else if(xe>1){var Le=q[0],at=q[1]-Le;je=ga(0,xe,!1).map(function(Ye){return qe(Le+Ye/(xe-1)*at)})}else{x=[];var Je=[];if(J&&J.length>2)for(var ze=1,Ze=J.length,He=1<=Ze;He?ze<Ze:ze>Ze;He?ze++:ze--)Je.push((J[ze-1]+J[ze])*.5);else Je=q;je=Je.map(function(Ye){return qe(Ye)})}return dt[De]&&(je=je.map(function(Ye){return Ye[De]()})),je},qe.cache=function(xe){return xe!=null?(Ee=xe,qe):Ee},qe.gamma=function(xe){return xe!=null?(Fe=xe,qe):Fe},qe.nodata=function(xe){return xe!=null?($=dt(xe),qe):$},qe};function ga(x,k,$){for(var M=[],q=x<k,X=$?q?k+1:k-1:k,Q=x;q?Q<X:Q>X;q?Q++:Q--)M.push(Q);return M}var jt=R,ba=wn,Oa=function(x){for(var k=[1,1],$=1;$<x;$++){for(var M=[1],q=1;q<=k.length;q++)M[q]=(k[q]||0)+k[q-1];k=M}return k},va=function(x){var k,$,M,q,X,Q,J;if(x=x.map(function(we){return new jt(we)}),x.length===2)k=x.map(function(we){return we.lab()}),X=k[0],Q=k[1],q=function(we){var $e=[0,1,2].map(function(Ee){return X[Ee]+we*(Q[Ee]-X[Ee])});return new jt($e,"lab")};else if(x.length===3)$=x.map(function(we){return we.lab()}),X=$[0],Q=$[1],J=$[2],q=function(we){var $e=[0,1,2].map(function(Ee){return(1-we)*(1-we)*X[Ee]+2*(1-we)*we*Q[Ee]+we*we*J[Ee]});return new jt($e,"lab")};else if(x.length===4){var ee;M=x.map(function(we){return we.lab()}),X=M[0],Q=M[1],J=M[2],ee=M[3],q=function(we){var $e=[0,1,2].map(function(Ee){return(1-we)*(1-we)*(1-we)*X[Ee]+3*(1-we)*(1-we)*we*Q[Ee]+3*(1-we)*we*we*J[Ee]+we*we*we*ee[Ee]});return new jt($e,"lab")}}else if(x.length>=5){var _e,ve,Ae;_e=x.map(function(we){return we.lab()}),Ae=x.length-1,ve=Oa(Ae),q=function(we){var $e=1-we,Ee=[0,1,2].map(function(Fe){return _e.reduce(function(Ve,We,Xe){return Ve+ve[Xe]*Math.pow($e,Ae-Xe)*Math.pow(we,Xe)*We[Fe]},0)});return new jt(Ee,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return q},ya=function(x){var k=va(x);return k.scale=function(){return ba(k)},k},xn=D,pt=function(x,k,$){if(!pt[$])throw new Error("unknown blend mode "+$);return pt[$](x,k)},yt=function(x){return function(k,$){var M=xn($).rgb(),q=xn(k).rgb();return xn.rgb(x(M,q))}},wt=function(x){return function(k,$){var M=[];return M[0]=x(k[0],$[0]),M[1]=x(k[1],$[1]),M[2]=x(k[2],$[2]),M}},wa=function(x){return x},xa=function(x,k){return x*k/255},Sa=function(x,k){return x>k?k:x},Ta=function(x,k){return x>k?x:k},ka=function(x,k){return 255*(1-(1-x/255)*(1-k/255))},Aa=function(x,k){return k<128?2*x*k/255:255*(1-2*(1-x/255)*(1-k/255))},Ca=function(x,k){return 255*(1-(1-k/255)/(x/255))},Ea=function(x,k){return x===255?255:(x=255*(k/255)/(1-x/255),x>255?255:x)};pt.normal=yt(wt(wa)),pt.multiply=yt(wt(xa)),pt.screen=yt(wt(ka)),pt.overlay=yt(wt(Aa)),pt.darken=yt(wt(Sa)),pt.lighten=yt(wt(Ta)),pt.dodge=yt(wt(Ea)),pt.burn=yt(wt(Ca));for(var $a=pt,Sn=A.type,Na=A.clip_rgb,Pa=A.TWOPI,Ma=Math.pow,Ra=Math.sin,Da=Math.cos,Mi=D,Qa=function(x,k,$,M,q){x===void 0&&(x=300),k===void 0&&(k=-1.5),$===void 0&&($=1),M===void 0&&(M=1),q===void 0&&(q=[0,1]);var X=0,Q;Sn(q)==="array"?Q=q[1]-q[0]:(Q=0,q=[q,q]);var J=function(ee){var _e=Pa*((x+120)/360+k*ee),ve=Ma(q[0]+Q*ee,M),Ae=X!==0?$[0]+ee*X:$,we=Ae*ve*(1-ve)/2,$e=Da(_e),Ee=Ra(_e),Fe=ve+we*(-.14861*$e+1.78277*Ee),Ve=ve+we*(-.29227*$e-.90649*Ee),We=ve+we*(1.97294*$e);return Mi(Na([Fe*255,Ve*255,We*255,1]))};return J.start=function(ee){return ee==null?x:(x=ee,J)},J.rotations=function(ee){return ee==null?k:(k=ee,J)},J.gamma=function(ee){return ee==null?M:(M=ee,J)},J.hue=function(ee){return ee==null?$:($=ee,Sn($)==="array"?(X=$[1]-$[0],X===0&&($=$[1])):X=0,J)},J.lightness=function(ee){return ee==null?q:(Sn(ee)==="array"?(q=ee,Q=ee[1]-ee[0]):(q=[ee,ee],Q=0),J)},J.scale=function(){return Mi.scale(J)},J.hue($),J},Ia=R,Fa="0123456789abcdef",La=Math.floor,Ba=Math.random,ja=function(){for(var x="#",k=0;k<6;k++)x+=Fa.charAt(La(Ba()*16));return new Ia(x,"hex")},Tn=b,Ri=Math.log,Va=Math.pow,qa=Math.floor,Wa=Math.abs,Di=function(x,k){k===void 0&&(k=null);var $={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Tn(x)==="object"&&(x=Object.values(x)),x.forEach(function(M){k&&Tn(M)==="object"&&(M=M[k]),M!=null&&!isNaN(M)&&($.values.push(M),$.sum+=M,M<$.min&&($.min=M),M>$.max&&($.max=M),$.count+=1)}),$.domain=[$.min,$.max],$.limits=function(M,q){return Qi($,M,q)},$},Qi=function(x,k,$){k===void 0&&(k="equal"),$===void 0&&($=7),Tn(x)=="array"&&(x=Di(x));var M=x.min,q=x.max,X=x.values.sort(function(An,Cn){return An-Cn});if($===1)return[M,q];var Q=[];if(k.substr(0,1)==="c"&&(Q.push(M),Q.push(q)),k.substr(0,1)==="e"){Q.push(M);for(var J=1;J<$;J++)Q.push(M+J/$*(q-M));Q.push(q)}else if(k.substr(0,1)==="l"){if(M<=0)throw new Error("Logarithmic scales are only possible for values > 0");var ee=Math.LOG10E*Ri(M),_e=Math.LOG10E*Ri(q);Q.push(M);for(var ve=1;ve<$;ve++)Q.push(Va(10,ee+ve/$*(_e-ee)));Q.push(q)}else if(k.substr(0,1)==="q"){Q.push(M);for(var Ae=1;Ae<$;Ae++){var we=(X.length-1)*Ae/$,$e=qa(we);if($e===we)Q.push(X[$e]);else{var Ee=we-$e;Q.push(X[$e]*(1-Ee)+X[$e+1]*Ee)}}Q.push(q)}else if(k.substr(0,1)==="k"){var Fe,Ve=X.length,We=new Array(Ve),Xe=new Array($),st=!0,ot=0,ct=null;ct=[],ct.push(M);for(var qe=1;qe<$;qe++)ct.push(M+qe/$*(q-M));for(ct.push(q);st;){for(var xe=0;xe<$;xe++)Xe[xe]=0;for(var De=0;De<Ve;De++)for(var je=X[De],Le=Number.MAX_VALUE,at=void 0,Je=0;Je<$;Je++){var ze=Wa(ct[Je]-je);ze<Le&&(Le=ze,at=Je),Xe[at]++,We[De]=at}for(var Ze=new Array($),He=0;He<$;He++)Ze[He]=null;for(var Ye=0;Ye<Ve;Ye++)Fe=We[Ye],Ze[Fe]===null?Ze[Fe]=X[Ye]:Ze[Fe]+=X[Ye];for(var mt=0;mt<$;mt++)Ze[mt]*=1/Xe[mt];st=!1;for(var xt=0;xt<$;xt++)if(Ze[xt]!==ct[xt]){st=!0;break}ct=Ze,ot++,ot>200&&(st=!1)}for(var St={},It=0;It<$;It++)St[It]=[];for(var Ft=0;Ft<Ve;Ft++)Fe=We[Ft],St[Fe].push(X[Ft]);for(var bt=[],kt=0;kt<$;kt++)bt.push(St[kt][0]),bt.push(St[kt][St[kt].length-1]);bt=bt.sort(function(An,Cn){return An-Cn}),Q.push(bt[0]);for(var Vt=1;Vt<bt.length;Vt+=2){var At=bt[Vt];!isNaN(At)&&Q.indexOf(At)===-1&&Q.push(At)}}return Q},Ii={analyze:Di,limits:Qi},Fi=R,za=function(x,k){x=new Fi(x),k=new Fi(k);var $=x.luminance(),M=k.luminance();return $>M?($+.05)/(M+.05):(M+.05)/($+.05)},Li=R,gt=Math.sqrt,nt=Math.pow,Ga=Math.min,Ua=Math.max,Bi=Math.atan2,ji=Math.abs,Kt=Math.cos,Vi=Math.sin,Xa=Math.exp,qi=Math.PI,Za=function(x,k,$,M,q){$===void 0&&($=1),M===void 0&&(M=1),q===void 0&&(q=1);var X=function(At){return 360*At/(2*qi)},Q=function(At){return 2*qi*At/360};x=new Li(x),k=new Li(k);var J=Array.from(x.lab()),ee=J[0],_e=J[1],ve=J[2],Ae=Array.from(k.lab()),we=Ae[0],$e=Ae[1],Ee=Ae[2],Fe=(ee+we)/2,Ve=gt(nt(_e,2)+nt(ve,2)),We=gt(nt($e,2)+nt(Ee,2)),Xe=(Ve+We)/2,st=.5*(1-gt(nt(Xe,7)/(nt(Xe,7)+nt(25,7)))),ot=_e*(1+st),ct=$e*(1+st),qe=gt(nt(ot,2)+nt(ve,2)),xe=gt(nt(ct,2)+nt(Ee,2)),De=(qe+xe)/2,je=X(Bi(ve,ot)),Le=X(Bi(Ee,ct)),at=je>=0?je:je+360,Je=Le>=0?Le:Le+360,ze=ji(at-Je)>180?(at+Je+360)/2:(at+Je)/2,Ze=1-.17*Kt(Q(ze-30))+.24*Kt(Q(2*ze))+.32*Kt(Q(3*ze+6))-.2*Kt(Q(4*ze-63)),He=Je-at;He=ji(He)<=180?He:Je<=at?He+360:He-360,He=2*gt(qe*xe)*Vi(Q(He)/2);var Ye=we-ee,mt=xe-qe,xt=1+.015*nt(Fe-50,2)/gt(20+nt(Fe-50,2)),St=1+.045*De,It=1+.015*De*Ze,Ft=30*Xa(-nt((ze-275)/25,2)),bt=2*gt(nt(De,7)/(nt(De,7)+nt(25,7))),kt=-bt*Vi(2*Q(Ft)),Vt=gt(nt(Ye/($*xt),2)+nt(mt/(M*St),2)+nt(He/(q*It),2)+kt*(mt/(M*St))*(He/(q*It)));return Ua(0,Ga(100,Vt))},Wi=R,Ha=function(x,k,$){$===void 0&&($="lab"),x=new Wi(x),k=new Wi(k);var M=x.get($),q=k.get($),X=0;for(var Q in M){var J=(M[Q]||0)-(q[Q]||0);X+=J*J}return Math.sqrt(X)},Ya=R,Ka=function(){for(var x=[],k=arguments.length;k--;)x[k]=arguments[k];try{return new(Function.prototype.bind.apply(Ya,[null].concat(x))),!0}catch{return!1}},zi=D,Gi=wn,Ja={cool:function(){return Gi([zi.hsl(180,1,.9),zi.hsl(250,.7,.4)])},hot:function(){return Gi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Jt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},kn=0,Ui=Object.keys(Jt);kn<Ui.length;kn+=1){var Xi=Ui[kn];Jt[Xi.toLowerCase()]=Jt[Xi]}var el=Jt,rt=D;rt.average=da,rt.bezier=ya,rt.blend=$a,rt.cubehelix=Qa,rt.mix=rt.interpolate=Si,rt.random=ja,rt.scale=wn,rt.analyze=Ii.analyze,rt.contrast=za,rt.deltaE=Za,rt.distance=Ha,rt.limits=Ii.limits,rt.valid=Ka,rt.scales=Ja,rt.colors=si,rt.brewer=el;var tl=rt;return tl})})(chroma$1);var chroma=chroma$1.exports;function euclid$1(s,e){const n=[];for(var c=0,h=0;h<s;h++)c+=e,c>=s?(c-=s,n.push(1)):n.push(0);const u=n.reverse(),d=[];let m=0,g=window.cycle/u.length;return u.forEach((b,O)=>{b===1&&O!=0&&(d.push(m),m=0),m+=g}),d.push(m),d}const ftm$1=(s=440)=>69+12*Math.log2(s/440),seq$1=(s=[],e=1)=>{let n=0;return c=>{const h=n;return n+=1/e,n>=s.length&&(n=0),s[Math.floor(h)]}},wrand$1=(s=[],e=[])=>{const n=s.map((g,b)=>e[b]?e[b]:1),c=n.reduce((g,b)=>g+b,0),h=n.map(g=>g/c),u=Math.random();let d=s.length-1,m=0;return h.forEach((g,b)=>{u<g+m&&b<d&&(d=b),m+=g}),s[d]};var util={wrand:wrand$1,ftm:ftm$1,euclid:euclid$1,seq:seq$1};function W(s,e,n,c=h=>h){return s*c(.5-e*(.5-n))}function re(s){return[-s[0],-s[1]]}function l(s,e){return[s[0]+e[0],s[1]+e[1]]}function a(s,e){return[s[0]-e[0],s[1]-e[1]]}function f(s,e){return[s[0]*e,s[1]*e]}function le(s,e){return[s[0]/e,s[1]/e]}function L(s){return[s[1],-s[0]]}function ne(s,e){return s[0]*e[0]+s[1]*e[1]}function oe(s,e){return s[0]===e[0]&&s[1]===e[1]}function fe(s){return Math.hypot(s[0],s[1])}function be(s){return s[0]*s[0]+s[1]*s[1]}function Y(s,e){return be(a(s,e))}function G(s){return le(s,fe(s))}function ue(s,e){return Math.hypot(s[1]-e[1],s[0]-e[0])}function T(s,e,n){let c=Math.sin(n),h=Math.cos(n),u=s[0]-e[0],d=s[1]-e[1],m=u*h-d*c,g=u*c+d*h;return[m+e[0],g+e[1]]}function V(s,e,n){return l(s,f(a(e,s),n))}function Z(s,e,n){return l(s,f(e,n))}var{min:_,PI:ge}=Math,se=.275,j=ge+1e-4;function ie(s,e={}){let{size:n=16,smoothing:c=.5,thinning:h=.5,simulatePressure:u=!0,easing:d=pe=>pe,start:m={},end:g={},last:b=!1}=e,{cap:O=!0,taper:v=0,easing:y=pe=>pe*(2-pe)}=m,{cap:w=!0,taper:S=0,easing:A=pe=>--pe*pe*pe+1}=g;if(s.length===0||n<=0)return[];let E=s[s.length-1].runningLength,P=Math.pow(n*c,2),I=[],U=[],z=s.slice(0,10).reduce((pe,B)=>{let K=B.pressure;if(u){let te=_(1,B.distance/n),Se=_(1,1-te);K=_(1,pe+(Se-pe)*(te*se))}return(pe+K)/2},s[0].pressure),N=W(n,h,s[s.length-1].pressure,d),R,F=s[0].vector,D=s[0].point,de=D,H=D,he=de;for(let pe=0;pe<s.length;pe++){let{pressure:B}=s[pe],{point:K,vector:te,distance:Se,runningLength:Te}=s[pe];if(pe<s.length-1&&E-Te<3)continue;if(h){if(u){let Ue=_(1,Se/n),Pe=_(1,1-Ue);B=_(1,z+(Pe-z)*(Ue*se))}N=W(n,h,B,d)}else N=n/2;R===void 0&&(R=N);let Ne=Te<v?y(Te/v):1,Re=E-Te<S?A((E-Te)/S):1;if(N=Math.max(.01,N*Math.min(Ne,Re)),pe===s.length-1){let Ue=f(L(te),N);I.push(a(K,Ue)),U.push(l(K,Ue));continue}let Ie=s[pe+1].vector,Me=ne(te,Ie);if(Me<0){let Ue=f(L(F),N);for(let Pe=1/13,it=0;it<=1;it+=Pe)H=T(a(K,Ue),K,j*it),I.push(H),he=T(l(K,Ue),K,j*-it),U.push(he);D=H,de=he;continue}let Be=f(L(V(Ie,te,Me)),N);H=a(K,Be),(pe<=1||Y(D,H)>P)&&(I.push(H),D=H),he=l(K,Be),(pe<=1||Y(de,he)>P)&&(U.push(he),de=he),z=B,F=te}let ae=s[0].point.slice(0,2),Oe=s.length>1?s[s.length-1].point.slice(0,2):l(s[0].point,[1,1]),ye=[],ke=[];if(s.length===1){if(!(v||S)||b){let pe=Z(ae,G(L(a(ae,Oe))),-(R||N)),B=[];for(let K=1/13,te=K;te<=1;te+=K)B.push(T(pe,ae,j*2*te));return B}}else{if(!(v||S&&s.length===1))if(O)for(let B=1/13,K=B;K<=1;K+=B){let te=T(U[0],ae,j*K);ye.push(te)}else{let B=a(I[0],U[0]),K=f(B,.5),te=f(B,.51);ye.push(a(ae,K),a(ae,te),l(ae,te),l(ae,K))}let pe=L(re(s[s.length-1].vector));if(S||v&&s.length===1)ke.push(Oe);else if(w){let B=Z(Oe,pe,N);for(let K=1/29,te=K;te<1;te+=K)ke.push(T(B,Oe,j*3*te))}else ke.push(l(Oe,f(pe,N)),l(Oe,f(pe,N*.99)),a(Oe,f(pe,N*.99)),a(Oe,f(pe,N)))}return I.concat(ke,U.reverse(),ye)}function ce(s,e={}){var n;let{streamline:c=.5,size:h=16,last:u=!1}=e;if(s.length===0)return[];let d=.15+(1-c)*.85,m=Array.isArray(s[0])?s:s.map(({x:w,y:S,pressure:A=.5})=>[w,S,A]);if(m.length===2){let w=m[1];m=m.slice(0,-1);for(let S=1;S<5;S++)m.push(V(m[0],w,S/4))}m.length===1&&(m=[...m,[...l(m[0],[1,1]),...m[0].slice(2)]]);let g=[{point:[m[0][0],m[0][1]],pressure:m[0][2]>=0?m[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],b=!1,O=0,v=g[0],y=m.length-1;for(let w=1;w<m.length;w++){let S=u&&w===y?m[w].slice(0,2):V(v.point,m[w],d);if(oe(v.point,S))continue;let A=ue(S,v.point);if(O+=A,w<y&&!b){if(O<h)continue;b=!0}v={point:S,pressure:m[w][2]>=0?m[w][2]:.5,vector:G(a(v.point,S)),distance:A,runningLength:O},g.push(v)}return g[0].vector=((n=g[1])==null?void 0:n.vector)||[0,0],g}function me(s,e={}){return ie(ce(s,e),e)}const{ftm,wrand,euclid,seq}=util;window.seq=seq;window.wrand=wrand;function getSvgPathFromStroke(s){if(!s.length)return"";const e=s.reduce((n,[c,h],u,d)=>{const[m,g]=d[(u+1)%d.length];return n.push(c,h,(c+m)/2,(h+g)/2),n},["M",...s[0],"Q"]);return e.push("Z"),e.join(" ")}const formatParams=s=>typeof s=="function"?s:Array.isArray(s)?seq(s):()=>s;class Line extends nanobus$1{constructor({parentWidth:e=window.innerWidth,parentHeight:n=window.innerHeight,interval:c=100,readPixel:h=()=>{},color:u,onUpdate:d=()=>{},trigger:m=()=>{},mode:g=""}={},b=0){super(),this.setInterval(c),this.index=b,this.color=u,this.timeOffset=0,this.strokeStyle=`rgb(${u[0],u[1],u[2]})`,this._lastUpdate=0,this.parentWidth=e,this.parentHeight=n,this.currStroke={points:[],stroke:null},this.strokes=[],this.smoothing=.96,this.marker=null,this.isRecording=!1,this._startTime=0,this._timeToNext=c,this._timeSinceBang=1e7,this.duration=0,this.muted=!1,this.baseStrokeOptions={size:30,thinning:2,start:{cap:!1},end:{cap:!1,taper:0}},this.strokeParams={dynamic:{},color:this.color,alpha:1,blending:"source-over",size:20,thinning:.8,smoothing:.2,streamline:0,simplify:20,recalculateStroke:!1},this.markerParams={color:[0,255,0],lineColor:[255,255,255],lineWidth:4,lineBlending:"source-over",width:20,height:20,alpha:1,blending:"source-over",dynamic:{},continuous:{}},this.mode=g,this._shouldTrigger=!1,this._didTrigger=!1,this._checkLumaTrigger=(O,v)=>O<.5&&v>.5,this.numTransforms=0,this._bangTime=0,this.prevValue=0,this.value=0,this._readPixel=h,this.trigger=m,this.x=0,this.y=0}setInterval(e){typeof e=="function"?this.interval=e:e.constructor===Array?this.interval=()=>window.choose(e):this.interval=()=>e}mute(e=!0){this.muted=e}set(e={}){Object.keys(e).forEach(n=>{n==="trigger"?this.trigger=e.trigger:n==="color"?chroma.valid(e.color)&&(this.color=chroma(e.color).rgb(),this._updateLine()):n==="strokeOptions"?(this.strokeParams.options=Object.assign({},this.strokeParams.options,e.strokeOptions),this._updateLine()):n==="smoothing"?this.smoothing=e.smoothing:n==="interval"?this.setInterval(e.interval):n==="mode"?this.mode=e.mode:n==="mute"?this.muted=e.mute:(this[n]=e[n],this.emit("update line",this.currStroke.points))})}setStroke(e={}){Object.entries(e).forEach(([n,c])=>{n==="options"?(this.strokeParams.options=Object.assign({},this.strokeParams.options,c),this._updateLine()):this.strokeParams.dynamic[n]=formatParams(c)})}setMarker(e={}){Object.entries(e).forEach(([n,c])=>{typeof c=="function"?(this.markerParams.continuous[n]=c,delete this.markerParams.dynamic[n]):Array.isArray(c)?(this.markerParams.dynamic[n]=seq(c),delete this.markerParams.continuous[n]):(this.markerParams.dynamic[n]=()=>c,delete this.markerParams.continuous[n])})}addPoint(e){let n=this.currStroke.points;const c=Object.assign({},e,{t:e.t-this._startTime,speed:0});if(n.length>0){const h=n[n.length-1],u=c.x-h.x,d=c.y-h.y,m=Math.sqrt(u*u+d*d),g=c.t-h.t,b=m/g;c.speed=h.speed*this.smoothing+b*(1-this.smoothing)}n.push(c),this.marker=c,this.x=this.marker.x/this.parentWidth,this.y=1-this.marker.y/this.parentHeight,this.speed=this.marker.speed,this.isRecording=!0,n.length%2===0&&this._updateLine(),this.currStroke.simplified=this.currStroke.points}updateStrokes(){this.strokes.forEach((e,n)=>{this.updateStroke(e)})}updateStroke(e){const{thinning:n,streamline:c,size:h,smoothing:u}=this.strokeParams,d=me(e.simplified,Object.assign({},this.baseStrokeOptions,{thinning:n,smoothing:u,streamline:c,size:h})),m=getSvgPathFromStroke(d);e.stroke=new Path2D(m)}simplifyStroke(e){if(e.points.length>20){const n=simplify(e.points,this.strokeParams.simplify);e.simplified=n}}_renderStrokes(){this.emit("update line")}_updateLine(){this.updateStrokes(),this._renderStrokes()}startRecording(e){this._startTime=e,this.numTransforms=0,this.strokes=[],this.startStroke()}stopRecording(e){this.endStroke(),this.currStroke.points,this.isRecording=!1,this.duration=e-this._startTime}startStroke(){this.currStroke={points:[],stroke:null},this.strokes.push(this.currStroke)}endStroke(){this.simplifyStroke(this.currStroke),this.updateStroke(this.currStroke),this._renderStrokes()}clear(){this.currStroke.points=[],this.marker=null,this.strokes=[],this._renderStrokes(),this.timeOffset=0}clearFirst(){if(this.strokes.length>1){const e=this.strokes[1].points[0].t;this._startTime=this._startTime+e,this.duration-=e,this.strokes.shift(),this.strokes.forEach(n=>{n.points.forEach(c=>{c.t-=e})}),this.timeOffset+=e,this._renderStrokes()}else this.clear()}_move(e){if(!this.isRecording&&this.currStroke.points.length>1){e-=this.timeOffset;const n=(e-this._startTime)%this.duration;this.mode==="wrap"&&Math.floor((e-this._startTime)/this.duration)>this.numTransforms&&this._transformPath();let c=this.strokes[0].points,h=0,u=c[h].t,d=0,m=0,g=0;for(;n>u&&(m=h,g=d,h++,h>c.length-1&&(h=0,d++),!(d>=this.strokes.length));)c=this.strokes[d].points,u=c[h].t;const b=this.strokes[g].points[m];this.marker=b,this.x=this.marker.x/this.parentWidth,this.y=1-this.marker.y/this.parentHeight,this.speed=this.marker.speed}}_read(){this.marker&&(this.prevValue=this.value,this.value=this._readPixel(this.marker.x,this.marker.y),Object.entries(this.markerParams.continuous).forEach(([e,n])=>{e==="color"||e==="lineColor"?this.markerParams[e]=chroma(n()).rgb():this.markerParams[e]=n()}),this.muted||(this.mode=="lumaTrigger"?this._shouldTrigger===!1&&(this._shouldTrigger=this._checkLumaTrigger(this.prevValue,this.value)):this._shouldTrigger=!0))}_trigger(e){if(this._didTrigger=!1,this.marker&&this._bangTime!==null&&e-this._bangTime>=this._timeToNext){if(this._shouldTrigger){const n=Object.entries(this.strokeParams.dynamic);let c=!1;n.forEach(([h,u])=>{h==="color"?this.strokeParams[h]=chroma(u()).rgb():(this.strokeParams[h]=u(),["thinning","smoothing","size","streamline"].indexOf(h)>-1&&(c=!0))}),c&&(this.updateStrokes(),this._renderStrokes()),Object.entries(this.markerParams.dynamic).forEach(([h,u])=>{h==="color"||h==="lineColor"?this.markerParams[h]=chroma(u()).rgb():this.markerParams[h]=u()}),n.length>0&&this.emit("update line",this.currStroke.points),this.trigger(this),this._didTrigger=!0,this._shouldTrigger=!1,this._timeToNext=this.interval(this),this.emit("trigger",this)}this._bangTime=e}}update(e){this._move(e),this._read(),this._trigger(e)}_transformPath(){const e=this.currStroke.points,n=e[e.length-1],c=e[0],h=this.currStroke.points.map(u=>Object.assign({},u,{x:(n.x+(u.x-c.x))%800,y:(n.y+(u.y-c.y))%800}));this.currStroke.points=h,this.numTransforms++}}const version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(s,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:s}),createExtendedLinearRampToValueAutomationEvent=(s,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:s}),createSetValueAutomationEvent=(s,e)=>({startTime:e,type:"setValue",value:s}),createSetValueCurveAutomationEvent=(s,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:s}),getTargetValueAtTime=(s,e,{startTime:n,target:c,timeConstant:h})=>c+(e-c)*Math.exp((n-s)/h),isExponentialRampToValueAutomationEvent=s=>s.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=s=>s.type==="linearRampToValue",isAnyRampToValueAutomationEvent=s=>isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s),isSetValueAutomationEvent=s=>s.type==="setValue",isSetValueCurveAutomationEvent=s=>s.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(s,e,n,c)=>{const h=s[e];return h===void 0?c:isAnyRampToValueAutomationEvent(h)||isSetValueAutomationEvent(h)?h.value:isSetValueCurveAutomationEvent(h)?h.values[h.values.length-1]:getTargetValueAtTime(n,getValueOfAutomationEventAtIndexAtTime(s,e-1,h.startTime,c),h)},getEndTimeAndValueOfPreviousAutomationEvent=(s,e,n,c,h)=>n===void 0?[c.insertTime,h]:isAnyRampToValueAutomationEvent(n)?[n.endTime,n.value]:isSetValueAutomationEvent(n)?[n.startTime,n.value]:isSetValueCurveAutomationEvent(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,getValueOfAutomationEventAtIndexAtTime(s,e-1,n.startTime,h)],isCancelAndHoldAutomationEvent=s=>s.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=s=>s.type==="cancelScheduledValues",getEventTime=s=>isCancelAndHoldAutomationEvent(s)||isCancelScheduledValuesAutomationEvent(s)?s.cancelTime:isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s)?s.endTime:s.startTime,getExponentialRampValueAtTime=(s,e,n,{endTime:c,value:h})=>n===h?h:0<n&&0<h||n<0&&h<0?n*(h/n)**((s-e)/(c-e)):0,getLinearRampValueAtTime=(s,e,n,{endTime:c,value:h})=>n+(s-e)/(c-e)*(h-n),interpolateValue=(s,e)=>{const n=Math.floor(e),c=Math.ceil(e);return n===c?s[n]:(1-(e-n))*s[n]+(1-(c-e))*s[c]},getValueCurveValueAtTime=(s,{duration:e,startTime:n,values:c})=>{const h=(s-n)/e*(c.length-1);return interpolateValue(c,h)},isSetTargetAutomationEvent=s=>s.type==="setTarget";class AutomationEventList{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=getEventTime(e);if(isCancelAndHoldAutomationEvent(e)||isCancelScheduledValuesAutomationEvent(e)){const c=this._automationEvents.findIndex(u=>isCancelScheduledValuesAutomationEvent(e)&&isSetValueCurveAutomationEvent(u)?u.startTime+u.duration>=n:getEventTime(u)>=n),h=this._automationEvents[c];if(c!==-1&&(this._automationEvents=this._automationEvents.slice(0,c)),isCancelAndHoldAutomationEvent(e)){const u=this._automationEvents[this._automationEvents.length-1];if(h!==void 0&&isAnyRampToValueAutomationEvent(h)){if(isSetTargetAutomationEvent(u))throw new Error("The internal list is malformed.");const d=isSetValueCurveAutomationEvent(u)?u.startTime+u.duration:getEventTime(u),m=isSetValueCurveAutomationEvent(u)?u.values[u.values.length-1]:u.value,g=isExponentialRampToValueAutomationEvent(h)?getExponentialRampValueAtTime(n,d,m,h):getLinearRampValueAtTime(n,d,m,h),b=isExponentialRampToValueAutomationEvent(h)?createExtendedExponentialRampToValueAutomationEvent(g,n,this._currenTime):createExtendedLinearRampToValueAutomationEvent(g,n,this._currenTime);this._automationEvents.push(b)}u!==void 0&&isSetTargetAutomationEvent(u)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(n),n)),u!==void 0&&isSetValueCurveAutomationEvent(u)&&u.startTime+u.duration>n&&(this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(new Float32Array([6,7]),u.startTime,n-u.startTime))}}else{const c=this._automationEvents.findIndex(d=>getEventTime(d)>n),h=c===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[c-1];if(h!==void 0&&isSetValueCurveAutomationEvent(h)&&getEventTime(h)+h.duration>n)return!1;const u=isExponentialRampToValueAutomationEvent(e)?createExtendedExponentialRampToValueAutomationEvent(e.value,e.endTime,this._currenTime):isLinearRampToValueAutomationEvent(e)?createExtendedLinearRampToValueAutomationEvent(e.value,n,this._currenTime):e;if(c===-1)this._automationEvents.push(u);else{if(isSetValueCurveAutomationEvent(e)&&n+e.duration>getEventTime(this._automationEvents[c]))return!1;this._automationEvents.splice(c,0,u)}}return!0}flush(e){const n=this._automationEvents.findIndex(c=>getEventTime(c)>e);if(n>1){const c=this._automationEvents.slice(n-1),h=c[0];isSetTargetAutomationEvent(h)&&c.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,n-2,h.startTime,this._defaultValue),h.startTime)),this._automationEvents=c}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(d=>getEventTime(d)>e),c=this._automationEvents[n],h=(n===-1?this._automationEvents.length:n)-1,u=this._automationEvents[h];if(u!==void 0&&isSetTargetAutomationEvent(u)&&(c===void 0||!isAnyRampToValueAutomationEvent(c)||c.insertTime>e))return getTargetValueAtTime(e,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,h-1,u.startTime,this._defaultValue),u);if(u!==void 0&&isSetValueAutomationEvent(u)&&(c===void 0||!isAnyRampToValueAutomationEvent(c)))return u.value;if(u!==void 0&&isSetValueCurveAutomationEvent(u)&&(c===void 0||!isAnyRampToValueAutomationEvent(c)||u.startTime+u.duration>e))return e<u.startTime+u.duration?getValueCurveValueAtTime(e,u):u.values[u.values.length-1];if(u!==void 0&&isAnyRampToValueAutomationEvent(u)&&(c===void 0||!isAnyRampToValueAutomationEvent(c)))return u.value;if(c!==void 0&&isExponentialRampToValueAutomationEvent(c)){const[d,m]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,h,u,c,this._defaultValue);return getExponentialRampValueAtTime(e,d,m,c)}if(c!==void 0&&isLinearRampToValueAutomationEvent(c)){const[d,m]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,h,u,c,this._defaultValue);return getLinearRampValueAtTime(e,d,m,c)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=s=>({cancelTime:s,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=s=>({cancelTime:s,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),createLinearRampToValueAutomationEvent=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),createSetTargetAutomationEvent=(s,e,n)=>({startTime:e,target:s,timeConstant:n,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=s=>(e,n,[c,h,u],d)=>{s(e[h],[n,c,u],m=>m[0]===n&&m[1]===c,d)},createAddAudioNodeConnections=s=>(e,n,c)=>{const h=[];for(let u=0;u<c.numberOfInputs;u+=1)h.push(new Set);s.set(e,{activeInputs:h,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},createAddAudioParamConnections=s=>(e,n)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=s=>{try{const e=new Proxy(s,handler);new e}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(s,e)=>{const n=[];let c=s.replace(/^[\s]+/,""),h=c.match(IMPORT_STATEMENT_REGEX);for(;h!==null;){const u=h[1].slice(1,-1),d=h[0].replace(/([\s]+)?;?$/,"").replace(u,new URL(u,e).toString());n.push(d),c=c.slice(h[0].length).replace(/^[\s]+/,""),h=c.match(IMPORT_STATEMENT_REGEX)}return[n.join(";"),c]},verifyParameterDescriptors=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=s=>{if(!isConstructible(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(s,e,n,c,h,u,d,m,g,b,O,v,y)=>{let w=0;return(S,A,E={credentials:"omit"})=>{const P=O.get(S);if(P!==void 0&&P.has(A))return Promise.resolve();const I=b.get(S);if(I!==void 0){const N=I.get(A);if(N!==void 0)return N}const U=u(S),z=U.audioWorklet===void 0?h(A).then(([N,R])=>{const[F,D]=splitImportStatements(N,R),de=`${F};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${D}
})})(window,'_AWGS')`;return n(de)}).then(()=>{const N=y._AWGS.pop();if(N===void 0)throw new SyntaxError;c(U.currentTime,U.sampleRate,()=>N(class{},void 0,(R,F)=>{if(R.trim()==="")throw e();const D=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(U);if(D!==void 0){if(D.has(R))throw e();verifyProcessorCtor(F),verifyParameterDescriptors(F.parameterDescriptors),D.set(R,F)}else verifyProcessorCtor(F),verifyParameterDescriptors(F.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(U,new Map([[R,F]]))},U.sampleRate,void 0,void 0))}):Promise.all([h(A),Promise.resolve(s(v,v))]).then(([[N,R],F])=>{const D=w+1;w=D;const[de,H]=splitImportStatements(N,R),ye=`${de};((AudioWorkletProcessor,registerProcessor)=>{${H}
})(${F?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${F?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${F?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${D}',class extends AudioWorkletProcessor{process(){return !1}})`,ke=new Blob([ye],{type:"application/javascript; charset=utf-8"}),pe=URL.createObjectURL(ke);return U.audioWorklet.addModule(pe,E).then(()=>{if(m(U))return U;const B=d(U);return B.audioWorklet.addModule(pe,E).then(()=>B)}).then(B=>{if(g===null)throw new SyntaxError;try{new g(B,`__sac${D}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(pe))});return I===void 0?b.set(S,new Map([[A,z]])):I.set(A,z),z.then(()=>{const N=O.get(S);N===void 0?O.set(S,new Set([A])):N.add(A)}).finally(()=>{const N=b.get(S);N!==void 0&&N.delete(A)}),z}},getValueForKey=(s,e)=>{const n=s.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},pickElementFromSet=(s,e)=>{const n=Array.from(s).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[c]=n;return s.delete(c),c},deletePassiveInputConnectionToAudioNode=(s,e,n,c)=>{const h=getValueForKey(s,e),u=pickElementFromSet(h,d=>d[0]===n&&d[1]===c);return h.size===0&&s.delete(e),u},getEventListenersOfAudioNode=s=>getValueForKey(EVENT_LISTENERS,s),setInternalStateToActive=s=>{if(ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(s),getEventListenersOfAudioNode(s).forEach(e=>e(!0))},isAudioWorkletNode=s=>"port"in s,setInternalStateToPassive=s=>{if(!ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(s),getEventListenersOfAudioNode(s).forEach(e=>e(!1))},setInternalStateToPassiveWhenNecessary=(s,e)=>{!isAudioWorkletNode(s)&&e.every(n=>n.size===0)&&setInternalStateToPassive(s)},createAddConnectionToAudioNode=(s,e,n,c,h,u,d,m,g,b,O,v,y)=>{const w=new WeakMap;return(S,A,E,P,I)=>{const{activeInputs:U,passiveInputs:z}=u(A),{outputs:N}=u(S),R=m(S),F=D=>{const de=g(A),H=g(S);if(D){const he=deletePassiveInputConnectionToAudioNode(z,S,E,P);s(U,S,he,!1),!I&&!v(S)&&n(H,de,E,P),y(A)&&setInternalStateToActive(A)}else{const he=c(U,S,E,P);e(z,P,he,!1),!I&&!v(S)&&h(H,de,E,P);const ae=d(A);if(ae===0)O(A)&&setInternalStateToPassiveWhenNecessary(A,U);else{const Oe=w.get(A);Oe!==void 0&&clearTimeout(Oe),w.set(A,setTimeout(()=>{O(A)&&setInternalStateToPassiveWhenNecessary(A,U)},ae*1e3))}}};return b(N,[A,E,P],D=>D[0]===A&&D[1]===E&&D[2]===P,!0)?(R.add(F),O(S)?s(U,S,[E,P,F],!0):e(z,P,[S,E,F],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=s=>(e,n,[c,h,u],d)=>{const m=e.get(c);m===void 0?e.set(c,new Set([[h,n,u]])):s(m,[h,n,u],g=>g[0]===h&&g[1]===n,d)},createAddSilentConnection=s=>(e,n)=>{const c=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(c).connect(e.destination);const h=()=>{n.removeEventListener("ended",h),n.disconnect(c),c.disconnect()};n.addEventListener("ended",h)},createAddUnrenderedAudioWorkletNode=s=>(e,n)=>{s(e).add(n)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=h(m),O={...DEFAULT_OPTIONS$j,...g},v=c(b,O),y=u(b)?e():null;super(m,!1,v,y),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(m){this._nativeAnalyserNode.fftSize=m}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(m){const g=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=m,!(m>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=g,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(m){const g=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=m,!(this._nativeAnalyserNode.maxDecibels>m))throw this._nativeAnalyserNode.minDecibels=g,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(m){this._nativeAnalyserNode.smoothingTimeConstant=m}getByteFrequencyData(m){this._nativeAnalyserNode.getByteFrequencyData(m)}getByteTimeDomainData(m){this._nativeAnalyserNode.getByteTimeDomainData(m)}getFloatFrequencyData(m){this._nativeAnalyserNode.getFloatFrequencyData(m)}getFloatTimeDomainData(m){this._nativeAnalyserNode.getFloatTimeDomainData(m)}},isOwnedByContext=(s,e)=>s.context===e,createAnalyserNodeRendererFactory=(s,e,n)=>()=>{const c=new WeakMap,h=async(u,d)=>{let m=e(u);if(!isOwnedByContext(m,d)){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,fftSize:m.fftSize,maxDecibels:m.maxDecibels,minDecibels:m.minDecibels,smoothingTimeConstant:m.smoothingTimeConstant};m=s(d,b)}return c.set(d,m),await n(u,d,m),m};return{render(u,d){const m=c.get(d);return m!==void 0?Promise.resolve(m):h(u,d)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=s=>{s.getChannelData=(e=>n=>{try{return e.call(s,n)}catch(c){throw c.code===12?createIndexSizeError():c}})(s.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(s,e,n,c,h,u,d,m)=>{let g=null;return class Hi{constructor(O){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:y,sampleRate:w}={...DEFAULT_OPTIONS$i,...O};g===null&&(g=new h(1,1,44100));const S=c!==null&&e(u,u)?new c({length:v,numberOfChannels:y,sampleRate:w}):g.createBuffer(y,v,w);if(S.numberOfChannels===0)throw n();return typeof S.copyFromChannel!="function"?(d(S),wrapAudioBufferGetChannelDataMethod(S)):e(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(S))||m(S),s.add(S),S}static[Symbol.hasInstance](O){return O!==null&&typeof O=="object"&&Object.getPrototypeOf(O)===Hi.prototype||s.has(O)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=s=>ACTIVE_AUDIO_NODE_STORE.has(s),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(s,e,n,c,h,u,d,m)=>class extends s{constructor(b,O){const v=u(b),y={...DEFAULT_OPTIONS$h,...O},w=h(v,y),S=d(v),A=S?e():null;super(b,!1,w,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=w,this._onended=null,this._playbackRate=n(this,S,w.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(b){if(this._nativeAudioBufferSourceNode.buffer=b,b!==null){if(this._isBufferSet)throw c();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(b){this._nativeAudioBufferSourceNode.loop=b}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(b){this._nativeAudioBufferSourceNode.loopEnd=b}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(b){this._nativeAudioBufferSourceNode.loopStart=b}get onended(){return this._onended}set onended(b){const O=typeof b=="function"?m(this,b):null;this._nativeAudioBufferSourceNode.onended=O;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===O?b:v}get playbackRate(){return this._playbackRate}start(b=0,O=0,v){if(this._nativeAudioBufferSourceNode.start(b,O,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[b,O]:[b,O,v]),this.context.state!=="closed"){setInternalStateToActive(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(b=0){this._nativeAudioBufferSourceNode.stop(b),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=b)}},createAudioBufferSourceNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap;let d=null,m=null;const g=async(b,O)=>{let v=n(b);const y=isOwnedByContext(v,O);if(!y){const w={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=e(O,w),d!==null&&v.start(...d),m!==null&&v.stop(m)}return u.set(O,v),y?await s(O,b.playbackRate,v.playbackRate):await c(O,b.playbackRate,v.playbackRate),await h(b,O,v),v};return{set start(b){d=b},set stop(b){m=b},render(b,O){const v=u.get(O);return v!==void 0?Promise.resolve(v):g(b,O)}}},isAudioBufferSourceNode=s=>"playbackRate"in s,isBiquadFilterNode=s=>"frequency"in s&&"gain"in s,isConstantSourceNode=s=>"offset"in s,isGainNode=s=>!("frequency"in s)&&"gain"in s,isOscillatorNode=s=>"detune"in s&&"frequency"in s,isStereoPannerNode=s=>"pan"in s,getAudioNodeConnections=s=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,s),getAudioParamConnections=s=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,s),deactivateActiveAudioNodeInputConnections=(s,e)=>{const{activeInputs:n}=getAudioNodeConnections(s);n.forEach(h=>h.forEach(([u])=>{e.includes(s)||deactivateActiveAudioNodeInputConnections(u,[...e,s])}));const c=isAudioBufferSourceNode(s)?[s.playbackRate]:isAudioWorkletNode(s)?Array.from(s.parameters.values()):isBiquadFilterNode(s)?[s.Q,s.detune,s.frequency,s.gain]:isConstantSourceNode(s)?[s.offset]:isGainNode(s)?[s.gain]:isOscillatorNode(s)?[s.detune,s.frequency]:isStereoPannerNode(s)?[s.pan]:[];for(const h of c){const u=getAudioParamConnections(h);u!==void 0&&u.activeInputs.forEach(([d])=>deactivateActiveAudioNodeInputConnections(d,e))}isActiveAudioNode(s)&&setInternalStateToPassive(s)},deactivateAudioGraph=s=>{deactivateActiveAudioNodeInputConnections(s.destination,[])},isValidLatencyHint=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),createAudioContextConstructor=(s,e,n,c,h,u,d,m,g)=>class extends s{constructor(O={}){if(g===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new g(O)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?n():S}if(v===null)throw c();if(!isValidLatencyHint(O.latencyHint))throw new TypeError(`The provided value '${O.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(O.sampleRate!==void 0&&v.sampleRate!==O.sampleRate)throw n();super(v,2);const{latencyHint:y}=O,{sampleRate:w}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:y==="balanced"?512/w:y==="interactive"||y===void 0?256/w:y==="playback"?1024/w:Math.max(2,Math.min(128,Math.round(y*w/128)))*128/w,this._nativeAudioContext=v,g.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",S)};v.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(O){return new h(this,{mediaElement:O})}createMediaStreamDestination(){return new u(this)}createMediaStreamSource(O){return new d(this,{mediaStream:O})}createMediaStreamTrackSource(O){return new m(this,{mediaStreamTrack:O})}resume(){return this._state==="suspended"?new Promise((O,v)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?O():this.resume().then(O,v)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(O=>{throw O===void 0||O.code===15?e():O})}suspend(){return this._nativeAudioContext.suspend().catch(O=>{throw O===void 0?e():O})}},createAudioDestinationNodeConstructor=(s,e,n,c,h,u,d,m)=>class extends s{constructor(b,O){const v=u(b),y=d(v),w=h(v,O,y),S=y?e(m):null;super(b,!1,w,S),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=w}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(b){if(this._isNodeOfNativeOfflineAudioContext)throw c();if(b>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=b}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(b){if(this._isNodeOfNativeOfflineAudioContext)throw c();this._nativeAudioDestinationNode.channelCountMode=b}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=s=>{const e=new WeakMap,n=async(c,h)=>{const u=h.destination;return e.set(h,u),await s(c,h,u),u};return{render(c,h){const u=e.get(h);return u!==void 0?Promise.resolve(u):n(c,h)}}},createAudioListenerFactory=(s,e,n,c,h,u,d,m)=>(g,b)=>{const O=b.listener,v=()=>{const N=new Float32Array(1),R=e(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),F=d(b);let D=!1,de=[0,0,-1,0,1,0],H=[0,0,0];const he=()=>{if(D)return;D=!0;const ke=c(b,256,9,0);ke.onaudioprocess=({inputBuffer:pe})=>{const B=[u(pe,N,0),u(pe,N,1),u(pe,N,2),u(pe,N,3),u(pe,N,4),u(pe,N,5)];B.some((te,Se)=>te!==de[Se])&&(O.setOrientation(...B),de=B);const K=[u(pe,N,6),u(pe,N,7),u(pe,N,8)];K.some((te,Se)=>te!==H[Se])&&(O.setPosition(...K),H=K)},R.connect(ke)},ae=ke=>pe=>{pe!==de[ke]&&(de[ke]=pe,O.setOrientation(...de))},Oe=ke=>pe=>{pe!==H[ke]&&(H[ke]=pe,O.setPosition(...H))},ye=(ke,pe,B)=>{const K=n(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:pe});K.connect(R,0,ke),K.start(),Object.defineProperty(K.offset,"defaultValue",{get(){return pe}});const te=s({context:g},F,K.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return m(te,"value",Se=>()=>Se.call(te),Se=>Te=>{try{Se.call(te,Te)}catch(Ne){if(Ne.code!==9)throw Ne}he(),F&&B(Te)}),te.cancelAndHoldAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.cancelAndHoldAtTime),te.cancelScheduledValues=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.cancelScheduledValues),te.exponentialRampToValueAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.exponentialRampToValueAtTime),te.linearRampToValueAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.linearRampToValueAtTime),te.setTargetAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.setTargetAtTime),te.setValueAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.setValueAtTime),te.setValueCurveAtTime=(Se=>F?()=>{throw h()}:(...Te)=>{const Ne=Se.apply(te,Te);return he(),Ne})(te.setValueCurveAtTime),te};return{forwardX:ye(0,0,ae(0)),forwardY:ye(1,0,ae(1)),forwardZ:ye(2,-1,ae(2)),positionX:ye(6,0,Oe(0)),positionY:ye(7,0,Oe(1)),positionZ:ye(8,0,Oe(2)),upX:ye(3,0,ae(3)),upY:ye(4,1,ae(4)),upZ:ye(5,0,ae(5))}},{forwardX:y,forwardY:w,forwardZ:S,positionX:A,positionY:E,positionZ:P,upX:I,upY:U,upZ:z}=O.forwardX===void 0?v():O;return{get forwardX(){return y},get forwardY(){return w},get forwardZ(){return S},get positionX(){return A},get positionY(){return E},get positionZ(){return P},get upX(){return I},get upY(){return U},get upZ(){return z}}},isAudioNode$1=s=>"context"in s,isAudioNodeOutputConnection=s=>isAudioNode$1(s[0]),insertElementInSet=(s,e,n,c)=>{for(const h of s)if(n(h)){if(c)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},addActiveInputConnectionToAudioParam=(s,e,[n,c],h)=>{insertElementInSet(s,[e,n,c],u=>u[0]===e&&u[1]===n,h)},addPassiveInputConnectionToAudioParam=(s,[e,n,c],h)=>{const u=s.get(e);u===void 0?s.set(e,new Set([[n,c]])):insertElementInSet(u,[n,c],d=>d[0]===n,h)},isNativeAudioNodeFaker=s=>"inputs"in s,connectNativeAudioNodeToNativeAudioNode=(s,e,n,c)=>{if(isNativeAudioNodeFaker(e)){const h=e.inputs[c];return s.connect(h,n,0),[h,n,0]}return s.connect(e,n,c),[e,n,c]},deleteActiveInputConnection=(s,e,n)=>{for(const c of s)if(c[0]===e&&c[1]===n)return s.delete(c),c;return null},deleteActiveInputConnectionToAudioParam=(s,e,n)=>pickElementFromSet(s,c=>c[0]===e&&c[1]===n),deleteEventListenerOfAudioNode=(s,e)=>{if(!getEventListenersOfAudioNode(s).delete(e))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(s,e,n)=>{const c=getValueForKey(s,e),h=pickElementFromSet(c,u=>u[0]===n);return c.size===0&&s.delete(e),h},disconnectNativeAudioNodeFromNativeAudioNode=(s,e,n,c)=>{isNativeAudioNodeFaker(e)?s.disconnect(e.inputs[c],n,0):s.disconnect(e,n,c)},getNativeAudioNode=s=>getValueForKey(AUDIO_NODE_STORE,s),getNativeAudioParam=s=>getValueForKey(AUDIO_PARAM_STORE,s),isPartOfACycle=s=>CYCLE_COUNTERS.has(s),isPassiveAudioNode=s=>!ACTIVE_AUDIO_NODE_STORE.has(s),testAudioNodeDisconnectMethodSupport=(s,e)=>new Promise(n=>{if(e!==null)n(!0);else{const c=s.createScriptProcessor(256,1,1),h=s.createGain(),u=s.createBuffer(1,2,44100),d=u.getChannelData(0);d[0]=1,d[1]=1;const m=s.createBufferSource();m.buffer=u,m.loop=!0,m.connect(c).connect(s.destination),m.connect(h),m.disconnect(h),c.onaudioprocess=g=>{const b=g.inputBuffer.getChannelData(0);Array.prototype.some.call(b,O=>O===1)?n(!0):n(!1),m.stop(),c.onaudioprocess=null,m.disconnect(c),c.disconnect(s.destination)},m.start()}}),visitEachAudioNodeOnce=(s,e)=>{const n=new Map;for(const c of s)for(const h of c){const u=n.get(h);n.set(h,u===void 0?1:u+1)}n.forEach((c,h)=>e(h,c))},isNativeAudioNode$1=s=>"context"in s,wrapAudioNodeDisconnectMethod=s=>{const e=new Map;s.connect=(n=>(c,h=0,u=0)=>{const d=isNativeAudioNode$1(c)?n(c,h,u):n(c,h),m=e.get(c);return m===void 0?e.set(c,[{input:u,output:h}]):m.every(g=>g.input!==u||g.output!==h)&&m.push({input:u,output:h}),d})(s.connect.bind(s)),s.disconnect=(n=>(c,h,u)=>{if(n.apply(s),c===void 0)e.clear();else if(typeof c=="number")for(const[d,m]of e){const g=m.filter(b=>b.output!==c);g.length===0?e.delete(d):e.set(d,g)}else if(e.has(c))if(h===void 0)e.delete(c);else{const d=e.get(c);if(d!==void 0){const m=d.filter(g=>g.output!==h&&(g.input!==u||u===void 0));m.length===0?e.delete(c):e.set(c,m)}}for(const[d,m]of e)m.forEach(g=>{isNativeAudioNode$1(d)?s.connect(d,g.output,g.input):s.connect(d,g.output)})})(s.disconnect)},addConnectionToAudioParamOfAudioContext=(s,e,n,c)=>{const{activeInputs:h,passiveInputs:u}=getAudioParamConnections(e),{outputs:d}=getAudioNodeConnections(s),m=getEventListenersOfAudioNode(s),g=b=>{const O=getNativeAudioNode(s),v=getNativeAudioParam(e);if(b){const y=deletePassiveInputConnectionToAudioParam(u,s,n);addActiveInputConnectionToAudioParam(h,s,y,!1),!c&&!isPartOfACycle(s)&&O.connect(v,n)}else{const y=deleteActiveInputConnectionToAudioParam(h,s,n);addPassiveInputConnectionToAudioParam(u,y,!1),!c&&!isPartOfACycle(s)&&O.disconnect(v,n)}};return insertElementInSet(d,[e,n],b=>b[0]===e&&b[1]===n,!0)?(m.add(g),isActiveAudioNode(s)?addActiveInputConnectionToAudioParam(h,s,[n,g],!0):addPassiveInputConnectionToAudioParam(u,[s,n,g],!0),!0):!1},deleteInputConnectionOfAudioNode=(s,e,n,c)=>{const{activeInputs:h,passiveInputs:u}=getAudioNodeConnections(e),d=deleteActiveInputConnection(h[c],s,n);return d===null?[deletePassiveInputConnectionToAudioNode(u,s,n,c)[2],!1]:[d[2],!0]},deleteInputConnectionOfAudioParam=(s,e,n)=>{const{activeInputs:c,passiveInputs:h}=getAudioParamConnections(e),u=deleteActiveInputConnection(c,s,n);return u===null?[deletePassiveInputConnectionToAudioParam(h,s,n)[1],!1]:[u[2],!0]},deleteInputsOfAudioNode=(s,e,n,c,h)=>{const[u,d]=deleteInputConnectionOfAudioNode(s,n,c,h);if(u!==null&&(deleteEventListenerOfAudioNode(s,u),d&&!e&&!isPartOfACycle(s)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(s),getNativeAudioNode(n),c,h)),isActiveAudioNode(n)){const{activeInputs:m}=getAudioNodeConnections(n);setInternalStateToPassiveWhenNecessary(n,m)}},deleteInputsOfAudioParam=(s,e,n,c)=>{const[h,u]=deleteInputConnectionOfAudioParam(s,n,c);h!==null&&(deleteEventListenerOfAudioNode(s,h),u&&!e&&!isPartOfACycle(s)&&getNativeAudioNode(s).disconnect(getNativeAudioParam(n),c))},deleteAnyConnection=(s,e)=>{const n=getAudioNodeConnections(s),c=[];for(const h of n.outputs)isAudioNodeOutputConnection(h)?deleteInputsOfAudioNode(s,e,...h):deleteInputsOfAudioParam(s,e,...h),c.push(h[0]);return n.outputs.clear(),c},deleteConnectionAtOutput=(s,e,n)=>{const c=getAudioNodeConnections(s),h=[];for(const u of c.outputs)u[1]===n&&(isAudioNodeOutputConnection(u)?deleteInputsOfAudioNode(s,e,...u):deleteInputsOfAudioParam(s,e,...u),h.push(u[0]),c.outputs.delete(u));return h},deleteConnectionToDestination=(s,e,n,c,h)=>{const u=getAudioNodeConnections(s);return Array.from(u.outputs).filter(d=>d[0]===n&&(c===void 0||d[1]===c)&&(h===void 0||d[2]===h)).map(d=>(isAudioNodeOutputConnection(d)?deleteInputsOfAudioNode(s,e,...d):deleteInputsOfAudioParam(s,e,...d),u.outputs.delete(d),d[0]))},createAudioNodeConstructor=(s,e,n,c,h,u,d,m,g,b,O,v,y,w,S,A)=>class extends b{constructor(P,I,U,z){super(U),this._context=P,this._nativeAudioNode=U;const N=O(P);v(N)&&n(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(N,A))!==!0&&wrapAudioNodeDisconnectMethod(U),AUDIO_NODE_STORE.set(this,U),EVENT_LISTENERS.set(this,new Set),P.state!=="closed"&&I&&setInternalStateToActive(this),s(this,z,U)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(P){this._nativeAudioNode.channelCount=P}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(P){this._nativeAudioNode.channelCountMode=P}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(P){this._nativeAudioNode.channelInterpretation=P}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(P,I=0,U=0){if(I<0||I>=this._nativeAudioNode.numberOfOutputs)throw h();const z=O(this._context),N=S(z);if(y(P)||w(P))throw u();if(isAudioNode$1(P)){const D=getNativeAudioNode(P);try{const H=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,D,I,U),he=isPassiveAudioNode(this);(N||he)&&this._nativeAudioNode.disconnect(...H),this.context.state!=="closed"&&!he&&isPassiveAudioNode(P)&&setInternalStateToActive(P)}catch(H){throw H.code===12?u():H}if(e(this,P,I,U,N)){const H=g([this],P);visitEachAudioNodeOnce(H,c(N))}return P}const R=getNativeAudioParam(P);if(R.name==="playbackRate"&&R.maxValue===1024)throw d();try{this._nativeAudioNode.connect(R,I),(N||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(R,I)}catch(D){throw D.code===12?u():D}if(addConnectionToAudioParamOfAudioContext(this,P,I,N)){const D=g([this],P);visitEachAudioNodeOnce(D,c(N))}}disconnect(P,I,U){let z;const N=O(this._context),R=S(N);if(P===void 0)z=deleteAnyConnection(this,R);else if(typeof P=="number"){if(P<0||P>=this.numberOfOutputs)throw h();z=deleteConnectionAtOutput(this,R,P)}else{if(I!==void 0&&(I<0||I>=this.numberOfOutputs)||isAudioNode$1(P)&&U!==void 0&&(U<0||U>=P.numberOfInputs))throw h();if(z=deleteConnectionToDestination(this,R,P,I,U),z.length===0)throw u()}for(const F of z){const D=g([this],F);visitEachAudioNodeOnce(D,m)}}},createAudioParamFactory=(s,e,n,c,h,u,d,m,g,b,O,v,y)=>(w,S,A,E=null,P=null)=>{const I=new AutomationEventList(A.defaultValue),U=S?c(I):null,z={get defaultValue(){return A.defaultValue},get maxValue(){return E===null?A.maxValue:E},get minValue(){return P===null?A.minValue:P},get value(){return A.value},set value(N){A.value=N,z.setValueAtTime(N,w.context.currentTime)},cancelAndHoldAtTime(N){if(typeof A.cancelAndHoldAtTime=="function")U===null&&I.flush(w.context.currentTime),I.add(h(N)),A.cancelAndHoldAtTime(N);else{const R=Array.from(I).pop();U===null&&I.flush(w.context.currentTime),I.add(h(N));const F=Array.from(I).pop();A.cancelScheduledValues(N),R!==F&&F!==void 0&&(F.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(F.value,F.endTime):F.type==="linearRampToValue"?A.linearRampToValueAtTime(F.value,F.endTime):F.type==="setValue"?A.setValueAtTime(F.value,F.startTime):F.type==="setValueCurve"&&A.setValueCurveAtTime(F.values,F.startTime,F.duration))}return z},cancelScheduledValues(N){return U===null&&I.flush(w.context.currentTime),I.add(u(N)),A.cancelScheduledValues(N),z},exponentialRampToValueAtTime(N,R){if(N===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;return U===null&&I.flush(w.context.currentTime),I.add(d(N,R)),A.exponentialRampToValueAtTime(N,R),z},linearRampToValueAtTime(N,R){return U===null&&I.flush(w.context.currentTime),I.add(m(N,R)),A.linearRampToValueAtTime(N,R),z},setTargetAtTime(N,R,F){return U===null&&I.flush(w.context.currentTime),I.add(g(N,R,F)),A.setTargetAtTime(N,R,F),z},setValueAtTime(N,R){return U===null&&I.flush(w.context.currentTime),I.add(b(N,R)),A.setValueAtTime(N,R),z},setValueCurveAtTime(N,R,F){const D=N instanceof Float32Array?N:new Float32Array(N);if(v!==null&&v.name==="webkitAudioContext"){const de=R+F,H=w.context.sampleRate,he=Math.ceil(R*H),ae=Math.floor(de*H),Oe=ae-he,ye=new Float32Array(Oe);for(let pe=0;pe<Oe;pe+=1){const B=(D.length-1)/F*((he+pe)/H-R),K=Math.floor(B),te=Math.ceil(B);ye[pe]=K===te?D[K]:(1-(B-K))*D[K]+(1-(te-B))*D[te]}U===null&&I.flush(w.context.currentTime),I.add(O(ye,R,F)),A.setValueCurveAtTime(ye,R,F);const ke=ae/H;ke<de&&y(z,ye[ye.length-1],ke),y(z,D[D.length-1],de)}else U===null&&I.flush(w.context.currentTime),I.add(O(D,R,F)),A.setValueCurveAtTime(D,R,F);return z}};return n.set(z,A),e.set(z,w),s(z,U),z},createAudioParamRenderer=s=>({replay(e){for(const n of s)if(n.type==="exponentialRampToValue"){const{endTime:c,value:h}=n;e.exponentialRampToValueAtTime(h,c)}else if(n.type==="linearRampToValue"){const{endTime:c,value:h}=n;e.linearRampToValueAtTime(h,c)}else if(n.type==="setTarget"){const{startTime:c,target:h,timeConstant:u}=n;e.setTargetAtTime(h,c,u)}else if(n.type==="setValue"){const{startTime:c,value:h}=n;e.setValueAtTime(h,c)}else if(n.type==="setValueCurve"){const{duration:c,startTime:h,values:u}=n;e.setValueCurveAtTime(u,h,c)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((c,h)=>e.call(n,c,h,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(s,e,n,c,h,u,d,m,g,b,O,v,y,w)=>class extends e{constructor(A,E,P){var I;const U=m(A),z=g(U),N=O({...DEFAULT_OPTIONS$g,...P});y(N);const R=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(U),F=R==null?void 0:R.get(E),D=z||U.state!=="closed"?U:(I=d(U))!==null&&I!==void 0?I:U,de=h(D,z?null:A.baseLatency,b,E,F,N),H=z?c(E,N,F):null;super(A,!0,de,H);const he=[];de.parameters.forEach((Oe,ye)=>{const ke=n(this,z,Oe);he.push([ye,ke])}),this._nativeAudioWorkletNode=de,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(he),z&&s(U,this);const{activeInputs:ae}=u(this);v(de,ae)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const E=typeof A=="function"?w(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=E;const P=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=P!==null&&P===E?A:P}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(s,e,n,c,h){if(typeof s.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),s.copyFromChannel(e[n],c,h);else{const u=s.getChannelData(c);if(e[n].byteLength===0)e[n]=u.slice(h,h+128);else{const d=new Float32Array(u.buffer,h*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(d)}}}const copyToChannel=(s,e,n,c,h)=>{typeof s.copyToChannel=="function"?e[n].byteLength!==0&&s.copyToChannel(e[n],c,h):e[n].byteLength!==0&&s.getChannelData(c).set(e[n],h)},createNestedArrays=(s,e)=>{const n=[];for(let c=0;c<s;c+=1){const h=[],u=typeof e=="number"?e:e[c];for(let d=0;d<u;d+=1)h.push(new Float32Array(128));n.push(h)}return n},getAudioWorkletProcessor=(s,e)=>{const n=getValueForKey(NODE_TO_PROCESSOR_MAPS,s),c=getNativeAudioNode(e);return getValueForKey(n,c)},processBuffer=async(s,e,n,c,h,u,d)=>{const m=e===null?Math.ceil(s.context.length/128)*128:e.length,g=c.channelCount*c.numberOfInputs,b=h.reduce((E,P)=>E+P,0),O=b===0?null:n.createBuffer(b,m,n.sampleRate);if(u===void 0)throw new Error("Missing the processor constructor.");const v=getAudioNodeConnections(s),y=await getAudioWorkletProcessor(n,s),w=createNestedArrays(c.numberOfInputs,c.channelCount),S=createNestedArrays(c.numberOfOutputs,h),A=Array.from(s.parameters.keys()).reduce((E,P)=>({...E,[P]:new Float32Array(128)}),{});for(let E=0;E<m;E+=128){if(c.numberOfInputs>0&&e!==null)for(let P=0;P<c.numberOfInputs;P+=1)for(let I=0;I<c.channelCount;I+=1)copyFromChannel(e,w[P],I,I,E);u.parameterDescriptors!==void 0&&e!==null&&u.parameterDescriptors.forEach(({name:P},I)=>{copyFromChannel(e,A,P,g+I,E)});for(let P=0;P<c.numberOfInputs;P+=1)for(let I=0;I<h[P];I+=1)S[P][I].byteLength===0&&(S[P][I]=new Float32Array(128));try{const P=w.map((U,z)=>v.activeInputs[z].size===0?[]:U),I=d(E/n.sampleRate,n.sampleRate,()=>y.process(P,S,A));if(O!==null)for(let U=0,z=0;U<c.numberOfOutputs;U+=1){for(let N=0;N<h[U];N+=1)copyToChannel(O,S[U],N,z+N,E);z+=h[U]}if(!I)break}catch(P){s.dispatchEvent(new ErrorEvent("processorerror",{colno:P.colno,filename:P.filename,lineno:P.lineno,message:P.message}));break}}return O},createAudioWorkletNodeRendererFactory=(s,e,n,c,h,u,d,m,g,b,O,v,y,w,S,A)=>(E,P,I)=>{const U=new WeakMap;let z=null;const N=async(R,F)=>{let D=O(R),de=null;const H=isOwnedByContext(D,F),he=Array.isArray(P.outputChannelCount)?P.outputChannelCount:Array.from(P.outputChannelCount);if(v===null){const ae=he.reduce((pe,B)=>pe+B,0),Oe=h(F,{channelCount:Math.max(1,ae),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,ae)}),ye=[];for(let pe=0;pe<R.numberOfOutputs;pe+=1)ye.push(c(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:he[pe]}));const ke=d(F,{channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,gain:1});ke.connect=e.bind(null,ye),ke.disconnect=g.bind(null,ye),de=[Oe,ye,ke]}else H||(D=new v(F,E));if(U.set(F,de===null?D:de[2]),de!==null){if(z===null){if(I===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=R.channelCount*R.numberOfInputs,K=I.parameterDescriptors===void 0?0:I.parameterDescriptors.length,te=B+K;z=processBuffer(R,te===0?null:await(async()=>{const Te=new y(te,Math.ceil(R.context.length/128)*128,F.sampleRate),Ne=[],Re=[];for(let Be=0;Be<P.numberOfInputs;Be+=1)Ne.push(d(Te,{channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,gain:1})),Re.push(h(Te,{channelCount:P.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:P.channelCount}));const Ie=await Promise.all(Array.from(R.parameters.values()).map(async Be=>{const Ue=u(Te,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Be.value});return await w(Te,Be,Ue.offset),Ue})),Me=c(Te,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+K)});for(let Be=0;Be<P.numberOfInputs;Be+=1){Ne[Be].connect(Re[Be]);for(let Ue=0;Ue<P.channelCount;Ue+=1)Re[Be].connect(Me,Ue,Be*P.channelCount+Ue)}for(const[Be,Ue]of Ie.entries())Ue.connect(Me,0,B+Be),Ue.start(0);return Me.connect(Te.destination),await Promise.all(Ne.map(Be=>S(R,Te,Be))),A(Te)})(),F,P,he,I,b)}const ae=await z,Oe=n(F,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ye,ke,pe]=de;ae!==null&&(Oe.buffer=ae,Oe.start(0)),Oe.connect(ye);for(let B=0,K=0;B<R.numberOfOutputs;B+=1){const te=ke[B];for(let Se=0;Se<he[B];Se+=1)ye.connect(te,K+Se,Se);K+=he[B]}return pe}if(H)for(const[ae,Oe]of R.parameters.entries())await s(F,Oe,D.parameters.get(ae));else for(const[ae,Oe]of R.parameters.entries())await w(F,Oe,D.parameters.get(ae));return await S(R,F,D),D};return{render(R,F){m(F,R);const D=U.get(F);return D!==void 0?Promise.resolve(D):N(R,F)}}},createBaseAudioContextConstructor=(s,e,n,c,h,u,d,m,g,b,O,v,y,w,S,A,E,P,I,U)=>class extends S{constructor(N,R){super(N,R),this._nativeContext=N,this._audioWorklet=s===void 0?void 0:{addModule:(F,D)=>s(this,F,D)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new h(this)}createBuffer(N,R,F){return new n({length:R,numberOfChannels:N,sampleRate:F})}createBufferSource(){return new c(this)}createChannelMerger(N=6){return new u(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new d(this,{numberOfOutputs:N})}createConstantSource(){return new m(this)}createConvolver(){return new g(this)}createDelay(N=1){return new O(this,{maxDelayTime:N})}createDynamicsCompressor(){return new v(this)}createGain(){return new y(this)}createIIRFilter(N,R){return new w(this,{feedback:R,feedforward:N})}createOscillator(){return new A(this)}createPanner(){return new E(this)}createPeriodicWave(N,R,F={disableNormalization:!1}){return new P(this,{...F,imag:R,real:N})}createStereoPanner(){return new I(this)}createWaveShaper(){return new U(this)}decodeAudioData(N,R,F){return b(this._nativeContext,N).then(D=>(typeof R=="function"&&R(D),D),D=>{throw typeof F=="function"&&F(D),D})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(s,e,n,c,h,u,d,m)=>class extends s{constructor(b,O){const v=u(b),y={...DEFAULT_OPTIONS$f,...O},w=h(v,y),S=d(v),A=S?n():null;super(b,!1,w,A),this._Q=e(this,S,w.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=e(this,S,w.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=e(this,S,w.frequency,b.sampleRate/2,0),this._gain=e(this,S,w.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=w,m(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(b){this._nativeBiquadFilterNode.type=b}getFrequencyResponse(b,O,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(b,O,v)}catch(y){throw y.code===11?c():y}if(b.length!==O.length||O.length!==v.length)throw c()}},createBiquadFilterNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap,d=async(m,g)=>{let b=n(m);const O=isOwnedByContext(b,g);if(!O){const v={Q:b.Q.value,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,gain:b.gain.value,type:b.type};b=e(g,v)}return u.set(g,b),O?(await s(g,m.Q,b.Q),await s(g,m.detune,b.detune),await s(g,m.frequency,b.frequency),await s(g,m.gain,b.gain)):(await c(g,m.Q,b.Q),await c(g,m.detune,b.detune),await c(g,m.frequency,b.frequency),await c(g,m.gain,b.gain)),await h(m,g,b),b};return{render(m,g){const b=u.get(g);return b!==void 0?Promise.resolve(b):d(m,g)}}},createCacheTestResult=(s,e)=>(n,c)=>{const h=e.get(n);if(h!==void 0)return h;const u=s.get(n);if(u!==void 0)return u;try{const d=c();return d instanceof Promise?(s.set(n,d),d.catch(()=>!1).then(m=>(s.delete(n),e.set(n,m),m))):(e.set(n,d),d)}catch{return e.set(n,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(s,e,n,c,h)=>class extends s{constructor(d,m){const g=c(d),b={...DEFAULT_OPTIONS$e,...m},O=n(g,b),v=h(g)?e():null;super(d,!1,O,v)}},createChannelMergerNodeRendererFactory=(s,e,n)=>()=>{const c=new WeakMap,h=async(u,d)=>{let m=e(u);if(!isOwnedByContext(m,d)){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,numberOfInputs:m.numberOfInputs};m=s(d,b)}return c.set(d,m),await n(u,d,m),m};return{render(u,d){const m=c.get(d);return m!==void 0?Promise.resolve(m):h(u,d)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=c(m),O=u({...DEFAULT_OPTIONS$d,...g}),v=n(b,O),y=h(b)?e():null;super(m,!1,v,y)}},createChannelSplitterNodeRendererFactory=(s,e,n)=>()=>{const c=new WeakMap,h=async(u,d)=>{let m=e(u);if(!isOwnedByContext(m,d)){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,numberOfOutputs:m.numberOfOutputs};m=s(d,b)}return c.set(d,m),await n(u,d,m),m};return{render(u,d){const m=c.get(d);return m!==void 0?Promise.resolve(m):h(u,d)}}},createConnectAudioParam=s=>(e,n,c)=>s(n,e,c),createConnectMultipleOutputs=s=>(e,n,c=0,h=0)=>{const u=e[c];if(u===void 0)throw s();return isNativeAudioNode$1(n)?u.connect(n,0,h):u.connect(n,0)},createConnectedNativeAudioBufferSourceNodeFactory=s=>(e,n)=>{const c=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=e.createBuffer(1,2,44100);return c.buffer=h,c.loop=!0,c.connect(n),c.start(),()=>{c.stop(),c.disconnect(n)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(s,e,n,c,h,u,d)=>class extends s{constructor(g,b){const O=h(g),v={...DEFAULT_OPTIONS$c,...b},y=c(O,v),w=u(O),S=w?n():null;super(g,!1,y,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=y,this._offset=e(this,w,y.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(g){const b=typeof g=="function"?d(this,g):null;this._nativeConstantSourceNode.onended=b;const O=this._nativeConstantSourceNode.onended;this._onended=O!==null&&O===b?g:O}start(g=0){if(this._nativeConstantSourceNode.start(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=g),this.context.state!=="closed"){setInternalStateToActive(this);const b=()=>{this._nativeConstantSourceNode.removeEventListener("ended",b),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",b)}}stop(g=0){this._nativeConstantSourceNode.stop(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=g)}},createConstantSourceNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap;let d=null,m=null;const g=async(b,O)=>{let v=n(b);const y=isOwnedByContext(v,O);if(!y){const w={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=e(O,w),d!==null&&v.start(d),m!==null&&v.stop(m)}return u.set(O,v),y?await s(O,b.offset,v.offset):await c(O,b.offset,v.offset),await h(b,O,v),v};return{set start(b){d=b},set stop(b){m=b},render(b,O){const v=u.get(O);return v!==void 0?Promise.resolve(v):g(b,O)}}},createConvertNumberToUnsignedLong=s=>e=>(s[0]=e,s[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=c(m),O={...DEFAULT_OPTIONS$b,...g},v=n(b,O),w=h(b)?e():null;super(m,!1,v,w),this._isBufferNullified=!1,this._nativeConvolverNode=v,O.buffer!==null&&u(this,O.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(m){if(this._nativeConvolverNode.buffer=m,m===null&&this._nativeConvolverNode.buffer!==null){const g=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=g.createBuffer(1,1,44100),this._isBufferNullified=!0,u(this,0)}else this._isBufferNullified=!1,u(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(m){this._nativeConvolverNode.normalize=m}},createConvolverNodeRendererFactory=(s,e,n)=>()=>{const c=new WeakMap,h=async(u,d)=>{let m=e(u);if(!isOwnedByContext(m,d)){const b={buffer:m.buffer,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,disableNormalization:!m.normalize};m=s(d,b)}return c.set(d,m),isNativeAudioNodeFaker(m)?await n(u,d,m.inputs[0]):await n(u,d,m),m};return{render(u,d){const m=c.get(d);return m!==void 0?Promise.resolve(m):h(u,d)}}},createCreateNativeOfflineAudioContext=(s,e)=>(n,c,h)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,c,h)}catch(u){throw u.name==="SyntaxError"?s():u}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=s=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(c=>{const h=()=>{n.onmessage=null,e.close(),n.close(),c()};n.onmessage=()=>h();try{e.postMessage(s,[s])}finally{h()}})},createDecodeAudioData=(s,e,n,c,h,u,d,m,g,b,O)=>(v,y)=>{const w=d(v)?v:u(v);if(h.has(y)){const S=n();return Promise.reject(S)}try{h.add(y)}catch{}return e(g,()=>g(w))?w.decodeAudioData(y).then(S=>(detachArrayBuffer(y).catch(()=>{}),e(m,()=>m(S))||O(S),s.add(S),S)):new Promise((S,A)=>{const E=async()=>{try{await detachArrayBuffer(y)}catch{}},P=I=>{A(I),E()};try{w.decodeAudioData(y,I=>{typeof I.copyFromChannel!="function"&&(b(I),wrapAudioBufferGetChannelDataMethod(I)),s.add(I),E().then(()=>S(I))},I=>{P(I===null?c():I)})}catch(I){P(I)}})},createDecrementCycleCounter=(s,e,n,c,h,u,d,m)=>(g,b)=>{const O=e.get(g);if(O===void 0)throw new Error("Missing the expected cycle count.");const v=u(g.context),y=m(v);if(O===b){if(e.delete(g),!y&&d(g)){const w=c(g),{outputs:S}=n(g);for(const A of S)if(isAudioNodeOutputConnection(A)){const E=c(A[0]);s(w,E,A[1],A[2])}else{const E=h(A[0]);w.connect(E,A[1])}}}else e.set(g,O-b)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(s,e,n,c,h,u,d)=>class extends s{constructor(g,b){const O=h(g),v={...DEFAULT_OPTIONS$a,...b},y=c(O,v),w=u(O),S=w?n(v.maxDelayTime):null;super(g,!1,y,S),this._delayTime=e(this,w,y.delayTime),d(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(s,e,n,c,h)=>u=>{const d=new WeakMap,m=async(g,b)=>{let O=n(g);const v=isOwnedByContext(O,b);if(!v){const y={channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,delayTime:O.delayTime.value,maxDelayTime:u};O=e(b,y)}return d.set(b,O),v?await s(b,g.delayTime,O.delayTime):await c(b,g.delayTime,O.delayTime),await h(g,b,O),O};return{render(g,b){const O=d.get(b);return O!==void 0?Promise.resolve(O):m(g,b)}}},createDeleteActiveInputConnectionToAudioNode=s=>(e,n,c,h)=>s(e[h],u=>u[0]===n&&u[1]===c),createDeleteUnrenderedAudioWorkletNode=s=>(e,n)=>{s(e).delete(n)},isDelayNode=s=>"delayTime"in s,createDetectCycles=(s,e,n)=>function c(h,u){const d=isAudioNode$1(u)?u:n(s,u);if(isDelayNode(d))return[];if(h[0]===d)return[h];if(h.includes(d))return[];const{outputs:m}=e(d);return Array.from(m).map(g=>c([...h,d],g[0])).reduce((g,b)=>g.concat(b),[])},getOutputAudioNodeAtIndex=(s,e,n)=>{const c=e[n];if(c===void 0)throw s();return c},createDisconnectMultipleOutputs=s=>(e,n=void 0,c=void 0,h=0)=>n===void 0?e.forEach(u=>u.disconnect()):typeof n=="number"?getOutputAudioNodeAtIndex(s,e,n).disconnect():isNativeAudioNode$1(n)?c===void 0?e.forEach(u=>u.disconnect(n)):h===void 0?getOutputAudioNodeAtIndex(s,e,c).disconnect(n,0):getOutputAudioNodeAtIndex(s,e,c).disconnect(n,0,h):c===void 0?e.forEach(u=>u.disconnect(n)):getOutputAudioNodeAtIndex(s,e,c).disconnect(n,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(s,e,n,c,h,u,d,m)=>class extends s{constructor(b,O){const v=u(b),y={...DEFAULT_OPTIONS$9,...O},w=c(v,y),S=d(v),A=S?n():null;super(b,!1,w,A),this._attack=e(this,S,w.attack),this._knee=e(this,S,w.knee),this._nativeDynamicsCompressorNode=w,this._ratio=e(this,S,w.ratio),this._release=e(this,S,w.release),this._threshold=e(this,S,w.threshold),m(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(b){const O=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=b,b>2)throw this._nativeDynamicsCompressorNode.channelCount=O,h()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(b){const O=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=b,b==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=O,h()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap,d=async(m,g)=>{let b=n(m);const O=isOwnedByContext(b,g);if(!O){const v={attack:b.attack.value,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,knee:b.knee.value,ratio:b.ratio.value,release:b.release.value,threshold:b.threshold.value};b=e(g,v)}return u.set(g,b),O?(await s(g,m.attack,b.attack),await s(g,m.knee,b.knee),await s(g,m.ratio,b.ratio),await s(g,m.release,b.release),await s(g,m.threshold,b.threshold)):(await c(g,m.attack,b.attack),await c(g,m.knee,b.knee),await c(g,m.ratio,b.ratio),await c(g,m.release,b.release),await c(g,m.threshold,b.threshold)),await h(m,g,b),b};return{render(m,g){const b=u.get(g);return b!==void 0?Promise.resolve(b):d(m,g)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=s=>e=>new Promise((n,c)=>{if(s===null){c(new SyntaxError);return}const h=s.document.head;if(h===null)c(new SyntaxError);else{const u=s.document.createElement("script"),d=new Blob([e],{type:"application/javascript"}),m=URL.createObjectURL(d),g=s.onerror,b=()=>{s.onerror=g,URL.revokeObjectURL(m)};s.onerror=(O,v,y,w,S)=>{if(v===m||v===s.location.href&&y===1&&w===1)return b(),c(S),!1;if(g!==null)return g(O,v,y,w,S)},u.onerror=()=>{b(),c(new SyntaxError)},u.onload=()=>{b(),n()},u.src=m,u.type="module",h.appendChild(u)}}),createEventTargetConstructor=s=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,c,h){if(c!==null){let u=this._listeners.get(c);u===void 0&&(u=s(this,c),typeof c=="function"&&this._listeners.set(c,u)),this._nativeEventTarget.addEventListener(n,u,h)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,c,h){const u=c===null?void 0:this._listeners.get(c);this._nativeEventTarget.removeEventListener(n,u===void 0?null:u,h)}},createExposeCurrentFrameAndCurrentTime=s=>(e,n,c)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return c()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},createFetchSource=s=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw s()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=h(m),O={...DEFAULT_OPTIONS$8,...g},v=c(b,O),y=u(b),w=y?n():null;super(m,!1,v,w),this._gain=e(this,y,v.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap,d=async(m,g)=>{let b=n(m);const O=isOwnedByContext(b,g);if(!O){const v={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:b.gain.value};b=e(g,v)}return u.set(g,b),O?await s(g,m.gain,b.gain):await c(g,m.gain,b.gain),await h(m,g,b),b};return{render(m,g){const b=u.get(g);return b!==void 0?Promise.resolve(b):d(m,g)}}},createGetActiveAudioWorkletNodeInputs=(s,e)=>n=>e(s,n),createGetAudioNodeRenderer=s=>e=>{const n=s(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},createGetAudioNodeTailTime=s=>e=>{var n;return(n=s.get(e))!==null&&n!==void 0?n:0},createGetAudioParamRenderer=s=>e=>{const n=s(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},createGetBackupOfflineAudioContext=s=>e=>s.get(e),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=s=>e=>{const n=s.get(e);if(n===void 0)throw createInvalidStateError();return n},createGetOrCreateBackupOfflineAudioContext=(s,e)=>n=>{let c=s.get(n);if(c!==void 0)return c;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return c=new e(1,1,44100),s.set(n,c),c},createGetUnrenderedAudioWorkletNodes=s=>e=>{const n=s.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=s=>{s.getFrequencyResponse=(e=>(n,c,h)=>{if(n.length!==c.length||c.length!==h.length)throw createInvalidAccessError();return e.call(s,n,c,h)})(s.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=c(m),O=h(b),v={...DEFAULT_OPTIONS$7,...g},y=e(b,O?null:m.baseLatency,v),w=O?n(v.feedback,v.feedforward):null;super(m,!1,y,w),wrapIIRFilterNodeGetFrequencyResponseMethod(y),this._nativeIIRFilterNode=y,u(this,1)}getFrequencyResponse(m,g,b){return this._nativeIIRFilterNode.getFrequencyResponse(m,g,b)}},filterBuffer=(s,e,n,c,h,u,d,m,g,b,O)=>{const v=b.length;let y=m;for(let w=0;w<v;w+=1){let S=n[0]*b[w];for(let A=1;A<h;A+=1){const E=y-A&g-1;S+=n[A]*u[E],S-=s[A]*d[E]}for(let A=h;A<c;A+=1)S+=n[A]*u[y-A&g-1];for(let A=h;A<e;A+=1)S-=s[A]*d[y-A&g-1];u[y]=b[w],d[y]=S,y=y+1&g-1,O[w]=S}return y},filterFullBuffer=(s,e,n,c)=>{const h=n instanceof Float64Array?n:new Float64Array(n),u=c instanceof Float64Array?c:new Float64Array(c),d=h.length,m=u.length,g=Math.min(d,m);if(h[0]!==1){for(let S=0;S<d;S+=1)u[S]/=h[0];for(let S=1;S<m;S+=1)h[S]/=h[0]}const b=32,O=new Float32Array(b),v=new Float32Array(b),y=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),w=s.numberOfChannels;for(let S=0;S<w;S+=1){const A=s.getChannelData(S),E=y.getChannelData(S);O.fill(0),v.fill(0),filterBuffer(h,d,u,m,g,O,v,0,b,A,E)}return y},createIIRFilterNodeRendererFactory=(s,e,n,c,h)=>(u,d)=>{const m=new WeakMap;let g=null;const b=async(O,v)=>{let y=null,w=e(O);const S=isOwnedByContext(w,v);if(v.createIIRFilter===void 0?y=s(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=v.createIIRFilter(d,u)),m.set(v,y===null?w:y),y!==null){if(g===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=new n(O.context.destination.channelCount,O.context.length,v.sampleRate);g=(async()=>{await c(O,E,E.destination);const P=await h(E);return filterFullBuffer(P,v,u,d)})()}const A=await g;return y.buffer=A,y.start(0),y}return await c(O,v,w),w};return{render(O,v){const y=m.get(v);return y!==void 0?Promise.resolve(y):b(O,v)}}},createIncrementCycleCounterFactory=(s,e,n,c,h,u)=>d=>(m,g)=>{const b=s.get(m);if(b===void 0){if(!d&&u(m)){const O=c(m),{outputs:v}=n(m);for(const y of v)if(isAudioNodeOutputConnection(y)){const w=c(y[0]);e(O,w,y[1],y[2])}else{const w=h(y[0]);O.disconnect(w,y[1])}}s.set(m,g)}else s.set(m,b+g)},createIsAnyAudioContext=(s,e)=>n=>{const c=s.get(n);return e(c)||e(n)},createIsAnyAudioNode=(s,e)=>n=>s.has(n)||e(n),createIsAnyAudioParam=(s,e)=>n=>s.has(n)||e(n),createIsAnyOfflineAudioContext=(s,e)=>n=>{const c=s.get(n);return e(c)||e(n)},createIsNativeAudioContext=s=>e=>s!==null&&e instanceof s,createIsNativeAudioNode=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,createIsNativeAudioParam=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,createIsNativeContext=(s,e)=>n=>s(n)||e(n),createIsNativeOfflineAudioContext=s=>e=>s!==null&&e instanceof s,createIsSecureContext=s=>s!==null&&s.isSecureContext,createIsSupportedPromise=async(s,e,n,c,h,u,d,m,g,b,O,v,y,w,S,A)=>s(e,e)&&s(n,n)&&s(h,h)&&s(u,u)&&s(m,m)&&s(g,g)&&s(b,b)&&s(O,O)&&s(v,v)&&s(y,y)&&s(w,w)?(await Promise.all([s(c,c),s(d,d),s(S,S),s(A,A)])).every(P=>P):!1,createMediaElementAudioSourceNodeConstructor=(s,e,n,c)=>class extends s{constructor(u,d){const m=n(u),g=e(m,d);if(c(m))throw TypeError();super(u,!0,g,null),this._nativeMediaElementAudioSourceNode=g}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(s,e,n,c)=>class extends s{constructor(u,d){const m=n(u);if(c(m))throw new TypeError;const g={...DEFAULT_OPTIONS$6,...d},b=e(m,g);super(u,!1,b,null),this._nativeMediaStreamAudioDestinationNode=b}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(s,e,n,c)=>class extends s{constructor(u,d){const m=n(u),g=e(m,d);if(c(m))throw new TypeError;super(u,!0,g,null),this._nativeMediaStreamAudioSourceNode=g}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(s,e,n)=>class extends s{constructor(h,u){const d=n(h),m=e(d,u);super(h,!0,m,null)}},createMinimalBaseAudioContextConstructor=(s,e,n,c,h,u)=>class extends n{constructor(m,g){super(m),this._nativeContext=m,CONTEXT_STORE.set(this,m),c(m)&&h.set(m,new Set),this._destination=new s(this,g),this._listener=e(this,m),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(m){const g=typeof m=="function"?u(this,m):null;this._nativeContext.onstatechange=g;const b=this._nativeContext.onstatechange;this._onstatechange=b!==null&&b===g?m:b}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=s.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(s,e)=>(n,c,h)=>{const u=new Set;return n.connect=(d=>(m,g=0,b=0)=>{const O=u.size===0;if(e(m))return d.call(n,m,g,b),s(u,[m,g,b],v=>v[0]===m&&v[1]===g&&v[2]===b,!0),O&&c(),m;d.call(n,m,g),s(u,[m,g],v=>v[0]===m&&v[1]===g,!0),O&&c()})(n.connect),n.disconnect=(d=>(m,g,b)=>{const O=u.size>0;if(m===void 0)d.apply(n),u.clear();else if(typeof m=="number"){d.call(n,m);for(const y of u)y[1]===m&&u.delete(y)}else{e(m)?d.call(n,m,g,b):d.call(n,m,g);for(const y of u)y[0]===m&&(g===void 0||y[1]===g)&&(b===void 0||y[2]===b)&&u.delete(y)}const v=u.size===0;O&&v&&h()})(n.disconnect),n},assignNativeAudioNodeOption=(s,e,n)=>{const c=e[n];c!==void 0&&c!==s[n]&&(s[n]=c)},assignNativeAudioNodeOptions=(s,e)=>{assignNativeAudioNodeOption(s,e,"channelCount"),assignNativeAudioNodeOption(s,e,"channelCountMode"),assignNativeAudioNodeOption(s,e,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=s=>typeof s.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=s=>{s.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);s.getByteTimeDomainData(n);const c=Math.max(n.length,s.fftSize);for(let h=0;h<c;h+=1)e[h]=(n[h]-128)*.0078125;return e}},createNativeAnalyserNodeFactory=(s,e)=>(n,c)=>{const h=n.createAnalyser();if(assignNativeAudioNodeOptions(h,c),!(c.maxDecibels>c.minDecibels))throw e();return assignNativeAudioNodeOption(h,c,"fftSize"),assignNativeAudioNodeOption(h,c,"maxDecibels"),assignNativeAudioNodeOption(h,c,"minDecibels"),assignNativeAudioNodeOption(h,c,"smoothingTimeConstant"),s(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(h))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(h),h},createNativeAudioBufferConstructor=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(s,e,n)=>{const c=e[n];c!==void 0&&c!==s[n].value&&(s[n].value=c)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=s=>{s.start=(e=>{let n=!1;return(c=0,h=0,u)=>{if(n)throw createInvalidStateError();e.call(s,c,h,u),n=!0}})(s.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=s=>{s.start=(e=>(n=0,c=0,h)=>{if(typeof h=="number"&&h<0||c<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(s,n,c,h)})(s.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=s=>{s.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(s,n)})(s.stop)},createNativeAudioBufferSourceNodeFactory=(s,e,n,c,h,u,d,m,g,b,O)=>(v,y)=>{const w=v.createBufferSource();return assignNativeAudioNodeOptions(w,y),assignNativeAudioNodeAudioParamValue(w,y,"playbackRate"),assignNativeAudioNodeOption(w,y,"buffer"),assignNativeAudioNodeOption(w,y,"loop"),assignNativeAudioNodeOption(w,y,"loopEnd"),assignNativeAudioNodeOption(w,y,"loopStart"),e(n,()=>n(v))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(w),e(c,()=>c(v))||g(w),e(h,()=>h(v))||b(w,v),e(u,()=>u(v))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(w),e(d,()=>d(v))||O(w,v),e(m,()=>m(v))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(w),s(v,w),w},createNativeAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(s,e)=>(n,c,h)=>{const u=n.destination;if(u.channelCount!==c)try{u.channelCount=c}catch{}h&&u.channelCountMode!=="explicit"&&(u.channelCountMode="explicit"),u.maxChannelCount===0&&Object.defineProperty(u,"maxChannelCount",{value:c});const d=s(n,{channelCount:c,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:1});return e(d,"channelCount",m=>()=>m.call(d),m=>g=>{m.call(d,g);try{u.channelCount=g}catch(b){if(g>u.maxChannelCount)throw b}}),e(d,"channelCountMode",m=>()=>m.call(d),m=>g=>{m.call(d,g),u.channelCountMode=g}),e(d,"channelInterpretation",m=>()=>m.call(d),m=>g=>{m.call(d,g),u.channelInterpretation=g}),Object.defineProperty(d,"maxChannelCount",{get:()=>u.maxChannelCount}),d.connect(u),d},createNativeAudioWorkletNodeConstructor=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},createNativeAudioWorkletNodeFactory=(s,e,n,c,h)=>(u,d,m,g,b,O)=>{if(m!==null)try{const v=new m(u,g,O),y=new Map;let w=null;if(Object.defineProperties(v,{channelCount:{get:()=>O.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>w,set:S=>{typeof w=="function"&&v.removeEventListener("processorerror",w),w=typeof S=="function"?S:null,typeof w=="function"&&v.addEventListener("processorerror",w)}}}),v.addEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const E=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(E!==null){const P=y.get(A[1]);P!==void 0?A[1]=P:(A[1]=I=>{I.type==="error"?(Object.defineProperties(I,{type:{value:"processorerror"}}),E(I)):E(new ErrorEvent(A[0],{...I}))},y.set(E,A[1]))}}return S.call(v,"error",A[1],A[2]),S.call(v,...A)})(v.addEventListener),v.removeEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const E=y.get(A[1]);E!==void 0&&(y.delete(A[1]),A[1]=E)}return S.call(v,"error",A[1],A[2]),S.call(v,A[0],A[1],A[2])})(v.removeEventListener),O.numberOfOutputs!==0){const S=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(S).connect(u.destination),h(v,()=>S.disconnect(),()=>S.connect(u.destination))}return v}catch(v){throw v.code===11?c():v}if(b===void 0)throw c();return testClonabilityOfAudioWorkletNodeOptions(O),e(u,d,b,O)},computeBufferSize=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),cloneAudioWorkletNodeOptions=s=>new Promise((e,n)=>{const{port1:c,port2:h}=new MessageChannel;c.onmessage=({data:u})=>{c.close(),h.close(),e(u)},c.onmessageerror=({data:u})=>{c.close(),h.close(),n(u)},h.postMessage(s)}),createAudioWorkletProcessorPromise=async(s,e)=>{const n=await cloneAudioWorkletNodeOptions(e);return new s(n)},createAudioWorkletProcessor=(s,e,n,c)=>{let h=NODE_TO_PROCESSOR_MAPS.get(s);h===void 0&&(h=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(s,h));const u=createAudioWorkletProcessorPromise(n,c);return h.set(e,u),u},createNativeAudioWorkletNodeFakerFactory=(s,e,n,c,h,u,d,m,g,b,O,v,y)=>(w,S,A,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw g();const P=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(P.some(Ce=>Ce<1))throw g();if(P.length!==E.numberOfOutputs)throw e();if(E.channelCountMode!=="explicit")throw g();const I=E.channelCount*E.numberOfInputs,U=P.reduce((Ce,Qe)=>Ce+Qe,0),z=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(I+z>6||U>6)throw g();const N=new MessageChannel,R=[],F=[];for(let Ce=0;Ce<E.numberOfInputs;Ce+=1)R.push(d(w,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),F.push(h(w,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const D=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:Ce,maxValue:Qe,minValue:tt,name:Ke}of A.parameterDescriptors){const Ge=u(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[Ke]!==void 0?E.parameterData[Ke]:Ce===void 0?0:Ce});Object.defineProperties(Ge.offset,{defaultValue:{get:()=>Ce===void 0?0:Ce},maxValue:{get:()=>Qe===void 0?MOST_POSITIVE_SINGLE_FLOAT:Qe},minValue:{get:()=>tt===void 0?MOST_NEGATIVE_SINGLE_FLOAT:tt}}),D.push(Ge)}const de=c(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+z)}),H=computeBufferSize(S,w.sampleRate),he=m(w,H,I+z,Math.max(1,U)),ae=h(w,{channelCount:Math.max(1,U),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,U)}),Oe=[];for(let Ce=0;Ce<E.numberOfOutputs;Ce+=1)Oe.push(c(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:P[Ce]}));for(let Ce=0;Ce<E.numberOfInputs;Ce+=1){R[Ce].connect(F[Ce]);for(let Qe=0;Qe<E.channelCount;Qe+=1)F[Ce].connect(de,Qe,Ce*E.channelCount+Qe)}const ye=new ReadOnlyMap(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:Ce},Qe)=>{const tt=D[Qe];return tt.connect(de,0,I+Qe),tt.start(0),[Ce,tt.offset]}));de.connect(he);let ke=E.channelInterpretation,pe=null;const B=E.numberOfOutputs===0?[he]:Oe,K={get bufferSize(){return H},get channelCount(){return E.channelCount},set channelCount(Ce){throw n()},get channelCountMode(){return E.channelCountMode},set channelCountMode(Ce){throw n()},get channelInterpretation(){return ke},set channelInterpretation(Ce){for(const Qe of R)Qe.channelInterpretation=Ce;ke=Ce},get context(){return he.context},get inputs(){return R},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return pe},set onprocessorerror(Ce){typeof pe=="function"&&K.removeEventListener("processorerror",pe),pe=typeof Ce=="function"?Ce:null,typeof pe=="function"&&K.addEventListener("processorerror",pe)},get parameters(){return ye},get port(){return N.port2},addEventListener(...Ce){return he.addEventListener(Ce[0],Ce[1],Ce[2])},connect:s.bind(null,B),disconnect:b.bind(null,B),dispatchEvent(...Ce){return he.dispatchEvent(Ce[0])},removeEventListener(...Ce){return he.removeEventListener(Ce[0],Ce[1],Ce[2])}},te=new Map;N.port1.addEventListener=(Ce=>(...Qe)=>{if(Qe[0]==="message"){const tt=typeof Qe[1]=="function"?Qe[1]:typeof Qe[1]=="object"&&Qe[1]!==null&&typeof Qe[1].handleEvent=="function"?Qe[1].handleEvent:null;if(tt!==null){const Ke=te.get(Qe[1]);Ke!==void 0?Qe[1]=Ke:(Qe[1]=Ge=>{O(w.currentTime,w.sampleRate,()=>tt(Ge))},te.set(tt,Qe[1]))}}return Ce.call(N.port1,Qe[0],Qe[1],Qe[2])})(N.port1.addEventListener),N.port1.removeEventListener=(Ce=>(...Qe)=>{if(Qe[0]==="message"){const tt=te.get(Qe[1]);tt!==void 0&&(te.delete(Qe[1]),Qe[1]=tt)}return Ce.call(N.port1,Qe[0],Qe[1],Qe[2])})(N.port1.removeEventListener);let Se=null;Object.defineProperty(N.port1,"onmessage",{get:()=>Se,set:Ce=>{typeof Se=="function"&&N.port1.removeEventListener("message",Se),Se=typeof Ce=="function"?Ce:null,typeof Se=="function"&&(N.port1.addEventListener("message",Se),N.port1.start())}}),A.prototype.port=N.port1;let Te=null;createAudioWorkletProcessor(w,K,A,E).then(Ce=>Te=Ce);const Re=createNestedArrays(E.numberOfInputs,E.channelCount),Ie=createNestedArrays(E.numberOfOutputs,P),Me=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((Ce,{name:Qe})=>({...Ce,[Qe]:new Float32Array(128)}),{});let Be=!0;const Ue=()=>{E.numberOfOutputs>0&&he.disconnect(ae);for(let Ce=0,Qe=0;Ce<E.numberOfOutputs;Ce+=1){const tt=Oe[Ce];for(let Ke=0;Ke<P[Ce];Ke+=1)ae.disconnect(tt,Qe+Ke,Ke);Qe+=P[Ce]}},Pe=new Map;he.onaudioprocess=({inputBuffer:Ce,outputBuffer:Qe})=>{if(Te!==null){const tt=v(K);for(let Ke=0;Ke<H;Ke+=128){for(let Ge=0;Ge<E.numberOfInputs;Ge+=1)for(let et=0;et<E.channelCount;et+=1)copyFromChannel(Ce,Re[Ge],et,et,Ke);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:Ge},et)=>{copyFromChannel(Ce,Me,Ge,I+et,Ke)});for(let Ge=0;Ge<E.numberOfInputs;Ge+=1)for(let et=0;et<P[Ge];et+=1)Ie[Ge][et].byteLength===0&&(Ie[Ge][et]=new Float32Array(128));try{const Ge=Re.map((lt,ft)=>{if(tt[ft].size>0)return Pe.set(ft,H/128),lt;const Ct=Pe.get(ft);return Ct===void 0?[]:(lt.every(qt=>qt.every(Wt=>Wt===0))&&(Ct===1?Pe.delete(ft):Pe.set(ft,Ct-1)),lt)});Be=O(w.currentTime+Ke/w.sampleRate,w.sampleRate,()=>Te.process(Ge,Ie,Me));for(let lt=0,ft=0;lt<E.numberOfOutputs;lt+=1){for(let vt=0;vt<P[lt];vt+=1)copyToChannel(Qe,Ie[lt],vt,ft+vt,Ke);ft+=P[lt]}}catch(Ge){Be=!1,K.dispatchEvent(new ErrorEvent("processorerror",{colno:Ge.colno,filename:Ge.filename,lineno:Ge.lineno,message:Ge.message}))}if(!Be){for(let Ge=0;Ge<E.numberOfInputs;Ge+=1){R[Ge].disconnect(F[Ge]);for(let et=0;et<E.channelCount;et+=1)F[Ke].disconnect(de,et,Ge*E.channelCount+et)}if(A.parameterDescriptors!==void 0){const Ge=A.parameterDescriptors.length;for(let et=0;et<Ge;et+=1){const lt=D[et];lt.disconnect(de,0,I+et),lt.stop()}}de.disconnect(he),he.onaudioprocess=null,it?Ue():Ot();break}}}};let it=!1;const ut=d(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),_t=()=>he.connect(ut).connect(w.destination),Ot=()=>{he.disconnect(ut),ut.disconnect()},en=()=>{if(Be){Ot(),E.numberOfOutputs>0&&he.connect(ae);for(let Ce=0,Qe=0;Ce<E.numberOfOutputs;Ce+=1){const tt=Oe[Ce];for(let Ke=0;Ke<P[Ce];Ke+=1)ae.connect(tt,Qe+Ke,Ke);Qe+=P[Ce]}}it=!0},Lt=()=>{Be&&(_t(),Ue()),it=!1};return _t(),y(K,en,Lt)},createNativeBiquadFilterNode=(s,e)=>{const n=s.createBiquadFilter();return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"Q"),assignNativeAudioNodeAudioParamValue(n,e,"detune"),assignNativeAudioNodeAudioParamValue(n,e,"frequency"),assignNativeAudioNodeAudioParamValue(n,e,"gain"),assignNativeAudioNodeOption(n,e,"type"),n},createNativeChannelMergerNodeFactory=(s,e)=>(n,c)=>{const h=n.createChannelMerger(c.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(n,h),assignNativeAudioNodeOptions(h,c),h},wrapChannelSplitterNode=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw createInvalidStateError()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(s,e)=>{const n=s.createChannelSplitter(e.numberOfOutputs);return assignNativeAudioNodeOptions(n,e),wrapChannelSplitterNode(n),n},createNativeConstantSourceNodeFactory=(s,e,n,c,h)=>(u,d)=>{if(u.createConstantSource===void 0)return n(u,d);const m=u.createConstantSource();return assignNativeAudioNodeOptions(m,d),assignNativeAudioNodeAudioParamValue(m,d,"offset"),e(c,()=>c(u))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(m),e(h,()=>h(u))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(m),s(u,m),m},interceptConnections=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),createNativeConstantSourceNodeFakerFactory=(s,e,n,c)=>(h,{offset:u,...d})=>{const m=h.createBuffer(1,2,44100),g=e(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),b=n(h,{...d,gain:u}),O=m.getChannelData(0);O[0]=1,O[1]=1,g.buffer=m,g.loop=!0;const v={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(S){b.channelCount=S},get channelCountMode(){return b.channelCountMode},set channelCountMode(S){b.channelCountMode=S},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(S){b.channelInterpretation=S},get context(){return b.context},get inputs(){return[]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get offset(){return b.gain},get onended(){return g.onended},set onended(S){g.onended=S},addEventListener(...S){return g.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return g.dispatchEvent(S[0])},removeEventListener(...S){return g.removeEventListener(S[0],S[1],S[2])},start(S=0){g.start.call(g,S)},stop(S=0){g.stop.call(g,S)}},y=()=>g.connect(b),w=()=>g.disconnect(b);return s(h,g),c(interceptConnections(v,b),y,w)},createNativeConvolverNodeFactory=(s,e)=>(n,c)=>{const h=n.createConvolver();if(assignNativeAudioNodeOptions(h,c),c.disableNormalization===h.normalize&&(h.normalize=!c.disableNormalization),assignNativeAudioNodeOption(h,c,"buffer"),c.channelCount>2||(e(h,"channelCount",u=>()=>u.call(h),u=>d=>{if(d>2)throw s();return u.call(h,d)}),c.channelCountMode==="max"))throw s();return e(h,"channelCountMode",u=>()=>u.call(h),u=>d=>{if(d==="max")throw s();return u.call(h,d)}),h},createNativeDelayNode=(s,e)=>{const n=s.createDelay(e.maxDelayTime);return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"delayTime"),n},createNativeDynamicsCompressorNodeFactory=s=>(e,n)=>{const c=e.createDynamicsCompressor();if(assignNativeAudioNodeOptions(c,n),n.channelCount>2||n.channelCountMode==="max")throw s();return assignNativeAudioNodeAudioParamValue(c,n,"attack"),assignNativeAudioNodeAudioParamValue(c,n,"knee"),assignNativeAudioNodeAudioParamValue(c,n,"ratio"),assignNativeAudioNodeAudioParamValue(c,n,"release"),assignNativeAudioNodeAudioParamValue(c,n,"threshold"),c},createNativeGainNode=(s,e)=>{const n=s.createGain();return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"gain"),n},createNativeIIRFilterNodeFactory=s=>(e,n,c)=>{if(e.createIIRFilter===void 0)return s(e,n,c);const h=e.createIIRFilter(c.feedforward,c.feedback);return assignNativeAudioNodeOptions(h,c),h};function divide(s,e){const n=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/n,(s[1]*e[0]-s[0]*e[1])/n]}function multiply(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function evaluatePolynomial(s,e){let n=[0,0];for(let c=s.length-1;c>=0;c-=1)n=multiply(n,e),n[0]+=s[c];return n}const createNativeIIRFilterNodeFakerFactory=(s,e,n,c)=>(h,u,{channelCount:d,channelCountMode:m,channelInterpretation:g,feedback:b,feedforward:O})=>{const v=computeBufferSize(u,h.sampleRate),y=b instanceof Float64Array?b:new Float64Array(b),w=O instanceof Float64Array?O:new Float64Array(O),S=y.length,A=w.length,E=Math.min(S,A);if(S===0||S>20)throw c();if(y[0]===0)throw e();if(A===0||A>20)throw c();if(w[0]===0)throw e();if(y[0]!==1){for(let D=0;D<A;D+=1)w[D]/=y[0];for(let D=1;D<S;D+=1)y[D]/=y[0]}const P=n(h,v,d,d);P.channelCount=d,P.channelCountMode=m,P.channelInterpretation=g;const I=32,U=[],z=[],N=[];for(let D=0;D<d;D+=1){U.push(0);const de=new Float32Array(I),H=new Float32Array(I);de.fill(0),H.fill(0),z.push(de),N.push(H)}P.onaudioprocess=D=>{const de=D.inputBuffer,H=D.outputBuffer,he=de.numberOfChannels;for(let ae=0;ae<he;ae+=1){const Oe=de.getChannelData(ae),ye=H.getChannelData(ae);U[ae]=filterBuffer(y,S,w,A,E,z[ae],N[ae],U[ae],I,Oe,ye)}};const R=h.sampleRate/2;return interceptConnections({get bufferSize(){return v},get channelCount(){return P.channelCount},set channelCount(D){P.channelCount=D},get channelCountMode(){return P.channelCountMode},set channelCountMode(D){P.channelCountMode=D},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(D){P.channelInterpretation=D},get context(){return P.context},get inputs(){return[P]},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},addEventListener(...D){return P.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return P.dispatchEvent(D[0])},getFrequencyResponse(D,de,H){if(D.length!==de.length||de.length!==H.length)throw s();const he=D.length;for(let ae=0;ae<he;ae+=1){const Oe=-Math.PI*(D[ae]/R),ye=[Math.cos(Oe),Math.sin(Oe)],ke=evaluatePolynomial(w,ye),pe=evaluatePolynomial(y,ye),B=divide(ke,pe);de[ae]=Math.sqrt(B[0]*B[0]+B[1]*B[1]),H[ae]=Math.atan2(B[1],B[0])}},removeEventListener(...D){return P.removeEventListener(D[0],D[1],D[2])}},P)},createNativeMediaElementAudioSourceNode=(s,e)=>s.createMediaElementSource(e.mediaElement),createNativeMediaStreamAudioDestinationNode=(s,e)=>{const n=s.createMediaStreamDestination();return assignNativeAudioNodeOptions(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},createNativeMediaStreamAudioSourceNode=(s,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((u,d)=>u.id<d.id?-1:u.id>d.id?1:0);const c=n.slice(0,1),h=s.createMediaStreamSource(new MediaStream(c));return Object.defineProperty(h,"mediaStream",{value:e}),h},createNativeMediaStreamTrackAudioSourceNodeFactory=(s,e)=>(n,{mediaStreamTrack:c})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(c);const h=new MediaStream([c]),u=n.createMediaStreamSource(h);if(c.kind!=="audio")throw s();if(e(n))throw new TypeError;return u},createNativeOfflineAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(s,e,n,c,h,u)=>(d,m)=>{const g=d.createOscillator();return assignNativeAudioNodeOptions(g,m),assignNativeAudioNodeAudioParamValue(g,m,"detune"),assignNativeAudioNodeAudioParamValue(g,m,"frequency"),m.periodicWave!==void 0?g.setPeriodicWave(m.periodicWave):assignNativeAudioNodeOption(g,m,"type"),e(n,()=>n(d))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(g),e(c,()=>c(d))||u(g,d),e(h,()=>h(d))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(g),s(d,g),g},createNativePannerNodeFactory=s=>(e,n)=>{const c=e.createPanner();return c.orientationX===void 0?s(e,n):(assignNativeAudioNodeOptions(c,n),assignNativeAudioNodeAudioParamValue(c,n,"orientationX"),assignNativeAudioNodeAudioParamValue(c,n,"orientationY"),assignNativeAudioNodeAudioParamValue(c,n,"orientationZ"),assignNativeAudioNodeAudioParamValue(c,n,"positionX"),assignNativeAudioNodeAudioParamValue(c,n,"positionY"),assignNativeAudioNodeAudioParamValue(c,n,"positionZ"),assignNativeAudioNodeOption(c,n,"coneInnerAngle"),assignNativeAudioNodeOption(c,n,"coneOuterAngle"),assignNativeAudioNodeOption(c,n,"coneOuterGain"),assignNativeAudioNodeOption(c,n,"distanceModel"),assignNativeAudioNodeOption(c,n,"maxDistance"),assignNativeAudioNodeOption(c,n,"panningModel"),assignNativeAudioNodeOption(c,n,"refDistance"),assignNativeAudioNodeOption(c,n,"rolloffFactor"),c)},createNativePannerNodeFakerFactory=(s,e,n,c,h,u,d,m,g,b)=>(O,{coneInnerAngle:v,coneOuterAngle:y,coneOuterGain:w,distanceModel:S,maxDistance:A,orientationX:E,orientationY:P,orientationZ:I,panningModel:U,positionX:z,positionY:N,positionZ:R,refDistance:F,rolloffFactor:D,...de})=>{const H=O.createPanner();if(de.channelCount>2||de.channelCountMode==="max")throw d();assignNativeAudioNodeOptions(H,de);const he={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},ae=n(O,{...he,channelInterpretation:"speakers",numberOfInputs:6}),Oe=c(O,{...de,gain:1}),ye=c(O,{...he,gain:1}),ke=c(O,{...he,gain:0}),pe=c(O,{...he,gain:0}),B=c(O,{...he,gain:0}),K=c(O,{...he,gain:0}),te=c(O,{...he,gain:0}),Se=h(O,256,6,1),Te=u(O,{...he,curve:new Float32Array([1,1]),oversample:"none"});let Ne=[E,P,I],Re=[z,N,R];const Ie=new Float32Array(1);Se.onaudioprocess=({inputBuffer:Pe})=>{const it=[g(Pe,Ie,0),g(Pe,Ie,1),g(Pe,Ie,2)];it.some((_t,Ot)=>_t!==Ne[Ot])&&(H.setOrientation(...it),Ne=it);const ut=[g(Pe,Ie,3),g(Pe,Ie,4),g(Pe,Ie,5)];ut.some((_t,Ot)=>_t!==Re[Ot])&&(H.setPosition(...ut),Re=ut)},Object.defineProperty(ke.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0});const Me={get bufferSize(){},get channelCount(){return H.channelCount},set channelCount(Pe){if(Pe>2)throw d();Oe.channelCount=Pe,H.channelCount=Pe},get channelCountMode(){return H.channelCountMode},set channelCountMode(Pe){if(Pe==="max")throw d();Oe.channelCountMode=Pe,H.channelCountMode=Pe},get channelInterpretation(){return H.channelInterpretation},set channelInterpretation(Pe){Oe.channelInterpretation=Pe,H.channelInterpretation=Pe},get coneInnerAngle(){return H.coneInnerAngle},set coneInnerAngle(Pe){H.coneInnerAngle=Pe},get coneOuterAngle(){return H.coneOuterAngle},set coneOuterAngle(Pe){H.coneOuterAngle=Pe},get coneOuterGain(){return H.coneOuterGain},set coneOuterGain(Pe){if(Pe<0||Pe>1)throw e();H.coneOuterGain=Pe},get context(){return H.context},get distanceModel(){return H.distanceModel},set distanceModel(Pe){H.distanceModel=Pe},get inputs(){return[Oe]},get maxDistance(){return H.maxDistance},set maxDistance(Pe){if(Pe<0)throw new RangeError;H.maxDistance=Pe},get numberOfInputs(){return H.numberOfInputs},get numberOfOutputs(){return H.numberOfOutputs},get orientationX(){return ye.gain},get orientationY(){return ke.gain},get orientationZ(){return pe.gain},get panningModel(){return H.panningModel},set panningModel(Pe){H.panningModel=Pe},get positionX(){return B.gain},get positionY(){return K.gain},get positionZ(){return te.gain},get refDistance(){return H.refDistance},set refDistance(Pe){if(Pe<0)throw new RangeError;H.refDistance=Pe},get rolloffFactor(){return H.rolloffFactor},set rolloffFactor(Pe){if(Pe<0)throw new RangeError;H.rolloffFactor=Pe},addEventListener(...Pe){return Oe.addEventListener(Pe[0],Pe[1],Pe[2])},dispatchEvent(...Pe){return Oe.dispatchEvent(Pe[0])},removeEventListener(...Pe){return Oe.removeEventListener(Pe[0],Pe[1],Pe[2])}};v!==Me.coneInnerAngle&&(Me.coneInnerAngle=v),y!==Me.coneOuterAngle&&(Me.coneOuterAngle=y),w!==Me.coneOuterGain&&(Me.coneOuterGain=w),S!==Me.distanceModel&&(Me.distanceModel=S),A!==Me.maxDistance&&(Me.maxDistance=A),E!==Me.orientationX.value&&(Me.orientationX.value=E),P!==Me.orientationY.value&&(Me.orientationY.value=P),I!==Me.orientationZ.value&&(Me.orientationZ.value=I),U!==Me.panningModel&&(Me.panningModel=U),z!==Me.positionX.value&&(Me.positionX.value=z),N!==Me.positionY.value&&(Me.positionY.value=N),R!==Me.positionZ.value&&(Me.positionZ.value=R),F!==Me.refDistance&&(Me.refDistance=F),D!==Me.rolloffFactor&&(Me.rolloffFactor=D),(Ne[0]!==1||Ne[1]!==0||Ne[2]!==0)&&H.setOrientation(...Ne),(Re[0]!==0||Re[1]!==0||Re[2]!==0)&&H.setPosition(...Re);const Be=()=>{Oe.connect(H),s(Oe,Te,0,0),Te.connect(ye).connect(ae,0,0),Te.connect(ke).connect(ae,0,1),Te.connect(pe).connect(ae,0,2),Te.connect(B).connect(ae,0,3),Te.connect(K).connect(ae,0,4),Te.connect(te).connect(ae,0,5),ae.connect(Se).connect(O.destination)},Ue=()=>{Oe.disconnect(H),m(Oe,Te,0,0),Te.disconnect(ye),ye.disconnect(ae),Te.disconnect(ke),ke.disconnect(ae),Te.disconnect(pe),pe.disconnect(ae),Te.disconnect(B),B.disconnect(ae),Te.disconnect(K),K.disconnect(ae),Te.disconnect(te),te.disconnect(ae),ae.disconnect(Se),Se.disconnect(O.destination)};return b(interceptConnections(Me,H),Be,Ue)},createNativePeriodicWaveFactory=s=>(e,{disableNormalization:n,imag:c,real:h})=>{const u=c instanceof Float32Array?c:new Float32Array(c),d=h instanceof Float32Array?h:new Float32Array(h),m=e.createPeriodicWave(d,u,{disableNormalization:n});if(Array.from(c).length<2)throw s();return m},createNativeScriptProcessorNode=(s,e,n,c)=>s.createScriptProcessor(e,n,c),createNativeStereoPannerNodeFactory=(s,e)=>(n,c)=>{const h=c.channelCountMode;if(h==="clamped-max")throw e();if(n.createStereoPanner===void 0)return s(n,c);const u=n.createStereoPanner();return assignNativeAudioNodeOptions(u,c),assignNativeAudioNodeAudioParamValue(u,c,"pan"),Object.defineProperty(u,"channelCountMode",{get:()=>h,set:d=>{if(d!==h)throw e()}}),u},createNativeStereoPannerNodeFakerFactory=(s,e,n,c,h,u)=>{const m=new Float32Array([1,1]),g=Math.PI/2,b={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O={...b,oversample:"none"},v=(S,A,E,P)=>{const I=new Float32Array(16385),U=new Float32Array(16385);for(let de=0;de<16385;de+=1){const H=de/16384*g;I[de]=Math.cos(H),U[de]=Math.sin(H)}const z=n(S,{...b,gain:0}),N=c(S,{...O,curve:I}),R=c(S,{...O,curve:m}),F=n(S,{...b,gain:0}),D=c(S,{...O,curve:U});return{connectGraph(){A.connect(z),A.connect(R.inputs===void 0?R:R.inputs[0]),A.connect(F),R.connect(E),E.connect(N.inputs===void 0?N:N.inputs[0]),E.connect(D.inputs===void 0?D:D.inputs[0]),N.connect(z.gain),D.connect(F.gain),z.connect(P,0,0),F.connect(P,0,1)},disconnectGraph(){A.disconnect(z),A.disconnect(R.inputs===void 0?R:R.inputs[0]),A.disconnect(F),R.disconnect(E),E.disconnect(N.inputs===void 0?N:N.inputs[0]),E.disconnect(D.inputs===void 0?D:D.inputs[0]),N.disconnect(z.gain),D.disconnect(F.gain),z.disconnect(P,0,0),F.disconnect(P,0,1)}}},y=(S,A,E,P)=>{const I=new Float32Array(16385),U=new Float32Array(16385),z=new Float32Array(16385),N=new Float32Array(16385),R=Math.floor(16385/2);for(let B=0;B<16385;B+=1)if(B>R){const K=(B-R)/(16384-R)*g;I[B]=Math.cos(K),U[B]=Math.sin(K),z[B]=0,N[B]=1}else{const K=B/(16384-R)*g;I[B]=1,U[B]=0,z[B]=Math.cos(K),N[B]=Math.sin(K)}const F=e(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),D=n(S,{...b,gain:0}),de=c(S,{...O,curve:I}),H=n(S,{...b,gain:0}),he=c(S,{...O,curve:U}),ae=c(S,{...O,curve:m}),Oe=n(S,{...b,gain:0}),ye=c(S,{...O,curve:z}),ke=n(S,{...b,gain:0}),pe=c(S,{...O,curve:N});return{connectGraph(){A.connect(F),A.connect(ae.inputs===void 0?ae:ae.inputs[0]),F.connect(D,0),F.connect(H,0),F.connect(Oe,1),F.connect(ke,1),ae.connect(E),E.connect(de.inputs===void 0?de:de.inputs[0]),E.connect(he.inputs===void 0?he:he.inputs[0]),E.connect(ye.inputs===void 0?ye:ye.inputs[0]),E.connect(pe.inputs===void 0?pe:pe.inputs[0]),de.connect(D.gain),he.connect(H.gain),ye.connect(Oe.gain),pe.connect(ke.gain),D.connect(P,0,0),Oe.connect(P,0,0),H.connect(P,0,1),ke.connect(P,0,1)},disconnectGraph(){A.disconnect(F),A.disconnect(ae.inputs===void 0?ae:ae.inputs[0]),F.disconnect(D,0),F.disconnect(H,0),F.disconnect(Oe,1),F.disconnect(ke,1),ae.disconnect(E),E.disconnect(de.inputs===void 0?de:de.inputs[0]),E.disconnect(he.inputs===void 0?he:he.inputs[0]),E.disconnect(ye.inputs===void 0?ye:ye.inputs[0]),E.disconnect(pe.inputs===void 0?pe:pe.inputs[0]),de.disconnect(D.gain),he.disconnect(H.gain),ye.disconnect(Oe.gain),pe.disconnect(ke.gain),D.disconnect(P,0,0),Oe.disconnect(P,0,0),H.disconnect(P,0,1),ke.disconnect(P,0,1)}}},w=(S,A,E,P,I)=>{if(A===1)return v(S,E,P,I);if(A===2)return y(S,E,P,I);throw h()};return(S,{channelCount:A,channelCountMode:E,pan:P,...I})=>{if(E==="max")throw h();const U=s(S,{...I,channelCount:1,channelCountMode:E,numberOfInputs:2}),z=n(S,{...I,channelCount:A,channelCountMode:E,gain:1}),N=n(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:P});let{connectGraph:R,disconnectGraph:F}=w(S,A,z,N,U);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const D={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(ae){z.channelCount!==ae&&(de&&F(),{connectGraph:R,disconnectGraph:F}=w(S,ae,z,N,U),de&&R()),z.channelCount=ae},get channelCountMode(){return z.channelCountMode},set channelCountMode(ae){if(ae==="clamped-max"||ae==="max")throw h();z.channelCountMode=ae},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(ae){z.channelInterpretation=ae},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get pan(){return N.gain},addEventListener(...ae){return z.addEventListener(ae[0],ae[1],ae[2])},dispatchEvent(...ae){return z.dispatchEvent(ae[0])},removeEventListener(...ae){return z.removeEventListener(ae[0],ae[1],ae[2])}};let de=!1;const H=()=>{R(),de=!0},he=()=>{F(),de=!1};return u(interceptConnections(D,U),H,he)}},createNativeWaveShaperNodeFactory=(s,e,n,c,h,u,d)=>(m,g)=>{const b=m.createWaveShaper();if(u!==null&&u.name==="webkitAudioContext"&&m.createGain().gain.automationRate===void 0)return n(m,g);assignNativeAudioNodeOptions(b,g);const O=g.curve===null||g.curve instanceof Float32Array?g.curve:new Float32Array(g.curve);if(O!==null&&O.length<2)throw e();assignNativeAudioNodeOption(b,{curve:O},"curve"),assignNativeAudioNodeOption(b,g,"oversample");let v=null,y=!1;return d(b,"curve",A=>()=>A.call(b),A=>E=>(A.call(b,E),y&&(c(E)&&v===null?v=s(m,b):!c(E)&&v!==null&&(v(),v=null)),E)),h(b,()=>{y=!0,c(b.curve)&&(v=s(m,b))},()=>{y=!1,v!==null&&(v(),v=null)})},createNativeWaveShaperNodeFakerFactory=(s,e,n,c,h)=>(u,{curve:d,oversample:m,...g})=>{const b=u.createWaveShaper(),O=u.createWaveShaper();assignNativeAudioNodeOptions(b,g),assignNativeAudioNodeOptions(O,g);const v=n(u,{...g,gain:1}),y=n(u,{...g,gain:-1}),w=n(u,{...g,gain:1}),S=n(u,{...g,gain:-1});let A=null,E=!1,P=null;const I={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(N){v.channelCount=N,y.channelCount=N,b.channelCount=N,w.channelCount=N,O.channelCount=N,S.channelCount=N},get channelCountMode(){return b.channelCountMode},set channelCountMode(N){v.channelCountMode=N,y.channelCountMode=N,b.channelCountMode=N,w.channelCountMode=N,O.channelCountMode=N,S.channelCountMode=N},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(N){v.channelInterpretation=N,y.channelInterpretation=N,b.channelInterpretation=N,w.channelInterpretation=N,O.channelInterpretation=N,S.channelInterpretation=N},get context(){return b.context},get curve(){return P},set curve(N){if(N!==null&&N.length<2)throw e();if(N===null)b.curve=N,O.curve=N;else{const R=N.length,F=new Float32Array(R+2-R%2),D=new Float32Array(R+2-R%2);F[0]=N[0],D[0]=-N[R-1];const de=Math.ceil((R+1)/2),H=(R+1)/2-1;for(let he=1;he<de;he+=1){const ae=he/de*H,Oe=Math.floor(ae),ye=Math.ceil(ae);F[he]=Oe===ye?N[Oe]:(1-(ae-Oe))*N[Oe]+(1-(ye-ae))*N[ye],D[he]=Oe===ye?-N[R-1-Oe]:-((1-(ae-Oe))*N[R-1-Oe])-(1-(ye-ae))*N[R-1-ye]}F[de]=R%2===1?N[de-1]:(N[de-2]+N[de-1])/2,b.curve=F,O.curve=D}P=N,E&&(c(P)&&A===null?A=s(u,v):A!==null&&(A(),A=null))},get inputs(){return[v]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get oversample(){return b.oversample},set oversample(N){b.oversample=N,O.oversample=N},addEventListener(...N){return v.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return v.dispatchEvent(N[0])},removeEventListener(...N){return v.removeEventListener(N[0],N[1],N[2])}};d!==null&&(I.curve=d instanceof Float32Array?d:new Float32Array(d)),m!==I.oversample&&(I.oversample=m);const U=()=>{v.connect(b).connect(w),v.connect(y).connect(O).connect(S).connect(w),E=!0,c(P)&&(A=s(u,v))},z=()=>{v.disconnect(b),b.disconnect(w),v.disconnect(y),y.disconnect(O),O.disconnect(S),S.disconnect(w),E=!1,A!==null&&(A(),A=null)};return h(interceptConnections(I,w),U,z)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(s,e,n,c,h)=>class extends s{constructor(d,m,g){let b;if(typeof d=="number"&&m!==void 0&&g!==void 0)b={length:m,numberOfChannels:d,sampleRate:g};else if(typeof d=="object")b=d;else throw new Error("The given parameters are not valid.");const{length:O,numberOfChannels:v,sampleRate:y}={...DEFAULT_OPTIONS$5,...b},w=c(v,O,y);e(testPromiseSupport,()=>testPromiseSupport(w))||w.addEventListener("statechange",(()=>{let S=0;const A=E=>{this._state==="running"&&(S>0?(w.removeEventListener("statechange",A),E.stopImmediatePropagation(),this._waitForThePromiseToSettle(E)):S+=1)};return A})()),super(w,v),this._length=O,this._nativeOfflineAudioContext=w,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",h(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=>this._waitForThePromiseToSettle(d))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(s,e,n,c,h,u,d)=>class extends s{constructor(g,b){const O=h(g),v={...DEFAULT_OPTIONS$4,...b},y=n(O,v),w=u(O),S=w?c():null,A=g.sampleRate/2;super(g,!1,y,S),this._detune=e(this,w,y.detune,153600,-153600),this._frequency=e(this,w,y.frequency,A,-A),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(g){const b=typeof g=="function"?d(this,g):null;this._nativeOscillatorNode.onended=b;const O=this._nativeOscillatorNode.onended;this._onended=O!==null&&O===b?g:O}get type(){return this._nativeOscillatorNode.type}set type(g){this._nativeOscillatorNode.type=g,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(g){this._nativeOscillatorNode.setPeriodicWave(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=g)}start(g=0){if(this._nativeOscillatorNode.start(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=g),this.context.state!=="closed"){setInternalStateToActive(this);const b=()=>{this._nativeOscillatorNode.removeEventListener("ended",b),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",b)}}stop(g=0){this._nativeOscillatorNode.stop(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=g)}},createOscillatorNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap;let d=null,m=null,g=null;const b=async(O,v)=>{let y=n(O);const w=isOwnedByContext(y,v);if(!w){const S={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:d===null?void 0:d,type:y.type};y=e(v,S),m!==null&&y.start(m),g!==null&&y.stop(g)}return u.set(v,y),w?(await s(v,O.detune,y.detune),await s(v,O.frequency,y.frequency)):(await c(v,O.detune,y.detune),await c(v,O.frequency,y.frequency)),await h(O,v,y),y};return{set periodicWave(O){d=O},set start(O){m=O},set stop(O){g=O},render(O,v){const y=u.get(v);return y!==void 0?Promise.resolve(y):b(O,v)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(s,e,n,c,h,u,d)=>class extends s{constructor(g,b){const O=h(g),v={...DEFAULT_OPTIONS$3,...b},y=n(O,v),w=u(O),S=w?c():null;super(g,!1,y,S),this._nativePannerNode=y,this._orientationX=e(this,w,y.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=e(this,w,y.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=e(this,w,y.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=e(this,w,y.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=e(this,w,y.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=e(this,w,y.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),d(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(g){this._nativePannerNode.coneInnerAngle=g}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(g){this._nativePannerNode.coneOuterAngle=g}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(g){this._nativePannerNode.coneOuterGain=g}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(g){this._nativePannerNode.distanceModel=g}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(g){this._nativePannerNode.maxDistance=g}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(g){this._nativePannerNode.panningModel=g}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(g){this._nativePannerNode.refDistance=g}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(g){this._nativePannerNode.rolloffFactor=g}},createPannerNodeRendererFactory=(s,e,n,c,h,u,d,m,g,b)=>()=>{const O=new WeakMap;let v=null;const y=async(w,S)=>{let A=null,E=u(w);const P={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation},I={...P,coneInnerAngle:E.coneInnerAngle,coneOuterAngle:E.coneOuterAngle,coneOuterGain:E.coneOuterGain,distanceModel:E.distanceModel,maxDistance:E.maxDistance,panningModel:E.panningModel,refDistance:E.refDistance,rolloffFactor:E.rolloffFactor},U=isOwnedByContext(E,S);if("bufferSize"in E)A=c(S,{...P,gain:1});else if(!U){const z={...I,orientationX:E.orientationX.value,orientationY:E.orientationY.value,orientationZ:E.orientationZ.value,positionX:E.positionX.value,positionY:E.positionY.value,positionZ:E.positionZ.value};E=h(S,z)}if(O.set(S,A===null?E:A),A!==null){if(v===null){if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const he=new d(6,w.context.length,S.sampleRate),ae=e(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});ae.connect(he.destination),v=(async()=>{const Oe=await Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(async(ye,ke)=>{const pe=n(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ke===0?1:0});return await m(he,ye,pe.offset),pe}));for(let ye=0;ye<6;ye+=1)Oe[ye].connect(ae,0,ye),Oe[ye].start(0);return b(he)})()}const z=await v,N=c(S,{...P,gain:1});await g(w,S,N);const R=[];for(let he=0;he<z.numberOfChannels;he+=1)R.push(z.getChannelData(he));let F=[R[0][0],R[1][0],R[2][0]],D=[R[3][0],R[4][0],R[5][0]],de=c(S,{...P,gain:1}),H=h(S,{...I,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:D[0],positionY:D[1],positionZ:D[2]});N.connect(de).connect(H.inputs[0]),H.connect(A);for(let he=128;he<z.length;he+=128){const ae=[R[0][he],R[1][he],R[2][he]],Oe=[R[3][he],R[4][he],R[5][he]];if(ae.some((ye,ke)=>ye!==F[ke])||Oe.some((ye,ke)=>ye!==D[ke])){F=ae,D=Oe;const ye=he/S.sampleRate;de.gain.setValueAtTime(0,ye),de=c(S,{...P,gain:0}),H=h(S,{...I,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:D[0],positionY:D[1],positionZ:D[2]}),de.gain.setValueAtTime(1,ye),N.connect(de).connect(H.inputs[0]),H.connect(A)}}return A}return U?(await s(S,w.orientationX,E.orientationX),await s(S,w.orientationY,E.orientationY),await s(S,w.orientationZ,E.orientationZ),await s(S,w.positionX,E.positionX),await s(S,w.positionY,E.positionY),await s(S,w.positionZ,E.positionZ)):(await m(S,w.orientationX,E.orientationX),await m(S,w.orientationY,E.orientationY),await m(S,w.orientationZ,E.orientationZ),await m(S,w.positionX,E.positionX),await m(S,w.positionY,E.positionY),await m(S,w.positionZ,E.positionZ)),isNativeAudioNodeFaker(E)?await g(w,S,E.inputs[0]):await g(w,S,E),E};return{render(w,S){const A=O.get(S);return A!==void 0?Promise.resolve(A):y(w,S)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(s,e,n,c)=>class Yi{constructor(u,d){const m=e(u),g=c({...DEFAULT_OPTIONS$2,...d}),b=s(m,g);return n.add(b),b}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===Yi.prototype||n.has(u)}},createRenderAutomation=(s,e)=>(n,c,h)=>(s(c).replay(h),e(c,n,h)),createRenderInputsOfAudioNode=(s,e,n)=>async(c,h,u)=>{const d=s(c);await Promise.all(d.activeInputs.map((m,g)=>Array.from(m).map(async([b,O])=>{const y=await e(b).render(b,h),w=c.context.destination;!n(b)&&(c!==w||!n(c))&&y.connect(u,O,g)})).reduce((m,g)=>[...m,...g],[]))},createRenderInputsOfAudioParam=(s,e,n)=>async(c,h,u)=>{const d=e(c);await Promise.all(Array.from(d.activeInputs).map(async([m,g])=>{const O=await s(m).render(m,h);n(m)||O.connect(u,g)}))},createRenderNativeOfflineAudioContext=(s,e,n,c)=>h=>s(testPromiseSupport,()=>testPromiseSupport(h))?Promise.resolve(s(c,c)).then(u=>{if(!u){const d=n(h,512,0,1);h.oncomplete=()=>{d.onaudioprocess=null,d.disconnect()},d.onaudioprocess=()=>h.currentTime,d.connect(h.destination)}return h.startRendering()}):new Promise(u=>{const d=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});h.oncomplete=m=>{d.disconnect(),u(m.renderedBuffer)},d.connect(h.destination),h.startRendering()}),createSetActiveAudioWorkletNodeInputs=s=>(e,n)=>{s.set(e,n)},createSetAudioNodeTailTime=s=>(e,n)=>s.set(e,n),createStartRendering=(s,e,n,c,h,u,d,m)=>(g,b)=>n(g).render(g,b).then(()=>Promise.all(Array.from(c(b)).map(O=>n(O).render(O,b)))).then(()=>h(b)).then(O=>(typeof O.copyFromChannel!="function"?(d(O),wrapAudioBufferGetChannelDataMethod(O)):e(u,()=>u(O))||m(O),s.add(O),O)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(s,e,n,c,h,u)=>class extends s{constructor(m,g){const b=h(m),O={...DEFAULT_OPTIONS$1,...g},v=n(b,O),y=u(b),w=y?c():null;super(m,!1,v,w),this._pan=e(this,y,v.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(s,e,n,c,h)=>()=>{const u=new WeakMap,d=async(m,g)=>{let b=n(m);const O=isOwnedByContext(b,g);if(!O){const v={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,pan:b.pan.value};b=e(g,v)}return u.set(g,b),O?await s(g,m.pan,b.pan):await c(g,m.pan,b.pan),isNativeAudioNodeFaker(b)?await h(m,g,b.inputs[0]):await h(m,g,b),b};return{render(m,g){const b=u.get(g);return b!==void 0?Promise.resolve(b):d(m,g)}}},createTestAudioBufferConstructorSupport=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioBufferCopyChannelMethodsSubarraySupport=s=>()=>{if(s===null)return!1;const n=new s(1,1,44100).createBuffer(1,1,44100);if(n.copyToChannel===void 0)return!0;const c=new Float32Array(2);try{n.copyFromChannel(c,0,0)}catch{return!1}return!0},createTestAudioContextCloseMethodSupport=s=>()=>{if(s===null)return!1;if(s.prototype!==void 0&&s.prototype.close!==void 0)return!0;const e=new s,n=e.close!==void 0;try{e.close()}catch{}return n},createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=s=>()=>{if(s===null)return Promise.resolve(!1);const e=new s(1,1,44100);return new Promise(n=>{let c=!0;const h=d=>{c&&(c=!1,e.startRendering(),n(d instanceof TypeError))};let u;try{u=e.decodeAudioData(null,()=>{},h)}catch(d){h(d)}u!==void 0&&u.catch(h)})},createTestAudioContextOptionsSupport=s=>()=>{if(s===null)return!1;let e;try{e=new s({latencyHint:"balanced"})}catch{return!1}return e.close(),!0},createTestAudioNodeConnectMethodSupport=s=>()=>{if(s===null)return!1;const n=new s(1,1,44100).createGain(),c=n.connect(n)===n;return n.disconnect(n),c},createTestAudioWorkletProcessorNoOutputsSupport=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),c=new MessageChannel,h=new e(1,128,44100),u=URL.createObjectURL(n);let d=!1;try{await h.audioWorklet.addModule(u);const m=new s(h,"a",{numberOfOutputs:0}),g=h.createOscillator();await new Promise(b=>{m.port.onmessage=()=>b(),m.port.postMessage(c.port2,[c.port2])}),m.port.onmessage=()=>d=!0,g.connect(m),g.start(0),await h.startRendering(),d=await new Promise(b=>{c.port1.onmessage=({data:O})=>b(O===1),c.port1.postMessage(0)})}catch{}finally{c.port1.close(),URL.revokeObjectURL(u)}return d},createTestAudioWorkletProcessorPostMessageSupport=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),c=new e(1,128,44100),h=URL.createObjectURL(n);let u=!1,d=!1;try{await c.audioWorklet.addModule(h);const m=new s(c,"a",{numberOfOutputs:0}),g=c.createOscillator();m.port.onmessage=()=>u=!0,m.onprocessorerror=()=>d=!0,g.connect(m),g.start(0),await c.startRendering()}catch{}finally{URL.revokeObjectURL(h)}return u&&!d},createTestChannelMergerNodeChannelCountSupport=s=>()=>{if(s===null)return!1;const n=new s(1,1,44100).createChannelMerger();if(n.channelCountMode==="max")return!0;try{n.channelCount=2}catch{return!0}return!1},createTestConstantSourceNodeAccurateSchedulingSupport=s=>()=>{if(s===null)return!1;const e=new s(1,1,44100);return e.createConstantSource===void 0?!0:e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},createTestConvolverNodeBufferReassignabilitySupport=s=>()=>{if(s===null)return!1;const e=new s(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0},createTestConvolverNodeChannelCountSupport=s=>()=>{if(s===null)return!1;const n=new s(1,1,44100).createConvolver();try{n.channelCount=1}catch{return!1}return!0},createTestIsSecureContextSupport=s=>()=>s!==null&&s.hasOwnProperty("isSecureContext"),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=s=>()=>{if(s===null)return!1;const e=new s;try{return e.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{e.close()}},createTestOfflineAudioContextCurrentTimeSupport=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),c=s(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(h=>{n.oncomplete=()=>{c.disconnect(),h(n.currentTime!==0)},n.startRendering()})},createTestStereoPannerNodeDefaultValueSupport=s=>()=>{if(s===null)return Promise.resolve(!1);const e=new s(1,1,44100);if(e.createStereoPanner===void 0||e.createConstantSource===void 0)return Promise.resolve(!0);const n=e.createConstantSource(),c=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,c.channelCount=1,n.start(),n.connect(c).connect(e.destination),e.startRendering().then(h=>h.getChannelData(0)[0]!==1)},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(s,e,n,c,h,u,d)=>class extends s{constructor(g,b){const O=h(g),v={...DEFAULT_OPTIONS,...b},y=n(O,v),S=u(O)?c():null;super(g,!0,y,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,d(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(g){if(g===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(g.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=g}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(g){this._nativeWaveShaperNode.oversample=g}},createWaveShaperNodeRendererFactory=(s,e,n)=>()=>{const c=new WeakMap,h=async(u,d)=>{let m=e(u);if(!isOwnedByContext(m,d)){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,curve:m.curve,oversample:m.oversample};m=s(d,b)}return c.set(d,m),isNativeAudioNodeFaker(m)?await n(u,d,m.inputs[0]):await n(u,d,m),m};return{render(u,d){const m=c.get(d);return m!==void 0?Promise.resolve(m):h(u,d)}}},createWindow=()=>typeof window=="undefined"?null:window,createWrapAudioBufferCopyChannelMethods=(s,e)=>n=>{n.copyFromChannel=(c,h,u=0)=>{const d=s(u),m=s(h);if(m>=n.numberOfChannels)throw e();const g=n.length,b=n.getChannelData(m),O=c.length;for(let v=d<0?-d:0;v+d<g&&v<O;v+=1)c[v]=b[v+d]},n.copyToChannel=(c,h,u=0)=>{const d=s(u),m=s(h);if(m>=n.numberOfChannels)throw e();const g=n.length,b=n.getChannelData(m),O=c.length;for(let v=d<0?-d:0;v+d<g&&v<O;v+=1)b[v+d]=c[v]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=s=>e=>{e.copyFromChannel=(n=>(c,h,u=0)=>{const d=s(u),m=s(h);if(d<e.length)return n.call(e,c,m,d)})(e.copyFromChannel),e.copyToChannel=(n=>(c,h,u=0)=>{const d=s(u),m=s(h);if(d<e.length)return n.call(e,c,m,d)})(e.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=s=>(e,n)=>{const c=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=c),s(e,"buffer",h=>()=>{const u=h.call(e);return u===c?null:u},h=>u=>h.call(e,u===null?c:u))},createWrapChannelMergerNode=(s,e)=>(n,c)=>{c.channelCount=1,c.channelCountMode="explicit",Object.defineProperty(c,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(c,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const h=n.createBufferSource();e(c,()=>{const m=c.numberOfInputs;for(let g=0;g<m;g+=1)h.connect(c,0,g)},()=>h.disconnect(c))},getFirstSample=(s,e,n)=>s.copyFromChannel===void 0?s.getChannelData(n)[0]:(s.copyFromChannel(e,n),e[0]),isDCCurve=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},overwriteAccessors=(s,e,n,c)=>{let h=s;for(;!h.hasOwnProperty(e);)h=Object.getPrototypeOf(h);const{get:u,set:d}=Object.getOwnPropertyDescriptor(h,e);Object.defineProperty(s,e,{get:n(u),set:c(d)})},sanitizeAudioWorkletNodeOptions=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=s=>({...s,channelCount:s.numberOfOutputs}),sanitizePeriodicWaveOptions=s=>{const{imag:e,real:n}=s;return e===void 0?n===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(n,()=>0),real:n}:n===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:n}},setValueAtTimeUntilPossible=(s,e,n)=>{try{s.setValueAtTime(e,n)}catch(c){if(c.code!==9)throw c;setValueAtTimeUntilPossible(s,e,n+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=s=>{const e=s.createBufferSource(),n=s.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=s=>{const e=s.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=s=>{const e=s.createBuffer(1,1,44100),n=s.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=s=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),n.close()}},testDomExceptionConstructorSupport=()=>{try{new DOMException}catch{return!1}return!0},testTransferablesSupport=()=>new Promise(s=>{const e=new ArrayBuffer(0),{port1:n,port2:c}=new MessageChannel;n.onmessage=({data:h})=>s(h!==null),c.postMessage(e,[e])}),wrapAudioBufferSourceNodeStartMethodOffsetClamping=s=>{s.start=(e=>(n=0,c=0,h)=>{const u=s.buffer,d=u===null?c:Math.min(u.duration,c);u!==null&&d>u.duration-.5/s.context.sampleRate?e.call(s,n,0,0):e.call(s,n,d,h)})(s.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(s,e)=>{const n=e.createGain();s.connect(n);const c=(h=>()=>{h.call(s,n),s.removeEventListener("ended",c)})(s.disconnect);s.addEventListener("ended",c),interceptConnections(s,n),s.stop=(h=>{let u=!1;return(d=0)=>{if(u)try{h.call(s,d)}catch{n.gain.setValueAtTime(0,d)}else h.call(s,d),u=!0}})(s.stop)},wrapEventListener=(s,e)=>n=>{const c={value:s};return Object.defineProperties(n,{currentTarget:c,target:c}),typeof e=="function"?e.call(s,n):e.handleEvent.call(s,n)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext),isSupported=()=>createIsSupportedPromise(cacheTestResult,createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),createTestAudioContextOptionsSupport(nativeAudioContextConstructor),createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),testDomExceptionConstructorSupport,createTestIsSecureContextSupport(window$1),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),testTransferablesSupport);function assert(s,e){if(!s)throw new Error(e)}function assertRange(s,e,n=1/0){if(!(e<=s&&s<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${s}`)}function assertContextRunning(s){!s.isOffline&&s.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function setLogger(s){defaultLogger=s}function log(...s){defaultLogger.log(...s)}function warn(...s){defaultLogger.warn(...s)}var Debug=Object.freeze(Object.defineProperty({__proto__:null,assert,assertRange,assertContextRunning,setLogger,log,warn},Symbol.toStringTag,{value:"Module"}));function isUndef(s){return typeof s=="undefined"}function isDefined(s){return!isUndef(s)}function isFunction(s){return typeof s=="function"}function isNumber(s){return typeof s=="number"}function isObject(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function isBoolean(s){return typeof s=="boolean"}function isArray(s){return Array.isArray(s)}function isString(s){return typeof s=="string"}function isNote(s){return isString(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function createAudioContext(s){return new audioContextConstructor(s)}function createOfflineAudioContext(s,e,n){return new offlineAudioContextConstructor(s,e,n)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(s,e,n){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(s,e,n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __decorate(s,e,n,c){var h=arguments.length,u=h<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,n):c,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,e,n,c);else for(var m=s.length-1;m>=0;m--)(d=s[m])&&(u=(h<3?d(u):h>3?d(e,n,u):d(e,n))||u);return h>3&&u&&Object.defineProperty(e,n,u),u}function __awaiter(s,e,n,c){function h(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(O){try{b(c.next(O))}catch(v){d(v)}}function g(O){try{b(c.throw(O))}catch(v){d(v)}}function b(O){O.done?u(O.value):h(O.value).then(m,g)}b((c=c.apply(s,e||[])).next())})}class Ticker{constructor(e,n,c){this._callback=e,this._type=n,this._updateInterval=c,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),c=new Worker(n);c.onmessage=this._callback.bind(this),this._worker=c}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(s){return isAnyAudioParam(s)}function isAudioNode(s){return isAnyAudioNode(s)}function isOfflineAudioContext(s){return isAnyOfflineAudioContext(s)}function isAudioContext(s){return isAnyAudioContext(s)}function isAudioBuffer(s){return s instanceof AudioBuffer}function noCopy(s,e){return s==="value"||isAudioParam(e)||isAudioNode(e)||isAudioBuffer(e)}function deepMerge(s,...e){if(!e.length)return s;const n=e.shift();if(isObject(s)&&isObject(n))for(const c in n)noCopy(c,n[c])?s[c]=n[c]:isObject(n[c])?(s[c]||Object.assign(s,{[c]:{}}),deepMerge(s[c],n[c])):Object.assign(s,{[c]:n[c]});return deepMerge(s,...e)}function deepEquals(s,e){return s.length===e.length&&s.every((n,c)=>e[c]===n)}function optionsFromArguments(s,e,n=[],c){const h={},u=Array.from(e);if(isObject(u[0])&&c&&!Reflect.has(u[0],c)&&(Object.keys(u[0]).some(m=>Reflect.has(s,m))||(deepMerge(h,{[c]:u[0]}),n.splice(n.indexOf(c),1),u.shift())),u.length===1&&isObject(u[0]))deepMerge(h,u[0]);else for(let d=0;d<n.length;d++)isDefined(u[d])&&(h[n[d]]=u[d]);return deepMerge(s,h)}function getDefaultsFromInstance(s){return s.constructor.getDefaults()}function defaultArg(s,e){return isUndef(s)?e:s}function omitFromObject(s,e){return e.forEach(n=>{Reflect.has(s,n)&&delete s[n]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Tone$1{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone$1.version=version;const EPSILON=1e-6;function GT(s,e){return s>e+EPSILON}function GTE(s,e){return GT(s,e)||EQ(s,e)}function LT(s,e){return s+EPSILON<e}function EQ(s,e){return Math.abs(s-e)<EPSILON}function clamp(s,e,n){return Math.max(Math.min(s,n),e)}class Timeline extends Tone$1{constructor(){super(),this.name="Timeline",this._timeline=[];const e=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(assert(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];assert(GTE(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const c=this._search(e,n);return c!==-1?this._timeline[c]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const c=this._search(e,n);return c+1<this._timeline.length?this._timeline[c+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const c=this._search(e);return c-1>=0?this._timeline[c-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(EQ(this._timeline[n].time,e)){for(let c=n;c>=0&&EQ(this._timeline[c].time,e);c--)n=c;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let c=0;const h=this._timeline.length;let u=h;if(h>0&&this._timeline[h-1][n]<=e)return h-1;for(;c<u;){let d=Math.floor(c+(u-c)/2);const m=this._timeline[d],g=this._timeline[d+1];if(EQ(m[n],e)){for(let b=d;b<this._timeline.length;b++){const O=this._timeline[b];if(EQ(O[n],e))d=b;else break}return d}else{if(LT(m[n],e)&&GT(g[n],e))return d;GT(m[n],e)?u=d:c=d+1}}return-1}_iterate(e,n=0,c=this._timeline.length-1){this._timeline.slice(n,c+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const c=this._search(e);return c!==-1&&this._iterate(n,0,c),this}forEachAfter(e,n){const c=this._search(e);return this._iterate(n,c+1),this}forEachBetween(e,n,c){let h=this._search(e),u=this._search(n);return h!==-1&&u!==-1?(this._timeline[h].time!==e&&(h+=1),this._timeline[u].time===n&&(u-=1),this._iterate(c,h,u)):h===-1&&this._iterate(c,0,u),this}forEachFrom(e,n){let c=this._search(e);for(;c>=0&&this._timeline[c].time>=e;)c--;return this._iterate(n,c+1),this}forEachAtTime(e,n){const c=this._search(e);if(c!==-1&&EQ(this._timeline[c].time,e)){let h=c;for(let u=c;u>=0&&EQ(this._timeline[u].time,e);u--)h=u;this._iterate(u=>{n(u)},h,c)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(s){notifyNewContext.push(s)}function initializeContext(s){notifyNewContext.forEach(e=>e(s))}const notifyCloseContext=[];function onContextClose(s){notifyCloseContext.push(s)}function closeContext(s){notifyCloseContext.forEach(e=>e(s))}class Emitter extends Tone$1{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(h=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(h)||(this._events[h]=[]),this._events[h].push(n)}),this}once(e,n){const c=(...h)=>{n(...h),this.off(e,c)};return this.on(e,c),this}off(e,n){return e.split(/\W+/).forEach(h=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(isUndef(n))this._events[e]=[];else{const u=this._events[e];for(let d=u.length-1;d>=0;d--)u[d]===n&&u.splice(d,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const c=this._events[e].slice(0);for(let h=0,u=c.length;h<u;h++)c[h].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const c=Object.getOwnPropertyDescriptor(Emitter.prototype,n);Object.defineProperty(e.prototype,n,c)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=optionsFromArguments(Context.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=createAudioContext({latencyHint:e.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,c){return this._context.createBuffer(e,n,c)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,c){return this._context.createPeriodicWave(e,n,c)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return createAudioWorkletNode(this.rawContext,e,n)}addAudioWorkletModule(e,n){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,isString(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),c=n.getChannelData(0);for(let u=0;u<c.length;u++)c[u]=e;const h=this._context.createBufferSource();return h.channelCount=1,h.channelCountMode="explicit",h.buffer=n,h.loop=!0,h.start(0),this._constants.set(e,h),h}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const c=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:c+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const c=++this._timeoutIds,h=()=>{const u=this.now();this._timeouts.add({callback:()=>{e(),h()},id:c,time:u+n})};return h(),c}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,c){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,c){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function readOnly(s,e){isArray(e)?e.forEach(n=>readOnly(s,n)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function writable(s,e){isArray(e)?e.forEach(n=>writable(s,n)):Object.defineProperty(s,e,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone$1{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const e=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&isAudioBuffer(e.url)||e.url instanceof ToneAudioBuffer?this.set(e.url):isString(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(e){return e instanceof ToneAudioBuffer?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return __awaiter(this,void 0,void 0,function*(){const n=ToneAudioBuffer.load(e).then(c=>{this.set(c),this.onload(this)});ToneAudioBuffer.downloads.push(n);try{yield n}finally{const c=ToneAudioBuffer.downloads.indexOf(n);ToneAudioBuffer.downloads.splice(c,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=isArray(e)&&e[0].length>0,c=n?e.length:1,h=n?e[0].length:e.length,u=getContext(),d=u.createBuffer(c,h,u.sampleRate),m=!n&&c===1?[e]:e;for(let g=0;g<c;g++)d.copyToChannel(m[g],g);return this._buffer=d,this}toMono(e){if(isNumber(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const c=this.numberOfChannels;for(let h=0;h<c;h++){const u=this.toArray(h);for(let d=0;d<u.length;d++)n[d]+=u[d]}n=n.map(h=>h/c),this.fromArray(n)}return this}toArray(e){if(isNumber(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let c=0;c<this.numberOfChannels;c++)n[c]=this.getChannelData(c);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){const c=Math.floor(e*this.sampleRate),h=Math.floor(n*this.sampleRate);assert(c<h,"The start time must be less than the end time");const u=h-c,d=getContext().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let m=0;m<this.numberOfChannels;m++)d.copyToChannel(this.getChannelData(m).subarray(c,h),m);return new ToneAudioBuffer(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ToneAudioBuffer().fromArray(e)}static fromUrl(e){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(e)})}static load(e){return __awaiter(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const m=n[1].split("|");let g=m[0];for(const b of m)if(ToneAudioBuffer.supportsType(b)){g=b;break}e=e.replace(n[0],g)}const c=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",h=yield fetch(c+e);if(!h.ok)throw new Error(`could not load url: ${e}`);const u=yield h.arrayBuffer();return yield getContext().decodeAudioData(u)})}static supportsType(e){const n=e.split("."),c=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+c)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return __awaiter(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const c=Math.floor(this.sampleRate/128);e&&n%c===0&&(yield new Promise(h=>setTimeout(h,1)))}})}render(e=!0){return __awaiter(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ToneAudioBuffer(n)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(s){isAudioContext(s)?globalContext=new Context(s):isOfflineAudioContext(s)?globalContext=new OfflineContext(s):globalContext=s}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const e=` * Tone.js v${version} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function dbToGain(s){return Math.pow(10,s/20)}function gainToDb(s){return 20*(Math.log(s)/Math.LN10)}function intervalToFrequencyRatio(s){return Math.pow(2,s/12)}let A4=440;function getA4(){return A4}function setA4(s){A4=s}function ftom(s){return Math.round(ftomf(s))}function ftomf(s){return 69+12*Math.log2(s/A4)}function mtof(s){return A4*Math.pow(2,(s-69)/12)}class TimeBaseClass extends Tone$1{constructor(e,n,c){super(),this.defaultUnits="s",this._val=n,this._units=c,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const c=parseInt(e,10),h=n==="."?1.5:1;return c===1?this._beatsToUnits(this._getTimeSignature())*h:this._beatsToUnits(4/c)*h},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,c)=>{let h=0;return e&&e!=="0"&&(h+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(h+=this._beatsToUnits(parseFloat(n))),c&&c!=="0"&&(h+=this._beatsToUnits(parseFloat(c)/4)),h},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(isObject(this._val)){let e=0;for(const n in this._val)if(isDefined(this._val[n])){const c=this._val[n];e+=new this.constructor(this.context,n).valueOf()*c}return e}if(isDefined(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new TimeClass(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const c=new this.constructor(this.context,e).valueOf(),h=this.valueOf(),m=Math.round(h/c)*c-h;return h+m*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let u=1;u<9;u++){const d=Math.pow(2,u);n.push(d+"n."),n.push(d+"n"),n.push(d+"t")}n.push("0");let c=n[0],h=new TimeClass(this.context,n[0]).toSeconds();return n.forEach(u=>{const d=new TimeClass(this.context,u).toSeconds();Math.abs(d-e)<Math.abs(h-e)&&(c=u,h=d)}),c}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const c=Math.floor(n/this._getTimeSignature());let h=n%1*4;n=Math.floor(n)%this._getTimeSignature();const u=h.toString();return u.length>3&&(h=parseFloat(parseFloat(u).toFixed(3))),[c,n,h].join(":")}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(s,e){return new TimeClass(getContext(),s,e)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(e){setA4(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:FrequencyClass.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){const h=noteToScaleIndex[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?h:FrequencyClass.mtof(h)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,c){let h=1;return e&&e!=="0"&&(h*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(h*=this._beatsToUnits(parseFloat(n))),c&&c!=="0"&&(h*=this._beatsToUnits(parseFloat(c)/4)),h}}})}transpose(e){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return ftom(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/FrequencyClass.A4);let c=Math.round(12*n)+57;const h=Math.floor(c/12);return h<0&&(c+=-12*h),scaleIndexToNote[c%12]+h.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return mtof(e)}static ftom(e){return ftom(e)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Frequency(s,e){return new FrequencyClass(getContext(),s,e)}class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function TransportTime(s,e){return new TransportTimeClass(getContext(),s,e)}class ToneWithContext extends Tone$1{constructor(){super();const e=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new TimeClass(this.context,e).toSeconds()}toFrequency(e){return new FrequencyClass(this.context,e).toFrequency()}toTicks(e){return new TransportTimeClass(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(c=>{isUndef(e[c])&&delete n[c]}),n}get(){const e=getDefaultsFromInstance(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const c=this[n];isDefined(c)&&isDefined(c.value)&&isDefined(c.setValueAtTime)?e[n]=c.value:c instanceof ToneWithContext?e[n]=c._getPartialProperties(e[n]):isArray(c)||isNumber(c)||isString(c)||isBoolean(c)?e[n]=c:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&isDefined(this[n])&&(this[n]&&isDefined(this[n].value)&&isDefined(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof ToneWithContext?this[n].set(e[n]):this[n]=e[n])}),this}}class StateTimeline extends Timeline{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,c){return assertRange(n,0),this.add(Object.assign({},c,{state:e,time:n})),this}getLastState(e,n){const c=this._search(n);for(let h=c;h>=0;h--){const u=this._timeline[h];if(u.state===e)return u}}getNextState(e,n){const c=this._search(n);if(c!==-1)for(let h=c;h<this._timeline.length;h++){const u=this._timeline[h];if(u.state===e)return u}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(e.param)&&(isAudioParam(e.param)||e.param instanceof Param),"param must be an AudioParam");!isAudioParam(e.param);)e.param=e.param._param;this._swappable=isDefined(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,isDefined(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?dbToGain(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?gainToDb(e):e}setValueAtTime(e,n){const c=this.toSeconds(n),h=this._fromType(e);return assert(isFinite(h)&&isFinite(c),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(h),this.log(this.units,"setValueAtTime",e,c),this._events.add({time:c,type:"setValueAtTime",value:h}),this._param.setValueAtTime(h,c),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),c=this._events.getAfter(n),h=this._events.get(n);let u=this._initialValue;if(h===null)u=this._initialValue;else if(h.type==="setTargetAtTime"&&(c===null||c.type==="setValueAtTime")){const d=this._events.getBefore(h.time);let m;d===null?m=this._initialValue:m=d.value,h.type==="setTargetAtTime"&&(u=this._exponentialApproach(h.time,m,h.value,h.constant,n))}else if(c===null)u=h.value;else if(c.type==="linearRampToValueAtTime"||c.type==="exponentialRampToValueAtTime"){let d=h.value;if(h.type==="setTargetAtTime"){const m=this._events.getBefore(h.time);m===null?d=this._initialValue:d=m.value}c.type==="linearRampToValueAtTime"?u=this._linearInterpolate(h.time,d,c.time,c.value,n):u=this._exponentialInterpolate(h.time,d,c.time,c.value,n)}else u=h.value;return this._toType(u)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const c=this._fromType(e),h=this.toSeconds(n);return assert(isFinite(c)&&isFinite(h),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(c),this._events.add({time:h,type:"linearRampToValueAtTime",value:c}),this.log(this.units,"linearRampToValueAtTime",e,h),this._param.linearRampToValueAtTime(c,h),this}exponentialRampToValueAtTime(e,n){let c=this._fromType(e);c=EQ(c,0)?this._minOutput:c,this._assertRange(c);const h=this.toSeconds(n);return assert(isFinite(c)&&isFinite(h),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:h,type:"exponentialRampToValueAtTime",value:c}),this.log(this.units,"exponentialRampToValueAtTime",e,h),this._param.exponentialRampToValueAtTime(c,h),this}exponentialRampTo(e,n,c){return c=this.toSeconds(c),this.setRampPoint(c),this.exponentialRampToValueAtTime(e,c+this.toSeconds(n)),this}linearRampTo(e,n,c){return c=this.toSeconds(c),this.setRampPoint(c),this.linearRampToValueAtTime(e,c+this.toSeconds(n)),this}targetRampTo(e,n,c){return c=this.toSeconds(c),this.setRampPoint(c),this.exponentialApproachValueAtTime(e,c,n),this}exponentialApproachValueAtTime(e,n,c){n=this.toSeconds(n),c=this.toSeconds(c);const h=Math.log(c+1)/Math.log(200);return this.setTargetAtTime(e,n,h),this.cancelAndHoldAtTime(n+c*.9),this.linearRampToValueAtTime(e,n+c),this}setTargetAtTime(e,n,c){const h=this._fromType(e);assert(isFinite(c)&&c>0,"timeConstant must be a number greater than 0");const u=this.toSeconds(n);return this._assertRange(h),assert(isFinite(h)&&isFinite(u),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:c,time:u,type:"setTargetAtTime",value:h}),this.log(this.units,"setTargetAtTime",e,u,c),this._param.setTargetAtTime(h,u,c),this}setValueCurveAtTime(e,n,c,h=1){c=this.toSeconds(c),n=this.toSeconds(n);const u=this._fromType(e[0])*h;this.setValueAtTime(this._toType(u),n);const d=c/(e.length-1);for(let m=1;m<e.length;m++){const g=this._fromType(e[m])*h;this.linearRampToValueAtTime(this._toType(g),n+m*d)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return assert(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),c=this._fromType(this.getValueAtTime(n));assert(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+c);const h=this._events.get(n),u=this._events.getAfter(n);return h&&EQ(h.time,n)?u?(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):u&&(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time),u.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(c),n):u.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(c),n)),this._events.add({time:n,type:"setValueAtTime",value:c}),this._param.setValueAtTime(c,n),this}rampTo(e,n=.1,c){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,c):this.linearRampTo(e,n,c),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const c=this._events.get(n);if(c&&c.type==="setTargetAtTime"){const h=this._events.getAfter(c.time),u=h?h.time:n+2,d=(u-n)/10;for(let m=n;m<u;m+=d)e.linearRampToValueAtTime(this.getValueAtTime(m),m)}return this._events.forEachAfter(this.context.currentTime,h=>{h.type==="cancelScheduledValues"?e.cancelScheduledValues(h.time):h.type==="setTargetAtTime"?e.setTargetAtTime(h.value,h.time,h.constant):e[h.type](h.value,h.time)}),this}setParam(e){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,c,h,u){return c+(n-c)*Math.exp(-(u-e)/h)}_linearInterpolate(e,n,c,h,u){return n+(h-n)*((u-e)/(c-e))}_exponentialInterpolate(e,n,c,h,u){return n*Math.pow(h/n,(u-e)/(c-e))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return isDefined(e)&&(e instanceof ToneAudioNode||isAudioNode(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(c=>{c.channelCount=e.channelCount,c.channelCountMode=e.channelCountMode,c.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();assert(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,c=0){return connect(this,e,n,c),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,c=0){return disconnect(this,e,n,c),this}chain(...e){return connectSeries(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...s){const e=s.shift();s.reduce((n,c)=>(n instanceof ToneAudioNode?n.connect(c):isAudioNode(n)&&connect(n,c),c),e)}function connect(s,e,n=0,c=0){for(assert(isDefined(s),"Cannot connect from undefined node"),assert(isDefined(e),"Cannot connect to undefined node"),(e instanceof ToneAudioNode||isAudioNode(e))&&assert(e.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ToneAudioNode||e instanceof Param;)isDefined(e.input)&&(e=e.input);for(;s instanceof ToneAudioNode;)isDefined(s.output)&&(s=s.output);isAudioParam(e)?s.connect(e,n):s.connect(e,n,c)}function disconnect(s,e,n=0,c=0){if(isDefined(e))for(;e instanceof ToneAudioNode;)e=e.input;for(;!isAudioNode(s);)isDefined(s.output)&&(s=s.output);isAudioParam(e)?s.disconnect(e,n):isAudioNode(e)?s.disconnect(e,n,c):s.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(e){super(e),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const c=this.toSeconds(n);return this._startTime!==-1&&c>=this._startTime&&(this._stopTime===-1||c<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(e,n=1){assert(this._startTime===-1,"Source cannot be started more than once");const c=this.toSeconds(this._fadeIn);return this._startTime=e+c,this._startTime=Math.max(this._startTime,this.context.currentTime),c>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+c):this._gainNode.gain.exponentialApproachValueAtTime(n,e,c)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const c=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+c),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback!="undefined"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,c=0){return connectSignal(this,e,n,c),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,c){return this._param.exponentialRampTo(e,n,c),this}linearRampTo(e,n,c){return this._param.linearRampTo(e,n,c),this}targetRampTo(e,n,c){return this._param.targetRampTo(e,n,c),this}exponentialApproachValueAtTime(e,n,c){return this._param.exponentialApproachValueAtTime(e,n,c),this}setTargetAtTime(e,n,c){return this._param.setTargetAtTime(e,n,c),this}setValueCurveAtTime(e,n,c,h){return this._param.setValueCurveAtTime(e,n,c,h),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,c){return this._param.rampTo(e,n,c),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function connectSignal(s,e,n,c){(e instanceof Param||isAudioParam(e)||e instanceof Signal&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Signal&&(e.overridden=!0)),connect(s,e,n,c)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const e=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,c){n=this.toSeconds(n),this.setRampPoint(n);const h=this._fromType(e),u=this._events.get(n),d=Math.round(Math.max(1/c,1));for(let m=0;m<=d;m++){const g=c*m+n,b=this._exponentialApproach(u.time,u.value,h,c,g);this.linearRampToValueAtTime(this._toType(b),g)}return this}setValueAtTime(e,n){const c=this.toSeconds(n);super.setValueAtTime(e,n);const h=this._events.get(c),u=this._events.previousEvent(h),d=this._getTicksUntilEvent(u,c);return h.ticks=Math.max(d,0),this}linearRampToValueAtTime(e,n){const c=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const h=this._events.get(c),u=this._events.previousEvent(h),d=this._getTicksUntilEvent(u,c);return h.ticks=Math.max(d,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const c=this._fromType(e),h=this._events.get(n),u=Math.round(Math.max((n-h.time)*10,1)),d=(n-h.time)/u;for(let m=0;m<=u;m++){const g=d*m+h.time,b=this._exponentialInterpolate(h.time,h.value,n,c,g);this.linearRampToValueAtTime(this._toType(b),g)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(e.ticks)){const d=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(d,e.time)}const c=this._fromType(this.getValueAtTime(e.time));let h=this._fromType(this.getValueAtTime(n));const u=this._events.get(n);return u&&u.time===n&&u.type==="setValueAtTime"&&(h=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(c+h)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),c=this._events.get(n);return Math.max(this._getTicksUntilEvent(c,n),0)}getDurationOfTicks(e,n){const c=this.toSeconds(n),h=this.getTicksAtTime(n);return this.getTimeOfTick(h+e)-c}getTimeOfTick(e){const n=this._events.get(e,"ticks"),c=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&c&&c.type==="linearRampToValueAtTime"&&n.value!==c.value){const h=this._fromType(this.getValueAtTime(n.time)),d=(this._fromType(this.getValueAtTime(c.time))-h)/(c.time-n.time),m=Math.sqrt(Math.pow(h,2)-2*d*(n.ticks-e)),g=(-h+m)/d,b=(-h-m)/d;return(g>0?g:b)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const c=this.toSeconds(n),h=this.toSeconds(e),u=this.getTicksAtTime(c);return this.getTicksAtTime(c+h)-u}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const e=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:e.units,value:e.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const c=this.toSeconds(e);return this._state.getValueAtTime(c)!=="started"&&(this._state.setStateAtTime("started",c),isDefined(n)&&this.setTicksAtTime(n,c)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const c=this._state.get(n);c&&c.time>0&&(this._tickOffset.cancel(c.time),this._state.cancel(c.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),c=this._state.getLastState("stopped",n),h={state:"paused",time:n};this._state.add(h);let u=c,d=0;return this._state.forEachBetween(c.time,n+this.sampleTime,m=>{let g=u.time;const b=this._tickOffset.get(m.time);b&&b.time>=u.time&&(d=b.ticks,g=b.time),u.state==="started"&&m.state!=="started"&&(d+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(g)),u=m}),this._state.remove(h),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),c=this.frequency.timeToTicks(e,n);this.setTicksAtTime(c,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),c={state:"paused",time:e};this._state.add(c);let h=n,u=0;return this._state.forEachBetween(n.time,e+this.sampleTime,d=>{let m=h.time;const g=this._tickOffset.get(d.time);g&&g.time>=h.time&&(u=g.seconds,m=g.time),h.state==="started"&&d.state!=="started"&&(u+=d.time-m),h=d}),this._state.remove(c),u}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const c=this._tickOffset.get(n),h=this._state.get(n),u=Math.max(c.time,h.time),d=this.frequency.getTicksAtTime(u)+e-c.ticks;return this.frequency.getTimeOfTick(d)}forEachTickBetween(e,n,c){let h=this._state.get(e);this._state.forEachBetween(e,n,d=>{h&&h.state==="started"&&d.state!=="started"&&this.forEachTickBetween(Math.max(h.time,e),d.time-this.sampleTime,c),h=d});let u=null;if(h&&h.state==="started"){const d=Math.max(h.time,e),m=this.frequency.getTicksAtTime(d),g=this.frequency.getTicksAtTime(h.time),b=m-g;let O=Math.ceil(b)-b;O=EQ(O,1)?0:O;let v=this.frequency.getTimeOfTick(m+O);for(;v<n;){try{c(v,Math.round(this.getTicksAtTime(v)))}catch(y){u=y;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(u)throw u;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const e=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new TickSource({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){assertContextRunning(this.context);const c=this.toSeconds(e);return this.log("start",c),this._state.getValueAtTime(c)!=="started"&&(this._state.setStateAtTime("started",c),this._tickSource.start(c,n),c<this._lastUpdate&&this.emit("start",c,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const c=this.toSeconds(n),h=this.getTicksAtTime(c);return this._tickSource.getTimeOfTick(h+e,c)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,c=>{switch(c.state){case"started":const h=this._tickSource.getTicksAtTime(c.time);this.emit("start",c.time,h);break;case"stopped":c.time!==0&&this.emit("stop",c.time);break;case"paused":this.emit("pause",c.time);break}}),this._tickSource.forEachTickBetween(e,n,(c,h)=>{this.callback(c,h)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){super(optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]),n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Offline(s,e,n=2,c=getContext().sampleRate){return __awaiter(this,void 0,void 0,function*(){const h=getContext(),u=new OfflineContext(n,e,c);setContext(u),yield s(u);const d=u.render();setContext(h);const m=yield d;return new ToneAudioBuffer(m)})}class ToneAudioBuffers extends Tone$1{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const c=e.urls[n];this.add(n,c,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return assert(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,c=noOp,h=noOp){return isString(n)?this._buffers.set(e.toString(),new ToneAudioBuffer(this.baseUrl+n,c,h)):this._buffers.set(e.toString(),new ToneAudioBuffer(n,c,h)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ftom(super._frequencyToUnits(e))}_ticksToUnits(e){return ftom(super._ticksToUnits(e))}_beatsToUnits(e){return ftom(super._beatsToUnits(e))}_secondsToUnits(e){return ftom(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(e){return new MidiClass(this.context,this.toMidi()+e)}}function Midi$1(s,e){return new MidiClass(getContext(),s,e)}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ticks(s,e){return new TicksClass(getContext(),s,e)}class Draw$1 extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(s=>{s.draw=new Draw$1({context:s})});onContextClose(s=>{s.draw.dispose()});class IntervalTimeline extends Tone$1{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){assert(isDefined(e.time),"Events must have a time property"),assert(isDefined(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new IntervalNode(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const c of n)if(c.event===e){this._removeNode(c),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let c,h=null;if(n>0)if(e.left.right===null)c=e.left,c.right=e.right,h=c;else{for(c=e.left.right;c.right!==null;)c=c.right;c.parent&&(c.parent.right=c.left,h=c.parent,c.left=e.left,c.right=e.right)}else if(e.right.left===null)c=e.right,c.left=e.left,h=c;else{for(c=e.right.left;c.left!==null;)c=c.left;c.parent&&(c.parent.left=c.right,h=c.parent,c.left=e.left,c.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=c:e.parent.right=c:this._setRoot(c),h&&this._rebalance(h)}e.dispose()}_rotateLeft(e){const n=e.parent,c=e.isLeftChild(),h=e.right;h&&(e.right=h.left,h.left=e),n!==null?c?n.left=h:n.right=h:this._setRoot(h)}_rotateRight(e){const n=e.parent,c=e.isLeftChild(),h=e.left;h&&(e.left=h.right,h.right=e),n!==null?c?n.left=h:n.right=h:this._setRoot(h)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let c=n[0];for(let h=1;h<n.length;h++)n[h].low>c.low&&(c=n[h]);return c.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(c=>n.push(c)),n.forEach(c=>{c.event&&e(c.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const c=[];this._root.search(e,c),c.forEach(h=>{h.event&&n(h.event)})}return this}forEachFrom(e,n){if(this._root!==null){const c=[];this._root.searchAfter(e,c),c.forEach(h=>{h.event&&n(h.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class IntervalNode{constructor(e,n,c){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=c,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}var Units=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const e=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Destination$1 extends ToneAudioNode{constructor(){super(optionsFromArguments(Destination$1.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const e=optionsFromArguments(Destination$1.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),connectSeries(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(s=>{s.destination=new Destination$1({context:s})});onContextClose(s=>{s.destination.dispose()});class TimelineValue extends Tone$1{constructor(e){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class TransportEvent{constructor(e,n){this.id=TransportEvent._eventId++;const c=Object.assign(TransportEvent.getDefaults(),n);this.transport=e,this.callback=c.callback,this._once=c.once,this.time=c.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const c=Object.assign(TransportRepeatEvent.getDefaults(),n);this.duration=new TicksClass(e.context,c.duration).valueOf(),this._interval=new TicksClass(e.context,c.interval).valueOf(),this._nextTick=c.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Transport$1 extends ToneWithContext{constructor(){super(optionsFromArguments(Transport$1.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const e=optionsFromArguments(Transport$1.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),readOnly(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const c=n%(this._swingTicks*2)/(this._swingTicks*2),h=Math.sin(c*Math.PI)*this._swingAmount;e+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*h}this._timeline.forEachAtTime(n,c=>c.invoke(e))}schedule(e,n){const c=new TransportEvent(this,{callback:e,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(c,this._timeline)}scheduleRepeat(e,n,c,h=1/0){const u=new TransportRepeatEvent(this,{callback:e,duration:new TimeClass(this.context,h).toTicks(),interval:new TimeClass(this.context,n).toTicks(),time:new TransportTimeClass(this.context,c).toTicks()});return this._addEvent(u,this._repeatedEvents)}scheduleOnce(e,n){const c=new TransportEvent(this,{callback:e,once:!0,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(c,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,c=>this.clear(c.id)),this._repeatedEvents.forEachFrom(n,c=>this.clear(c.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new TicksClass(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let c;return isDefined(n)&&(c=this.toTicks(n)),this._clock.start(e,c),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new TicksClass(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),c=this._clock.frequency.timeToTicks(e,n);this.ticks=c}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const c=this._clock.getTicksAtTime(n),h=this._clock.frequency.getDurationOfTicks(Math.ceil(c)-c,n),u=n+h;this.emit("stop",u),this._clock.setTicksAtTime(e,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),c=this.getTicksAtTime(n),h=e-c%e;return this._clock.nextTickTime(h,n)}}syncSignal(e,n){if(!n){const h=this.now();if(e.getValueAtTime(h)!==0){const u=this.bpm.getValueAtTime(h),d=1/(60/u/this.PPQ);n=e.getValueAtTime(h)/d}else n=0}const c=new Gain(n);return this.bpm.connect(c),c.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const c=this._syncedSignals[n];c.signal===e&&(c.ratio.dispose(),c.signal.value=c.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(Transport$1);onContextInit(s=>{s.transport=new Transport$1({context:s})});onContextClose(s=>{s.transport.dispose()});class Source extends ToneAudioNode{constructor(e){super(e),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,c){let h=isUndef(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(h=this._clampToCurrentTime(h),!this._synced&&this._state.getValueAtTime(h)==="started")assert(GT(h,this._state.get(h).time),"Start time must be strictly greater than previous start time"),this._state.cancel(h),this._state.setStateAtTime("started",h),this.log("restart",h),this.restart(h,n,c);else if(this.log("start",h),this._state.setStateAtTime("started",h),this._synced){const u=this._state.get(h);u&&(u.offset=this.toSeconds(defaultArg(n,0)),u.duration=c?this.toSeconds(c):void 0);const d=this.context.transport.schedule(m=>{this._start(m,n,c)},h);this._scheduled.push(d),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>h&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(h,n,c);return this}stop(e){let n=isUndef(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||isDefined(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const c=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(c)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,c){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,c)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){const c=this._state.get(n);if(c&&c.state==="started"&&c.time!==n){const h=n-this.toSeconds(c.time);let u;c.duration&&(u=this.toSeconds(c.duration)-h),this._start(e,this.toSeconds(c.offset)+h,u)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ToneAudioBuffer(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,c,h=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const u=this.toSeconds(e);this._startGain(u,h),this.loop?n=defaultArg(n,this.loopStart):n=defaultArg(n,0);let d=Math.max(this.toSeconds(n),0);if(this.loop){const m=this.toSeconds(this.loopEnd)||this.buffer.duration,g=this.toSeconds(this.loopStart),b=m-g;GTE(d,m)&&(d=(d-g)%b+g),EQ(d,this.buffer.duration)&&(d=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(d,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,d)),isDefined(c)){let m=this.toSeconds(c);m=Math.max(m,0),this.stop(u+m)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){super(optionsFromArguments(Noise.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(assert(e in _noiseBuffers,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const s=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);s[e]=n;let c=0;for(let h=0;h<BUFFER_LENGTH;h++){const u=Math.random()*2-1;n[h]=(c+.02*u)/1.02,c=n[h],n[h]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(s)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const s=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);s[e]=n;let c,h,u,d,m,g,b;c=h=u=d=m=g=b=0;for(let O=0;O<BUFFER_LENGTH;O++){const v=Math.random()*2-1;c=.99886*c+v*.0555179,h=.99332*h+v*.0750759,u=.969*u+v*.153852,d=.8665*d+v*.3104856,m=.55*m+v*.5329522,g=-.7616*g-v*.016898,n[O]=c+h+u+d+m+g+b+v*.5362,n[O]*=.11,b=v*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(s)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const s=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);s[e]=n;for(let c=0;c<BUFFER_LENGTH;c++)n[c]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(s)}return _noiseCache.white}};class UserMedia extends ToneAudioNode{constructor(){super(optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"])),this.name="UserMedia";const e=optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"]);this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(e){return __awaiter(this,void 0,void 0,function*(){assert(UserMedia.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const n=yield UserMedia.enumerateDevices();isNumber(e)?this._device=n[e]:(this._device=n.find(u=>u.label===e||u.deviceId===e),!this._device&&n.length>0&&(this._device=n[0]),assert(isDefined(this._device),`No matching device ${e}`));const c={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(c.audio.deviceId=this._device.deviceId);const h=yield navigator.mediaDevices.getUserMedia(c);if(!this._stream){this._stream=h;const u=this.context.createMediaStreamSource(h);connect(u,this.output),this._mediaStream=u}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return __awaiter(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return isDefined(navigator.mediaDevices)&&isDefined(navigator.mediaDevices.getUserMedia)}}function generateWaveform(s,e){return __awaiter(this,void 0,void 0,function*(){const n=e/s.context.sampleRate,c=new OfflineContext(1,n,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/n,detune:0,context:c})).toDestination().start(0),(yield c.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),readOnly(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),c=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=c,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(n=>n.phase===this._phase&&deepEquals(n.partials,this._partials));{const e=Oscillator._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const c=this._getCachedPeriodicWave();if(isDefined(c)){const{partials:h,wave:u}=c;this._wave=u,this._partials=h,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[h,u]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(h,u);this._wave=d,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:h,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){assertRange(e,0);let n=this._type;const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(c&&(n=c[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const h=new Float32Array(e);this._partials.forEach((u,d)=>h[d]=u),this._partials=Array.from(h),this.type=this._type}}_getRealImaginary(e,n){let h=2048;const u=new Float32Array(h),d=new Float32Array(h);let m=1;if(e==="custom"){if(m=this._partials.length+1,this._partialCount=this._partials.length,h=m,this._partials.length===0)return[u,d]}else{const g=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);g?(m=parseInt(g[2],10)+1,this._partialCount=parseInt(g[2],10),e=g[1],m=Math.max(m,2),h=m):this._partialCount=0,this._partials=[]}for(let g=1;g<h;++g){const b=2/(g*Math.PI);let O;switch(e){case"sine":O=g<=m?1:0,this._partials[g-1]=O;break;case"square":O=g&1?2*b:0,this._partials[g-1]=O;break;case"sawtooth":O=b*(g&1?1:-1),this._partials[g-1]=O;break;case"triangle":g&1?O=2*(b*b)*(g-1>>1&1?-1:1):O=0,this._partials[g-1]=O;break;case"custom":O=this._partials[g-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}O!==0?(u[g]=-O*Math.sin(n*g),d[g]=O*Math.cos(n*g)):(u[g]=0,d[g]=0)}return[u,d]}_inverseFFT(e,n,c){let h=0;const u=e.length;for(let d=0;d<u;d++)h+=e[d]*Math.cos(d*c)+n[d]*Math.sin(d*c);return h}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let c=0;const h=Math.PI*2,u=32;for(let d=0;d<u;d++)c=Math.max(this._inverseFFT(e,n,d/u*h),c);return clamp(-this._inverseFFT(e,n,this._phase)/c,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(e,n=0,c=0){return connectSignal(this,e,n,c),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):isFunction(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(e,n=1024){const c=new Float32Array(n);for(let h=0,u=n;h<u;h++){const d=h/(u-1)*2-1;c[h]=e(d,h)}return this.curve=c,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(c=>c.includes(e));assert(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const e=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const e=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Oscillator({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:n=>n<=0?-1:1});const e=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,c=e/(this._oscillators.length-1);this._forEach((h,u)=>h.detune.value=n+c*u)}}get count(){return this._oscillators.length}set count(e){if(assertRange(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const c=new Oscillator({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):noOp});this.type==="custom"&&(c.partials=this._partials),this.frequency.connect(c.frequency),this.detune.connect(c.detune),c.detune.overridden=!1,c.connect(this.output),this._oscillators[n]=c}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,c)=>n.phase=this._phase+c/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const e=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),readOnly(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=OmniOscillatorSourceMap[e],c=this.now();if(this._oscillator){const h=this._oscillator;h.stop(c),this.context.setTimeout(()=>h.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(c)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof OmniOscillatorSourceMap[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&isNumber(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&isNumber(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(Object.assign(optionsFromArguments(Add.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Multiply({context:this.context,value:e.max-e.min}),this._add=this.output=new Add({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Zero.getDefaults(),arguments))),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){super(optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue;const e=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Oscillator(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,c=this.max;this._units=e,this.min=n,this.max=c}get state(){return this._oscillator.state}connect(e,n,c){return(e instanceof Param||e instanceof Signal)&&(this.convert=e.convert,this.units=e.units),connectSignal(this,e,n,c),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range$1(s,e=1/0){const n=new WeakMap;return function(c,h){Reflect.defineProperty(c,h,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(u){assertRange(u,s,e),n.set(this,u)}})}}function timeRange(s,e=1/0){const n=new WeakMap;return function(c,h){Reflect.defineProperty(c,h,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(u){assertRange(this.toSeconds(u),s,e),n.set(this,u)}})}}class Player extends Source{constructor(){super(optionsFromArguments(Player.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(e){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=noOp){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,c){return super.start(e,n,c),this}_start(e,n,c){this._loop?n=defaultArg(n,this._loopStart):n=defaultArg(n,0);const h=this.toSeconds(n),u=c;c=defaultArg(c,Math.max(this._buffer.duration-h,0));let d=this.toSeconds(c);d=d/this._playbackRate,e=this.toSeconds(e);const m=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+d),this._state.setStateAtTime("stopped",e+d,{implicitEnd:!0})),this._activeSources.add(m),this._loop&&isUndef(u)?m.start(e,h):m.start(e,h,d-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(c=>c.stop(n))}restart(e,n,c){return super.restart(e,n,c),this}_restart(e,n,c){this._stop(e),this._start(e,n,c)}seek(e,n){const c=this.toSeconds(n);if(this._state.getValueAtTime(c)==="started"){const h=this.toSeconds(e);this._stop(c),this._start(c,h)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),c=this._state.getNextState("stopped",n);c&&c.implicitEnd&&(this._state.cancel(c.time),this._activeSources.forEach(h=>h.cancelStop())),this._activeSources.forEach(h=>{h.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class Players extends ToneAudioNode{constructor(){super(optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const e=optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this._buffers=new ToneAudioBuffers({urls:e.urls,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.mute=e.mute,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:noOp,onerror:noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._players.forEach(n=>{n.fadeIn=e})}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._players.forEach(n=>{n.fadeOut=e})}get state(){return Array.from(this._players).some(([n,c])=>c.state==="started")?"started":"stopped"}has(e){return this._buffers.has(e)}player(e){if(assert(this.has(e),`No Player with the name ${e} exists on this object`),!this._players.has(e)){const n=new Player({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,n)}return this._players.get(e)}get loaded(){return this._buffers.loaded}add(e,n,c){return assert(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,n,c),this}stopAll(e){return this._players.forEach(n=>n.stop(e)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(e=>e.dispose()),this._buffers.dispose(),this}}class GrainPlayer extends Source{constructor(){super(optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const e=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);this.buffer=new ToneAudioBuffer({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,n,c){n=defaultArg(n,0),n=this.toSeconds(n),e=this.toSeconds(e);const h=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,n/h),c&&this.stop(e+this.toSeconds(c))}restart(e,n,c){return super.restart(e,n,c),this}_restart(e,n,c){this._stop(e),this._start(e,n,c)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(n=>{n.fadeOut=0,n.stop(e)}),this.onstop(this)}_tick(e){const n=this._clock.getTicksAtTime(e),c=n*this._grainSize;if(this.log("offset",c),!this.loop&&c>this.buffer.duration){this.stop(e);return}const h=c<this._overlap?0:this._overlap,u=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:h,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);u.start(e,this._grainSize*n),u.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(u),u.onended=()=>{const d=this._activeSources.indexOf(u);d!==-1&&this._activeSources.splice(d,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){assertRange(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){const n=this.toSeconds(e);assertRange(n,0),this._overlap=n}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class Abs extends SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new WaveShaper({context:this.context,mapping:e=>Math.abs(e)<.001?0:Math.abs(e)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Negate extends SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Subtract extends Signal{constructor(){super(Object.assign(optionsFromArguments(Subtract.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Negate({context:this.context}),this.subtrahend=this._param,connectSeries(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class GreaterThanZero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(GreaterThanZero.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new WaveShaper({context:this.context,length:127,mapping:e=>e<=0?0:1}),this._scale=this.input=new Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class GreaterThan extends Signal{constructor(){super(Object.assign(optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const e=optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]);this._subtract=this.input=new Subtract({context:this.context,value:e.value}),this._gtz=this.output=new GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,readOnly(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Pow extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Pow.getDefaults(),arguments,["value"]))),this.name="Pow";const e=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ScaleExp extends Scale{constructor(){super(Object.assign(optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const e=optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Pow({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}class SyncedSignal extends Signal{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const e=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this._lastVal=e.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ToneConstantSource({context:this.context,offset:e.value,units:e.units}).start(0),this.setValueAtTime(e.value,0)}_onTick(e){const n=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==n&&(this._lastVal=n,this._constantSource.offset.setValueAtTime(n,e))}_anchorValue(e){const n=super.getValueAtTime(this.context.transport.seconds);this._lastVal=n,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(n,e)}getValueAtTime(e){const n=new TransportTimeClass(this.context,e).toSeconds();return super.getValueAtTime(n)}setValueAtTime(e,n){const c=new TransportTimeClass(this.context,n).toSeconds();return super.setValueAtTime(e,c),this}linearRampToValueAtTime(e,n){const c=new TransportTimeClass(this.context,n).toSeconds();return super.linearRampToValueAtTime(e,c),this}exponentialRampToValueAtTime(e,n){const c=new TransportTimeClass(this.context,n).toSeconds();return super.exponentialRampToValueAtTime(e,c),this}setTargetAtTime(e,n,c){const h=new TransportTimeClass(this.context,n).toSeconds();return super.setTargetAtTime(e,h,c),this}cancelScheduledValues(e){const n=new TransportTimeClass(this.context,e).toSeconds();return super.cancelScheduledValues(n),this}setValueCurveAtTime(e,n,c,h){const u=new TransportTimeClass(this.context,n).toSeconds();return c=this.toSeconds(c),super.setValueCurveAtTime(e,u,c,h),this}cancelAndHoldAtTime(e){const n=new TransportTimeClass(this.context,e).toSeconds();return super.cancelAndHoldAtTime(n),this}setRampPoint(e){const n=new TransportTimeClass(this.context,e).toSeconds();return super.setRampPoint(n),this}exponentialRampTo(e,n,c){const h=new TransportTimeClass(this.context,c).toSeconds();return super.exponentialRampTo(e,n,h),this}linearRampTo(e,n,c){const h=new TransportTimeClass(this.context,c).toSeconds();return super.linearRampTo(e,n,h),this}targetRampTo(e,n,c){const h=new TransportTimeClass(this.context,c).toSeconds();return super.targetRampTo(e,n,h),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(isString(e))return e;{let c;for(c in EnvelopeCurves)if(EnvelopeCurves[c][n]===e)return c;return e}}_setCurve(e,n,c){if(isString(c)&&Reflect.has(EnvelopeCurves,c)){const h=EnvelopeCurves[c];isObject(h)?e!=="_decayCurve"&&(this[e]=h[n]):this[e]=h}else if(isArray(c)&&e!=="_decayCurve")this[e]=c;else throw new Error("Envelope: invalid curve: "+c)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){assert(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let h=this.toSeconds(this.attack);const u=this.toSeconds(this.decay),d=this.getValueAtTime(e);if(d>0){const m=1/h;h=(1-d)/m}if(h<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,h,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,h,e);else{this._sig.cancelAndHoldAtTime(e);let m=this._attackCurve;for(let g=1;g<m.length;g++)if(m[g-1]<=d&&d<=m[g]){m=this._attackCurve.slice(g),m[0]=d;break}this._sig.setValueCurveAtTime(m,e,h,n)}if(u&&this.sustain<1){const m=n*this.sustain,g=e+h;this.log("decay",g),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(m,u+g):this._sig.exponentialApproachValueAtTime(m,g,u)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const c=this.toSeconds(this.release);c<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,c,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,c,e):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,c,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,c=1){return n=this.toSeconds(n),this.triggerAttack(n,c),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,c=0){return connectSignal(this,e,n,c),this}asArray(e=1024){return __awaiter(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,c=new OfflineContext(1,n,this.context.sampleRate),h=this.toSeconds(this.attack)+this.toSeconds(this.decay),u=h+this.toSeconds(this.release),d=u*.1,m=u+d,g=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/m,decay:n*this.toSeconds(this.decay)/m,release:n*this.toSeconds(this.release)/m,context:c}));return g._sig.toDestination(),g.triggerAttackRelease(n*(h+d)/m,0),(yield c.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range$1(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let e,n;const c=[];for(e=0;e<128;e++)c[e]=Math.sin(e/(128-1)*(Math.PI/2));const h=[],u=6.4;for(e=0;e<128-1;e++){n=e/(128-1);const y=Math.sin(n*(Math.PI*2)*u-Math.PI/2)+1;h[e]=y/10+n*.83}h[128-1]=1;const d=[],m=5;for(e=0;e<128;e++)d[e]=Math.ceil(e/(128-1)*m)/m;const g=[];for(e=0;e<128;e++)n=e/(128-1),g[e]=.5*(1-Math.cos(Math.PI*n));const b=[];for(e=0;e<128;e++){n=e/(128-1);const y=Math.pow(n,3)*4+.2,w=Math.cos(y*Math.PI*2*n);b[e]=Math.abs(w*(1-n))}function O(y){const w=new Array(y.length);for(let S=0;S<y.length;S++)w[S]=1-y[S];return w}function v(y){return y.slice(0).reverse()}return{bounce:{In:O(b),Out:b},cosine:{In:c,Out:v(c)},exponential:"exponential",linear:"linear",ripple:{In:h,Out:O(h)},sine:{In:g,Out:O(g)},step:{In:d,Out:O(d)}}})();class Instrument extends ToneAudioNode{constructor(){super(optionsFromArguments(Instrument.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=optionsFromArguments(Instrument.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const c=this["_original_"+e]=this[e];this[e]=(...h)=>{const u=h[n],d=this.context.transport.schedule(m=>{h[n]=m,c.apply(this,h)},u);this._scheduledEvents.push(d)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,c,h){const u=this.toSeconds(c),d=this.toSeconds(n);return this.triggerAttack(e,u,h),this.triggerRelease(u+d),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const e=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(e,n,c=1){this.log("triggerAttack",e,n,c);const h=this.toSeconds(n);return this._triggerEnvelopeAttack(h,c),this.setNote(e,h),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const c=this.toSeconds(n),h=e instanceof FrequencyClass?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(c)>.05){const u=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(h,u,c)}else this.frequency.setValueAtTime(h,c);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){super(optionsFromArguments(Synth.getDefaults(),arguments)),this.name="Synth";const e=optionsFromArguments(Synth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const c=this.toSeconds(this.envelope.attack),h=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+c+h)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ModulationSynth extends Monophonic{constructor(){super(optionsFromArguments(ModulationSynth.getDefaults(),arguments)),this.name="ModulationSynth";const e=optionsFromArguments(ModulationSynth.getDefaults(),arguments);this._carrier=new Synth({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Synth({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Signal({context:this.context,units:"frequency"}),this.detune=new Signal({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Multiply({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new Gain({context:this.context,gain:0}),readOnly(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,n){this._carrier._triggerEnvelopeAttack(e,n),this._modulator._triggerEnvelopeAttack(e,n)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class AMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(AMSynth.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let d=0;d<e;d++){const g=Math.pow(d/e,2)*(2e4-20)+20;n[d]=g}const c=new Float32Array(e),h=new Float32Array(e),u=this.context.createBiquadFilter();return u.type=this.type,u.Q.value=this.Q.value,u.frequency.value=this.frequency.value,u.gain.value=this.gain.value,u.getFrequencyResponse(n,c,h),c}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){super(optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[];const e=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:e.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(c=>c.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=isNumber(e)?e:parseInt(e,10),c=[-12,-24,-48,-96];let h=c.indexOf(n);assert(h!==-1,`rolloff can only be ${c.join(", ")}`),h+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(u=>u.disconnect()),this._filters=new Array(h);for(let u=0;u<h;u++){const d=new BiquadFilter({context:this.context});d.type=this._type,this.frequency.connect(d.frequency),this.detune.connect(d.detune),this.Q.connect(d.Q),this.gain.connect(d.gain),this._filters[u]=d}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),c=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((u,d)=>c[d]*=u)}),n.dispose(),c}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class FrequencyEnvelope extends Envelope{constructor(){super(optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Pow({context:this.context,value:e.exponent}),this._scale=this.output=new Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const n=this.toFrequency(e);assertRange(n,0),this._baseFrequency=n,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class MonoSynth extends Monophonic{constructor(){super(optionsFromArguments(MonoSynth.getDefaults(),arguments)),this.name="MonoSynth";const e=optionsFromArguments(MonoSynth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Filter(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new FrequencyEnvelope(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new AmplitudeEnvelope(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),readOnly(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(omitFromObject(Filter.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),Object.keys(Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,n=1){if(this.envelope.triggerAttack(e,n),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const c=this.toSeconds(this.envelope.attack),h=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+c+h)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class DuoSynth extends Monophonic{constructor(){super(optionsFromArguments(DuoSynth.getDefaults(),arguments)),this.name="DuoSynth";const e=optionsFromArguments(DuoSynth.getDefaults(),arguments);this.voice0=new MonoSynth(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new MonoSynth(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new Multiply({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new LFO({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Gain({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Signal({context:this.context,units:"frequency",value:440}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),readOnly(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,n){this.voice0._triggerEnvelopeAttack(e,n),this.voice1._triggerEnvelopeAttack(e,n)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class FMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(FMSynth.getDefaults(),arguments)),this.name="FMSynth";const e=optionsFromArguments(FMSynth.getDefaults(),arguments);this.modulationIndex=new Multiply({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const inharmRatios=[1,1.483,1.932,2.546,2.63,3.897];class MetalSynth extends Monophonic{constructor(){super(optionsFromArguments(MetalSynth.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const e=optionsFromArguments(MetalSynth.getDefaults(),arguments);this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this.frequency=new Signal({context:this.context,units:"frequency"}),this._amplitude=new Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<inharmRatios.length;n++){const c=new FMOscillator({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):noOp,type:"square"});c.connect(this._highpass),this._oscillators[n]=c;const h=new Multiply({context:this.context,value:inharmRatios[n]});this._freqMultipliers[n]=h,this.frequency.chain(h,c.frequency),this.detune.connect(c.detune)}this._filterFreqScaler=new Scale({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Envelope({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(c=>c.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(c=>{c.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class MembraneSynth extends Synth{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const c=this.toSeconds(n),h=this.toFrequency(e instanceof FrequencyClass?e.toFrequency():e),u=h*this.octaves;return this.oscillator.frequency.setValueAtTime(u,c),this.oscillator.frequency.exponentialRampToValueAtTime(h,c+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range$1(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);class NoiseSynth extends Instrument{constructor(){super(optionsFromArguments(NoiseSynth.getDefaults(),arguments)),this.name="NoiseSynth";const e=optionsFromArguments(NoiseSynth.getDefaults(),arguments);this.noise=new Noise(Object.assign({context:this.context},e.noise)),this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(omitFromObject(Noise.getDefaults(),Object.keys(Source.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,c=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,c),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const workletContext=new Set;function addToWorklet(s){workletContext.add(s)}function registerProcessor(s,e){const n=`registerProcessor("${s}", ${e})`;workletContext.add(n)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const n=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),c=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(n,c).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(c,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class FeedbackCombFilter extends ToneAudioWorklet{constructor(){super(optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const e=optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.delayTime=new Param({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Param({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),readOnly(this,["resonance","delayTime"])}_audioWorkletName(){return workletName$1}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){connectSeries(this.input,e,this.output);const n=e.parameters.get("delayTime");this.delayTime.setParam(n);const c=e.parameters.get("feedback");this.resonance.setParam(c)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class OnePoleFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const e=optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,n=this.toFrequency(this._frequency),c=1/(2*Math.PI*n);if(this._type==="lowpass"){const h=1/(c*this.context.sampleRate),u=h-1;this._filter=this.context.createIIRFilter([h,0],[1,u])}else{const h=1/(c*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,h])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let u=0;u<e;u++){const m=Math.pow(u/e,2)*(2e4-20)+20;n[u]=m}const c=new Float32Array(e),h=new Float32Array(e);return this._filter.getFrequencyResponse(n,c,h),c}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LowpassCombFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const e=optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new FeedbackCombFilter({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new OnePoleFilter({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class PluckSynth extends Instrument{constructor(){super(optionsFromArguments(PluckSynth.getDefaults(),arguments)),this.name="PluckSynth";const e=optionsFromArguments(PluckSynth.getDefaults(),arguments);this._noise=new Noise({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new LowpassCombFilter({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return deepMerge(Instrument.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,n){const c=this.toFrequency(e);n=this.toSeconds(n);const h=1/c;return this._lfcf.delayTime.setValueAtTime(h,n),this._noise.start(n),this._noise.stop(n+h*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(n),this._lfcf.resonance.setValueAtTime(this.resonance,n),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class PolySynth extends Instrument{constructor(){super(optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const e=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);assert(!isNumber(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const c=this._voices.indexOf(this._dummyVoice);this._voices.splice(c,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{maxPolyphony:32,options:{},voice:Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(c=>c.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,c){e.forEach(h=>{const u=new MidiClass(this.context,h).toMidi(),d=this._getNextAvailableVoice();d&&(d.triggerAttack(h,n,c),this._activeVoices.push({midi:u,voice:d,released:!1}),this.log("triggerAttack",h,n))})}_triggerRelease(e,n){e.forEach(c=>{const h=new MidiClass(this.context,c).toMidi(),u=this._activeVoices.find(({midi:d,released:m})=>d===h&&!m);u&&(u.voice.triggerRelease(n),u.released=!0,this.log("triggerRelease",c,n))})}_scheduleEvent(e,n,c,h){assert(!this.disposed,"Synth was already disposed"),c<=this.now()?e==="attack"?this._triggerAttack(n,c,h):this._triggerRelease(n,c):this.context.setTimeout(()=>{this._scheduleEvent(e,n,c,h)},c-this.now())}triggerAttack(e,n,c){Array.isArray(e)||(e=[e]);const h=this.toSeconds(n);return this._scheduleEvent("attack",e,h,c),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const c=this.toSeconds(n);return this._scheduleEvent("release",e,c),this}triggerAttackRelease(e,n,c,h){const u=this.toSeconds(c);if(this.triggerAttack(e,u,h),isArray(n)){assert(isArray(e),"If the duration is an array, the notes must also be an array"),e=e;for(let d=0;d<e.length;d++){const m=n[Math.min(d,n.length-1)],g=this.toSeconds(m);assert(g>0,"The duration must be greater than 0"),this.triggerRelease(e[d],u+g)}}else{const d=this.toSeconds(n);assert(d>0,"The duration must be greater than 0"),this.triggerRelease(e,u+d)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){const n=omitFromObject(e,["onsilence","context"]);return this.options=deepMerge(this.options,n),this._voices.forEach(c=>c.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:c})=>{c.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument{constructor(){super(optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(c=>{const h=parseInt(c,10);if(assert(isNote(c)||isNumber(h)&&isFinite(h),`url key is neither a note or midi pitch: ${c}`),isNote(c)){const u=new FrequencyClass(this.context,c).toMidi();n[u]=e.urls[c]}else isNumber(h)&&isFinite(h)&&(n[h]=e.urls[h])}),this._buffers=new ToneAudioBuffers({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(e){let c=0;for(;c<96;){if(this._buffers.has(e+c))return-c;if(this._buffers.has(e-c))return c;c++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,c=1){return this.log("triggerAttack",e,n,c),Array.isArray(e)||(e=[e]),e.forEach(h=>{const u=ftomf(new FrequencyClass(this.context,h).toFrequency()),d=Math.round(u),m=u-d,g=this._findClosest(d),b=d-g,O=this._buffers.get(b),v=intervalToFrequencyRatio(g+m),y=new ToneBufferSource({url:O,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);y.start(n,0,O.duration/v,c),isArray(this._activeSources.get(d))||this._activeSources.set(d,[]),this._activeSources.get(d).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(d)){const w=this._activeSources.get(d),S=w.indexOf(y);S!==-1&&w.splice(S,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(c=>{const h=new FrequencyClass(this.context,c).toMidi();if(this._activeSources.has(h)&&this._activeSources.get(h).length){const u=this._activeSources.get(h);n=this.toSeconds(n),u.forEach(d=>{d.stop(n)}),this._activeSources.set(h,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(c=>{for(;c.length;)c.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,c,h=1){const u=this.toSeconds(c);return this.triggerAttack(e,u,h),isArray(n)?(assert(isArray(e),"notes must be an array when duration is array"),e.forEach((d,m)=>{const g=n[Math.min(m,n.length-1)];this.triggerRelease(d,u+this.toSeconds(g))})):this.triggerRelease(e,u+this.toSeconds(n)),this}add(e,n,c){if(assert(isNote(e)||isFinite(e),`note must be a pitch or midi: ${e}`),isNote(e)){const h=new FrequencyClass(this.context,e).toMidi();this._buffers.add(h,n,c)}else this._buffers.add(e,n,c);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}__decorate([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){super(optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0;const e=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let c;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const h=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber(this._loop)&&this._loop>1){c=1/0,isNumber(this._loop)&&(c=this._loop*this._getLoopDuration());const u=this._state.getAfter(h);u!==null&&(c=Math.min(c,u.time-h)),c!==1/0&&(this._state.setStateAtTime("stopped",h+c+1,{id:-1}),c=new TicksClass(this.context,c));const d=new TicksClass(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),d,new TicksClass(this.context,h),c)}else n.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,h))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const c=this._state.getBefore(n);let h=n;c!==null&&(h=c.time),this._rescheduleEvents(h)}return this}cancel(e){e=defaultArg(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,c=>{this.context.transport.clear(c.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let c=.02;isBoolean(this.humanize)||(c=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*c}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const c=this._getLoopDuration();return(e-n.time)%c/c}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){super(optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const e=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class Part extends ToneEvent{constructor(){super(optionsFromArguments(Part.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new StateTimeline("stopped"),this._events=new Set;const e=optionsFromArguments(Part.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(n=>{isArray(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(ToneEvent.getDefaults(),{events:[]})}start(e,n){const c=this.toTicks(e);if(this._state.getValueAtTime(c)!=="started"){n=defaultArg(n,this._loop?this._loopStart:0),this._loop?n=defaultArg(n,this._loopStart):n=defaultArg(n,0);const h=this.toTicks(n);this._state.add({id:-1,offset:h,state:"started",time:c}),this._forEach(u=>{this._startNote(u,c,h)})}return this}_startNote(e,n,c){n-=c,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<c&&(n+=this._getLoopDuration()),e.start(new TicksClass(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=c&&(e.loop=!1,e.start(new TicksClass(this.context,n))):e.startOffset>=c&&e.start(new TicksClass(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(c=>{c.stop(e)}),this}at(e,n){const c=new TransportTimeClass(this.context,e).toTicks(),h=new TicksClass(this.context,1).toSeconds(),u=this._events.values();let d=u.next();for(;!d.done;){const m=d.value;if(Math.abs(c-m.startOffset)<h)return isDefined(n)&&(m.value=n),m;d=u.next()}return isDefined(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const c=this.toTicks(e);let h;return n instanceof ToneEvent?(h=n,h.callback=this._tick.bind(this)):h=new ToneEvent({callback:this._tick.bind(this),context:this.context,value:n}),h.startOffset=c,h.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(h),this._restartEvent(h),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new TicksClass(this.context,n.time))})}remove(e,n){return isObject(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(c=>{c.startOffset===e&&(isUndef(n)||isDefined(n)&&c.value===n)&&(this._events.delete(c),c.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof Part?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(c=>{c[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*upPatternGen(s){let e=0;for(;e<s.length;)e=clampToArraySize(e,s),yield s[e],e++}function*downPatternGen(s){let e=s.length-1;for(;e>=0;)e=clampToArraySize(e,s),yield s[e],e--}function*infiniteGen(s,e){for(;;)yield*e(s)}function clampToArraySize(s,e){return clamp(s,0,e.length-1)}function*alternatingGenerator(s,e){let n=e?0:s.length-1;for(;;)n=clampToArraySize(n,s),yield s[n],e?(n++,n>=s.length-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*jumpUp(s){let e=0,n=0;for(;e<s.length;)e=clampToArraySize(e,s),yield s[e],n++,e+=n%2?2:-1}function*jumpDown(s){let e=s.length-1,n=0;for(;e>=0;)e=clampToArraySize(e,s),yield s[e],n++,e+=n%2?-2:1}function*randomGen(s){for(;;){const e=Math.floor(Math.random()*s.length);yield s[e]}}function*randomOnce(s){const e=[];for(let n=0;n<s.length;n++)e.push(n);for(;e.length>0;){const n=e.splice(Math.floor(e.length*Math.random()),1),c=clampToArraySize(n[0],s);yield s[c]}}function*randomWalk(s){let e=Math.floor(Math.random()*s.length);for(;;)e===0?e++:e===s.length-1||Math.random()<.5?e--:e++,yield s[e]}function*PatternGenerator(s,e="up",n=0){switch(assert(s.length>0,"The array must have more than one value in it"),e){case"up":yield*infiniteGen(s,upPatternGen);case"down":yield*infiniteGen(s,downPatternGen);case"upDown":yield*alternatingGenerator(s,!0);case"downUp":yield*alternatingGenerator(s,!1);case"alternateUp":yield*infiniteGen(s,jumpUp);case"alternateDown":yield*infiniteGen(s,jumpDown);case"random":yield*randomGen(s);case"randomOnce":yield*infiniteGen(s,randomOnce);case"randomWalk":yield*randomWalk(s)}}class Pattern extends Loop{constructor(){super(optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const e=optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"]);this.callback=e.callback,this._values=e.values,this._pattern=PatternGenerator(e.values,e.pattern),this._type=e.pattern}static getDefaults(){return Object.assign(Loop.getDefaults(),{pattern:"up",values:[],callback:noOp})}_tick(e){const n=this._pattern.next();this._value=n.value,this.callback(e,this._value)}get values(){return this._values}set values(e){this._values=e,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(e){this._type=e,this._pattern=PatternGenerator(this._values,this._type)}}class Sequence extends ToneEvent{constructor(){super(optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const e=optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(omitFromObject(ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,n){n!==null&&this.callback(e,n)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,n){return this._part.start(e,n&&this._indexTime(n)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(n,c)=>n[c],set:(n,c,h)=>(isString(c)&&isFinite(parseInt(c,10))&&isArray(h)?n[c]=this._createSequence(h):n[c]=h,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,n,c){e.forEach((h,u)=>{const d=u*n+c;if(isArray(h))this._rescheduleSequence(h,n/h.length,d);else{const m=new TicksClass(this.context,d,"i").toSeconds();this._part.add(m,h)}})}_indexTime(e){return new TicksClass(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,e===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const e=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:e.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(e){super(e),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(e){super(e),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){super(optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const e=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Filter(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class AutoPanner extends LFOEffect{constructor(){super(optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const e=optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"]);this._panner=new Panner({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Follower extends ToneAudioNode{constructor(){super(optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"])),this.name="Follower";const e=optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Abs({context:this.context}),this._lowpass=this.output=new OnePoleFilter({context:this.context,frequency:1/this.toSeconds(e.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=e.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class AutoWah extends Effect{constructor(){super(optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const e=optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Follower({context:this.context,smoothing:e.follower}),this._sweepRange=new ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new Gain({context:this.context}),this._bandpass=new Filter({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,readOnly(this,["gain","Q"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return gainToDb(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/dbToGain(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const e=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:e.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const e=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(e){connectSeries(this.input,e,this.output);const n=e.parameters.get("bits");this.bits.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Chebyshev extends Effect{constructor(){super(optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"])),this.name="Chebyshev";const e=optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(e,n,c){return c.has(n)||(n===0?c.set(n,0):n===1?c.set(n,e):c.set(n,2*e*this._getCoefficient(e,n-1,c)-this._getCoefficient(e,n-2,c))),c.get(n)}get order(){return this._order}set order(e){this._order=e,this._shaper.setMap(n=>this._getCoefficient(n,e,new Map))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Split extends ToneAudioNode{constructor(){super(optionsFromArguments(Split.getDefaults(),arguments,["channels"])),this.name="Split";const e=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){super(optionsFromArguments(Merge.getDefaults(),arguments,["channels"])),this.name="Merge";const e=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(e){super(e),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),connectSeries(...e),connect(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),connectSeries(...e),connect(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(e){super(e),this.feedback=new Signal({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){super(optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const e=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){super(optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"])),this.name="Distortion";const e=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,c=Math.PI/180;this._shaper.setMap(h=>Math.abs(h)<.001?0:(3+n)*h*20*c/(Math.PI+n*Math.abs(h)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){super(optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const e=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Delay({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class PhaseShiftAllpass extends ToneAudioNode{constructor(e){super(e),this.name="PhaseShiftAllpass",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.offset90=new Gain({context:this.context});const n=[.6923878,.9360654322959,.988229522686,.9987488452737],c=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(n),this._bank1=this._createAllPassFilterBank(c),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),connectSeries(this.input,...this._bank0,this._oneSampleDelay,this.output),connectSeries(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(e){return e.map(c=>{const h=[[c*c,0,-1],[1,0,-(c*c)]];return this.context.createIIRFilter(h[0],h[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(e=>e.disconnect()),this._bank1.forEach(e=>e.disconnect()),this._oneSampleDelay.disconnect(),this}}class FrequencyShifter extends Effect{constructor(){super(optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const e=optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"]);this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Multiply({context:this.context}),this._cosineMultiply=new Multiply({context:this.context}),this._negate=new Negate({context:this.context}),this._add=new Add({context:this.context}),this._phaseShifter=new PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const n=this.immediate();this._sine.start(n),this._cosine.start(n)}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const combFilterTunings=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],allpassFilterFrequencies=[225,556,441,341];class Freeverb extends StereoEffect{constructor(){super(optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const e=optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new Signal({context:this.context,value:e.roomSize,units:"normalRange"}),this._allpassFiltersL=allpassFilterFrequencies.map(n=>{const c=this.context.createBiquadFilter();return c.type="allpass",c.frequency.value=n,c}),this._allpassFiltersR=allpassFilterFrequencies.map(n=>{const c=this.context.createBiquadFilter();return c.type="allpass",c.frequency.value=n,c}),this._combFilters=combFilterTunings.map((n,c)=>{const h=new LowpassCombFilter({context:this.context,dampening:e.dampening,delayTime:n});return c<combFilterTunings.length/2?this.connectEffectLeft(h,...this._allpassFiltersL):this.connectEffectRight(h,...this._allpassFiltersR),this.roomSize.connect(h.resonance),h}),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(e){this._combFilters.forEach(n=>n.dampening=e)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(e=>e.disconnect()),this._allpassFiltersR.forEach(e=>e.disconnect()),this._combFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this}}const combFilterDelayTimes=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],combFilterResonances=[.773,.802,.753,.733],allpassFilterFreqs=[347,113,37];class JCReverb extends StereoEffect{constructor(){super(optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const e=optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"]);this.roomSize=new Signal({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=allpassFilterFreqs.map(n=>{const c=this.context.createBiquadFilter();return c.type="allpass",c.frequency.value=n,c}),this._feedbackCombFilters=combFilterDelayTimes.map((n,c)=>{const h=new FeedbackCombFilter({context:this.context,delayTime:n});return this._scaleRoomSize.connect(h.resonance),h.resonance.value=combFilterResonances[c],c<combFilterDelayTimes.length/2?this.connectEffectLeft(...this._allpassFilters,h):this.connectEffectRight(...this._allpassFilters,h),h}),this.roomSize.connect(this._scaleRoomSize),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){super(optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const e=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){super(optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const e=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=intervalToFrequencyRatio(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){super(optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const e=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new Signal({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),readOnly(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,n){const c=[];for(let h=0;h<e;h++){const u=this.context.createBiquadFilter();u.type="allpass",this.Q.connect(u.Q),n.connect(u.frequency),c.push(u)}return c}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const n=this._baseFrequency*Math.pow(2,e);this._lfoL.max=n,this._lfoR.max=n}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){super(optionsFromArguments(Reverb.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),assertRange(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),assertRange(e,0),this._preDelay=e,this.generate()}generate(){return __awaiter(this,void 0,void 0,function*(){const e=this.ready,n=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),c=new Noise({context:n}),h=new Noise({context:n}),u=new Merge({context:n});c.connect(u,0,0),h.connect(u,0,1);const d=new Gain({context:n}).toDestination();u.connect(d),c.start(0),h.start(0),d.gain.setValueAtTime(0,0),d.gain.setValueAtTime(1,this._preDelay),d.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const m=n.render();return this.ready=m.then(noOp),yield e,this._convolver.buffer=(yield m).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class MidSideSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideSplit.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Split({channels:2,context:this.context}),this._midAdd=new Add({context:this.context}),this.mid=new Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Subtract({context:this.context}),this.side=new Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class MidSideMerge extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideMerge.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Gain({context:this.context}),this.side=new Gain({context:this.context}),this._left=new Add({context:this.context}),this._leftMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new Subtract({context:this.context}),this._rightMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class MidSideEffect extends Effect{constructor(e){super(e),this.name="MidSideEffect",this._midSideMerge=new MidSideMerge({context:this.context}),this._midSideSplit=new MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...e){this._midSend.chain(...e,this._midReturn)}connectEffectSide(...e){this._sideSend.chain(...e,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class StereoWidener extends MidSideEffect{constructor(){super(optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"])),this.name="StereoWidener";const e=optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"]);this.width=new Signal({context:this.context,value:e.width,units:"normalRange"}),readOnly(this,["width"]),this._twoTimesWidthMid=new Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new Multiply({context:this.context,value:2}),this._midMult=new Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),connect(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tremolo extends StereoEffect{constructor(){super(optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const e=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new LFO({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:e.depth,units:"normalRange"}),readOnly(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){super(optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const e=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new LFO({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,readOnly(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Analyser extends ToneAudioNode{constructor(){super(optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const e=optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Gain({context:this.context}),this._split=new Split({context:this.context,channels:e.channels}),this.input.connect(this._split),assertRange(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const c=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(c):this._type==="waveform"&&e.getFloatTimeDomainData(c)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,c)=>{n.fftSize=e*2,this._buffers[c]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){assert(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class MeterBase extends ToneAudioNode{constructor(){super(optionsFromArguments(MeterBase.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Meter extends MeterBase{constructor(){super(optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const e=optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform",channels:e.channels}),this.smoothing=e.smoothing,this.normalRange=e.normalRange}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return warn("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),c=(this.channels===1?[e]:e).map(h=>{const u=h.reduce((m,g)=>m+g*g,0),d=Math.sqrt(u/h.length);return this._rms=Math.max(d,this._rms*this.smoothing),this.normalRange?this._rms:gainToDb(this._rms)});return this.channels===1?c[0]:c}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class FFT extends MeterBase{constructor(){super(optionsFromArguments(FFT.getDefaults(),arguments,["size"])),this.name="FFT";const e=optionsFromArguments(FFT.getDefaults(),arguments,["size"]);this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(n=>this.normalRange?dbToGain(n):n)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return assert(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(this.size*2)}}class DCMeter extends MeterBase{constructor(){super(optionsFromArguments(DCMeter.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Waveform extends MeterBase{constructor(){super(optionsFromArguments(Waveform.getDefaults(),arguments,["size"])),this.name="Waveform";const e=optionsFromArguments(Waveform.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=e.size}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(e){this._analyser.size=e}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const e=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){super(optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:e.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Channel.buses.has(e)||Channel.buses.set(e,new Gain({context:this.context})),Channel.buses.get(e)}send(e,n=0){const c=this._getBus(e),h=new Gain({context:this.context,units:"decibels",gain:n});return this.connect(h),h.connect(c),h}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Mono extends ToneAudioNode{constructor(){super(optionsFromArguments(Mono.getDefaults(),arguments)),this.name="Mono",this.input=new Gain({context:this.context}),this._merge=this.output=new Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class MultibandSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const e=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new Signal({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Listener$1 extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(s=>{s.listener=new Listener$1({context:s})});onContextClose(s=>{s.listener.dispose()});class Panner3D extends ToneAudioNode{constructor(){super(optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const e=optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=e.panningModel,this.maxDistance=e.maxDistance,this.distanceModel=e.distanceModel,this.coneOuterGain=e.coneOuterGain,this.coneOuterAngle=e.coneOuterAngle,this.coneInnerAngle=e.coneInnerAngle,this.refDistance=e.refDistance,this.rolloffFactor=e.rolloffFactor,this.positionX=new Param({context:this.context,param:this._panner.positionX,value:e.positionX}),this.positionY=new Param({context:this.context,param:this._panner.positionY,value:e.positionY}),this.positionZ=new Param({context:this.context,param:this._panner.positionZ,value:e.positionZ}),this.orientationX=new Param({context:this.context,param:this._panner.orientationX,value:e.orientationX}),this.orientationY=new Param({context:this.context,param:this._panner.orientationY,value:e.orientationY}),this.orientationZ=new Param({context:this.context,param:this._panner.orientationZ,value:e.orientationZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,n,c){return this.positionX.value=e,this.positionY.value=n,this.positionZ.value=c,this}setOrientation(e,n,c){return this.orientationX.value=e,this.orientationY.value=n,this.orientationZ.value=c,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){super(optionsFromArguments(Recorder.getDefaults(),arguments)),this.name="Recorder";const e=optionsFromArguments(Recorder.getDefaults(),arguments);this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const c=()=>{this._recorder.removeEventListener("start",c,!1),n()};this._recorder.addEventListener("start",c,!1)});return this._recorder.start(),yield e})}stop(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const c=h=>{this._recorder.removeEventListener("dataavailable",c,!1),n(h.data)};this._recorder.addEventListener("dataavailable",c,!1)});return this._recorder.stop(),yield e})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Compressor extends ToneAudioNode{constructor(){super(optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const e=optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Gate extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const e=optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Follower({context:this.context,smoothing:e.smoothing}),this._gt=new GreaterThan({context:this.context,value:dbToGain(e.threshold)}),this.input=new Gain({context:this.context}),this._gate=this.output=new Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return gainToDb(this._gt.value)}set threshold(e){this._gt.value=dbToGain(e)}get smoothing(){return this._follower.smoothing}set smoothing(e){this._follower.smoothing=e}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const e=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class MidSideCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MidSideCompressor.getDefaults(),arguments))),this.name="MidSideCompressor";const e=optionsFromArguments(MidSideCompressor.getDefaults(),arguments);this._midSideSplit=this.input=new MidSideSplit({context:this.context}),this._midSideMerge=this.output=new MidSideMerge({context:this.context}),this.mid=new Compressor(Object.assign(e.mid,{context:this.context})),this.side=new Compressor(Object.assign(e.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),readOnly(this,["mid","side"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class MultibandCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MultibandCompressor.getDefaults(),arguments))),this.name="MultibandCompressor";const e=optionsFromArguments(MultibandCompressor.getDefaults(),arguments);this._splitter=this.input=new MultibandSplit({context:this.context,lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Gain({context:this.context}),this.low=new Compressor(Object.assign(e.low,{context:this.context})),this.mid=new Compressor(Object.assign(e.mid,{context:this.context})),this.high=new Compressor(Object.assign(e.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){super(optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[];const e=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Convolver extends ToneAudioNode{constructor(){super(optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const e=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer(e.url,n=>{this.buffer=n,e.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(e){return __awaiter(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(e)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const n=this._buffer.get();this._convolver.buffer=n||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}function immediate(){return getContext().immediate()}const Transport=getContext().transport;function getTransport(){return getContext().transport}const Destination=getContext().destination,Master=getContext().destination;function getDestination(){return getContext().destination}const Listener=getContext().listener;function getListener(){return getContext().listener}const Draw=getContext().draw;function getDraw(){return getContext().draw}const context=getContext();function loaded(){return ToneAudioBuffer.loaded()}const Buffer$1=ToneAudioBuffer,Buffers=ToneAudioBuffers,BufferSource=ToneBufferSource;var Tone=Object.freeze(Object.defineProperty({__proto__:null,now,immediate,Transport,getTransport,Destination,Master,getDestination,Listener,getListener,Draw,getDraw,context,loaded,Buffer:Buffer$1,Buffers,BufferSource,getContext,setContext,start,supported:isSupported,dbToGain,gainToDb,intervalToFrequencyRatio,ftom,mtof,optionsFromArguments,defaultArg,Clock,Context,BaseContext,Delay,Gain,Offline,OfflineContext,Param,ToneAudioBuffer,ToneAudioBuffers,ToneAudioNode,connectSeries,connect,disconnect,FrequencyClass,Frequency,MidiClass,Midi:Midi$1,TimeClass,Time,TicksClass,Ticks,TransportTimeClass,TransportTime,Emitter,IntervalTimeline,StateTimeline,Timeline,isUndef,isDefined,isFunction,isNumber,isObject,isBoolean,isArray,isString,isNote,Unit:Units,debug:Debug,Noise,UserMedia,Oscillator,AMOscillator,FMOscillator,PulseOscillator,FatOscillator,PWMOscillator,OmniOscillator,ToneOscillatorNode,LFO,ToneBufferSource,Player,Players,GrainPlayer,Add,Abs,AudioToGain,GainToAudio,GreaterThan,GreaterThanZero,Multiply,Negate,Pow,Signal,connectSignal,Scale,ScaleExp,Subtract,SyncedSignal,WaveShaper,Zero,AMSynth,DuoSynth,FMSynth,MetalSynth,MembraneSynth,MonoSynth,NoiseSynth,PluckSynth,PolySynth,Sampler,Synth,Loop,Part,Pattern,Sequence,ToneEvent,AutoFilter,AutoPanner,AutoWah,BitCrusher,Chebyshev,Chorus,Distortion,FeedbackDelay,FrequencyShifter,Freeverb,JCReverb,PingPongDelay,PitchShift,Phaser,Reverb,StereoWidener,Tremolo,Vibrato,Analyser,Meter,FFT,DCMeter,Waveform,Follower,Channel,CrossFade,Merge,MidSideMerge,MidSideSplit,Mono,MultibandSplit,Panner,Panner3D,PanVol,Recorder,Solo,Split,Volume,Compressor,Gate,Limiter,MidSideCompressor,MultibandCompressor,AmplitudeEnvelope,Envelope,FrequencyEnvelope,EQ3,Filter,OnePoleFilter,FeedbackCombFilter,LowpassCombFilter,Convolver,BiquadFilter,version},Symbol.toStringTag,{value:"Module"}));class ToneSynth{constructor(){window.Tone=Tone;const e=new MembraneSynth().toDestination();this.synth=e}start(){start()}trigger(e){console.log(e),this.synth.triggerAttackRelease("C2","8n",now(),e)}}var colors=[[245,53,5],[10,138,20],[105,8,161],[250,215,17],[17,259,207]];window.cc=Array(128).fill(0);class Midi extends nanobus$1{constructor(){super(),this.connect(),this.inputs=[],this.outputs=[],this.currDevice=null,this._cc=[]}initDevices(e){this.inputs=[],this.outputs=[];const n=e.inputs.values();for(let u=n.next();u&&!u.done;u=n.next())this.inputs.push(u.value);const c=e.outputs.values();for(let u=c.next();u&&!u.done;u=c.next())this.outputs.push(u.value);this._cc=this.outputs.map(()=>new Array(100).fill(0).map(()=>new Array(127).fill(0))),this.emit("device update",this.inputs,this.outputs),this.outputs.length>0&&(this.currDevice=0);const h=(u,d)=>{var m=u.data,g=m[1],b=(m[2]+1)/128;window.cc[g]=b,g===6&&(window.a.settings[0].cutoff=b*40),g===7&&(window.a.settings[1].cutoff=b*40),g===22&&(window.a.settings[0].scale=b*20),g===23&&(window.a.settings[1].scale=b*20)};for(const u of this.inputs)u.addEventListener("midimessage",d=>h(d));console.log("midi outputs",this.outputs)}select(e){this.outputs.length>e&&(this.currDevice=e)}note(e=60,n=100,c=100,h=0){if(this.currDevice!==null){const m=144+h,g=128+h,b=[m,e,n],O=[g,e,n];this.outputs[this.currDevice].send(b),this.outputs[this.currDevice].send(O,performance.now()+c)}}cc(e=0,n=100,c=0){if(this.currDevice!==null){const h=Math.max(0,Math.min(n,127));this._cc[this.currDevice][c][e]!==h&&(this.outputs[this.currDevice].send([176+c,e,h]),this._cc[this.currDevice][c][e]=h)}}connect(){navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(e=>{this.initDevices(e)},e=>console.log("Something went wrong",e)):console.warn("this browser does not accept midi")}}const fillStr=(s,e)=>Array(Math.abs(e)+1).join(s);function deprecate(s,e,n){return function(...c){return console.warn(`${s} is deprecated. Use ${e}.`),n.apply(this,c)}}function isNamed(s){return s!==null&&typeof s=="object"&&typeof s.name=="string"}function isPitch(s){return s!==null&&typeof s=="object"&&typeof s.step=="number"&&typeof s.alt=="number"}const FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(s=>Math.floor(s*7/12));function encode(s){const{step:e,alt:n,oct:c,dir:h=1}=s,u=FIFTHS[e]+7*n;if(c===void 0)return[h*u];const d=c-STEPS_TO_OCTS[e]-4*n;return[h*u,h*d]}const FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function decode(s){const[e,n,c]=s,h=FIFTHS_TO_STEPS[unaltered(e)],u=Math.floor((e+1)/7);if(n===void 0)return{step:h,alt:u,dir:c};const d=n+4*u+STEPS_TO_OCTS[h];return{step:h,alt:u,oct:d,dir:c}}function unaltered(s){const e=(s+1)%7;return e<0?7+e:e}const NoNote={empty:!0,name:"",pc:"",acc:""},cache$1=new Map,stepToLetter=s=>"CDEFGAB".charAt(s),altToAcc=s=>s<0?fillStr("b",-s):fillStr("#",s),accToAlt=s=>s[0]==="b"?-s.length:s.length;function note(s){const e=cache$1.get(s);if(e)return e;const n=typeof s=="string"?parse$1(s):isPitch(s)?note(pitchName$1(s)):isNamed(s)?note(s.name):NoNote;return cache$1.set(s,n),n}const REGEX$1=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(s){const e=REGEX$1.exec(s);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function coordToNote(s){return note(decode(s))}const mod=(s,e)=>(s%e+e)%e,SEMI=[0,2,4,5,7,9,11];function parse$1(s){const e=tokenizeNote(s);if(e[0]===""||e[3]!=="")return NoNote;const n=e[0],c=e[1],h=e[2],u=(n.charCodeAt(0)+3)%7,d=accToAlt(c),m=h.length?+h:void 0,g=encode({step:u,alt:d,oct:m}),b=n+c+h,O=n+c,v=(SEMI[u]+d+120)%12,y=m===void 0?mod(SEMI[u]+d,12)-12*99:SEMI[u]+d+12*(m+1),w=y>=0&&y<=127?y:null,S=m===void 0?null:Math.pow(2,(y-69)/12)*440;return{empty:!1,acc:c,alt:d,chroma:v,coord:g,freq:S,height:y,letter:n,midi:w,name:b,oct:m,pc:O,step:u}}function pitchName$1(s){const{step:e,alt:n,oct:c}=s,h=stepToLetter(e);if(!h)return"";const u=h+altToAcc(n);return c||c===0?u+c:u}const NoInterval={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$2=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(s){const e=REGEX$2.exec(`${s}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}const cache$2={};function interval(s){return typeof s=="string"?cache$2[s]||(cache$2[s]=parse(s)):isPitch(s)?interval(pitchName(s)):isNamed(s)?interval(s.name):NoInterval}const SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse(s){const e=tokenizeInterval(s);if(e[0]==="")return NoInterval;const n=+e[0],c=e[1],h=(Math.abs(n)-1)%7,u=TYPES[h];if(u==="M"&&c==="P")return NoInterval;const d=u==="M"?"majorable":"perfectable",m=""+n+c,g=n<0?-1:1,b=n===8||n===-8?n:g*(h+1),O=qToAlt(d,c),v=Math.floor((Math.abs(n)-1)/7),y=g*(SIZES[h]+O+12*v),w=(g*(SIZES[h]+O)%12+12)%12,S=encode({step:h,alt:O,oct:v,dir:g});return{empty:!1,name:m,num:n,q:c,step:h,alt:O,dir:g,type:d,simple:b,semitones:y,chroma:w,coord:S,oct:v}}function qToAlt(s,e){return e==="M"&&s==="majorable"||e==="P"&&s==="perfectable"?0:e==="m"&&s==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(s==="perfectable"?e.length:e.length+1):0}function pitchName(s){const{step:e,alt:n,oct:c=0,dir:h}=s;if(!h)return"";const u=e+1+7*c,d=u===0?e+1:u,m=h<0?"-":"",g=TYPES[e]==="M"?"majorable":"perfectable";return m+d+altToQ(g,n)}function altToQ(s,e){return e===0?s==="majorable"?"M":"P":e===-1&&s==="majorable"?"m":e>0?fillStr("A",e):fillStr("d",s==="perfectable"?e:e+1)}function transpose(s,e){const n=note(s),c=interval(e);if(n.empty||c.empty)return"";const h=n.coord,u=c.coord,d=h.length===1?[h[0]+u[0]]:[h[0]+u[0],h[1]+u[1]];return coordToNote(d).name}function ascR(s,e){const n=[];for(;e--;n[e]=e+s);return n}function descR(s,e){const n=[];for(;e--;n[e]=s-e);return n}function range(s,e){return s<e?ascR(s,e-s+1):descR(s,s-e+1)}function rotate(s,e){const n=e.length,c=(s%n+n)%n;return e.slice(c,n).concat(e.slice(0,c))}function compact(s){return s.filter(e=>e===0||e)}const EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=s=>Number(s).toString(2),chromaToNumber=s=>parseInt(s,2),REGEX=/^[01]{12}$/;function isChroma(s){return REGEX.test(s)}const isPcsetNum=s=>typeof s=="number"&&s>=0&&s<=4095,isPcset=s=>s&&isChroma(s.chroma),cache={[EmptyPcset.chroma]:EmptyPcset};function get$4(s){const e=isChroma(s)?s:isPcsetNum(s)?setNumToChroma(s):Array.isArray(s)?listToChroma(s):isPcset(s)?s.chroma:EmptyPcset.chroma;return cache[e]=cache[e]||chromaToPcset(e)}const IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(s){const e=[];for(let n=0;n<12;n++)s.charAt(n)==="1"&&e.push(IVLS[n]);return e}function modes$1(s,e=!0){const c=get$4(s).chroma.split("");return compact(c.map((h,u)=>{const d=rotate(u,c);return e&&d[0]==="0"?null:d.join("")}))}function isSubsetOf(s){const e=get$4(s).setNum;return n=>{const c=get$4(n).setNum;return e&&e!==c&&(c&e)===c}}function isSupersetOf(s){const e=get$4(s).setNum;return n=>{const c=get$4(n).setNum;return e&&e!==c&&(c|e)===c}}function chromaRotations(s){const e=s.split("");return e.map((n,c)=>rotate(c,e).join(""))}function chromaToPcset(s){const e=chromaToNumber(s),n=chromaRotations(s).map(chromaToNumber).filter(u=>u>=2048).sort()[0],c=setNumToChroma(n),h=chromaToIntervals(s);return{empty:!1,name:"",setNum:e,chroma:s,normalized:c,intervals:h}}function listToChroma(s){if(s.length===0)return EmptyPcset.chroma;let e;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let c=0;c<s.length;c++)e=note(s[c]),e.empty&&(e=interval(s[c])),e.empty||(n[e.chroma]=1);return n.join("")}const CHORDS=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]];({...EmptyPcset});let dictionary$1=[],index$4={};function all$1(){return dictionary$1.slice()}function add$1(s,e,n){const c=getQuality(s),h={...get$4(s),name:n||"",quality:c,intervals:s,aliases:e};dictionary$1.push(h),h.name&&(index$4[h.name]=h),index$4[h.setNum]=h,index$4[h.chroma]=h,h.aliases.forEach(u=>addAlias$1(h,u))}function addAlias$1(s,e){index$4[e]=s}function getQuality(s){const e=n=>s.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}CHORDS.forEach(([s,e,n])=>add$1(s.split(" "),n.split(" "),e));dictionary$1.sort((s,e)=>s.setNum-e.setNum);const SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],NoScaleType={...EmptyPcset,intervals:[],aliases:[]};let dictionary=[],index$3={};function names$1(){return dictionary.map(s=>s.name)}function get$3(s){return index$3[s]||NoScaleType}function all(){return dictionary.slice()}function add(s,e,n=[]){const c={...get$4(s),name:e,intervals:s,aliases:n};return dictionary.push(c),index$3[c.name]=c,index$3[c.setNum]=c,index$3[c.chroma]=c,c.aliases.forEach(h=>addAlias(c,h)),c}function addAlias(s,e){index$3[e]=s}SCALES.forEach(([s,e,...n])=>add(s.split(" "),e,n));function isMidi(s){return+s>=0&&+s<=127}function toMidi(s){if(isMidi(s))return+s;const e=note(s);return e.empty?null:e.midi}function midiToFreq(s,e=440){return Math.pow(2,(s-69)/12)*e}const L2=Math.log(2),L440=Math.log(440);function freqToMidi(s){const e=12*(Math.log(s)-L440)/L2+69;return Math.round(e*100)/100}const SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(s,e={}){if(isNaN(s)||s===-1/0||s===1/0)return"";s=Math.round(s);const c=(e.sharps===!0?SHARPS:FLATS)[s%12];if(e.pitchClass)return c;const h=Math.floor(s/12)-1;return c+h}var index$2={isMidi,toMidi,midiToFreq,midiToNoteName,freqToMidi};const toName=s=>s.name,onlyNotes=s=>s.map(note).filter(e=>!e.empty),get$2=note;function fromMidi(s){return midiToNoteName(s)}const ascending=(s,e)=>s.height-e.height;function sortedNames(s,e){return e=e||ascending,onlyNotes(s).sort(e).map(toName)}function sortedUniqNames(s){return sortedNames(s,ascending).filter((e,n,c)=>n===0||e!==c[n-1])}function enharmonic(s,e){const n=get$2(s);if(n.empty)return"";const c=get$2(e||midiToNoteName(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(c.empty||c.chroma!==n.chroma)return"";if(n.oct===void 0)return c.pc;const h=n.chroma-n.alt,u=c.chroma-c.alt,d=h>11||u<0?-1:h<0||u>11?1:0,m=n.oct+d;return c.pc+m}Object.freeze([]);const MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$1={};modes.forEach(s=>{index$1[s.name]=s,s.aliases.forEach(e=>{index$1[e]=s})});function get$1(s){return typeof s=="string"?index$1[s.toLowerCase()]||NoMode:s&&s.name?get$1(s.name):NoMode}function toMode(s){const[e,n,c,h,u,d,m]=s,g=m?[m]:[],b=Number(n).toString(2),O=get$3(h).intervals;return{empty:!1,intervals:O,modeNum:e,chroma:b,normalized:b,name:h,setNum:n,alt:c,triad:u,seventh:d,aliases:g}}function chords(s){return(e,n)=>{const c=get$1(e);if(c.empty)return[];const h=rotate(c.modeNum,s),u=c.intervals.map(d=>transpose(n,d));return h.map((d,m)=>u[m]+d)}}chords(MODES.map(s=>s[4]));chords(MODES.map(s=>s[5]));const NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(s){if(typeof s!="string")return["",""];const e=s.indexOf(" "),n=note(s.substring(0,e));if(n.empty){const h=note(s);return h.empty?["",s]:[h.name,""]}const c=s.substring(n.name.length+1);return[n.name,c.length?c:""]}const names=names$1;function get(s){const e=Array.isArray(s)?s:tokenize(s),n=note(e[0]).name,c=get$3(e[1]);if(c.empty)return NoScale;const h=c.name,u=n?c.intervals.map(m=>transpose(n,m)):[],d=n?n+" "+h:h;return{...c,name:d,type:h,tonic:n,notes:u}}const scale$1=deprecate("Scale.scale","Scale.get",get);function scaleChords(s){const e=get(s),n=isSubsetOf(e.chroma);return all$1().filter(c=>n(c.chroma)).map(c=>c.aliases[0])}function extended(s){const e=get(s),n=isSupersetOf(e.chroma);return all().filter(c=>n(c.chroma)).map(c=>c.name)}function reduced(s){const e=isSubsetOf(get(s).chroma);return all().filter(n=>e(n.chroma)).map(n=>n.name)}function scaleNotes(s){const e=s.map(h=>note(h).pc).filter(h=>h),n=e[0],c=sortedUniqNames(e);return rotate(c.indexOf(n),c)}function modeNames(s){const e=get(s);if(e.empty)return[];const n=e.tonic?e.notes:e.intervals;return modes$1(e.chroma).map((c,h)=>{const u=get(c).name;return u?[n[h],u]:["",""]}).filter(c=>c[0])}function getNoteNameOf(s){const e=Array.isArray(s)?scaleNotes(s):get(s).notes,n=e.map(c=>note(c).chroma);return c=>{const h=note(typeof c=="number"?fromMidi(c):c),u=h.height;if(u===void 0)return;const d=u%12,m=n.indexOf(d);if(m!==-1)return enharmonic(h.name,e[m])}}function rangeOf(s){const e=getNoteNameOf(s);return(n,c)=>{const h=note(n).height,u=note(c).height;return h===void 0||u===void 0?[]:range(h,u).map(e).filter(d=>d)}}var index={get,names,extended,modeNames,reduced,scaleChords,scaleNotes,tokenize,rangeOf,scale:scale$1};index.names();index.get("A minor pentatonic").notes.map(s=>index$2.toMidi(`${s}3`));var scale=(s="C2",e="pentatonic",n=1)=>{const c=index.get(`${s} ${e}`).notes.map(u=>index$2.toMidi(u));return new Array(n).fill(0).map((u,d)=>c.map(m=>m+12*d)).flat()};const colorString=s=>`rgb(${s[0]}, ${s[1]}, ${s[2]})`;class CanvasRenderer{constructor({width:e,height:n}){const c=document.createElement("canvas");c.width=e,c.height=n,c.style.position="absolute",this.lineCanvas=c,this.lineCtx=c.getContext("2d"),this.lineCtx.strokeStyle="#ed382b",this.lineCtx.fillStyle="#ed382b",this.lineCtx.lineWidth=3,this.width=e,this.height=n;const h=document.createElement("canvas");h.width=e,h.height=n,h.style.position="absolute",this.pointCanvas=h,this.pointCtx=h.getContext("2d"),this.pointCtx.strokeStyle="#ed382b",this.pointCtx.fillStyle="#ed382b",this.pointCtx.lineWidth=2,this.points=[],window.strokeCanvas=c,window.markerCanvas=h,this.el=document.createElement("div"),this.el.appendChild(c),this.el.appendChild(h),this.el.style.position="absolute",this.el.style.width=`${e}px`,this.el.style.height=`${n}px`}addPoint(e){const{x:n,y:c,color:h,_timeToNext:u}=e,d=Object.assign({},{x:n,y:c,color:h,time:u*2,length:u});this.points.push(d)}drawLine(e){this.lineCtx.save(),this.lineCtx.fillStyle=colorString(e.strokeParams.color),this.lineCtx.globalCompositeOperation=e.strokeParams.blending,this.lineCtx.globalAlpha=e.strokeParams.alpha,e.strokes.forEach(n=>{n.points.length>1&&this.lineCtx.fill(n.stroke)}),this.lineCtx.fillStyle="rgba(0, 255, 0, 0.4)",this.lineCtx.restore()}drawMarker(e){this.pointCtx.save();const{width:n,height:c,lineWidth:h,alpha:u,blending:d,lineColor:m,color:g}=e.markerParams,b=this.pointCtx;b.fillStyle=colorString(g);const O=e.marker,v=n,y=c;b.globalCompositeOperation=d,b.globalAlpha=u,b.fillRect(O.x-v/2,O.y-y/2,v,y),h>0&&(b.strokeStyle=colorString(m),b.lineWidth=h,b.strokeRect(O.x-v/2,O.y-y/2,v,y)),this.pointCtx.restore()}update(e){}clearLines(){this.lineCtx.clearRect(0,0,this.lineCanvas.width,this.lineCanvas.height)}clear(){this.pointCtx.fillStyle="rgba(0, 0, 0, 0.05)",this.pointCtx.clearRect(0,0,this.pointCanvas.width,this.pointCanvas.height)}}class BaseCanvas{constructor(e){this.ctx=e.getContext("2d"),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=16,this.prevPoint=null}startRecording(){}addPoint(e){this.prevPoint!==null&&(this.ctx.beginPath(),this.ctx.moveTo(this.prevPoint.x,this.prevPoint.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke()),this.prevPoint=e}stopRecording(){this.prevPoint=null}clear(){}}var startup=()=>{markerCanvas.style.mixBlendMode="difference",markerCanvas.style.opacity=0,strokeCanvas.style.opacity=0,solid(0,0,0,0).out(),bpm=60,s2.initCam(),src(s2).luma(.2,0).mask(shape(4,.99,0)).scale(.6).contrast().scrollX(-.1).scrollY(-.2).out(o1),s1.init({src:markerCanvas}),p0.setMarker({width:10,height:30,color:"black",lineColor:"white",lineWidth:4}),p1.setMarker({width:30,height:30,color:"black",lineColor:"white",lineWidth:()=>1+p0.x*4}),p2.setMarker({width:10,height:10,color:"yellow",lineColor:"blue",lineWidth:2}),p1.setStroke({size:30,thinning:0,smoothing:0,streamline:0,color:"green",simplify:10}),p3.setStroke({size:100,thinning:4,blending:"difference"}),p2.setStroke({size:150,thinning:4,blending:"difference",color:"blue"}),reverb.wet.value=0,delay.wet.value=0};const NUM_LINES=colors.length,notes=scale("A3","pentatonic",3);var pressedKeys={};window.notes=notes;window.quantize=(s=0,e=[])=>{const n=Math.max(0,Math.min(.9999999999,s));return e[Math.floor(n*e.length)]};window.choose=s=>s[Math.floor(Math.random()*s.length)];class DrawSynth{constructor(e,n,{container:c,width:h,height:u,input:d}={}){e.drawSynth=this;const m=document.createElement("canvas");m.width=h,m.height=u,m.style.position="absolute";const g=document.createElement("canvas");g.width=h,g.height=u,g.style.position="absolute",g.style.opacity=.1,this.baseCanvas=new BaseCanvas(g);let b=new CanvasRenderer({width:h,height:u});this.renderer=b,c.appendChild(g),c.appendChild(b.el),d.regl._gl,this.state=e,this.emit=n,this.midi=new Midi,this.multiRecord=!0,this.tone=new ToneSynth,window.drawSynth=this,window.notes=notes,window.midi=this.midi,s0.init({src:window.strokeCanvas}),s1.init({src:window.markerCanvas}),speed=.4,solid().out();const O=(v,y)=>{};this.lines=new Array(NUM_LINES).fill(0).map((v,y)=>new Line({readPixel:O,parentWidth:h,parentHeight:u,color:colors[y],trigger:w=>{const{value:S,y:A,x:E,_timeToNext:P}=w;y!==2&&(this.midi.cc(y,127*(1-A)),this.midi.cc(NUM_LINES+y,127*E))},mode:"",interval:2e3},y)),this.lines.forEach(v=>{v.on("update line",y=>{b.clearLines(),this.lines.forEach(w=>{b.drawLine(w)})}),v.on("trigger",()=>{b.addPoint(v)})}),this.lines.forEach((v,y)=>{window[`p${y}`]=v}),this.currIndex=0,this.currLine=this.baseCanvas,b.el.style.touchAction="none",b.el.addEventListener("pointerdown",v=>{this.tone.start(),v.target.setPointerCapture(v.pointerId),this.multiRecord?this.currLine.isRecording?this.currLine.startStroke():(this.currLine.clear(),this.currLine.startRecording(performance.now())):(this.currLine.clear(),this.currLine.startRecording(performance.now())),this.currLine.addPoint({x:v.pageX,y:v.pageY,pressure:v.pressure,t:performance.now()})}),b.el.tabIndex=0,window.addEventListener("keyup",v=>{pressedKeys[v.key]=!1,v.key==="q"?this.currLine.isRecording&&this.currLine.stopRecording(performance.now()):v.key}),window.addEventListener("keydown",v=>{pressedKeys[v.key]=!0}),b.el.addEventListener("keydown",v=>{if(isFinite(v.key))this.emit("draw:select",v.key);else if(v.key=="Backspace")v.ctrlKey&&this.lines.forEach(y=>{y.clear()}),this.currLine.clear();else if(v.key==="a"||v.key==="e"){let y=this.currLine.index+2;y>this.lines.length&&(y=1),this.emit("draw:select",y)}else v.key==="r"&&this.currLine.clearFirst()}),b.el.addEventListener("pointermove",v=>{v.buttons===1&&this.currLine.addPoint({x:v.pageX,y:v.pageY,pressure:v.pressure,t:performance.now()})}),b.el.addEventListener("pointerup",v=>{this.currLine.addPoint({x:v.pageX,y:v.pageY,p:v.pressure,t:performance.now()}),this.multiRecord?pressedKeys.q===!0?this.currLine.endStroke():this.currLine.stopRecording(performance.now()):this.currLine.stopRecording(performance.now())}),rafLoop(v=>{b.clear(),this.lines.forEach(y=>{y.update(performance.now()),y.marker!==null&&b.drawMarker(y)}),b.update(v)}).start(),this.emit("draw:select",1),startup()}selectLine(e){const n=parseFloat(e);this.currIndex=n,e==0||(this.currLine=this.lines[n-1])}set({interval:e}){e&&this.lines.forEach(n=>n.set({interval:e}))}}class PixiRenderer extends component{constructor(e,n,c){super(e),this.local=n.components[e]={},this.emit=c,this.state=n,this.width=n.style.width,this.height=n.style.height}load(e){const n=new DrawSynth(this.state,this.emit,{container:e,width:this.width,height:this.height,input:this.state.hydra});this.state.drawSynth=n,this.emit("render")}update(){return!1}createElement({width:e=window.innerWidth,height:n=window.innerHeight}={}){return html$1`<div class="" id="canvas-experiments"></div>`}}var flokEditor=(s,e)=>s.flok.enabled===!0?html$1`<iframe src="${s.flok.url}" frameborder="0" class="w-100 h-100" style="margin-top:-40px;pointer-events:none;display:none"></iframe>`:"",fields="id,name,previews,license,username,description,created,analysis,ac_analysis",descriptors="lowlevel.spectral_centroid.mean,lowlevel.pitch.mean,rhythm.bpm";freesound.setToken("d31c795be3f70f7f04b21aeca4c5b48a599db6e9");const query=function({query:s="bell",minDuration:e,maxDuration:n,pageSize:c=5},h){console.log("querying",s);let u="";e!==null&&(u+=`duration:[${e}%20TO%20${n}]`),freesound.textSearch(s,{page:1,filter:u,fields,descriptors,page_size:c,group_by_pack:0},h,function(d){console.log("Error while searching...",d)})},loadSimilar=({sound:s,minDuration:e,maxDuration:n,pageSize:c=5},h,u)=>{let d="";e!==null&&(d+=`duration:[${e}%20TO%20${n}]`),console.log("filter is",d),s.getSimilar(h,u,{fields,filter:d,descriptors,page_size:c})},audio_preview_key="preview-hq-mp3",initFreesound=s=>{console.log("INITIALIZING"),Object.keys(util).forEach(y=>{window[y]=util[y],window[`_${y}`]=util[y]});const{ftm:e,wrand:n,euclid:c,seq:h}=util,u=new PingPongDelay("4n",.2),d=new Reverb;d.wet.value=0,u.wet.value=0,u.chain(d,Destination),window.delay=u,window.reverb=d,window.cycle=1e3;const m=y=>typeof y=="function"?y:Array.isArray(y)?h(y):()=>y;class g{constructor({numSamples:w=10}={}){this.samples=[],this.sounds=[],this._index=()=>0,this._interval=()=>800,this._currInterval=this._interval(),this._speed=()=>1,this._gain=()=>1,this._mutate=()=>0;const S=this;this.activeTimeout=null,this._loop=()=>{this._currInterval=this._interval(),this.activeTimeout=setTimeout(()=>{S._play()},S._currInterval)},this.audioParams={},this._loop(),this.gain=new Gain(.7).connect(u),this.active=!0}_play(){this._trigger(),this._loop()}_trigger(){}query(w="bell",S=[.05,.5],A=5){query({query:w,minDuration:S[0],maxDuration:S[1],pageSize:A},E=>{console.log("got sounds",E),s.innerHTML+=`loaded ${w} sounds`;const P=E.getSound(0);window.test=P,this.soundCollection=E,this._initInstrument(E)})}loadSimilar(w,S=[.05,.5],A=2){loadSimilar({sound:this.sounds[w],minDuration:S[0],maxDuration:S[1],pageSize:A},E=>{if(console.log("got",E,E.results.length),E.results.length>0){const P=Math.floor(Math.random()*E.results.length),I=E.results[P];this.sounds[w]=E.getSound(1),this.samples[w].stop(),this.samples[w]=new Player(I.previews[audio_preview_key]).connect(this.gain),s.innerHTML+=`[${w}] ${I.name} - ${I.description}`,s.innerHTML+="<br><br>",s.scrollTop=s.scrollHeight}},E=>{console.log("error getting sounds",E)})}_initInstrument(w){w.results.forEach((S,A)=>{this.sounds[A]=w.getSound(A),this.samples[A]=new Player(S.previews[audio_preview_key]).connect(this.gain),s.innerHTML+=`[${A}] ${S.name} - ${S.description}`,s.innerHTML+="<br><br>",s.scrollTop=s.scrollHeight})}stop(){this.samples.forEach(w=>{w.stop()}),this.active=!1,this.clearTimout(this.activeTimeout)}start(){this._loop(),this.active=!0}set(w={}){let S=!1;Object.entries(w).forEach(([A,E])=>{A==="query"?S=!0:A==="interval"||A==="index"||A==="notes"||A==="duration"||A==="gain"||A==="mutate"?this[`_${A}`]=m(E):this.audioParams[A]=m(E)}),S&&this.query(w.query)}}class b extends g{constructor(w){super(w)}_initInstrument(w){w.results.forEach((S,A)=>{this.sounds[A]=w.getSound(A),this.samples[A]=new Player(S.previews[audio_preview_key]).connect(this.gain)})}_trigger(){const w=this._index(),S=this.samples[w];if(this.active&&S&&S.loaded){if(Math.random()<this._mutate()/100){const E=Math.floor(Math.random()*this.samples.length);this.loadSimilar(E)}Object.entries(this.audioParams).forEach(([E,P])=>{S[E]=P()});const A=this._gain();isNaN(A)||this.gain.gain.rampTo(A,.01),S.start(),s.innerHTML+=`playing [${w}] ${this.sounds[w].name}. ${S.buffer.duration.toFixed(2)} .}  `,s.scrollTop=s.scrollHeight}}}class O extends g{constructor(w){super(w),this._notes=()=>["C1","E1","G1","B1"]}_initInstrument(w){const S={};w.results.forEach(E=>{const P=Math.floor(e(E.analysis.lowlevel.pitch.mean));S[P]=E.previews[audio_preview_key]});const A=new Sampler({urls:S,baseUrl:"",onload:()=>{A.triggerAttackRelease(this._notes(),this._currInterval)}}).connect(this.gain);this.sampler=A,console.log("init ")}_trigger(){this.sampler&&this.sampler.loaded&&(Object.entries(this.audioParams).forEach(([w,S])=>{console.log(w,S),this.sampler[w]=S()}),this.sampler.triggerAttackRelease(this._notes(),this._currInterval))}}["f0","f1","f2","f3"].forEach(y=>{window[y]=new b}),["g0","g1","g2","g3"].forEach(y=>{window[y]=new O})};class FreesoundComponent extends component{constructor(e,n,c){super(e),this.local=n.components[e]={},this.emit=c,this.state=n,this.width=n.style.width,this.height=n.style.height}load(e){initFreesound(e)}update(){return!1}createElement(){return html$1`<div class="f5 gray w-100 h-100 overflow-y-auto"></div>`}}function mainView(s,e){return html$1`
      <div class="w-100 h-100 fixed absolute courier flex flex-column flex-row-ns justify-between" style="background-color:${s.style.color0};color:${s.style.color1}">
        <div class="relative" style="flex-shrink:0;width:${s.style.width}px;height:${s.style.height}px">
        <div class="absolute w-100 h-100">${s.cache(FreesoundComponent,"freesound").render(s,e)}</div>
        <div class="absolute" id="hydra-container">${s.cache(HydraCanvas,"hydra").render({width:s.style.width,height:s.style.height})}</div>
        <div class=" absolute" id="fabric-container">${s.cache(PixiRenderer,"canvas-experiments").render({width:s.style.width,height:s.style.height})}</div>
  
        </div>
        <div  class="flex-auto flex flex-column justify-between" style="${s.panels.editor?"opacity:1;pointer-events:all;":"opacity:0;pointer-events:none"};box-shadow: 2px 2px 6px 6px rgba(40, 40, 40, 0.3);background-color:${s.style.color0}; width: ${s.flok.enabled?300:450}px;transition:opacity 0.5s;"> 
      <!--- <div class="flex-auto flex flex-column"> --->
          ${flokEditor(s)}
          ${s.flok.enabled===!0?"":s.cache(Editor,"main-editor").render(s)}
          ${drawTools(s,e)}

        </div>
      </div>
    `}var insertCss$1={exports:{}},containers=[],styleElements=[],usage="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function insertCss(s,e){if(e=e||{},s===void 0)throw new Error(usage);var n=e.prepend===!0?"prepend":"append",c=e.container!==void 0?e.container:document.querySelector("head"),h=containers.indexOf(c);h===-1&&(h=containers.push(c)-1,styleElements[h]={});var u;return styleElements[h]!==void 0&&styleElements[h][n]!==void 0?u=styleElements[h][n]:(u=styleElements[h][n]=createStyleElement(),n==="prepend"?c.insertBefore(u,c.childNodes[0]):c.appendChild(u)),s.charCodeAt(0)===65279&&(s=s.substr(1,s.length)),u.styleSheet?u.styleSheet.cssText+=s:u.textContent+=s,u}function createStyleElement(){var s=document.createElement("style");return s.setAttribute("type","text/css"),s}insertCss$1.exports=insertCss;insertCss$1.exports.insertCss=insertCss;var css=insertCss$1.exports,keymaps=(s,e)=>{window.onkeydown=n=>{n.ctrlKey===!0&&(n.code=="Digit1"?e.emit("loadCode",0):n.code=="Digit2"?e.emit("loadCode",1):n.code=="Digit3"?e.emit("loadCode",2):n.code=="Digit4"?e.emit("loadCode",3):n.code=="Digit5"&&e.emit("loadCode",4))}};window.global||(window.global=window);css(`.styled-background {
  background-color: #f00 !important;
  background: rgba(0, 255, 255, 0.5) !important;
  mix-blend-mode: difference;
}

.CodeMirror-scroll {
  max-height: 300px;
}

.CodeMirror-line span {
  pointer-events: all;
 /* background: #fff;
  padding: 2px;*/
}
  `);const app=choo({hash:!0});app.use(chooDevtools());app.use(store);app.use(keymaps);app.route("/",mainView);app.route("/spirals",mainView);app.route("*",mainView);app.mount("#choo");
